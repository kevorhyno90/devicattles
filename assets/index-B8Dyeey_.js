const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-eRIBWOn9.js","assets/moduleIntegration-Ds8vBRXc.js","assets/Animals-Bok2WmX5.js","assets/Pastures-Bu0AWBSF.js","assets/HealthSystem-ComJ_pia.js","assets/exportImport-BcQPf7S7.js","assets/currency-EbIO-V_7.js","assets/enhancedSettings-Cd0HS9If.js","assets/CanineManagement-Dx9aWvah.js","assets/Tasks-BEJ6iBTt.js","assets/Finance-dYonL5fB.js","assets/CropsWithSubsections-DhSM4HNi.js","assets/Reports-DUaloa2X.js","assets/index-CMzQl4t4.js","assets/pdfExport-Cg8yd2HW.js","assets/Inventory-CaIMJgQw.js","assets/AdvancedAnalytics-CpQ17B-p.js","assets/EnhancedSettings-DREOSek9.js","assets/BulkOperations-5j_KLP1a.js","assets/AdditionalReports-C0OwqnzE.js","assets/PetManagement-By4p3HzC.js","assets/CalendarView-CZTOs1O0.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var $b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var qf={exports:{}},Tl={},Wf={exports:{}},Ce={};var h_;function J0(){if(h_)return Ce;h_=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function A(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,W={};function $(C,K,fe){this.props=C,this.context=K,this.refs=W,this.updater=fe||j}$.prototype.isReactComponent={},$.prototype.setState=function(C,K){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,K,"setState")},$.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function te(){}te.prototype=$.prototype;function se(C,K,fe){this.props=C,this.context=K,this.refs=W,this.updater=fe||j}var ae=se.prototype=new te;ae.constructor=se,H(ae,$.prototype),ae.isPureReactComponent=!0;var Ie=Array.isArray,Te=Object.prototype.hasOwnProperty,X={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(C,K,fe){var xe,Pe={},Be=null,De=null;if(K!=null)for(xe in K.ref!==void 0&&(De=K.ref),K.key!==void 0&&(Be=""+K.key),K)Te.call(K,xe)&&!P.hasOwnProperty(xe)&&(Pe[xe]=K[xe]);var Ue=arguments.length-2;if(Ue===1)Pe.children=fe;else if(1<Ue){for(var Oe=Array(Ue),Ct=0;Ct<Ue;Ct++)Oe[Ct]=arguments[Ct+2];Pe.children=Oe}if(C&&C.defaultProps)for(xe in Ue=C.defaultProps,Ue)Pe[xe]===void 0&&(Pe[xe]=Ue[xe]);return{$$typeof:i,type:C,key:Be,ref:De,props:Pe,_owner:X.current}}function k(C,K){return{$$typeof:i,type:C.type,key:K,ref:C.ref,props:C.props,_owner:C._owner}}function V(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function b(C){var K={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(fe){return K[fe]})}var O=/\/+/g;function R(C,K){return typeof C=="object"&&C!==null&&C.key!=null?b(""+C.key):K.toString(36)}function Ge(C,K,fe,xe,Pe){var Be=typeof C;(Be==="undefined"||Be==="boolean")&&(C=null);var De=!1;if(C===null)De=!0;else switch(Be){case"string":case"number":De=!0;break;case"object":switch(C.$$typeof){case i:case e:De=!0}}if(De)return De=C,Pe=Pe(De),C=xe===""?"."+R(De,0):xe,Ie(Pe)?(fe="",C!=null&&(fe=C.replace(O,"$&/")+"/"),Ge(Pe,K,fe,"",function(Ct){return Ct})):Pe!=null&&(V(Pe)&&(Pe=k(Pe,fe+(!Pe.key||De&&De.key===Pe.key?"":(""+Pe.key).replace(O,"$&/")+"/")+C)),K.push(Pe)),1;if(De=0,xe=xe===""?".":xe+":",Ie(C))for(var Ue=0;Ue<C.length;Ue++){Be=C[Ue];var Oe=xe+R(Be,Ue);De+=Ge(Be,K,fe,Oe,Pe)}else if(Oe=A(C),typeof Oe=="function")for(C=Oe.call(C),Ue=0;!(Be=C.next()).done;)Be=Be.value,Oe=xe+R(Be,Ue++),De+=Ge(Be,K,fe,Oe,Pe);else if(Be==="object")throw K=String(C),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return De}function St(C,K,fe){if(C==null)return C;var xe=[],Pe=0;return Ge(C,xe,"","",function(Be){return K.call(fe,Be,Pe++)}),xe}function Lt(C){if(C._status===-1){var K=C._result;K=K(),K.then(function(fe){(C._status===0||C._status===-1)&&(C._status=1,C._result=fe)},function(fe){(C._status===0||C._status===-1)&&(C._status=2,C._result=fe)}),C._status===-1&&(C._status=0,C._result=K)}if(C._status===1)return C._result.default;throw C._result}var Ze={current:null},ne={transition:null},me={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:ne,ReactCurrentOwner:X};return Ce.Children={map:St,forEach:function(C,K,fe){St(C,function(){K.apply(this,arguments)},fe)},count:function(C){var K=0;return St(C,function(){K++}),K},toArray:function(C){return St(C,function(K){return K})||[]},only:function(C){if(!V(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ce.Component=$,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=se,Ce.StrictMode=n,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.cloneElement=function(C,K,fe){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var xe=H({},C.props),Pe=C.key,Be=C.ref,De=C._owner;if(K!=null){if(K.ref!==void 0&&(Be=K.ref,De=X.current),K.key!==void 0&&(Pe=""+K.key),C.type&&C.type.defaultProps)var Ue=C.type.defaultProps;for(Oe in K)Te.call(K,Oe)&&!P.hasOwnProperty(Oe)&&(xe[Oe]=K[Oe]===void 0&&Ue!==void 0?Ue[Oe]:K[Oe])}var Oe=arguments.length-2;if(Oe===1)xe.children=fe;else if(1<Oe){Ue=Array(Oe);for(var Ct=0;Ct<Oe;Ct++)Ue[Ct]=arguments[Ct+2];xe.children=Ue}return{$$typeof:i,type:C.type,key:Pe,ref:Be,props:xe,_owner:De}},Ce.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:a,_context:C},C.Consumer=C},Ce.createElement=T,Ce.createFactory=function(C){var K=T.bind(null,C);return K.type=C,K},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(C){return{$$typeof:d,render:C}},Ce.isValidElement=V,Ce.lazy=function(C){return{$$typeof:E,_payload:{_status:-1,_result:C},_init:Lt}},Ce.memo=function(C,K){return{$$typeof:y,type:C,compare:K===void 0?null:K}},Ce.startTransition=function(C){var K=ne.transition;ne.transition={};try{C()}finally{ne.transition=K}},Ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ce.useCallback=function(C,K){return Ze.current.useCallback(C,K)},Ce.useContext=function(C){return Ze.current.useContext(C)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(C){return Ze.current.useDeferredValue(C)},Ce.useEffect=function(C,K){return Ze.current.useEffect(C,K)},Ce.useId=function(){return Ze.current.useId()},Ce.useImperativeHandle=function(C,K,fe){return Ze.current.useImperativeHandle(C,K,fe)},Ce.useInsertionEffect=function(C,K){return Ze.current.useInsertionEffect(C,K)},Ce.useLayoutEffect=function(C,K){return Ze.current.useLayoutEffect(C,K)},Ce.useMemo=function(C,K){return Ze.current.useMemo(C,K)},Ce.useReducer=function(C,K,fe){return Ze.current.useReducer(C,K,fe)},Ce.useRef=function(C){return Ze.current.useRef(C)},Ce.useState=function(C){return Ze.current.useState(C)},Ce.useSyncExternalStore=function(C,K,fe){return Ze.current.useSyncExternalStore(C,K,fe)},Ce.useTransition=function(){return Ze.current.useTransition()},Ce.version="18.2.0",Ce}var d_;function Xp(){return d_||(d_=1,Wf.exports=J0()),Wf.exports}var f_;function X0(){if(f_)return Tl;f_=1;var i=Xp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,y){var E,w={},A=null,j=null;y!==void 0&&(A=""+y),p.key!==void 0&&(A=""+p.key),p.ref!==void 0&&(j=p.ref);for(E in p)n.call(p,E)&&!a.hasOwnProperty(E)&&(w[E]=p[E]);if(d&&d.defaultProps)for(E in p=d.defaultProps,p)w[E]===void 0&&(w[E]=p[E]);return{$$typeof:e,type:d,key:A,ref:j,props:w,_owner:o.current}}return Tl.Fragment=t,Tl.jsx=u,Tl.jsxs=u,Tl}var p_;function Z0(){return p_||(p_=1,qf.exports=X0()),qf.exports}var N=Z0(),ve=Xp();const eS=Y0(ve);var zc={},Kf={exports:{}},rn={},Hf={exports:{}},Gf={};var m_;function tS(){return m_||(m_=1,(function(i){function e(ne,me){var C=ne.length;ne.push(me);e:for(;0<C;){var K=C-1>>>1,fe=ne[K];if(0<o(fe,me))ne[K]=me,ne[C]=fe,C=K;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var me=ne[0],C=ne.pop();if(C!==me){ne[0]=C;e:for(var K=0,fe=ne.length,xe=fe>>>1;K<xe;){var Pe=2*(K+1)-1,Be=ne[Pe],De=Pe+1,Ue=ne[De];if(0>o(Be,C))De<fe&&0>o(Ue,Be)?(ne[K]=Ue,ne[De]=C,K=De):(ne[K]=Be,ne[Pe]=C,K=Pe);else if(De<fe&&0>o(Ue,C))ne[K]=Ue,ne[De]=C,K=De;else break e}}return me}function o(ne,me){var C=ne.sortIndex-me.sortIndex;return C!==0?C:ne.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();i.unstable_now=function(){return u.now()-d}}var p=[],y=[],E=1,w=null,A=3,j=!1,H=!1,W=!1,$=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(ne){for(var me=t(y);me!==null;){if(me.callback===null)n(y);else if(me.startTime<=ne)n(y),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(y)}}function Ie(ne){if(W=!1,ae(ne),!H)if(t(p)!==null)H=!0,Lt(Te);else{var me=t(y);me!==null&&Ze(Ie,me.startTime-ne)}}function Te(ne,me){H=!1,W&&(W=!1,te(T),T=-1),j=!0;var C=A;try{for(ae(me),w=t(p);w!==null&&(!(w.expirationTime>me)||ne&&!b());){var K=w.callback;if(typeof K=="function"){w.callback=null,A=w.priorityLevel;var fe=K(w.expirationTime<=me);me=i.unstable_now(),typeof fe=="function"?w.callback=fe:w===t(p)&&n(p),ae(me)}else n(p);w=t(p)}if(w!==null)var xe=!0;else{var Pe=t(y);Pe!==null&&Ze(Ie,Pe.startTime-me),xe=!1}return xe}finally{w=null,A=C,j=!1}}var X=!1,P=null,T=-1,k=5,V=-1;function b(){return!(i.unstable_now()-V<k)}function O(){if(P!==null){var ne=i.unstable_now();V=ne;var me=!0;try{me=P(!0,ne)}finally{me?R():(X=!1,P=null)}}else X=!1}var R;if(typeof se=="function")R=function(){se(O)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,St=Ge.port2;Ge.port1.onmessage=O,R=function(){St.postMessage(null)}}else R=function(){$(O,0)};function Lt(ne){P=ne,X||(X=!0,R())}function Ze(ne,me){T=$(function(){ne(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_continueExecution=function(){H||j||(H=!0,Lt(Te))},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(ne){switch(A){case 1:case 2:case 3:var me=3;break;default:me=A}var C=A;A=me;try{return ne()}finally{A=C}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var C=A;A=ne;try{return me()}finally{A=C}},i.unstable_scheduleCallback=function(ne,me,C){var K=i.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?K+C:K):C=K,ne){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=C+fe,ne={id:E++,callback:me,priorityLevel:ne,startTime:C,expirationTime:fe,sortIndex:-1},C>K?(ne.sortIndex=C,e(y,ne),t(p)===null&&ne===t(y)&&(W?(te(T),T=-1):W=!0,Ze(Ie,C-K))):(ne.sortIndex=fe,e(p,ne),H||j||(H=!0,Lt(Te))),ne},i.unstable_shouldYield=b,i.unstable_wrapCallback=function(ne){var me=A;return function(){var C=A;A=me;try{return ne.apply(this,arguments)}finally{A=C}}}})(Gf)),Gf}var g_;function nS(){return g_||(g_=1,Hf.exports=tS()),Hf.exports}var y_;function rS(){if(y_)return rn;y_=1;var i=Xp(),e=nS();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)n.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},w={};function A(r){return p.call(w,r)?!0:p.call(E,r)?!1:y.test(r)?w[r]=!0:(E[r]=!0,!1)}function j(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function H(r,s,l,h){if(s===null||typeof s>"u"||j(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(r,s,l,h,f,m,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=m,this.removeEmptyString=v}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){$[r]=new W(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];$[s]=new W(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){$[r]=new W(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){$[r]=new W(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){$[r]=new W(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){$[r]=new W(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){$[r]=new W(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){$[r]=new W(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){$[r]=new W(r,5,!1,r.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function se(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(te,se);$[s]=new W(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(te,se);$[s]=new W(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(te,se);$[s]=new W(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){$[r]=new W(r,1,!1,r.toLowerCase(),null,!1,!1)}),$.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){$[r]=new W(r,1,!1,r.toLowerCase(),null,!0,!0)});function ae(r,s,l,h){var f=$.hasOwnProperty(s)?$[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(H(s,l,f,h)&&(l=null),h||f===null?A(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var Ie=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),X=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),b=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),St=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Ze=Symbol.for("react.offscreen"),ne=Symbol.iterator;function me(r){return r===null||typeof r!="object"?null:(r=ne&&r[ne]||r["@@iterator"],typeof r=="function"?r:null)}var C=Object.assign,K;function fe(r){if(K===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);K=s&&s[1]||""}return`
`+K+r}var xe=!1;function Pe(r,s){if(!r||xe)return"";xe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var h=B}Reflect.construct(r,[],s)}else{try{s.call()}catch(B){h=B}r.call(s.prototype)}else{try{throw Error()}catch(B){h=B}r()}}catch(B){if(B&&h&&typeof B.stack=="string"){for(var f=B.stack.split(`
`),m=h.stack.split(`
`),v=f.length-1,S=m.length-1;1<=v&&0<=S&&f[v]!==m[S];)S--;for(;1<=v&&0<=S;v--,S--)if(f[v]!==m[S]){if(v!==1||S!==1)do if(v--,S--,0>S||f[v]!==m[S]){var x=`
`+f[v].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=v&&0<=S);break}}}finally{xe=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?fe(r):""}function Be(r){switch(r.tag){case 5:return fe(r.type);case 16:return fe("Lazy");case 13:return fe("Suspense");case 19:return fe("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function De(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case X:return"Portal";case k:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case Ge:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case b:return(r.displayName||"Context")+".Consumer";case V:return(r._context.displayName||"Context")+".Provider";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case St:return s=r.displayName||null,s!==null?s:De(r.type)||"Memo";case Lt:s=r._payload,r=r._init;try{return De(r(s))}catch{}}return null}function Ue(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Oe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ct(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vd(r){var s=Ct(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,m.call(this,v)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function eo(r){r._valueTracker||(r._valueTracker=vd(r))}function xa(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=Ct(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Jr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function to(r,s){var l=s.checked;return C({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Pu(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Oe(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function no(r,s){s=s.checked,s!=null&&ae(r,"checked",s,!1)}function Yi(r,s){no(r,s);var l=Oe(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ft(r,s.type,l):s.hasOwnProperty("defaultValue")&&ft(r,s.type,Oe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ca(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function ft(r,s,l){(s!=="number"||Jr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var ct=Array.isArray;function Dn(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Oe(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function ba(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return C({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Da(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(ct(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Oe(l)}}function ku(r,s){var l=Oe(s.value),h=Oe(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function Xr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Na(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ro(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Na(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Zr,xu=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Ji(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cu=["Webkit","ms","Moz","O"];Object.keys(ei).forEach(function(r){Cu.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ei[s]=ei[r]})});function ti(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ei.hasOwnProperty(r)&&ei[r]?(""+s).trim():s+"px"}function io(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=ti(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var Va=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nn(r,s){if(s){if(Va[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function so(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ni=null;function oo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Er=null,Ir=null,at=null;function Oa(r){if(r=ll(r)){if(typeof Er!="function")throw Error(t(280));var s=r.stateNode;s&&(s=rc(s),Er(r.stateNode,r.type,s))}}function ri(r){Ir?at?at.push(r):at=[r]:Ir=r}function ii(){if(Ir){var r=Ir,s=at;if(at=Ir=null,Oa(r),s)for(r=0;r<s.length;r++)Oa(s[r])}}function bu(r,s){return r(s)}function Du(){}var Gn=!1;function Nu(r,s,l){if(Gn)return r(s,l);Gn=!0;try{return bu(r,s,l)}finally{Gn=!1,(Ir!==null||at!==null)&&(Du(),ii())}}function Xi(r,s){var l=r.stateNode;if(l===null)return null;var h=rc(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var si=!1;if(d)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){si=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{si=!1}function Vu(r,s,l,h,f,m,v,S,x){var B=Array.prototype.slice.call(arguments,3);try{s.apply(l,B)}catch(Q){this.onError(Q)}}var wr=!1,Qn=null,ao=!1,vn=null,Ou={onError:function(r){wr=!0,Qn=r}};function Lu(r,s,l,h,f,m,v,S,x){wr=!1,Qn=null,Vu.apply(Ou,arguments)}function La(r,s,l,h,f,m,v,S,x){if(Lu.apply(this,arguments),wr){if(wr){var B=Qn;wr=!1,Qn=null}else throw Error(t(198));ao||(ao=!0,vn=B)}}function Vn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Ma(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Mu(r){if(Vn(r)!==r)throw Error(t(188))}function Fu(r){var s=r.alternate;if(!s){if(s=Vn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return Mu(f),r;if(m===h)return Mu(f),s;m=m.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=m;else{for(var v=!1,S=f.child;S;){if(S===l){v=!0,l=f,h=m;break}if(S===h){v=!0,h=f,l=m;break}S=S.sibling}if(!v){for(S=m.child;S;){if(S===l){v=!0,l=m,h=f;break}if(S===h){v=!0,h=m,l=f;break}S=S.sibling}if(!v)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function Uu(r){return r=Fu(r),r!==null?Zi(r):null}function Zi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Zi(r);if(s!==null)return s;r=r.sibling}return null}var Fa=e.unstable_scheduleCallback,lo=e.unstable_cancelCallback,es=e.unstable_shouldYield,Tr=e.unstable_requestPaint,Ye=e.unstable_now,Ed=e.unstable_getCurrentPriorityLevel,uo=e.unstable_ImmediatePriority,Ua=e.unstable_UserBlockingPriority,ts=e.unstable_NormalPriority,ja=e.unstable_LowPriority,co=e.unstable_IdlePriority,ns=null,on=null;function ju(r){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(ns,r,void 0,(r.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:rs,Yn=Math.log,En=Math.LN2;function rs(r){return r>>>=0,r===0?32:31-(Yn(r)/En|0)|0}var Jn=64,ai=4194304;function je(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Sr(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,m=r.pingedLanes,v=l&268435455;if(v!==0){var S=v&~f;S!==0?h=je(S):(m&=v,m!==0&&(h=je(m)))}else v=l&~f,v!==0?h=je(v):m!==0&&(h=je(m));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-an(s),f=1<<l,h|=r[l],s&=~f;return h}function is(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes;0<m;){var v=31-an(m),S=1<<v,x=f[v];x===-1?((S&l)===0||(S&h)!==0)&&(f[v]=is(S,s)):x<=s&&(r.expiredLanes|=S),m&=~S}}function Ba(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function za(){var r=Jn;return Jn<<=1,(Jn&4194240)===0&&(Jn=64),r}function $a(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function os(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-an(s),r[s]=l}function Id(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-an(l),m=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~m}}function qa(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-an(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var Ne=0;function Xn(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Wa,ho,Ka,Ha,Ga,Zn=!1,fo=[],er=null,tr=null,bt=null,as=new Map,Ar=new Map,ln=[],Bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function li(r,s){switch(r){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":bt=null;break;case"pointerover":case"pointerout":as.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(s.pointerId)}}function On(r,s,l,h,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:m,targetContainers:[f]},s!==null&&(s=ll(s),s!==null&&ho(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function zu(r,s,l,h,f){switch(s){case"focusin":return er=On(er,r,s,l,h,f),!0;case"dragenter":return tr=On(tr,r,s,l,h,f),!0;case"mouseover":return bt=On(bt,r,s,l,h,f),!0;case"pointerover":var m=f.pointerId;return as.set(m,On(as.get(m)||null,r,s,l,h,f)),!0;case"gotpointercapture":return m=f.pointerId,Ar.set(m,On(Ar.get(m)||null,r,s,l,h,f)),!0}return!1}function po(r){var s=hs(r.target);if(s!==null){var l=Vn(s);if(l!==null){if(s=l.tag,s===13){if(s=Ma(l),s!==null){r.blockedOn=s,Ga(r.priority,function(){Ka(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function He(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=mo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);ni=h,l.target.dispatchEvent(h),ni=null}else return s=ll(l),s!==null&&ho(s),r.blockedOn=l,!1;s.shift()}return!0}function $u(r,s,l){He(r)&&l.delete(s)}function wd(){Zn=!1,er!==null&&He(er)&&(er=null),tr!==null&&He(tr)&&(tr=null),bt!==null&&He(bt)&&(bt=null),as.forEach($u),Ar.forEach($u)}function ui(r,s){r.blockedOn===s&&(r.blockedOn=null,Zn||(Zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wd)))}function ci(r){function s(f){return ui(f,r)}if(0<fo.length){ui(fo[0],r);for(var l=1;l<fo.length;l++){var h=fo[l];h.blockedOn===r&&(h.blockedOn=null)}}for(er!==null&&ui(er,r),tr!==null&&ui(tr,r),bt!==null&&ui(bt,r),as.forEach(s),Ar.forEach(s),l=0;l<ln.length;l++)h=ln[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<ln.length&&(l=ln[0],l.blockedOn===null);)po(l),l.blockedOn===null&&ln.shift()}var Rr=Ie.ReactCurrentBatchConfig,Pr=!0;function nr(r,s,l,h){var f=Ne,m=Rr.transition;Rr.transition=null;try{Ne=1,Qa(r,s,l,h)}finally{Ne=f,Rr.transition=m}}function qu(r,s,l,h){var f=Ne,m=Rr.transition;Rr.transition=null;try{Ne=4,Qa(r,s,l,h)}finally{Ne=f,Rr.transition=m}}function Qa(r,s,l,h){if(Pr){var f=mo(r,s,l,h);if(f===null)Nd(r,s,h,rr,l),li(r,h);else if(zu(f,r,s,l,h))h.stopPropagation();else if(li(r,h),s&4&&-1<Bu.indexOf(r)){for(;f!==null;){var m=ll(f);if(m!==null&&Wa(m),m=mo(r,s,l,h),m===null&&Nd(r,s,h,rr,l),m===f)break;f=m}f!==null&&h.stopPropagation()}else Nd(r,s,h,null,l)}}var rr=null;function mo(r,s,l,h){if(rr=null,r=oo(h),r=hs(r),r!==null)if(s=Vn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Ma(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return rr=r,null}function go(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ed()){case uo:return 1;case Ua:return 4;case ts:case ja:return 16;case co:return 536870912;default:return 16}default:return 16}}var un=null,yo=null,kr=null;function Wu(){if(kr)return kr;var r,s=yo,l=s.length,h,f="value"in un?un.value:un.textContent,m=f.length;for(r=0;r<l&&s[r]===f[r];r++);var v=l-r;for(h=1;h<=v&&s[l-h]===f[m-h];h++);return kr=f.slice(r,1<h?1-h:void 0)}function ls(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ir(){return!0}function Ya(){return!1}function Mt(r){function s(l,h,f,m,v){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(l=r[S],this[S]=l?l(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ir:Ya,this.isPropagationStopped=Ya,this}return C(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),s}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Mt(sr),hi=C({},sr,{view:0,detail:0}),_o=Mt(hi),vo,Eo,cn,cs=C({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==cn&&(cn&&r.type==="mousemove"?(vo=r.screenX-cn.screenX,Eo=r.screenY-cn.screenY):Eo=vo=0,cn=r),vo)},movementY:function(r){return"movementY"in r?r.movementY:Eo}}),Ja=Mt(cs),Ku=C({},cs,{dataTransfer:0}),Hu=Mt(Ku),Io=C({},hi,{relatedTarget:0}),Dt=Mt(Io),Gu=C({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=Mt(Gu),di=C({},sr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),c=Mt(di),g=C({},sr,{data:0}),_=Mt(g),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ee(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=z[r])?!!s[r]:!1}function Re(){return ee}var ht=C({},hi,{key:function(r){if(r.key){var s=I[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ls(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?F[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(r){return r.type==="keypress"?ls(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ls(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$e=Mt(ht),pt=C({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hn=Mt(pt),xr=C({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),or=Mt(xr),ar=C({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wo=Mt(ar),Xa=C({},cs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),qT=Mt(Xa),WT=[9,13,27,32],Td=d&&"CompositionEvent"in window,Za=null;d&&"documentMode"in document&&(Za=document.documentMode);var KT=d&&"TextEvent"in window&&!Za,ng=d&&(!Td||Za&&8<Za&&11>=Za),rg=" ",ig=!1;function sg(r,s){switch(r){case"keyup":return WT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function og(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var To=!1;function HT(r,s){switch(r){case"compositionend":return og(s);case"keypress":return s.which!==32?null:(ig=!0,rg);case"textInput":return r=s.data,r===rg&&ig?null:r;default:return null}}function GT(r,s){if(To)return r==="compositionend"||!Td&&sg(r,s)?(r=Wu(),kr=yo=un=null,To=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ng&&s.locale!=="ko"?null:s.data;default:return null}}var QT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ag(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!QT[r.type]:s==="textarea"}function lg(r,s,l,h){ri(h),s=ec(s,"onChange"),0<s.length&&(l=new us("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var el=null,tl=null;function YT(r){Rg(r,0)}function Yu(r){var s=ko(r);if(xa(s))return r}function JT(r,s){if(r==="change")return s}var ug=!1;if(d){var Sd;if(d){var Ad="oninput"in document;if(!Ad){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),Ad=typeof cg.oninput=="function"}Sd=Ad}else Sd=!1;ug=Sd&&(!document.documentMode||9<document.documentMode)}function hg(){el&&(el.detachEvent("onpropertychange",dg),tl=el=null)}function dg(r){if(r.propertyName==="value"&&Yu(tl)){var s=[];lg(s,tl,r,oo(r)),Nu(YT,s)}}function XT(r,s,l){r==="focusin"?(hg(),el=s,tl=l,el.attachEvent("onpropertychange",dg)):r==="focusout"&&hg()}function ZT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Yu(tl)}function e0(r,s){if(r==="click")return Yu(s)}function t0(r,s){if(r==="input"||r==="change")return Yu(s)}function n0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Ln=typeof Object.is=="function"?Object.is:n0;function nl(r,s){if(Ln(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Ln(r[f],s[f]))return!1}return!0}function fg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pg(r,s){var l=fg(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=fg(l)}}function mg(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?mg(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function gg(){for(var r=window,s=Jr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Jr(r.document)}return s}function Rd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function r0(r){var s=gg(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&mg(l.ownerDocument.documentElement,l)){if(h!==null&&Rd(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,m=Math.min(h.start,f);h=h.end===void 0?m:Math.min(h.end,f),!r.extend&&m>h&&(f=h,h=m,m=f),f=pg(l,m);var v=pg(l,h);f&&v&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==v.node||r.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),m>h?(r.addRange(s),r.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var i0=d&&"documentMode"in document&&11>=document.documentMode,So=null,Pd=null,rl=null,kd=!1;function yg(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kd||So==null||So!==Jr(h)||(h=So,"selectionStart"in h&&Rd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),rl&&nl(rl,h)||(rl=h,h=ec(Pd,"onSelect"),0<h.length&&(s=new us("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=So)))}function Ju(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Ao={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},xd={},_g={};d&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Xu(r){if(xd[r])return xd[r];if(!Ao[r])return r;var s=Ao[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in _g)return xd[r]=s[l];return r}var vg=Xu("animationend"),Eg=Xu("animationiteration"),Ig=Xu("animationstart"),wg=Xu("transitionend"),Tg=new Map,Sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(r,s){Tg.set(r,s),a(s,[r])}for(var Cd=0;Cd<Sg.length;Cd++){var bd=Sg[Cd],s0=bd.toLowerCase(),o0=bd[0].toUpperCase()+bd.slice(1);fi(s0,"on"+o0)}fi(vg,"onAnimationEnd"),fi(Eg,"onAnimationIteration"),fi(Ig,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(wg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a0=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function Ag(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,La(h,s,void 0,r),r.currentTarget=null}function Rg(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var m=void 0;if(s)for(var v=h.length-1;0<=v;v--){var S=h[v],x=S.instance,B=S.currentTarget;if(S=S.listener,x!==m&&f.isPropagationStopped())break e;Ag(f,S,B),m=x}else for(v=0;v<h.length;v++){if(S=h[v],x=S.instance,B=S.currentTarget,S=S.listener,x!==m&&f.isPropagationStopped())break e;Ag(f,S,B),m=x}}}if(ao)throw r=vn,ao=!1,vn=null,r}function Je(r,s){var l=s[Ud];l===void 0&&(l=s[Ud]=new Set);var h=r+"__bubble";l.has(h)||(Pg(s,r,2,!1),l.add(h))}function Dd(r,s,l){var h=0;s&&(h|=4),Pg(l,r,h,s)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function sl(r){if(!r[Zu]){r[Zu]=!0,n.forEach(function(l){l!=="selectionchange"&&(a0.has(l)||Dd(l,!1,r),Dd(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Zu]||(s[Zu]=!0,Dd("selectionchange",!1,s))}}function Pg(r,s,l,h){switch(go(s)){case 1:var f=nr;break;case 4:f=qu;break;default:f=Qa}l=f.bind(null,s,l,r),f=void 0,!si||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Nd(r,s,l,h,f){var m=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var S=h.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var x=v.tag;if((x===3||x===4)&&(x=v.stateNode.containerInfo,x===f||x.nodeType===8&&x.parentNode===f))return;v=v.return}for(;S!==null;){if(v=hs(S),v===null)return;if(x=v.tag,x===5||x===6){h=m=v;continue e}S=S.parentNode}}h=h.return}Nu(function(){var B=m,Q=oo(l),Y=[];e:{var G=Tg.get(r);if(G!==void 0){var oe=us,ue=r;switch(r){case"keypress":if(ls(l)===0)break e;case"keydown":case"keyup":oe=$e;break;case"focusin":ue="focus",oe=Dt;break;case"focusout":ue="blur",oe=Dt;break;case"beforeblur":case"afterblur":oe=Dt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=or;break;case vg:case Eg:case Ig:oe=Qu;break;case wg:oe=wo;break;case"scroll":oe=_o;break;case"wheel":oe=qT;break;case"copy":case"cut":case"paste":oe=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=hn}var he=(s&4)!==0,dt=!he&&r==="scroll",M=he?G!==null?G+"Capture":null:G;he=[];for(var D=B,U;D!==null;){U=D;var Z=U.stateNode;if(U.tag===5&&Z!==null&&(U=Z,M!==null&&(Z=Xi(D,M),Z!=null&&he.push(ol(D,Z,U)))),dt)break;D=D.return}0<he.length&&(G=new oe(G,ue,null,l,Q),Y.push({event:G,listeners:he}))}}if((s&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",G&&l!==ni&&(ue=l.relatedTarget||l.fromElement)&&(hs(ue)||ue[Cr]))break e;if((oe||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,oe?(ue=l.relatedTarget||l.toElement,oe=B,ue=ue?hs(ue):null,ue!==null&&(dt=Vn(ue),ue!==dt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=B),oe!==ue)){if(he=Ja,Z="onMouseLeave",M="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(he=hn,Z="onPointerLeave",M="onPointerEnter",D="pointer"),dt=oe==null?G:ko(oe),U=ue==null?G:ko(ue),G=new he(Z,D+"leave",oe,l,Q),G.target=dt,G.relatedTarget=U,Z=null,hs(Q)===B&&(he=new he(M,D+"enter",ue,l,Q),he.target=U,he.relatedTarget=dt,Z=he),dt=Z,oe&&ue)t:{for(he=oe,M=ue,D=0,U=he;U;U=Ro(U))D++;for(U=0,Z=M;Z;Z=Ro(Z))U++;for(;0<D-U;)he=Ro(he),D--;for(;0<U-D;)M=Ro(M),U--;for(;D--;){if(he===M||M!==null&&he===M.alternate)break t;he=Ro(he),M=Ro(M)}he=null}else he=null;oe!==null&&kg(Y,G,oe,he,!1),ue!==null&&dt!==null&&kg(Y,dt,ue,he,!0)}}e:{if(G=B?ko(B):window,oe=G.nodeName&&G.nodeName.toLowerCase(),oe==="select"||oe==="input"&&G.type==="file")var de=JT;else if(ag(G))if(ug)de=t0;else{de=ZT;var ye=XT}else(oe=G.nodeName)&&oe.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(de=e0);if(de&&(de=de(r,B))){lg(Y,de,l,Q);break e}ye&&ye(r,G,B),r==="focusout"&&(ye=G._wrapperState)&&ye.controlled&&G.type==="number"&&ft(G,"number",G.value)}switch(ye=B?ko(B):window,r){case"focusin":(ag(ye)||ye.contentEditable==="true")&&(So=ye,Pd=B,rl=null);break;case"focusout":rl=Pd=So=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,yg(Y,l,Q);break;case"selectionchange":if(i0)break;case"keydown":case"keyup":yg(Y,l,Q)}var _e;if(Td)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else To?sg(r,l)&&(we="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(ng&&l.locale!=="ko"&&(To||we!=="onCompositionStart"?we==="onCompositionEnd"&&To&&(_e=Wu()):(un=Q,yo="value"in un?un.value:un.textContent,To=!0)),ye=ec(B,we),0<ye.length&&(we=new _(we,r,null,l,Q),Y.push({event:we,listeners:ye}),_e?we.data=_e:(_e=og(l),_e!==null&&(we.data=_e)))),(_e=KT?HT(r,l):GT(r,l))&&(B=ec(B,"onBeforeInput"),0<B.length&&(Q=new _("onBeforeInput","beforeinput",null,l,Q),Y.push({event:Q,listeners:B}),Q.data=_e))}Rg(Y,s)})}function ol(r,s,l){return{instance:r,listener:s,currentTarget:l}}function ec(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=Xi(r,l),m!=null&&h.unshift(ol(r,m,f)),m=Xi(r,s),m!=null&&h.push(ol(r,m,f))),r=r.return}return h}function Ro(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function kg(r,s,l,h,f){for(var m=s._reactName,v=[];l!==null&&l!==h;){var S=l,x=S.alternate,B=S.stateNode;if(x!==null&&x===h)break;S.tag===5&&B!==null&&(S=B,f?(x=Xi(l,m),x!=null&&v.unshift(ol(l,x,S))):f||(x=Xi(l,m),x!=null&&v.push(ol(l,x,S)))),l=l.return}v.length!==0&&r.push({event:s,listeners:v})}var l0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function xg(r){return(typeof r=="string"?r:""+r).replace(l0,`
`).replace(u0,"")}function tc(r,s,l){if(s=xg(s),xg(r)!==s&&l)throw Error(t(425))}function nc(){}var Vd=null,Od=null;function Ld(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,c0=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(r){return Cg.resolve(null).then(r).catch(d0)}:Md;function d0(r){setTimeout(function(){throw r})}function Fd(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),ci(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);ci(s)}function pi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function bg(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Po=Math.random().toString(36).slice(2),lr="__reactFiber$"+Po,al="__reactProps$"+Po,Cr="__reactContainer$"+Po,Ud="__reactEvents$"+Po,f0="__reactListeners$"+Po,p0="__reactHandles$"+Po;function hs(r){var s=r[lr];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Cr]||l[lr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=bg(r);r!==null;){if(l=r[lr])return l;r=bg(r)}return s}r=l,l=r.parentNode}return null}function ll(r){return r=r[lr]||r[Cr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ko(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function rc(r){return r[al]||null}var jd=[],xo=-1;function mi(r){return{current:r}}function Xe(r){0>xo||(r.current=jd[xo],jd[xo]=null,xo--)}function Qe(r,s){xo++,jd[xo]=r.current,r.current=s}var gi={},Ft=mi(gi),Xt=mi(!1),ds=gi;function Co(r,s){var l=r.type.contextTypes;if(!l)return gi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in l)f[m]=s[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Zt(r){return r=r.childContextTypes,r!=null}function ic(){Xe(Xt),Xe(Ft)}function Dg(r,s,l){if(Ft.current!==gi)throw Error(t(168));Qe(Ft,s),Qe(Xt,l)}function Ng(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Ue(r)||"Unknown",f));return C({},l,h)}function sc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||gi,ds=Ft.current,Qe(Ft,r),Qe(Xt,Xt.current),!0}function Vg(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=Ng(r,s,ds),h.__reactInternalMemoizedMergedChildContext=r,Xe(Xt),Xe(Ft),Qe(Ft,r)):Xe(Xt),Qe(Xt,l)}var br=null,oc=!1,Bd=!1;function Og(r){br===null?br=[r]:br.push(r)}function m0(r){oc=!0,Og(r)}function yi(){if(!Bd&&br!==null){Bd=!0;var r=0,s=Ne;try{var l=br;for(Ne=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}br=null,oc=!1}catch(f){throw br!==null&&(br=br.slice(r+1)),Fa(uo,yi),f}finally{Ne=s,Bd=!1}}return null}var bo=[],Do=0,ac=null,lc=0,In=[],wn=0,fs=null,Dr=1,Nr="";function ps(r,s){bo[Do++]=lc,bo[Do++]=ac,ac=r,lc=s}function Lg(r,s,l){In[wn++]=Dr,In[wn++]=Nr,In[wn++]=fs,fs=r;var h=Dr;r=Nr;var f=32-an(h)-1;h&=~(1<<f),l+=1;var m=32-an(s)+f;if(30<m){var v=f-f%5;m=(h&(1<<v)-1).toString(32),h>>=v,f-=v,Dr=1<<32-an(s)+f|l<<f|h,Nr=m+r}else Dr=1<<m|l<<f|h,Nr=r}function zd(r){r.return!==null&&(ps(r,1),Lg(r,1,0))}function $d(r){for(;r===ac;)ac=bo[--Do],bo[Do]=null,lc=bo[--Do],bo[Do]=null;for(;r===fs;)fs=In[--wn],In[wn]=null,Nr=In[--wn],In[wn]=null,Dr=In[--wn],In[wn]=null}var dn=null,fn=null,et=!1,Mn=null;function Mg(r,s){var l=Rn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function Fg(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,dn=r,fn=pi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,dn=r,fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=fs!==null?{id:Dr,overflow:Nr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Rn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,dn=r,fn=null,!0):!1;default:return!1}}function qd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Wd(r){if(et){var s=fn;if(s){var l=s;if(!Fg(r,s)){if(qd(r))throw Error(t(418));s=pi(l.nextSibling);var h=dn;s&&Fg(r,s)?Mg(h,l):(r.flags=r.flags&-4097|2,et=!1,dn=r)}}else{if(qd(r))throw Error(t(418));r.flags=r.flags&-4097|2,et=!1,dn=r}}}function Ug(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;dn=r}function uc(r){if(r!==dn)return!1;if(!et)return Ug(r),et=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Ld(r.type,r.memoizedProps)),s&&(s=fn)){if(qd(r))throw jg(),Error(t(418));for(;s;)Mg(r,s),s=pi(s.nextSibling)}if(Ug(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){fn=pi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}fn=null}}else fn=dn?pi(r.stateNode.nextSibling):null;return!0}function jg(){for(var r=fn;r;)r=pi(r.nextSibling)}function No(){fn=dn=null,et=!1}function Kd(r){Mn===null?Mn=[r]:Mn.push(r)}var g0=Ie.ReactCurrentBatchConfig;function Fn(r,s){if(r&&r.defaultProps){s=C({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}var cc=mi(null),hc=null,Vo=null,Hd=null;function Gd(){Hd=Vo=hc=null}function Qd(r){var s=cc.current;Xe(cc),r._currentValue=s}function Yd(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Oo(r,s){hc=r,Hd=Vo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(en=!0),r.firstContext=null)}function Tn(r){var s=r._currentValue;if(Hd!==r)if(r={context:r,memoizedValue:s,next:null},Vo===null){if(hc===null)throw Error(t(308));Vo=r,hc.dependencies={lanes:0,firstContext:r}}else Vo=Vo.next=r;return s}var ms=null;function Jd(r){ms===null?ms=[r]:ms.push(r)}function Bg(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,Jd(s)):(l.next=f.next,f.next=l),s.interleaved=l,Vr(r,h)}function Vr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var _i=!1;function Xd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Or(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function vi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Me&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Vr(r,l)}return f=h.interleaved,f===null?(s.next=s,Jd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Vr(r,l)}function dc(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,qa(r,l)}}function $g(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?f=m=v:m=m.next=v,l=l.next}while(l!==null);m===null?f=m=s:m=m.next=s}else f=m=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function fc(r,s,l,h){var f=r.updateQueue;_i=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var x=S,B=x.next;x.next=null,v===null?m=B:v.next=B,v=x;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==v&&(S===null?Q.firstBaseUpdate=B:S.next=B,Q.lastBaseUpdate=x))}if(m!==null){var Y=f.baseState;v=0,Q=B=x=null,S=m;do{var G=S.lane,oe=S.eventTime;if((h&G)===G){Q!==null&&(Q=Q.next={eventTime:oe,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=r,he=S;switch(G=s,oe=l,he.tag){case 1:if(ue=he.payload,typeof ue=="function"){Y=ue.call(oe,Y,G);break e}Y=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=he.payload,G=typeof ue=="function"?ue.call(oe,Y,G):ue,G==null)break e;Y=C({},Y,G);break e;case 2:_i=!0}}S.callback!==null&&S.lane!==0&&(r.flags|=64,G=f.effects,G===null?f.effects=[S]:G.push(S))}else oe={eventTime:oe,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(B=Q=oe,x=Y):Q=Q.next=oe,v|=G;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;G=S,S=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);if(Q===null&&(x=Y),f.baseState=x,f.firstBaseUpdate=B,f.lastBaseUpdate=Q,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);_s|=v,r.lanes=v,r.memoizedState=Y}}function qg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Wg=new i.Component().refs;function Zd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:C({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var pc={isMounted:function(r){return(r=r._reactInternals)?Vn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Ht(),f=Ti(r),m=Or(h,f);m.payload=s,l!=null&&(m.callback=l),s=vi(r,m,f),s!==null&&(Bn(s,r,f,h),dc(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Ht(),f=Ti(r),m=Or(h,f);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=vi(r,m,f),s!==null&&(Bn(s,r,f,h),dc(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Ht(),h=Ti(r),f=Or(l,h);f.tag=2,s!=null&&(f.callback=s),s=vi(r,f,h),s!==null&&(Bn(s,r,h,l),dc(s,r,h))}};function Kg(r,s,l,h,f,m,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,v):s.prototype&&s.prototype.isPureReactComponent?!nl(l,h)||!nl(f,m):!0}function Hg(r,s,l){var h=!1,f=gi,m=s.contextType;return typeof m=="object"&&m!==null?m=Tn(m):(f=Zt(s)?ds:Ft.current,h=s.contextTypes,m=(h=h!=null)?Co(r,f):gi),s=new s(l,m),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=pc,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=m),s}function Gg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&pc.enqueueReplaceState(s,s.state,null)}function ef(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs=Wg,Xd(r);var m=s.contextType;typeof m=="object"&&m!==null?f.context=Tn(m):(m=Zt(s)?ds:Ft.current,f.context=Co(r,m)),f.state=r.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(Zd(r,s,m,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&pc.enqueueReplaceState(f,f.state,null),fc(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ul(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,m=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(v){var S=f.refs;S===Wg&&(S=f.refs={}),v===null?delete S[m]:S[m]=v},s._stringRef=m,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function mc(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Qg(r){var s=r._init;return s(r._payload)}function Yg(r){function s(M,D){if(r){var U=M.deletions;U===null?(M.deletions=[D],M.flags|=16):U.push(D)}}function l(M,D){if(!r)return null;for(;D!==null;)s(M,D),D=D.sibling;return null}function h(M,D){for(M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function f(M,D){return M=Ai(M,D),M.index=0,M.sibling=null,M}function m(M,D,U){return M.index=U,r?(U=M.alternate,U!==null?(U=U.index,U<D?(M.flags|=2,D):U):(M.flags|=2,D)):(M.flags|=1048576,D)}function v(M){return r&&M.alternate===null&&(M.flags|=2),M}function S(M,D,U,Z){return D===null||D.tag!==6?(D=Ff(U,M.mode,Z),D.return=M,D):(D=f(D,U),D.return=M,D)}function x(M,D,U,Z){var de=U.type;return de===P?Q(M,D,U.props.children,Z,U.key):D!==null&&(D.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Lt&&Qg(de)===D.type)?(Z=f(D,U.props),Z.ref=ul(M,D,U),Z.return=M,Z):(Z=Vc(U.type,U.key,U.props,null,M.mode,Z),Z.ref=ul(M,D,U),Z.return=M,Z)}function B(M,D,U,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=Uf(U,M.mode,Z),D.return=M,D):(D=f(D,U.children||[]),D.return=M,D)}function Q(M,D,U,Z,de){return D===null||D.tag!==7?(D=ws(U,M.mode,Z,de),D.return=M,D):(D=f(D,U),D.return=M,D)}function Y(M,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Ff(""+D,M.mode,U),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Te:return U=Vc(D.type,D.key,D.props,null,M.mode,U),U.ref=ul(M,null,D),U.return=M,U;case X:return D=Uf(D,M.mode,U),D.return=M,D;case Lt:var Z=D._init;return Y(M,Z(D._payload),U)}if(ct(D)||me(D))return D=ws(D,M.mode,U,null),D.return=M,D;mc(M,D)}return null}function G(M,D,U,Z){var de=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return de!==null?null:S(M,D,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Te:return U.key===de?x(M,D,U,Z):null;case X:return U.key===de?B(M,D,U,Z):null;case Lt:return de=U._init,G(M,D,de(U._payload),Z)}if(ct(U)||me(U))return de!==null?null:Q(M,D,U,Z,null);mc(M,U)}return null}function oe(M,D,U,Z,de){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return M=M.get(U)||null,S(D,M,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Te:return M=M.get(Z.key===null?U:Z.key)||null,x(D,M,Z,de);case X:return M=M.get(Z.key===null?U:Z.key)||null,B(D,M,Z,de);case Lt:var ye=Z._init;return oe(M,D,U,ye(Z._payload),de)}if(ct(Z)||me(Z))return M=M.get(U)||null,Q(D,M,Z,de,null);mc(D,Z)}return null}function ue(M,D,U,Z){for(var de=null,ye=null,_e=D,we=D=0,Pt=null;_e!==null&&we<U.length;we++){_e.index>we?(Pt=_e,_e=null):Pt=_e.sibling;var Fe=G(M,_e,U[we],Z);if(Fe===null){_e===null&&(_e=Pt);break}r&&_e&&Fe.alternate===null&&s(M,_e),D=m(Fe,D,we),ye===null?de=Fe:ye.sibling=Fe,ye=Fe,_e=Pt}if(we===U.length)return l(M,_e),et&&ps(M,we),de;if(_e===null){for(;we<U.length;we++)_e=Y(M,U[we],Z),_e!==null&&(D=m(_e,D,we),ye===null?de=_e:ye.sibling=_e,ye=_e);return et&&ps(M,we),de}for(_e=h(M,_e);we<U.length;we++)Pt=oe(_e,M,we,U[we],Z),Pt!==null&&(r&&Pt.alternate!==null&&_e.delete(Pt.key===null?we:Pt.key),D=m(Pt,D,we),ye===null?de=Pt:ye.sibling=Pt,ye=Pt);return r&&_e.forEach(function(Ri){return s(M,Ri)}),et&&ps(M,we),de}function he(M,D,U,Z){var de=me(U);if(typeof de!="function")throw Error(t(150));if(U=de.call(U),U==null)throw Error(t(151));for(var ye=de=null,_e=D,we=D=0,Pt=null,Fe=U.next();_e!==null&&!Fe.done;we++,Fe=U.next()){_e.index>we?(Pt=_e,_e=null):Pt=_e.sibling;var Ri=G(M,_e,Fe.value,Z);if(Ri===null){_e===null&&(_e=Pt);break}r&&_e&&Ri.alternate===null&&s(M,_e),D=m(Ri,D,we),ye===null?de=Ri:ye.sibling=Ri,ye=Ri,_e=Pt}if(Fe.done)return l(M,_e),et&&ps(M,we),de;if(_e===null){for(;!Fe.done;we++,Fe=U.next())Fe=Y(M,Fe.value,Z),Fe!==null&&(D=m(Fe,D,we),ye===null?de=Fe:ye.sibling=Fe,ye=Fe);return et&&ps(M,we),de}for(_e=h(M,_e);!Fe.done;we++,Fe=U.next())Fe=oe(_e,M,we,Fe.value,Z),Fe!==null&&(r&&Fe.alternate!==null&&_e.delete(Fe.key===null?we:Fe.key),D=m(Fe,D,we),ye===null?de=Fe:ye.sibling=Fe,ye=Fe);return r&&_e.forEach(function(Q0){return s(M,Q0)}),et&&ps(M,we),de}function dt(M,D,U,Z){if(typeof U=="object"&&U!==null&&U.type===P&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Te:e:{for(var de=U.key,ye=D;ye!==null;){if(ye.key===de){if(de=U.type,de===P){if(ye.tag===7){l(M,ye.sibling),D=f(ye,U.props.children),D.return=M,M=D;break e}}else if(ye.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Lt&&Qg(de)===ye.type){l(M,ye.sibling),D=f(ye,U.props),D.ref=ul(M,ye,U),D.return=M,M=D;break e}l(M,ye);break}else s(M,ye);ye=ye.sibling}U.type===P?(D=ws(U.props.children,M.mode,Z,U.key),D.return=M,M=D):(Z=Vc(U.type,U.key,U.props,null,M.mode,Z),Z.ref=ul(M,D,U),Z.return=M,M=Z)}return v(M);case X:e:{for(ye=U.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){l(M,D.sibling),D=f(D,U.children||[]),D.return=M,M=D;break e}else{l(M,D);break}else s(M,D);D=D.sibling}D=Uf(U,M.mode,Z),D.return=M,M=D}return v(M);case Lt:return ye=U._init,dt(M,D,ye(U._payload),Z)}if(ct(U))return ue(M,D,U,Z);if(me(U))return he(M,D,U,Z);mc(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,D!==null&&D.tag===6?(l(M,D.sibling),D=f(D,U),D.return=M,M=D):(l(M,D),D=Ff(U,M.mode,Z),D.return=M,M=D),v(M)):l(M,D)}return dt}var Lo=Yg(!0),Jg=Yg(!1),cl={},ur=mi(cl),hl=mi(cl),dl=mi(cl);function gs(r){if(r===cl)throw Error(t(174));return r}function tf(r,s){switch(Qe(dl,s),Qe(hl,r),Qe(ur,cl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ro(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=ro(s,r)}Xe(ur),Qe(ur,s)}function Mo(){Xe(ur),Xe(hl),Xe(dl)}function Xg(r){gs(dl.current);var s=gs(ur.current),l=ro(s,r.type);s!==l&&(Qe(hl,r),Qe(ur,l))}function nf(r){hl.current===r&&(Xe(ur),Xe(hl))}var rt=mi(0);function gc(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rf=[];function sf(){for(var r=0;r<rf.length;r++)rf[r]._workInProgressVersionPrimary=null;rf.length=0}var yc=Ie.ReactCurrentDispatcher,of=Ie.ReactCurrentBatchConfig,ys=0,it=null,vt=null,At=null,_c=!1,fl=!1,pl=0,y0=0;function Ut(){throw Error(t(321))}function af(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Ln(r[l],s[l]))return!1;return!0}function lf(r,s,l,h,f,m){if(ys=m,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yc.current=r===null||r.memoizedState===null?I0:w0,r=l(h,f),fl){m=0;do{if(fl=!1,pl=0,25<=m)throw Error(t(301));m+=1,At=vt=null,s.updateQueue=null,yc.current=T0,r=l(h,f)}while(fl)}if(yc.current=Ic,s=vt!==null&&vt.next!==null,ys=0,At=vt=it=null,_c=!1,s)throw Error(t(300));return r}function uf(){var r=pl!==0;return pl=0,r}function cr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?it.memoizedState=At=r:At=At.next=r,At}function Sn(){if(vt===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=vt.next;var s=At===null?it.memoizedState:At.next;if(s!==null)At=s,vt=r;else{if(r===null)throw Error(t(310));vt=r,r={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},At===null?it.memoizedState=At=r:At=At.next=r}return At}function ml(r,s){return typeof s=="function"?s(r):s}function cf(r){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=vt,f=h.baseQueue,m=l.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}h.baseQueue=f=m,l.pending=null}if(f!==null){m=f.next,h=h.baseState;var S=v=null,x=null,B=m;do{var Q=B.lane;if((ys&Q)===Q)x!==null&&(x=x.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),h=B.hasEagerState?B.eagerState:r(h,B.action);else{var Y={lane:Q,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};x===null?(S=x=Y,v=h):x=x.next=Y,it.lanes|=Q,_s|=Q}B=B.next}while(B!==null&&B!==m);x===null?v=h:x.next=S,Ln(h,s.memoizedState)||(en=!0),s.memoizedState=h,s.baseState=v,s.baseQueue=x,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do m=f.lane,it.lanes|=m,_s|=m,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function hf(r){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,m=s.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do m=r(m,v.action),v=v.next;while(v!==f);Ln(m,s.memoizedState)||(en=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,h]}function Zg(){}function ey(r,s){var l=it,h=Sn(),f=s(),m=!Ln(h.memoizedState,f);if(m&&(h.memoizedState=f,en=!0),h=h.queue,df(ry.bind(null,l,h,r),[r]),h.getSnapshot!==s||m||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,gl(9,ny.bind(null,l,h,f,s),void 0,null),Rt===null)throw Error(t(349));(ys&30)!==0||ty(l,s,f)}return f}function ty(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function ny(r,s,l,h){s.value=l,s.getSnapshot=h,iy(s)&&sy(r)}function ry(r,s,l){return l(function(){iy(s)&&sy(r)})}function iy(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Ln(r,l)}catch{return!0}}function sy(r){var s=Vr(r,1);s!==null&&Bn(s,r,1,-1)}function oy(r){var s=cr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:r},s.queue=r,r=r.dispatch=E0.bind(null,it,r),[s.memoizedState,r]}function gl(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function ay(){return Sn().memoizedState}function vc(r,s,l,h){var f=cr();it.flags|=r,f.memoizedState=gl(1|s,l,void 0,h===void 0?null:h)}function Ec(r,s,l,h){var f=Sn();h=h===void 0?null:h;var m=void 0;if(vt!==null){var v=vt.memoizedState;if(m=v.destroy,h!==null&&af(h,v.deps)){f.memoizedState=gl(s,l,m,h);return}}it.flags|=r,f.memoizedState=gl(1|s,l,m,h)}function ly(r,s){return vc(8390656,8,r,s)}function df(r,s){return Ec(2048,8,r,s)}function uy(r,s){return Ec(4,2,r,s)}function cy(r,s){return Ec(4,4,r,s)}function hy(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function dy(r,s,l){return l=l!=null?l.concat([r]):null,Ec(4,4,hy.bind(null,s,r),l)}function ff(){}function fy(r,s){var l=Sn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&af(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function py(r,s){var l=Sn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&af(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function my(r,s,l){return(ys&21)===0?(r.baseState&&(r.baseState=!1,en=!0),r.memoizedState=l):(Ln(l,s)||(l=za(),it.lanes|=l,_s|=l,r.baseState=!0),s)}function _0(r,s){var l=Ne;Ne=l!==0&&4>l?l:4,r(!0);var h=of.transition;of.transition={};try{r(!1),s()}finally{Ne=l,of.transition=h}}function gy(){return Sn().memoizedState}function v0(r,s,l){var h=Ti(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},yy(r))_y(s,l);else if(l=Bg(r,s,l,h),l!==null){var f=Ht();Bn(l,r,h,f),vy(l,s,h)}}function E0(r,s,l){var h=Ti(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(yy(r))_y(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,S=m(v,l);if(f.hasEagerState=!0,f.eagerState=S,Ln(S,v)){var x=s.interleaved;x===null?(f.next=f,Jd(s)):(f.next=x.next,x.next=f),s.interleaved=f;return}}catch{}finally{}l=Bg(r,s,f,h),l!==null&&(f=Ht(),Bn(l,r,h,f),vy(l,s,h))}}function yy(r){var s=r.alternate;return r===it||s!==null&&s===it}function _y(r,s){fl=_c=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function vy(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,qa(r,l)}}var Ic={readContext:Tn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},I0={readContext:Tn,useCallback:function(r,s){return cr().memoizedState=[r,s===void 0?null:s],r},useContext:Tn,useEffect:ly,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,vc(4194308,4,hy.bind(null,s,r),l)},useLayoutEffect:function(r,s){return vc(4194308,4,r,s)},useInsertionEffect:function(r,s){return vc(4,2,r,s)},useMemo:function(r,s){var l=cr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=cr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=v0.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var s=cr();return r={current:r},s.memoizedState=r},useState:oy,useDebugValue:ff,useDeferredValue:function(r){return cr().memoizedState=r},useTransition:function(){var r=oy(!1),s=r[0];return r=_0.bind(null,r[1]),cr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=it,f=cr();if(et){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Rt===null)throw Error(t(349));(ys&30)!==0||ty(h,s,l)}f.memoizedState=l;var m={value:l,getSnapshot:s};return f.queue=m,ly(ry.bind(null,h,m,r),[r]),h.flags|=2048,gl(9,ny.bind(null,h,m,l,s),void 0,null),l},useId:function(){var r=cr(),s=Rt.identifierPrefix;if(et){var l=Nr,h=Dr;l=(h&~(1<<32-an(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=pl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=y0++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},w0={readContext:Tn,useCallback:fy,useContext:Tn,useEffect:df,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:cf,useRef:ay,useState:function(){return cf(ml)},useDebugValue:ff,useDeferredValue:function(r){var s=Sn();return my(s,vt.memoizedState,r)},useTransition:function(){var r=cf(ml)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:Zg,useSyncExternalStore:ey,useId:gy,unstable_isNewReconciler:!1},T0={readContext:Tn,useCallback:fy,useContext:Tn,useEffect:df,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:hf,useRef:ay,useState:function(){return hf(ml)},useDebugValue:ff,useDeferredValue:function(r){var s=Sn();return vt===null?s.memoizedState=r:my(s,vt.memoizedState,r)},useTransition:function(){var r=hf(ml)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:Zg,useSyncExternalStore:ey,useId:gy,unstable_isNewReconciler:!1};function Fo(r,s){try{var l="",h=s;do l+=Be(h),h=h.return;while(h);var f=l}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:s,stack:f,digest:null}}function pf(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function mf(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var S0=typeof WeakMap=="function"?WeakMap:Map;function Ey(r,s,l){l=Or(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){kc||(kc=!0,Cf=h),mf(r,s)},l}function Iy(r,s,l){l=Or(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){mf(r,s)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){mf(r,s),typeof h!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),l}function wy(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new S0;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=F0.bind(null,r,s,l),s.then(r,r))}function Ty(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Sy(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Or(-1,1),s.tag=2,vi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var A0=Ie.ReactCurrentOwner,en=!1;function Kt(r,s,l,h){s.child=r===null?Jg(s,null,l,h):Lo(s,r.child,l,h)}function Ay(r,s,l,h,f){l=l.render;var m=s.ref;return Oo(s,f),h=lf(r,s,l,h,m,f),l=uf(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(et&&l&&zd(s),s.flags|=1,Kt(r,s,h,f),s.child)}function Ry(r,s,l,h,f){if(r===null){var m=l.type;return typeof m=="function"&&!Mf(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=m,Py(r,s,m,h,f)):(r=Vc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,(r.lanes&f)===0){var v=m.memoizedProps;if(l=l.compare,l=l!==null?l:nl,l(v,h)&&r.ref===s.ref)return Lr(r,s,f)}return s.flags|=1,r=Ai(m,h),r.ref=s.ref,r.return=s,s.child=r}function Py(r,s,l,h,f){if(r!==null){var m=r.memoizedProps;if(nl(m,h)&&r.ref===s.ref)if(en=!1,s.pendingProps=h=m,(r.lanes&f)!==0)(r.flags&131072)!==0&&(en=!0);else return s.lanes=r.lanes,Lr(r,s,f)}return gf(r,s,l,h,f)}function ky(r,s,l){var h=s.pendingProps,f=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(jo,pn),pn|=l;else{if((l&1073741824)===0)return r=m!==null?m.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Qe(jo,pn),pn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:l,Qe(jo,pn),pn|=h}else m!==null?(h=m.baseLanes|l,s.memoizedState=null):h=l,Qe(jo,pn),pn|=h;return Kt(r,s,f,l),s.child}function xy(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function gf(r,s,l,h,f){var m=Zt(l)?ds:Ft.current;return m=Co(s,m),Oo(s,f),l=lf(r,s,l,h,m,f),h=uf(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(et&&h&&zd(s),s.flags|=1,Kt(r,s,l,f),s.child)}function Cy(r,s,l,h,f){if(Zt(l)){var m=!0;sc(s)}else m=!1;if(Oo(s,f),s.stateNode===null)Tc(r,s),Hg(s,l,h),ef(s,l,h,f),h=!0;else if(r===null){var v=s.stateNode,S=s.memoizedProps;v.props=S;var x=v.context,B=l.contextType;typeof B=="object"&&B!==null?B=Tn(B):(B=Zt(l)?ds:Ft.current,B=Co(s,B));var Q=l.getDerivedStateFromProps,Y=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";Y||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==h||x!==B)&&Gg(s,v,h,B),_i=!1;var G=s.memoizedState;v.state=G,fc(s,h,v,f),x=s.memoizedState,S!==h||G!==x||Xt.current||_i?(typeof Q=="function"&&(Zd(s,l,Q,h),x=s.memoizedState),(S=_i||Kg(s,l,S,h,G,x,B))?(Y||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=x),v.props=h,v.state=x,v.context=B,h=S):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{v=s.stateNode,zg(r,s),S=s.memoizedProps,B=s.type===s.elementType?S:Fn(s.type,S),v.props=B,Y=s.pendingProps,G=v.context,x=l.contextType,typeof x=="object"&&x!==null?x=Tn(x):(x=Zt(l)?ds:Ft.current,x=Co(s,x));var oe=l.getDerivedStateFromProps;(Q=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==Y||G!==x)&&Gg(s,v,h,x),_i=!1,G=s.memoizedState,v.state=G,fc(s,h,v,f);var ue=s.memoizedState;S!==Y||G!==ue||Xt.current||_i?(typeof oe=="function"&&(Zd(s,l,oe,h),ue=s.memoizedState),(B=_i||Kg(s,l,B,h,G,ue,x)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ue,x),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ue,x)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ue),v.props=h,v.state=ue,v.context=x,h=B):(typeof v.componentDidUpdate!="function"||S===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),h=!1)}return yf(r,s,l,h,m,f)}function yf(r,s,l,h,f,m){xy(r,s);var v=(s.flags&128)!==0;if(!h&&!v)return f&&Vg(s,l,!1),Lr(r,s,m);h=s.stateNode,A0.current=s;var S=v&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&v?(s.child=Lo(s,r.child,null,m),s.child=Lo(s,null,S,m)):Kt(r,s,S,m),s.memoizedState=h.state,f&&Vg(s,l,!0),s.child}function by(r){var s=r.stateNode;s.pendingContext?Dg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Dg(r,s.context,!1),tf(r,s.containerInfo)}function Dy(r,s,l,h,f){return No(),Kd(f),s.flags|=256,Kt(r,s,l,h),s.child}var _f={dehydrated:null,treeContext:null,retryLane:0};function vf(r){return{baseLanes:r,cachePool:null,transitions:null}}function Ny(r,s,l){var h=s.pendingProps,f=rt.current,m=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=r!==null&&r.memoizedState===null?!1:(f&2)!==0),S?(m=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Qe(rt,f&1),r===null)return Wd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=h.children,r=h.fallback,m?(h=s.mode,m=s.child,v={mode:"hidden",children:v},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=v):m=Oc(v,h,0,null),r=ws(r,h,l,null),m.return=s,r.return=s,m.sibling=r,s.child=m,s.child.memoizedState=vf(l),s.memoizedState=_f,r):Ef(s,v));if(f=r.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return R0(r,s,v,h,S,f,l);if(m){m=h.fallback,v=s.mode,f=r.child,S=f.sibling;var x={mode:"hidden",children:h.children};return(v&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=x,s.deletions=null):(h=Ai(f,x),h.subtreeFlags=f.subtreeFlags&14680064),S!==null?m=Ai(S,m):(m=ws(m,v,l,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,v=r.child.memoizedState,v=v===null?vf(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=r.childLanes&~l,s.memoizedState=_f,h}return m=r.child,r=m.sibling,h=Ai(m,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Ef(r,s){return s=Oc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function wc(r,s,l,h){return h!==null&&Kd(h),Lo(s,r.child,null,l),r=Ef(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function R0(r,s,l,h,f,m,v){if(l)return s.flags&256?(s.flags&=-257,h=pf(Error(t(422))),wc(r,s,v,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(m=h.fallback,f=s.mode,h=Oc({mode:"visible",children:h.children},f,0,null),m=ws(m,f,v,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,(s.mode&1)!==0&&Lo(s,r.child,null,v),s.child.memoizedState=vf(v),s.memoizedState=_f,m);if((s.mode&1)===0)return wc(r,s,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var S=h.dgst;return h=S,m=Error(t(419)),h=pf(m,h,void 0),wc(r,s,v,h)}if(S=(v&r.childLanes)!==0,en||S){if(h=Rt,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|v))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Vr(r,f),Bn(h,r,f,-1))}return Lf(),h=pf(Error(t(421))),wc(r,s,v,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=U0.bind(null,r),f._reactRetry=s,null):(r=m.treeContext,fn=pi(f.nextSibling),dn=s,et=!0,Mn=null,r!==null&&(In[wn++]=Dr,In[wn++]=Nr,In[wn++]=fs,Dr=r.id,Nr=r.overflow,fs=s),s=Ef(s,h.children),s.flags|=4096,s)}function Vy(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),Yd(r.return,s,l)}function If(r,s,l,h,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=l,m.tailMode=f)}function Oy(r,s,l){var h=s.pendingProps,f=h.revealOrder,m=h.tail;if(Kt(r,s,h.children,l),h=rt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Vy(r,l,s);else if(r.tag===19)Vy(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Qe(rt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&gc(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),If(s,!1,f,l,m);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&gc(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}If(s,!0,l,null,m);break;case"together":If(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tc(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Lr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),_s|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Ai(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ai(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function P0(r,s,l){switch(s.tag){case 3:by(s),No();break;case 5:Xg(s);break;case 1:Zt(s.type)&&sc(s);break;case 4:tf(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Qe(cc,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Qe(rt,rt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Ny(r,s,l):(Qe(rt,rt.current&1),r=Lr(r,s,l),r!==null?r.sibling:null);Qe(rt,rt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return Oy(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Qe(rt,rt.current),h)break;return null;case 22:case 23:return s.lanes=0,ky(r,s,l)}return Lr(r,s,l)}var Ly,wf,My,Fy;Ly=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},wf=function(){},My=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,gs(ur.current);var m=null;switch(l){case"input":f=to(r,f),h=to(r,h),m=[];break;case"select":f=C({},f,{value:void 0}),h=C({},h,{value:void 0}),m=[];break;case"textarea":f=ba(r,f),h=ba(r,h),m=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=nc)}Nn(l,h);var v;l=null;for(B in f)if(!h.hasOwnProperty(B)&&f.hasOwnProperty(B)&&f[B]!=null)if(B==="style"){var S=f[B];for(v in S)S.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in h){var x=h[B];if(S=f?.[B],h.hasOwnProperty(B)&&x!==S&&(x!=null||S!=null))if(B==="style")if(S){for(v in S)!S.hasOwnProperty(v)||x&&x.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in x)x.hasOwnProperty(v)&&S[v]!==x[v]&&(l||(l={}),l[v]=x[v])}else l||(m||(m=[]),m.push(B,l)),l=x;else B==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,S=S?S.__html:void 0,x!=null&&S!==x&&(m=m||[]).push(B,x)):B==="children"?typeof x!="string"&&typeof x!="number"||(m=m||[]).push(B,""+x):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(x!=null&&B==="onScroll"&&Je("scroll",r),m||S===x||(m=[])):(m=m||[]).push(B,x))}l&&(m=m||[]).push("style",l);var B=m;(s.updateQueue=B)&&(s.flags|=4)}},Fy=function(r,s,l,h){l!==h&&(s.flags|=4)};function yl(r,s){if(!et)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function jt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function k0(r,s,l){var h=s.pendingProps;switch($d(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return Zt(s.type)&&ic(),jt(s),null;case 3:return h=s.stateNode,Mo(),Xe(Xt),Xe(Ft),sf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(uc(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mn!==null&&(Nf(Mn),Mn=null))),wf(r,s),jt(s),null;case 5:nf(s);var f=gs(dl.current);if(l=s.type,r!==null&&s.stateNode!=null)My(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return jt(s),null}if(r=gs(ur.current),uc(s)){h=s.stateNode,l=s.type;var m=s.memoizedProps;switch(h[lr]=s,h[al]=m,r=(s.mode&1)!==0,l){case"dialog":Je("cancel",h),Je("close",h);break;case"iframe":case"object":case"embed":Je("load",h);break;case"video":case"audio":for(f=0;f<il.length;f++)Je(il[f],h);break;case"source":Je("error",h);break;case"img":case"image":case"link":Je("error",h),Je("load",h);break;case"details":Je("toggle",h);break;case"input":Pu(h,m),Je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},Je("invalid",h);break;case"textarea":Da(h,m),Je("invalid",h)}Nn(l,m),f=null;for(var v in m)if(m.hasOwnProperty(v)){var S=m[v];v==="children"?typeof S=="string"?h.textContent!==S&&(m.suppressHydrationWarning!==!0&&tc(h.textContent,S,r),f=["children",S]):typeof S=="number"&&h.textContent!==""+S&&(m.suppressHydrationWarning!==!0&&tc(h.textContent,S,r),f=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Je("scroll",h)}switch(l){case"input":eo(h),Ca(h,m,!0);break;case"textarea":eo(h),Xr(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=nc)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Na(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=v.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=v.createElement(l,{is:h.is}):(r=v.createElement(l),l==="select"&&(v=r,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):r=v.createElementNS(r,l),r[lr]=s,r[al]=h,Ly(r,s,!1,!1),s.stateNode=r;e:{switch(v=so(l,h),l){case"dialog":Je("cancel",r),Je("close",r),f=h;break;case"iframe":case"object":case"embed":Je("load",r),f=h;break;case"video":case"audio":for(f=0;f<il.length;f++)Je(il[f],r);f=h;break;case"source":Je("error",r),f=h;break;case"img":case"image":case"link":Je("error",r),Je("load",r),f=h;break;case"details":Je("toggle",r),f=h;break;case"input":Pu(r,h),f=to(r,h),Je("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=C({},h,{value:void 0}),Je("invalid",r);break;case"textarea":Da(r,h),f=ba(r,h),Je("invalid",r);break;default:f=h}Nn(l,f),S=f;for(m in S)if(S.hasOwnProperty(m)){var x=S[m];m==="style"?io(r,x):m==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&xu(r,x)):m==="children"?typeof x=="string"?(l!=="textarea"||x!=="")&&Ji(r,x):typeof x=="number"&&Ji(r,""+x):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?x!=null&&m==="onScroll"&&Je("scroll",r):x!=null&&ae(r,m,x,v))}switch(l){case"input":eo(r),Ca(r,h,!1);break;case"textarea":eo(r),Xr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Oe(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?Dn(r,!!h.multiple,m,!1):h.defaultValue!=null&&Dn(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=nc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return jt(s),null;case 6:if(r&&s.stateNode!=null)Fy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=gs(dl.current),gs(ur.current),uc(s)){if(h=s.stateNode,l=s.memoizedProps,h[lr]=s,(m=h.nodeValue!==l)&&(r=dn,r!==null))switch(r.tag){case 3:tc(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&tc(h.nodeValue,l,(r.mode&1)!==0)}m&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[lr]=s,s.stateNode=h}return jt(s),null;case 13:if(Xe(rt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(et&&fn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)jg(),No(),s.flags|=98560,m=!1;else if(m=uc(s),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[lr]=s}else No(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),m=!1}else Mn!==null&&(Nf(Mn),Mn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?Et===0&&(Et=3):Lf())),s.updateQueue!==null&&(s.flags|=4),jt(s),null);case 4:return Mo(),wf(r,s),r===null&&sl(s.stateNode.containerInfo),jt(s),null;case 10:return Qd(s.type._context),jt(s),null;case 17:return Zt(s.type)&&ic(),jt(s),null;case 19:if(Xe(rt),m=s.memoizedState,m===null)return jt(s),null;if(h=(s.flags&128)!==0,v=m.rendering,v===null)if(h)yl(m,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(v=gc(r),v!==null){for(s.flags|=128,yl(m,!1),h=v.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)m=l,r=h,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,r=v.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Qe(rt,rt.current&1|2),s.child}r=r.sibling}m.tail!==null&&Ye()>Bo&&(s.flags|=128,h=!0,yl(m,!1),s.lanes=4194304)}else{if(!h)if(r=gc(v),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),yl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!et)return jt(s),null}else 2*Ye()-m.renderingStartTime>Bo&&l!==1073741824&&(s.flags|=128,h=!0,yl(m,!1),s.lanes=4194304);m.isBackwards?(v.sibling=s.child,s.child=v):(l=m.last,l!==null?l.sibling=v:s.child=v,m.last=v)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ye(),s.sibling=null,l=rt.current,Qe(rt,h?l&1|2:l&1),s):(jt(s),null);case 22:case 23:return Of(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(pn&1073741824)!==0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function x0(r,s){switch($d(s),s.tag){case 1:return Zt(s.type)&&ic(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Mo(),Xe(Xt),Xe(Ft),sf(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return nf(s),null;case 13:if(Xe(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));No()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Xe(rt),null;case 4:return Mo(),null;case 10:return Qd(s.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var Sc=!1,Bt=!1,C0=typeof WeakSet=="function"?WeakSet:Set,le=null;function Uo(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){lt(r,s,h)}else l.current=null}function Tf(r,s,l){try{l()}catch(h){lt(r,s,h)}}var Uy=!1;function b0(r,s){if(Vd=Pr,r=gg(),Rd(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var v=0,S=-1,x=-1,B=0,Q=0,Y=r,G=null;t:for(;;){for(var oe;Y!==l||f!==0&&Y.nodeType!==3||(S=v+f),Y!==m||h!==0&&Y.nodeType!==3||(x=v+h),Y.nodeType===3&&(v+=Y.nodeValue.length),(oe=Y.firstChild)!==null;)G=Y,Y=oe;for(;;){if(Y===r)break t;if(G===l&&++B===f&&(S=v),G===m&&++Q===h&&(x=v),(oe=Y.nextSibling)!==null)break;Y=G,G=Y.parentNode}Y=oe}l=S===-1||x===-1?null:{start:S,end:x}}else l=null}l=l||{start:0,end:0}}else l=null;for(Od={focusedElem:r,selectionRange:l},Pr=!1,le=s;le!==null;)if(s=le,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,le=r;else for(;le!==null;){s=le;try{var ue=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var he=ue.memoizedProps,dt=ue.memoizedState,M=s.stateNode,D=M.getSnapshotBeforeUpdate(s.elementType===s.type?he:Fn(s.type,he),dt);M.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){lt(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,le=r;break}le=s.return}return ue=Uy,Uy=!1,ue}function _l(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var m=f.destroy;f.destroy=void 0,m!==void 0&&Tf(s,l,m)}f=f.next}while(f!==h)}}function Ac(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function Sf(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function jy(r){var s=r.alternate;s!==null&&(r.alternate=null,jy(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[lr],delete s[al],delete s[Ud],delete s[f0],delete s[p0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function By(r){return r.tag===5||r.tag===3||r.tag===4}function zy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||By(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Af(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=nc));else if(h!==4&&(r=r.child,r!==null))for(Af(r,s,l),r=r.sibling;r!==null;)Af(r,s,l),r=r.sibling}function Rf(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Rf(r,s,l),r=r.sibling;r!==null;)Rf(r,s,l),r=r.sibling}var Nt=null,Un=!1;function Ei(r,s,l){for(l=l.child;l!==null;)$y(r,s,l),l=l.sibling}function $y(r,s,l){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(ns,l)}catch{}switch(l.tag){case 5:Bt||Uo(l,s);case 6:var h=Nt,f=Un;Nt=null,Ei(r,s,l),Nt=h,Un=f,Nt!==null&&(Un?(r=Nt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Nt.removeChild(l.stateNode));break;case 18:Nt!==null&&(Un?(r=Nt,l=l.stateNode,r.nodeType===8?Fd(r.parentNode,l):r.nodeType===1&&Fd(r,l),ci(r)):Fd(Nt,l.stateNode));break;case 4:h=Nt,f=Un,Nt=l.stateNode.containerInfo,Un=!0,Ei(r,s,l),Nt=h,Un=f;break;case 0:case 11:case 14:case 15:if(!Bt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var m=f,v=m.destroy;m=m.tag,v!==void 0&&((m&2)!==0||(m&4)!==0)&&Tf(l,s,v),f=f.next}while(f!==h)}Ei(r,s,l);break;case 1:if(!Bt&&(Uo(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(S){lt(l,s,S)}Ei(r,s,l);break;case 21:Ei(r,s,l);break;case 22:l.mode&1?(Bt=(h=Bt)||l.memoizedState!==null,Ei(r,s,l),Bt=h):Ei(r,s,l);break;default:Ei(r,s,l)}}function qy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new C0),s.forEach(function(h){var f=j0.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function jn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var m=r,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 5:Nt=S.stateNode,Un=!1;break e;case 3:Nt=S.stateNode.containerInfo,Un=!0;break e;case 4:Nt=S.stateNode.containerInfo,Un=!0;break e}S=S.return}if(Nt===null)throw Error(t(160));$y(m,v,f),Nt=null,Un=!1;var x=f.alternate;x!==null&&(x.return=null),f.return=null}catch(B){lt(f,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Wy(s,r),s=s.sibling}function Wy(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(jn(s,r),hr(r),h&4){try{_l(3,r,r.return),Ac(3,r)}catch(he){lt(r,r.return,he)}try{_l(5,r,r.return)}catch(he){lt(r,r.return,he)}}break;case 1:jn(s,r),hr(r),h&512&&l!==null&&Uo(l,l.return);break;case 5:if(jn(s,r),hr(r),h&512&&l!==null&&Uo(l,l.return),r.flags&32){var f=r.stateNode;try{Ji(f,"")}catch(he){lt(r,r.return,he)}}if(h&4&&(f=r.stateNode,f!=null)){var m=r.memoizedProps,v=l!==null?l.memoizedProps:m,S=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{S==="input"&&m.type==="radio"&&m.name!=null&&no(f,m),so(S,v);var B=so(S,m);for(v=0;v<x.length;v+=2){var Q=x[v],Y=x[v+1];Q==="style"?io(f,Y):Q==="dangerouslySetInnerHTML"?xu(f,Y):Q==="children"?Ji(f,Y):ae(f,Q,Y,B)}switch(S){case"input":Yi(f,m);break;case"textarea":ku(f,m);break;case"select":var G=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var oe=m.value;oe!=null?Dn(f,!!m.multiple,oe,!1):G!==!!m.multiple&&(m.defaultValue!=null?Dn(f,!!m.multiple,m.defaultValue,!0):Dn(f,!!m.multiple,m.multiple?[]:"",!1))}f[al]=m}catch(he){lt(r,r.return,he)}}break;case 6:if(jn(s,r),hr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,m=r.memoizedProps;try{f.nodeValue=m}catch(he){lt(r,r.return,he)}}break;case 3:if(jn(s,r),hr(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{ci(s.containerInfo)}catch(he){lt(r,r.return,he)}break;case 4:jn(s,r),hr(r);break;case 13:jn(s,r),hr(r),f=r.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(xf=Ye())),h&4&&qy(r);break;case 22:if(Q=l!==null&&l.memoizedState!==null,r.mode&1?(Bt=(B=Bt)||Q,jn(s,r),Bt=B):jn(s,r),hr(r),h&8192){if(B=r.memoizedState!==null,(r.stateNode.isHidden=B)&&!Q&&(r.mode&1)!==0)for(le=r,Q=r.child;Q!==null;){for(Y=le=Q;le!==null;){switch(G=le,oe=G.child,G.tag){case 0:case 11:case 14:case 15:_l(4,G,G.return);break;case 1:Uo(G,G.return);var ue=G.stateNode;if(typeof ue.componentWillUnmount=="function"){h=G,l=G.return;try{s=h,ue.props=s.memoizedProps,ue.state=s.memoizedState,ue.componentWillUnmount()}catch(he){lt(h,l,he)}}break;case 5:Uo(G,G.return);break;case 22:if(G.memoizedState!==null){Gy(Y);continue}}oe!==null?(oe.return=G,le=oe):Gy(Y)}Q=Q.sibling}e:for(Q=null,Y=r;;){if(Y.tag===5){if(Q===null){Q=Y;try{f=Y.stateNode,B?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(S=Y.stateNode,x=Y.memoizedProps.style,v=x!=null&&x.hasOwnProperty("display")?x.display:null,S.style.display=ti("display",v))}catch(he){lt(r,r.return,he)}}}else if(Y.tag===6){if(Q===null)try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(he){lt(r,r.return,he)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===r)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===r)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===r)break e;Q===Y&&(Q=null),Y=Y.return}Q===Y&&(Q=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:jn(s,r),hr(r),h&4&&qy(r);break;case 21:break;default:jn(s,r),hr(r)}}function hr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(By(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Ji(f,""),h.flags&=-33);var m=zy(r);Rf(r,m,f);break;case 3:case 4:var v=h.stateNode.containerInfo,S=zy(r);Af(r,S,v);break;default:throw Error(t(161))}}catch(x){lt(r,r.return,x)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function D0(r,s,l){le=r,Ky(r)}function Ky(r,s,l){for(var h=(r.mode&1)!==0;le!==null;){var f=le,m=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||Sc;if(!v){var S=f.alternate,x=S!==null&&S.memoizedState!==null||Bt;S=Sc;var B=Bt;if(Sc=v,(Bt=x)&&!B)for(le=f;le!==null;)v=le,x=v.child,v.tag===22&&v.memoizedState!==null?Qy(f):x!==null?(x.return=v,le=x):Qy(f);for(;m!==null;)le=m,Ky(m),m=m.sibling;le=f,Sc=S,Bt=B}Hy(r)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,le=m):Hy(r)}}function Hy(r){for(;le!==null;){var s=le;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Bt||Ac(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Bt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Fn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&qg(s,m,h);break;case 3:var v=s.updateQueue;if(v!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}qg(s,v,l)}break;case 5:var S=s.stateNode;if(l===null&&s.flags&4){l=S;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&l.focus();break;case"img":x.src&&(l.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var Q=B.memoizedState;if(Q!==null){var Y=Q.dehydrated;Y!==null&&ci(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||s.flags&512&&Sf(s)}catch(G){lt(s,s.return,G)}}if(s===r){le=null;break}if(l=s.sibling,l!==null){l.return=s.return,le=l;break}le=s.return}}function Gy(r){for(;le!==null;){var s=le;if(s===r){le=null;break}var l=s.sibling;if(l!==null){l.return=s.return,le=l;break}le=s.return}}function Qy(r){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Ac(4,s)}catch(x){lt(s,l,x)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(x){lt(s,f,x)}}var m=s.return;try{Sf(s)}catch(x){lt(s,m,x)}break;case 5:var v=s.return;try{Sf(s)}catch(x){lt(s,v,x)}}}catch(x){lt(s,s.return,x)}if(s===r){le=null;break}var S=s.sibling;if(S!==null){S.return=s.return,le=S;break}le=s.return}}var N0=Math.ceil,Rc=Ie.ReactCurrentDispatcher,Pf=Ie.ReactCurrentOwner,An=Ie.ReactCurrentBatchConfig,Me=0,Rt=null,mt=null,Vt=0,pn=0,jo=mi(0),Et=0,vl=null,_s=0,Pc=0,kf=0,El=null,tn=null,xf=0,Bo=1/0,Mr=null,kc=!1,Cf=null,Ii=null,xc=!1,wi=null,Cc=0,Il=0,bf=null,bc=-1,Dc=0;function Ht(){return(Me&6)!==0?Ye():bc!==-1?bc:bc=Ye()}function Ti(r){return(r.mode&1)===0?1:(Me&2)!==0&&Vt!==0?Vt&-Vt:g0.transition!==null?(Dc===0&&(Dc=za()),Dc):(r=Ne,r!==0||(r=window.event,r=r===void 0?16:go(r.type)),r)}function Bn(r,s,l,h){if(50<Il)throw Il=0,bf=null,Error(t(185));os(r,l,h),((Me&2)===0||r!==Rt)&&(r===Rt&&((Me&2)===0&&(Pc|=l),Et===4&&Si(r,Vt)),nn(r,h),l===1&&Me===0&&(s.mode&1)===0&&(Bo=Ye()+500,oc&&yi()))}function nn(r,s){var l=r.callbackNode;ss(r,s);var h=Sr(r,r===Rt?Vt:0);if(h===0)l!==null&&lo(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&lo(l),s===1)r.tag===0?m0(Jy.bind(null,r)):Og(Jy.bind(null,r)),h0(function(){(Me&6)===0&&yi()}),l=null;else{switch(Xn(h)){case 1:l=uo;break;case 4:l=Ua;break;case 16:l=ts;break;case 536870912:l=co;break;default:l=ts}l=s_(l,Yy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function Yy(r,s){if(bc=-1,Dc=0,(Me&6)!==0)throw Error(t(327));var l=r.callbackNode;if(zo()&&r.callbackNode!==l)return null;var h=Sr(r,r===Rt?Vt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=Nc(r,h);else{s=h;var f=Me;Me|=2;var m=Zy();(Rt!==r||Vt!==s)&&(Mr=null,Bo=Ye()+500,Es(r,s));do try{L0();break}catch(S){Xy(r,S)}while(!0);Gd(),Rc.current=m,Me=f,mt!==null?s=0:(Rt=null,Vt=0,s=Et)}if(s!==0){if(s===2&&(f=Ba(r),f!==0&&(h=f,s=Df(r,f))),s===1)throw l=vl,Es(r,0),Si(r,h),nn(r,Ye()),l;if(s===6)Si(r,h);else{if(f=r.current.alternate,(h&30)===0&&!V0(f)&&(s=Nc(r,h),s===2&&(m=Ba(r),m!==0&&(h=m,s=Df(r,m))),s===1))throw l=vl,Es(r,0),Si(r,h),nn(r,Ye()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Is(r,tn,Mr);break;case 3:if(Si(r,h),(h&130023424)===h&&(s=xf+500-Ye(),10<s)){if(Sr(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Ht(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Md(Is.bind(null,r,tn,Mr),s);break}Is(r,tn,Mr);break;case 4:if(Si(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var v=31-an(h);m=1<<v,v=s[v],v>f&&(f=v),h&=~m}if(h=f,h=Ye()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*N0(h/1960))-h,10<h){r.timeoutHandle=Md(Is.bind(null,r,tn,Mr),h);break}Is(r,tn,Mr);break;case 5:Is(r,tn,Mr);break;default:throw Error(t(329))}}}return nn(r,Ye()),r.callbackNode===l?Yy.bind(null,r):null}function Df(r,s){var l=El;return r.current.memoizedState.isDehydrated&&(Es(r,s).flags|=256),r=Nc(r,s),r!==2&&(s=tn,tn=l,s!==null&&Nf(s)),r}function Nf(r){tn===null?tn=r:tn.push.apply(tn,r)}function V0(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],m=f.getSnapshot;f=f.value;try{if(!Ln(m(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Si(r,s){for(s&=~kf,s&=~Pc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-an(s),h=1<<l;r[l]=-1,s&=~h}}function Jy(r){if((Me&6)!==0)throw Error(t(327));zo();var s=Sr(r,0);if((s&1)===0)return nn(r,Ye()),null;var l=Nc(r,s);if(r.tag!==0&&l===2){var h=Ba(r);h!==0&&(s=h,l=Df(r,h))}if(l===1)throw l=vl,Es(r,0),Si(r,s),nn(r,Ye()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Is(r,tn,Mr),nn(r,Ye()),null}function Vf(r,s){var l=Me;Me|=1;try{return r(s)}finally{Me=l,Me===0&&(Bo=Ye()+500,oc&&yi())}}function vs(r){wi!==null&&wi.tag===0&&(Me&6)===0&&zo();var s=Me;Me|=1;var l=An.transition,h=Ne;try{if(An.transition=null,Ne=1,r)return r()}finally{Ne=h,An.transition=l,Me=s,(Me&6)===0&&yi()}}function Of(){pn=jo.current,Xe(jo)}function Es(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,c0(l)),mt!==null)for(l=mt.return;l!==null;){var h=l;switch($d(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ic();break;case 3:Mo(),Xe(Xt),Xe(Ft),sf();break;case 5:nf(h);break;case 4:Mo();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:Qd(h.type._context);break;case 22:case 23:Of()}l=l.return}if(Rt=r,mt=r=Ai(r.current,null),Vt=pn=s,Et=0,vl=null,kf=Pc=_s=0,tn=El=null,ms!==null){for(s=0;s<ms.length;s++)if(l=ms[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,m=l.pending;if(m!==null){var v=m.next;m.next=f,h.next=v}l.pending=h}ms=null}return r}function Xy(r,s){do{var l=mt;try{if(Gd(),yc.current=Ic,_c){for(var h=it.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}_c=!1}if(ys=0,At=vt=it=null,fl=!1,pl=0,Pf.current=null,l===null||l.return===null){Et=1,vl=s,mt=null;break}e:{var m=r,v=l.return,S=l,x=s;if(s=Vt,S.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var B=x,Q=S,Y=Q.tag;if((Q.mode&1)===0&&(Y===0||Y===11||Y===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var oe=Ty(v);if(oe!==null){oe.flags&=-257,Sy(oe,v,S,m,s),oe.mode&1&&wy(m,B,s),s=oe,x=B;var ue=s.updateQueue;if(ue===null){var he=new Set;he.add(x),s.updateQueue=he}else ue.add(x);break e}else{if((s&1)===0){wy(m,B,s),Lf();break e}x=Error(t(426))}}else if(et&&S.mode&1){var dt=Ty(v);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Sy(dt,v,S,m,s),Kd(Fo(x,S));break e}}m=x=Fo(x,S),Et!==4&&(Et=2),El===null?El=[m]:El.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var M=Ey(m,x,s);$g(m,M);break e;case 1:S=x;var D=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Ii===null||!Ii.has(U)))){m.flags|=65536,s&=-s,m.lanes|=s;var Z=Iy(m,S,s);$g(m,Z);break e}}m=m.return}while(m!==null)}t_(l)}catch(de){s=de,mt===l&&l!==null&&(mt=l=l.return);continue}break}while(!0)}function Zy(){var r=Rc.current;return Rc.current=Ic,r===null?Ic:r}function Lf(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||(_s&268435455)===0&&(Pc&268435455)===0||Si(Rt,Vt)}function Nc(r,s){var l=Me;Me|=2;var h=Zy();(Rt!==r||Vt!==s)&&(Mr=null,Es(r,s));do try{O0();break}catch(f){Xy(r,f)}while(!0);if(Gd(),Me=l,Rc.current=h,mt!==null)throw Error(t(261));return Rt=null,Vt=0,Et}function O0(){for(;mt!==null;)e_(mt)}function L0(){for(;mt!==null&&!es();)e_(mt)}function e_(r){var s=i_(r.alternate,r,pn);r.memoizedProps=r.pendingProps,s===null?t_(r):mt=s,Pf.current=null}function t_(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=k0(l,s,pn),l!==null){mt=l;return}}else{if(l=x0(l,s),l!==null){l.flags&=32767,mt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Et=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=r}while(s!==null);Et===0&&(Et=5)}function Is(r,s,l){var h=Ne,f=An.transition;try{An.transition=null,Ne=1,M0(r,s,l,h)}finally{An.transition=f,Ne=h}return null}function M0(r,s,l,h){do zo();while(wi!==null);if((Me&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=l.lanes|l.childLanes;if(Id(r,m),r===Rt&&(mt=Rt=null,Vt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||xc||(xc=!0,s_(ts,function(){return zo(),null})),m=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||m){m=An.transition,An.transition=null;var v=Ne;Ne=1;var S=Me;Me|=4,Pf.current=null,b0(r,l),Wy(l,r),r0(Od),Pr=!!Vd,Od=Vd=null,r.current=l,D0(l),Tr(),Me=S,Ne=v,An.transition=m}else r.current=l;if(xc&&(xc=!1,wi=r,Cc=f),m=r.pendingLanes,m===0&&(Ii=null),ju(l.stateNode),nn(r,Ye()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(kc)throw kc=!1,r=Cf,Cf=null,r;return(Cc&1)!==0&&r.tag!==0&&zo(),m=r.pendingLanes,(m&1)!==0?r===bf?Il++:(Il=0,bf=r):Il=0,yi(),null}function zo(){if(wi!==null){var r=Xn(Cc),s=An.transition,l=Ne;try{if(An.transition=null,Ne=16>r?16:r,wi===null)var h=!1;else{if(r=wi,wi=null,Cc=0,(Me&6)!==0)throw Error(t(331));var f=Me;for(Me|=4,le=r.current;le!==null;){var m=le,v=m.child;if((le.flags&16)!==0){var S=m.deletions;if(S!==null){for(var x=0;x<S.length;x++){var B=S[x];for(le=B;le!==null;){var Q=le;switch(Q.tag){case 0:case 11:case 15:_l(8,Q,m)}var Y=Q.child;if(Y!==null)Y.return=Q,le=Y;else for(;le!==null;){Q=le;var G=Q.sibling,oe=Q.return;if(jy(Q),Q===B){le=null;break}if(G!==null){G.return=oe,le=G;break}le=oe}}}var ue=m.alternate;if(ue!==null){var he=ue.child;if(he!==null){ue.child=null;do{var dt=he.sibling;he.sibling=null,he=dt}while(he!==null)}}le=m}}if((m.subtreeFlags&2064)!==0&&v!==null)v.return=m,le=v;else e:for(;le!==null;){if(m=le,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:_l(9,m,m.return)}var M=m.sibling;if(M!==null){M.return=m.return,le=M;break e}le=m.return}}var D=r.current;for(le=D;le!==null;){v=le;var U=v.child;if((v.subtreeFlags&2064)!==0&&U!==null)U.return=v,le=U;else e:for(v=D;le!==null;){if(S=le,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Ac(9,S)}}catch(de){lt(S,S.return,de)}if(S===v){le=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,le=Z;break e}le=S.return}}if(Me=f,yi(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(ns,r)}catch{}h=!0}return h}finally{Ne=l,An.transition=s}}return!1}function n_(r,s,l){s=Fo(l,s),s=Ey(r,s,1),r=vi(r,s,1),s=Ht(),r!==null&&(os(r,1,s),nn(r,s))}function lt(r,s,l){if(r.tag===3)n_(r,r,l);else for(;s!==null;){if(s.tag===3){n_(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ii===null||!Ii.has(h))){r=Fo(l,r),r=Iy(s,r,1),s=vi(s,r,1),r=Ht(),s!==null&&(os(s,1,r),nn(s,r));break}}s=s.return}}function F0(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Ht(),r.pingedLanes|=r.suspendedLanes&l,Rt===r&&(Vt&l)===l&&(Et===4||Et===3&&(Vt&130023424)===Vt&&500>Ye()-xf?Es(r,0):kf|=l),nn(r,s)}function r_(r,s){s===0&&((r.mode&1)===0?s=1:(s=ai,ai<<=1,(ai&130023424)===0&&(ai=4194304)));var l=Ht();r=Vr(r,s),r!==null&&(os(r,s,l),nn(r,l))}function U0(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),r_(r,l)}function j0(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),r_(r,l)}var i_;i_=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||Xt.current)en=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return en=!1,P0(r,s,l);en=(r.flags&131072)!==0}else en=!1,et&&(s.flags&1048576)!==0&&Lg(s,lc,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Tc(r,s),r=s.pendingProps;var f=Co(s,Ft.current);Oo(s,l),f=lf(null,s,h,r,f,l);var m=uf();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(h)?(m=!0,sc(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Xd(s),f.updater=pc,s.stateNode=f,f._reactInternals=s,ef(s,h,r,l),s=yf(null,s,h,!0,m,l)):(s.tag=0,et&&m&&zd(s),Kt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Tc(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=z0(h),r=Fn(h,r),f){case 0:s=gf(null,s,h,r,l);break e;case 1:s=Cy(null,s,h,r,l);break e;case 11:s=Ay(null,s,h,r,l);break e;case 14:s=Ry(null,s,h,Fn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Fn(h,f),gf(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Fn(h,f),Cy(r,s,h,f,l);case 3:e:{if(by(s),r===null)throw Error(t(387));h=s.pendingProps,m=s.memoizedState,f=m.element,zg(r,s),fc(s,h,null,l);var v=s.memoizedState;if(h=v.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Fo(Error(t(423)),s),s=Dy(r,s,h,l,f);break e}else if(h!==f){f=Fo(Error(t(424)),s),s=Dy(r,s,h,l,f);break e}else for(fn=pi(s.stateNode.containerInfo.firstChild),dn=s,et=!0,Mn=null,l=Jg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(No(),h===f){s=Lr(r,s,l);break e}Kt(r,s,h,l)}s=s.child}return s;case 5:return Xg(s),r===null&&Wd(s),h=s.type,f=s.pendingProps,m=r!==null?r.memoizedProps:null,v=f.children,Ld(h,f)?v=null:m!==null&&Ld(h,m)&&(s.flags|=32),xy(r,s),Kt(r,s,v,l),s.child;case 6:return r===null&&Wd(s),null;case 13:return Ny(r,s,l);case 4:return tf(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Lo(s,null,h,l):Kt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Fn(h,f),Ay(r,s,h,f,l);case 7:return Kt(r,s,s.pendingProps,l),s.child;case 8:return Kt(r,s,s.pendingProps.children,l),s.child;case 12:return Kt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,m=s.memoizedProps,v=f.value,Qe(cc,h._currentValue),h._currentValue=v,m!==null)if(Ln(m.value,v)){if(m.children===f.children&&!Xt.current){s=Lr(r,s,l);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var S=m.dependencies;if(S!==null){v=m.child;for(var x=S.firstContext;x!==null;){if(x.context===h){if(m.tag===1){x=Or(-1,l&-l),x.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var Q=B.pending;Q===null?x.next=x:(x.next=Q.next,Q.next=x),B.pending=x}}m.lanes|=l,x=m.alternate,x!==null&&(x.lanes|=l),Yd(m.return,l,s),S.lanes|=l;break}x=x.next}}else if(m.tag===10)v=m.type===s.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=l,S=v.alternate,S!==null&&(S.lanes|=l),Yd(v,l,s),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===s){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}Kt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Oo(s,l),f=Tn(f),h=h(f),s.flags|=1,Kt(r,s,h,l),s.child;case 14:return h=s.type,f=Fn(h,s.pendingProps),f=Fn(h.type,f),Ry(r,s,h,f,l);case 15:return Py(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Fn(h,f),Tc(r,s),s.tag=1,Zt(h)?(r=!0,sc(s)):r=!1,Oo(s,l),Hg(s,h,f),ef(s,h,f,l),yf(null,s,h,!0,r,l);case 19:return Oy(r,s,l);case 22:return ky(r,s,l)}throw Error(t(156,s.tag))};function s_(r,s){return Fa(r,s)}function B0(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(r,s,l,h){return new B0(r,s,l,h)}function Mf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function z0(r){if(typeof r=="function")return Mf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===O)return 11;if(r===St)return 14}return 2}function Ai(r,s){var l=r.alternate;return l===null?(l=Rn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Vc(r,s,l,h,f,m){var v=2;if(h=r,typeof r=="function")Mf(r)&&(v=1);else if(typeof r=="string")v=5;else e:switch(r){case P:return ws(l.children,f,m,s);case T:v=8,f|=8;break;case k:return r=Rn(12,l,s,f|2),r.elementType=k,r.lanes=m,r;case R:return r=Rn(13,l,s,f),r.elementType=R,r.lanes=m,r;case Ge:return r=Rn(19,l,s,f),r.elementType=Ge,r.lanes=m,r;case Ze:return Oc(l,f,m,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:v=10;break e;case b:v=9;break e;case O:v=11;break e;case St:v=14;break e;case Lt:v=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Rn(v,l,s,f),s.elementType=r,s.type=h,s.lanes=m,s}function ws(r,s,l,h){return r=Rn(7,r,h,s),r.lanes=l,r}function Oc(r,s,l,h){return r=Rn(22,r,h,s),r.elementType=Ze,r.lanes=l,r.stateNode={isHidden:!1},r}function Ff(r,s,l){return r=Rn(6,r,null,s),r.lanes=l,r}function Uf(r,s,l){return s=Rn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function $0(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$a(0),this.expirationTimes=$a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function jf(r,s,l,h,f,m,v,S,x){return r=new $0(r,s,l,S,x),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Rn(3,null,null,s),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xd(m),r}function q0(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function o_(r){if(!r)return gi;r=r._reactInternals;e:{if(Vn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(Zt(l))return Ng(r,l,s)}return s}function a_(r,s,l,h,f,m,v,S,x){return r=jf(l,h,!0,r,f,m,v,S,x),r.context=o_(null),l=r.current,h=Ht(),f=Ti(l),m=Or(h,f),m.callback=s??null,vi(l,m,f),r.current.lanes=f,os(r,f,h),nn(r,h),r}function Lc(r,s,l,h){var f=s.current,m=Ht(),v=Ti(f);return l=o_(l),s.context===null?s.context=l:s.pendingContext=l,s=Or(m,v),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=vi(f,s,v),r!==null&&(Bn(r,f,v,m),dc(r,f,v)),v}function Mc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function l_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Bf(r,s){l_(r,s),(r=r.alternate)&&l_(r,s)}function W0(){return null}var u_=typeof reportError=="function"?reportError:function(r){console.error(r)};function zf(r){this._internalRoot=r}Fc.prototype.render=zf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Lc(r,s,null,null)},Fc.prototype.unmount=zf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;vs(function(){Lc(null,r,null,null)}),s[Cr]=null}};function Fc(r){this._internalRoot=r}Fc.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ha();r={blockedOn:null,target:r,priority:s};for(var l=0;l<ln.length&&s!==0&&s<ln[l].priority;l++);ln.splice(l,0,r),l===0&&po(r)}};function $f(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Uc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function c_(){}function K0(r,s,l,h,f){if(f){if(typeof h=="function"){var m=h;h=function(){var B=Mc(v);m.call(B)}}var v=a_(s,h,r,0,null,!1,!1,"",c_);return r._reactRootContainer=v,r[Cr]=v.current,sl(r.nodeType===8?r.parentNode:r),vs(),v}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var S=h;h=function(){var B=Mc(x);S.call(B)}}var x=jf(r,0,!1,null,null,!1,!1,"",c_);return r._reactRootContainer=x,r[Cr]=x.current,sl(r.nodeType===8?r.parentNode:r),vs(function(){Lc(s,x,l,h)}),x}function jc(r,s,l,h,f){var m=l._reactRootContainer;if(m){var v=m;if(typeof f=="function"){var S=f;f=function(){var x=Mc(v);S.call(x)}}Lc(s,v,r,f)}else v=K0(l,s,r,f,h);return Mc(v)}Wa=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=je(s.pendingLanes);l!==0&&(qa(s,l|1),nn(s,Ye()),(Me&6)===0&&(Bo=Ye()+500,yi()))}break;case 13:vs(function(){var h=Vr(r,1);if(h!==null){var f=Ht();Bn(h,r,1,f)}}),Bf(r,1)}},ho=function(r){if(r.tag===13){var s=Vr(r,134217728);if(s!==null){var l=Ht();Bn(s,r,134217728,l)}Bf(r,134217728)}},Ka=function(r){if(r.tag===13){var s=Ti(r),l=Vr(r,s);if(l!==null){var h=Ht();Bn(l,r,s,h)}Bf(r,s)}},Ha=function(){return Ne},Ga=function(r,s){var l=Ne;try{return Ne=r,s()}finally{Ne=l}},Er=function(r,s,l){switch(s){case"input":if(Yi(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=rc(h);if(!f)throw Error(t(90));xa(h),Yi(h,f)}}}break;case"textarea":ku(r,l);break;case"select":s=l.value,s!=null&&Dn(r,!!l.multiple,s,!1)}},bu=Vf,Du=vs;var H0={usingClientEntryPoint:!1,Events:[ll,ko,rc,ri,ii,Vf]},wl={findFiberByHostInstance:hs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},G0={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Uu(r),r===null?null:r.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||W0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{ns=Bc.inject(G0),on=Bc}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H0,rn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(s))throw Error(t(200));return q0(r,s,null,l)},rn.createRoot=function(r,s){if(!$f(r))throw Error(t(299));var l=!1,h="",f=u_;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=jf(r,1,!1,null,null,l,!1,h,f),r[Cr]=s.current,sl(r.nodeType===8?r.parentNode:r),new zf(s)},rn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Uu(s),r=r===null?null:r.stateNode,r},rn.flushSync=function(r){return vs(r)},rn.hydrate=function(r,s,l){if(!Uc(s))throw Error(t(200));return jc(null,r,s,!0,l)},rn.hydrateRoot=function(r,s,l){if(!$f(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,m="",v=u_;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),s=a_(s,null,r,1,l??null,f,!1,m,v),r[Cr]=s.current,sl(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new Fc(s)},rn.render=function(r,s,l){if(!Uc(s))throw Error(t(200));return jc(null,r,s,!1,l)},rn.unmountComponentAtNode=function(r){if(!Uc(r))throw Error(t(40));return r._reactRootContainer?(vs(function(){jc(null,null,r,!1,function(){r._reactRootContainer=null,r[Cr]=null})}),!0):!1},rn.unstable_batchedUpdates=Vf,rn.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!Uc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return jc(r,s,l,!1,h)},rn.version="18.2.0-next-9e3b772b8-20220608",rn}var __;function iS(){if(__)return Kf.exports;__=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Kf.exports=rS(),Kf.exports}var v_;function sS(){if(v_)return zc;v_=1;var i=iS();return zc.createRoot=i.createRoot,zc.hydrateRoot=i.hydrateRoot,zc}var oS=sS();const aS="modulepreload",lS=function(i){return"/devicattles/"+i},E_={},ot=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let p=function(y){return Promise.all(y.map(E=>Promise.resolve(E).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=p(t.map(y=>{if(y=lS(y),y in E_)return;E_[y]=!0;const E=y.endsWith(".css"),w=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const A=document.createElement("link");if(A.rel=E?"stylesheet":aS,E||(A.as="script"),A.crossOrigin="",A.href=y,d&&A.setAttribute("nonce",d),document.head.appendChild(A),E)return new Promise((j,H)=>{A.addEventListener("load",j),A.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${y}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},SE=ve.createContext(),I_={light:{bg:{primary:"#ffffff",secondary:"#f9fafb",tertiary:"#f3f4f6",elevated:"#ffffff"},text:{primary:"#1f2937",secondary:"#6b7280",tertiary:"#9ca3af",inverse:"#ffffff"},border:{primary:"#e5e7eb",secondary:"#d1d5db",focus:"#3b82f6"},action:{primary:"#3b82f6",primaryHover:"#2563eb",success:"#10b981",successHover:"#059669",danger:"#ef4444",dangerHover:"#dc2626",warning:"#f59e0b",warningHover:"#d97706",purple:"#8b5cf6",purpleHover:"#7c3aed"},shadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},chart:{primary:"#3b82f6",secondary:"#10b981",tertiary:"#f59e0b",quaternary:"#ef4444",quinary:"#8b5cf6",senary:"#06b6d4"}},dark:{bg:{primary:"#111827",secondary:"#1f2937",tertiary:"#374151",elevated:"#1f2937"},text:{primary:"#f9fafb",secondary:"#d1d5db",tertiary:"#9ca3af",inverse:"#1f2937"},border:{primary:"#374151",secondary:"#4b5563",focus:"#60a5fa"},action:{primary:"#60a5fa",primaryHover:"#3b82f6",success:"#34d399",successHover:"#10b981",danger:"#f87171",dangerHover:"#ef4444",warning:"#fbbf24",warningHover:"#f59e0b",purple:"#a78bfa",purpleHover:"#8b5cf6"},shadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.3)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.4)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.5)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.6)"},chart:{primary:"#60a5fa",secondary:"#34d399",tertiary:"#fbbf24",quaternary:"#f87171",quinary:"#a78bfa",senary:"#22d3ee"}}},uS=({children:i})=>{const[e,t]=ve.useState(()=>{const u=localStorage.getItem("farm-theme");return u==="dark"||u==="light"?u:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});ve.useEffect(()=>{localStorage.setItem("farm-theme",e),document.documentElement.setAttribute("data-theme",e);const u=I_[e],d=document.documentElement;d.style.setProperty("--bg-primary",u.bg.primary),d.style.setProperty("--bg-secondary",u.bg.secondary),d.style.setProperty("--bg-tertiary",u.bg.tertiary),d.style.setProperty("--bg-elevated",u.bg.elevated),d.style.setProperty("--text-primary",u.text.primary),d.style.setProperty("--text-secondary",u.text.secondary),d.style.setProperty("--text-tertiary",u.text.tertiary),d.style.setProperty("--text-inverse",u.text.inverse),d.style.setProperty("--border-primary",u.border.primary),d.style.setProperty("--border-secondary",u.border.secondary),d.style.setProperty("--border-focus",u.border.focus),d.style.setProperty("--action-primary",u.action.primary),d.style.setProperty("--action-primary-hover",u.action.primaryHover),d.style.setProperty("--action-success",u.action.success),d.style.setProperty("--action-success-hover",u.action.successHover),d.style.setProperty("--action-danger",u.action.danger),d.style.setProperty("--action-danger-hover",u.action.dangerHover),d.style.setProperty("--action-warning",u.action.warning),d.style.setProperty("--action-warning-hover",u.action.warningHover),d.style.setProperty("--action-purple",u.action.purple),d.style.setProperty("--action-purple-hover",u.action.purpleHover),d.style.setProperty("--shadow-sm",u.shadow.sm),d.style.setProperty("--shadow-md",u.shadow.md),d.style.setProperty("--shadow-lg",u.shadow.lg),d.style.setProperty("--shadow-xl",u.shadow.xl),d.style.setProperty("--chart-primary",u.chart.primary),d.style.setProperty("--chart-secondary",u.chart.secondary),d.style.setProperty("--chart-tertiary",u.chart.tertiary),d.style.setProperty("--chart-quaternary",u.chart.quaternary),d.style.setProperty("--chart-quinary",u.chart.quinary),d.style.setProperty("--chart-senary",u.chart.senary)},[e]),ve.useEffect(()=>{const u=window.matchMedia("(prefers-color-scheme: dark)"),d=p=>{localStorage.getItem("farm-theme-manual")||t(p.matches?"dark":"light")};return u.addEventListener("change",d),()=>u.removeEventListener("change",d)},[]);const n=()=>{t(e==="light"?"dark":"light"),localStorage.setItem("farm-theme-manual","true")},o=u=>{(u==="light"||u==="dark")&&(t(u),localStorage.setItem("farm-theme-manual","true"))},a=()=>I_[e];return N.jsx(SE.Provider,{value:{theme:e,toggleTheme:n,setThemeMode:o,getThemeColors:a},children:i})},AE=()=>{const i=ve.useContext(SE);if(!i)throw new Error("useTheme must be used within a ThemeProvider");return i},cS=({style:i})=>{const{theme:e,toggleTheme:t}=AE();return N.jsxs("button",{onClick:t,style:{padding:"8px 16px",background:e==="dark"?"#374151":"#f3f4f6",color:e==="dark"?"#f9fafb":"#1f2937",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",...i},title:`Switch to ${e==="light"?"dark":"light"} mode`,children:[e==="light"?"":"",e==="light"?"Dark Mode":"Light Mode"]})},hS="devinsfarm:offline:syncqueue",dS="devinsfarm:offline:state";function fS(){try{return JSON.parse(localStorage.getItem(hS)||"[]")}catch{return[]}}function Qf(i){try{return localStorage.setItem(dS,JSON.stringify({isOffline:i,timestamp:Date.now()})),!0}catch{return!1}}function pS(i){const e=()=>{Qf(!1),i?.(!1)},t=()=>{Qf(!0),i?.(!0)};window.addEventListener("online",e),window.addEventListener("offline",t);const n=!navigator.onLine;return Qf(n),i?.(n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}function mS(){const i=fS(),e={animals:0,tasks:0,finance:0,other:0};return i.forEach(t=>{t.entity==="animals"?e.animals++:t.entity==="tasks"?e.tasks++:t.entity==="finance"?e.finance++:e.other++}),{total:i.length,grouped:e,oldest:i[0]?.timestamp||null,newest:i[i.length-1]?.timestamp||null}}function gS(){const[i,e]=ve.useState(!navigator.onLine),[t,n]=ve.useState({total:0}),[o,a]=ve.useState(!1);return ve.useEffect(()=>{const u=pS(y=>{e(y)}),d=()=>{n(mS())};d();const p=setInterval(d,5e3);return()=>{u(),clearInterval(p)}},[]),N.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,fontSize:"13px",fontWeight:"500",maxWidth:"320px"},children:[i&&N.jsx("div",{style:{backgroundColor:"#fee2e2",borderLeft:"4px solid #dc2626",color:"#991b1b",padding:"10px 12px",borderRadius:"4px",marginBottom:"8px",cursor:"pointer"},onClick:()=>a(!o),title:"Click for details",children:N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[N.jsx("span",{style:{fontSize:"16px"},children:""}),N.jsxs("div",{children:[N.jsx("div",{children:"You're offline"}),N.jsx("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:"Changes saved locally"})]})]})}),t.total>0&&N.jsx("div",{style:{backgroundColor:"#fef3c7",borderLeft:"4px solid #f59e0b",color:"#92400e",padding:"10px 12px",borderRadius:"4px",cursor:"pointer",marginBottom:"8px"},onClick:()=>a(!o),title:"Click for details",children:N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[N.jsx("span",{style:{fontSize:"16px"},children:""}),N.jsxs("div",{children:[N.jsxs("div",{children:[t.total," changes pending sync"]}),t.grouped.animals>0&&N.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:[" ",t.grouped.animals," animals",t.grouped.tasks>0&&`   ${t.grouped.tasks} tasks`,t.grouped.finance>0&&`   ${t.grouped.finance} finance`]})]})]})}),!i&&t.total===0&&N.jsx("div",{style:{backgroundColor:"#e0f2fe",borderLeft:"4px solid #0ea5e9",color:"#0369a1",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},onClick:()=>a(!o),title:"Click for offline status info",children:N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[N.jsx("span",{style:{fontSize:"14px"},children:""}),N.jsxs("div",{children:[N.jsx("div",{style:{fontWeight:"600"},children:"Connected"}),N.jsx("div",{style:{fontSize:"11px",opacity:.8},children:"All data synced"})]})]})}),o&&N.jsxs("div",{style:{backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"4px",padding:"10px",marginTop:"8px",fontSize:"12px"},children:[N.jsx("div",{style:{fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Status Info"}),N.jsx("div",{style:{marginBottom:"6px",color:"#666"},children:i?" Offline Mode":" Online"}),i&&N.jsx("div",{style:{marginBottom:"6px",color:"#666"},children:" All data stored locally in browser"}),t.total>0&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{style:{marginBottom:"6px",color:"#666"},children:[" Pending: ",t.total," operation",t.total!==1?"s":""]}),t.grouped.animals>0&&N.jsxs("div",{style:{marginBottom:"3px",color:"#999",fontSize:"11px"},children:[" ",t.grouped.animals," animal",t.grouped.animals!==1?"s":""]}),t.grouped.tasks>0&&N.jsxs("div",{style:{marginBottom:"3px",color:"#999",fontSize:"11px"},children:[" ",t.grouped.tasks," task",t.grouped.tasks!==1?"s":""]}),t.grouped.finance>0&&N.jsxs("div",{style:{marginBottom:"3px",color:"#999",fontSize:"11px"},children:[" ",t.grouped.finance," finance transaction",t.grouped.finance!==1?"s":""]}),t.oldest&&N.jsxs("div",{style:{marginTop:"6px",color:"#999",fontSize:"11px",borderTop:"1px solid #ddd",paddingTop:"6px"},children:["Since: ",new Date(t.oldest).toLocaleTimeString()]})]}),!i&&t.total===0&&N.jsx("div",{style:{color:"#059669",fontWeight:"500"},children:" Connected and synced"})]})]})}const ph="devinsfarm:auth",pp="devinsfarm:users",RE={MANAGER:{name:"Farm Manager",permissions:["read","write","delete","manage_users","view_financials"]},WORKER:{name:"Farm Worker",permissions:["read","write"]},VETERINARIAN:{name:"Veterinarian",permissions:["read","write","view_health"]},VIEWER:{name:"Viewer",permissions:["read"]}},PE=[{id:"user-001",username:"admin",password:"admin123",name:"Farm Administrator",role:"MANAGER",email:"admin@devinsfarm.com",createdAt:new Date().toISOString()},{id:"user-002",username:"worker",password:"worker123",name:"John Worker",role:"WORKER",email:"worker@devinsfarm.com",createdAt:new Date().toISOString()},{id:"user-003",username:"vet",password:"vet123",name:"Dr. Sarah Wilson",role:"VETERINARIAN",email:"vet@devinsfarm.com",createdAt:new Date().toISOString()}];function Zp(){localStorage.getItem(pp)||localStorage.setItem(pp,JSON.stringify(PE))}function yS(){Zp();const i=localStorage.getItem(pp);return i?JSON.parse(i):PE}function qb(i,e){Zp();const n=yS().find(a=>a.username===i&&a.password===e);if(!n)return{success:!1,error:"Invalid username or password"};const o={userId:n.id,username:n.username,name:n.name,role:n.role,email:n.email,loginTime:new Date().toISOString(),lastActivity:new Date().toISOString()};return localStorage.setItem(ph,JSON.stringify(o)),{success:!0,user:o}}function _S(){return localStorage.removeItem(ph),{success:!0}}function Ys(){const i=localStorage.getItem(ph);if(!i)return null;const e=JSON.parse(i);return e.lastActivity=new Date().toISOString(),localStorage.setItem(ph,JSON.stringify(e)),e}function vS(){return Ys()!==null}function Wb(i){const e=Ys();if(!e)return!1;const t=RE[e.role];return t&&t.permissions.includes(i)}function ES(){const i=Ys();return i?i.name:"Guest"}function IS(){const i=Ys();if(!i)return"Guest";const e=RE[i.role];return e?e.name:i.role}typeof window<"u"&&Zp();const em="devinsfarm:audit",w_=1e3,Pn={CREATE:"create",UPDATE:"update",DELETE:"delete",LOGIN:"login",LOGOUT:"logout",EXPORT:"export",IMPORT:"import",PRINT:"print"},Uh={ANIMAL:"animal",TASK:"task",TRANSACTION:"transaction",INVENTORY:"inventory",EQUIPMENT:"equipment",CROP:"crop",TREATMENT:"treatment",MEASUREMENT:"measurement",BREEDING:"breeding",MILK_YIELD:"milk_yield",DIET:"diet",RATION:"ration",USER:"user",GROUP:"group",SYSTEM:"system"};function jh(i,e,t,n={}){try{const o=Ys(),a={id:"audit-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString(),action:i,entityType:e,entityId:t,userId:o?.userId||"anonymous",userName:o?.name||"Anonymous",userRole:o?.role||"guest",details:n,ipAddress:"client-side",userAgent:navigator.userAgent},u=lu();return u.unshift(a),u.length>w_&&u.splice(w_),localStorage.setItem(em,JSON.stringify(u)),a}catch(o){return console.error("Failed to log audit entry:",o),null}}function lu(i={}){try{const e=localStorage.getItem(em);let t=e?JSON.parse(e):[];return i.action&&(t=t.filter(n=>n.action===i.action)),i.entityType&&(t=t.filter(n=>n.entityType===i.entityType)),i.entityId&&(t=t.filter(n=>n.entityId===i.entityId)),i.userId&&(t=t.filter(n=>n.userId===i.userId)),i.startDate&&(t=t.filter(n=>new Date(n.timestamp)>=new Date(i.startDate))),i.endDate&&(t=t.filter(n=>new Date(n.timestamp)<=new Date(i.endDate))),t}catch(e){return console.error("Failed to get audit log:",e),[]}}function Kb(){const i=lu(),e={total:i.length,byAction:{},byEntity:{},byUser:{},last24Hours:0,lastWeek:0},t=Date.now(),n=1440*60*1e3,o=7*n;return i.forEach(a=>{e.byAction[a.action]=(e.byAction[a.action]||0)+1,e.byEntity[a.entityType]=(e.byEntity[a.entityType]||0)+1,e.byUser[a.userName]=(e.byUser[a.userName]||0)+1;const u=new Date(a.timestamp).getTime();t-u<n&&e.last24Hours++,t-u<o&&e.lastWeek++}),e}function Hb(){const i=Ys();return!i||i.role!=="MANAGER"?{success:!1,error:"Permission denied"}:(localStorage.removeItem(em),jh(Pn.DELETE,Uh.SYSTEM,"audit-log",{message:"Audit log cleared",previousEntries:lu().length}),{success:!0})}function Gb(){const i=lu(),e=["Timestamp","Action","Entity Type","Entity ID","User","Role","Details"],t=i.map(o=>[o.timestamp,o.action,o.entityType,o.entityId,o.userName,o.userRole,JSON.stringify(o.details)]),n=[e,...t].map(o=>o.map(a=>{const u=String(a||"");return u.includes(",")||u.includes('"')||u.includes(`
`)?`"${u.replace(/"/g,'""')}"`:u}).join(",")).join(`
`);return jh(Pn.EXPORT,Uh.SYSTEM,"audit-log",{entries:i.length}),n}function Qb(){const i=lu();return jh(Pn.EXPORT,Uh.SYSTEM,"audit-log",{entries:i.length,format:"json"}),i}function Yb(i){const t=new Date(i.timestamp).toLocaleString();let n="";switch(i.action){case Pn.CREATE:n=`Created ${i.entityType} (${i.entityId})`;break;case Pn.UPDATE:n=`Updated ${i.entityType} (${i.entityId})`;break;case Pn.DELETE:n=`Deleted ${i.entityType} (${i.entityId})`;break;case Pn.LOGIN:n="Logged in";break;case Pn.LOGOUT:n="Logged out";break;case Pn.EXPORT:n=`Exported ${i.entityType} data`;break;case Pn.IMPORT:n=`Imported ${i.entityType} data`;break;case Pn.PRINT:n=`Printed ${i.entityType} records`;break;default:n=`${i.action} ${i.entityType}`}return{time:t,description:n,user:i.userName,role:i.userRole,details:i.details}}const wS="devinsfarm:app:settings",Yf={requireAuth:!1,autoBackup:!0,backupFrequency:7,defaultUser:{name:"Farm Owner",role:"MANAGER"}};function kE(){try{const i=localStorage.getItem(wS);return i?{...Yf,...JSON.parse(i)}:Yf}catch{return Yf}}function TS(){return kE().requireAuth}function SS(){return kE().defaultUser}const wa="devinsfarm:notifications",xE="devinsfarm:notification:settings",Bh="devinsfarm:reminders",Jf={enabled:!0,treatmentReminders:!0,breedingReminders:!0,taskReminders:!0,inventoryAlerts:!0,healthAlerts:!0,reminderLeadTime:24,lowInventoryThreshold:10,criticalInventoryThreshold:5,soundEnabled:!0},qn={TREATMENT:"treatment",BREEDING:"breeding",TASK:"task",INVENTORY:"inventory",HEALTH:"health",GENERAL:"general"},yn={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent"};async function Jb(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.warn("Browser does not support notifications"),!1)}function AS(){return"Notification"in window&&Notification.permission==="granted"}function tm(){try{const i=localStorage.getItem(xE);return i?{...Jf,...JSON.parse(i)}:Jf}catch(i){return console.error("Error loading notification settings:",i),Jf}}function Xb(i){try{const t={...tm(),...i};return localStorage.setItem(xE,JSON.stringify(t)),t}catch(e){return console.error("Error saving notification settings:",e),i}}function Wn(i,e={}){const t=tm();if(!t.enabled||!AS())return T_(i,e),null;const n=new Notification(i,{icon:"/icon-192x192.png",badge:"/icon-192x192.png",vibrate:[200,100,200],requireInteraction:e.priority===yn.URGENT,...e});return T_(i,e),t.soundEnabled&&PS(),n}function T_(i,e={}){try{const t=uu(),n={id:Date.now()+Math.random(),title:i,body:e.body||"",type:e.type||qn.GENERAL,priority:e.priority||yn.MEDIUM,timestamp:new Date().toISOString(),read:!1,data:e.data||{}};return t.unshift(n),t.length>100&&t.splice(100),localStorage.setItem(wa,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("newNotification",{detail:n})),n}catch(t){return console.error("Error adding notification:",t),null}}function uu(){try{const i=localStorage.getItem(wa);return i?JSON.parse(i):[]}catch(i){return console.error("Error loading notifications:",i),[]}}function RS(){return uu().filter(e=>!e.read).length}function Zb(i){try{const e=uu(),t=e.find(n=>n.id===i);return t&&(t.read=!0,localStorage.setItem(wa,JSON.stringify(e))),t}catch(e){return console.error("Error marking notification as read:",e),null}}function eD(){try{const i=uu();return i.forEach(e=>e.read=!0),localStorage.setItem(wa,JSON.stringify(i)),!0}catch(i){return console.error("Error marking all as read:",i),!1}}function tD(){try{return localStorage.setItem(wa,JSON.stringify([])),!0}catch(i){return console.error("Error clearing notifications:",i),!1}}function nD(i){try{const t=uu().filter(n=>n.id!==i);return localStorage.setItem(wa,JSON.stringify(t)),!0}catch(e){return console.error("Error deleting notification:",e),!1}}function PS(){try{const i=new(window.AudioContext||window.webkitAudioContext),e=i.createOscillator(),t=i.createGain();e.connect(t),t.connect(i.destination),e.frequency.value=800,e.type="sine",t.gain.setValueAtTime(.3,i.currentTime),t.gain.exponentialRampToValueAtTime(.01,i.currentTime+.5),e.start(i.currentTime),e.stop(i.currentTime+.5)}catch(i){console.error("Error playing notification sound:",i)}}function cu(){try{const i=localStorage.getItem(Bh);return i?JSON.parse(i):[]}catch(i){return console.error("Error loading reminders:",i),[]}}function rD(i){try{const e=cu(),t=e.find(n=>n.id===i);return t&&(t.dismissed=!0,localStorage.setItem(Bh,JSON.stringify(e))),t}catch(e){return console.error("Error dismissing reminder:",e),null}}function iD(i){try{const t=cu().filter(n=>n.id!==i);return localStorage.setItem(Bh,JSON.stringify(t)),!0}catch(e){return console.error("Error deleting reminder:",e),!1}}function S_(){const i=tm();if(!i.enabled)return[];const e=cu(),t=new Date,n=i.reminderLeadTime*60*60*1e3,o=e.filter(a=>a.notified||a.dismissed?!1:new Date(a.dueDate)-t<=n);return o.forEach(a=>{const d=new Date(a.dueDate)<t;Wn(d?` OVERDUE: ${a.title}`:` Reminder: ${a.title}`,{body:a.body,type:a.type,priority:d?yn.URGENT:a.priority,data:{reminderId:a.id,entityId:a.entityId,entityType:a.entityType}}),a.notified=!0}),o.length>0&&localStorage.setItem(Bh,JSON.stringify(e)),o}function sD(i=7){const e=cu(),t=new Date,n=new Date(t.getTime()+i*24*60*60*1e3);return e.filter(o=>!o.dismissed&&new Date(o.dueDate)<=n).sort((o,a)=>new Date(o.dueDate)-new Date(a.dueDate))}function oD(){const i=cu(),e=new Date;return i.filter(t=>!t.dismissed&&new Date(t.dueDate)<e).sort((t,n)=>new Date(t.dueDate)-new Date(n.dueDate))}function kS(){const i=setInterval(()=>{S_()},3e5);return S_(),i}function xS(i){i&&clearInterval(i)}const CS="devinsfarm",bS=1,DS={animals:"animals",transactions:"transactions",inventory:"inventory",equipment:"equipment",tasks:"tasks",crops:"crops",treatments:"treatments",measurements:"measurements",breeding:"breeding",milkYield:"milkYield",diets:"diets",rations:"rations"};let $c=null;async function NS(){return $c||(window.indexedDB?new Promise((i,e)=>{const t=indexedDB.open(CS,bS);t.onerror=()=>{console.error("IndexedDB error:",t.error),i(null)},t.onsuccess=()=>{$c=t.result,i($c)},t.onupgradeneeded=n=>{const o=n.target.result;Object.values(DS).forEach(a=>{o.objectStoreNames.contains(a)||o.createObjectStore(a,{keyPath:"id"})})}}):(console.warn("IndexedDB not available, falling back to localStorage"),null))}function zh(i,e=[]){try{return VS(i,e)}catch(t){return console.error("Load failed:",t),e}}function VS(i,e=[]){try{const t=`cattalytics:${i}`,n=localStorage.getItem(t);if(!n)return e;const o=JSON.parse(n);return Array.isArray(e)&&!Array.isArray(o)?(console.warn(`Expected array for ${i}, got ${typeof o}. Returning default.`),e):o}catch(t){return console.error("Failed to load from localStorage:",i,t),e}}typeof window<"u"&&NS().catch(i=>{console.warn("IndexedDB initialization failed:",i)});function OS(){try{const i=zh("treatments",[]);if(!Array.isArray(i)){console.warn("Treatments data is not an array:",typeof i);return}const e=new Date,t=new Date(e.getTime()+1440*60*1e3);i.forEach(n=>{if(n.nextDue){const o=new Date(n.nextDue);o.toDateString()===e.toDateString()&&Wn("Treatment Due Today",{body:`Treatment for ${n.animalName||n.animalId} is due today`,type:qn.TREATMENT,priority:yn.HIGH,data:{treatmentId:n.id,animalId:n.animalId}}),o.toDateString()===t.toDateString()&&Wn("Treatment Due Tomorrow",{body:`Treatment for ${n.animalName||n.animalId} is due tomorrow`,type:qn.TREATMENT,priority:yn.MEDIUM,data:{treatmentId:n.id,animalId:n.animalId}})}})}catch(i){console.error("Error checking treatment reminders:",i)}}function LS(){try{const i=zh("breeding",[]);if(!Array.isArray(i)){console.warn("Breeding data is not an array:",typeof i);return}const e=new Date,t=new Date(e.getTime()+1440*60*1e3);i.forEach(n=>{if(n.dueDate&&(n.status==="Pregnant"||n.status==="Confirmed")){const o=new Date(n.dueDate);if(o<e)Wn(" Breeding Overdue",{body:`${n.animalName||n.animalId} is overdue for birth (Due: ${o.toLocaleDateString()})`,type:qn.BREEDING,priority:yn.URGENT,data:{breedingId:n.id,animalId:n.animalId}});else if(o>=e&&o<=next7Days){const a=Math.ceil((o-e)/864e5);Wn("Birth Expected Soon",{body:`${n.animalName||n.animalId} expected to give birth in ${a} day(s)`,type:qn.BREEDING,priority:yn.HIGH,data:{breedingId:n.id,animalId:n.animalId}})}}})}catch(i){console.error("Error checking breeding reminders:",i)}}function MS(){try{const i=zh("tasks",[]);if(!Array.isArray(i)){console.warn("Tasks data is not an array:",typeof i);return}const e=new Date,t=new Date(e.getTime()+1440*60*1e3);i.forEach(n=>{if(n.dueDate&&n.status!=="Completed"){const o=new Date(n.dueDate);o<e?Wn(" Task Overdue",{body:`"${n.title}" is overdue`,type:qn.TASK,priority:yn.URGENT,data:{taskId:n.id}}):o.toDateString()===e.toDateString()?Wn("Task Due Today",{body:`"${n.title}" is due today`,type:qn.TASK,priority:yn.HIGH,data:{taskId:n.id}}):o.toDateString()===t.toDateString()&&Wn("Task Due Tomorrow",{body:`"${n.title}" is due tomorrow`,type:qn.TASK,priority:yn.MEDIUM,data:{taskId:n.id}})}})}catch(i){console.error("Error checking task reminders:",i)}}function FS(i=10,e=5){try{const t=zh("inventory",[]);if(!Array.isArray(t)){console.warn("Inventory data is not an array:",typeof t);return}t.forEach(n=>{const o=parseFloat(n.quantity)||0;o>0&&o<=e?Wn(" Critical Stock Alert",{body:`"${n.name}" is critically low (${o} ${n.unit||"units"} remaining)`,type:qn.INVENTORY,priority:yn.URGENT,data:{itemId:n.id}}):o>e&&o<=i?Wn("Low Stock Warning",{body:`"${n.name}" is running low (${o} ${n.unit||"units"} remaining)`,type:qn.INVENTORY,priority:yn.MEDIUM,data:{itemId:n.id}}):o<=0&&Wn(" Out of Stock",{body:`"${n.name}" is out of stock`,type:qn.INVENTORY,priority:yn.HIGH,data:{itemId:n.id}})})}catch(t){console.error("Error checking inventory alerts:",t)}}function A_(){OS(),LS(),MS(),FS()}const US=()=>{};var R_={};const CE=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let o=i.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jS=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const o=i[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const a=i[t++];e[n++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=i[t++],u=i[t++],d=i[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(p>>10)),e[n++]=String.fromCharCode(56320+(p&1023))}else{const a=i[t++],u=i[t++];e[n++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},bE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<i.length;o+=3){const a=i[o],u=o+1<i.length,d=u?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,E=a>>2,w=(a&3)<<4|d>>4;let A=(d&15)<<2|y>>6,j=y&63;p||(j=64,u||(A=64)),n.push(t[E],t[w],t[A],t[j])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(CE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):jS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<i.length;){const a=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const w=o<i.length?t[i.charAt(o)]:64;if(++o,a==null||d==null||y==null||w==null)throw new BS;const A=a<<2|d>>4;if(n.push(A),y!==64){const j=d<<4&240|y>>2;if(n.push(j),w!==64){const H=y<<6&192|w;n.push(H)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class BS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zS=function(i){const e=CE(i);return bE.encodeByteArray(e,!0)},DE=function(i){return zS(i).replace(/\./g,"")},NE=function(i){try{return bE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const $S=()=>VE().__FIREBASE_DEFAULTS__,qS=()=>{if(typeof process>"u"||typeof R_>"u")return;const i=R_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},WS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&NE(i[1]);return e&&JSON.parse(e)},$h=()=>{try{return US()||$S()||qS()||WS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},KS=i=>$h()?.emulatorHosts?.[i],OE=()=>$h()?.config,LE=i=>$h()?.[`_${i}`];class HS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function Ta(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ME(i){return(await fetch(i,{credentials:"include"})).ok}const Ll={};function GS(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ll))Ll[e]?i.emulator.push(e):i.prod.push(e);return i}function QS(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let P_=!1;function YS(i,e){if(typeof window>"u"||typeof document>"u"||!Ta(window.location.host)||Ll[i]===e||Ll[i]||P_)return;Ll[i]=e;function t(A){return`__firebase__banner__${A}`}const n="__firebase__banner",a=GS().prod.length>0;function u(){const A=document.getElementById(n);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,j){A.setAttribute("width","24"),A.setAttribute("id",j),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{P_=!0,u()},A}function E(A,j){A.setAttribute("id",j),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function w(){const A=QS(n),j=t("text"),H=document.getElementById(j)||document.createElement("span"),W=t("learnmore"),$=document.getElementById(W)||document.createElement("a"),te=t("preprendIcon"),se=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ae=A.element;d(ae),E($,W);const Ie=y();p(se,te),ae.append(se,H,$,Ie),document.body.appendChild(ae)}a?(H.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function FE(){const i=$h()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function e1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function t1(){const i=It();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function UE(){return!FE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jE(){return!FE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function BE(){try{return typeof indexedDB=="object"}catch{return!1}}function n1(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const r1="FirebaseError";class Hr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=r1,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?i1(a,n):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Hr(o,d,n)}}function i1(i,e){return i.replace(s1,(t,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const s1=/\{\$([^}]+)}/g;function o1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ms(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const o of t){if(!n.includes(o))return!1;const a=i[o],u=e[o];if(k_(a)&&k_(u)){if(!Ms(a,u))return!1}else if(a!==u)return!1}for(const o of n)if(!t.includes(o))return!1;return!0}function k_(i){return i!==null&&typeof i=="object"}function du(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function xl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[o,a]=n.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Cl(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function a1(i,e){const t=new l1(i,e);return t.subscribe.bind(t)}class l1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");u1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=Xf),o.error===void 0&&(o.error=Xf),o.complete===void 0&&(o.complete=Xf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u1(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Xf(){}function wt(i){return i&&i._delegate?i._delegate:i}class Fs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ss="[DEFAULT]";class c1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new HS;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(n)return null;throw o}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d1(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});n.resolve(a)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);n===d&&u.resolve(o)}return o}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(n)??new Set;o.add(e),this.onInitCallbacks.set(n,o);const a=this.instances.get(n);return a&&e(a,n),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:h1(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h1(i){return i===Ss?void 0:i}function d1(i){return i.instantiationMode==="EAGER"}class f1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new c1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var be;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(be||(be={}));const p1={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},m1=be.INFO,g1={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},y1=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),o=g1[e];if(o)console[o](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nm{constructor(e){this.name=e,this._logLevel=m1,this._logHandler=y1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const _1=(i,e)=>e.some(t=>i instanceof t);let x_,C_;function v1(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zE=new WeakMap,mp=new WeakMap,$E=new WeakMap,Zf=new WeakMap,rm=new WeakMap;function I1(i){const e=new Promise((t,n)=>{const o=()=>{i.removeEventListener("success",a),i.removeEventListener("error",u)},a=()=>{t(Mi(i.result)),o()},u=()=>{n(i.error),o()};i.addEventListener("success",a),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&zE.set(t,i)}).catch(()=>{}),rm.set(e,i),e}function w1(i){if(mp.has(i))return;const e=new Promise((t,n)=>{const o=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",u),i.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{n(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",a),i.addEventListener("error",u),i.addEventListener("abort",u)});mp.set(i,e)}let gp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return mp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$E.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mi(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function T1(i){gp=i(gp)}function S1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(ep(this),e,...t);return $E.set(n,e.sort?e.sort():[e]),Mi(n)}:E1().includes(i)?function(...e){return i.apply(ep(this),e),Mi(zE.get(this))}:function(...e){return Mi(i.apply(ep(this),e))}}function A1(i){return typeof i=="function"?S1(i):(i instanceof IDBTransaction&&w1(i),_1(i,v1())?new Proxy(i,gp):i)}function Mi(i){if(i instanceof IDBRequest)return I1(i);if(Zf.has(i))return Zf.get(i);const e=A1(i);return e!==i&&(Zf.set(i,e),rm.set(e,i)),e}const ep=i=>rm.get(i);function R1(i,e,{blocked:t,upgrade:n,blocking:o,terminated:a}={}){const u=indexedDB.open(i,e),d=Mi(u);return n&&u.addEventListener("upgradeneeded",p=>{n(Mi(u.result),p.oldVersion,p.newVersion,Mi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const P1=["get","getKey","getAll","getAllKeys","count"],k1=["put","add","delete","clear"],tp=new Map;function b_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,o=k1.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||P1.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return n&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return tp.set(e,a),a}T1(i=>({...i,get:(e,t,n)=>b_(e,t)||i.get(e,t,n),has:(e,t)=>!!b_(e,t)||i.has(e,t)}));class x1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(C1(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function C1(i){return i.getComponent()?.type==="VERSION"}const yp="@firebase/app",D_="0.14.6";const $r=new nm("@firebase/app"),b1="@firebase/app-compat",D1="@firebase/analytics-compat",N1="@firebase/analytics",V1="@firebase/app-check-compat",O1="@firebase/app-check",L1="@firebase/auth",M1="@firebase/auth-compat",F1="@firebase/database",U1="@firebase/data-connect",j1="@firebase/database-compat",B1="@firebase/functions",z1="@firebase/functions-compat",$1="@firebase/installations",q1="@firebase/installations-compat",W1="@firebase/messaging",K1="@firebase/messaging-compat",H1="@firebase/performance",G1="@firebase/performance-compat",Q1="@firebase/remote-config",Y1="@firebase/remote-config-compat",J1="@firebase/storage",X1="@firebase/storage-compat",Z1="@firebase/firestore",eA="@firebase/ai",tA="@firebase/firestore-compat",nA="firebase",rA="12.6.0";const _p="[DEFAULT]",iA={[yp]:"fire-core",[b1]:"fire-core-compat",[N1]:"fire-analytics",[D1]:"fire-analytics-compat",[O1]:"fire-app-check",[V1]:"fire-app-check-compat",[L1]:"fire-auth",[M1]:"fire-auth-compat",[F1]:"fire-rtdb",[U1]:"fire-data-connect",[j1]:"fire-rtdb-compat",[B1]:"fire-fn",[z1]:"fire-fn-compat",[$1]:"fire-iid",[q1]:"fire-iid-compat",[W1]:"fire-fcm",[K1]:"fire-fcm-compat",[H1]:"fire-perf",[G1]:"fire-perf-compat",[Q1]:"fire-rc",[Y1]:"fire-rc-compat",[J1]:"fire-gcs",[X1]:"fire-gcs-compat",[Z1]:"fire-fst",[tA]:"fire-fst-compat",[eA]:"fire-vertex","fire-js":"fire-js",[nA]:"fire-js-all"};const mh=new Map,sA=new Map,vp=new Map;function N_(i,e){try{i.container.addComponent(e)}catch(t){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function oa(i){const e=i.name;if(vp.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;vp.set(e,i);for(const t of mh.values())N_(t,i);for(const t of sA.values())N_(t,i);return!0}function im(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function kn(i){return i==null?!1:i.settings!==void 0}const oA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new hu("app","Firebase",oA);class aA{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}const Sa=rA;function qE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:_p,automaticDataCollectionEnabled:!0,...e},o=n.name;if(typeof o!="string"||!o)throw Fi.create("bad-app-name",{appName:String(o)});if(t||(t=OE()),!t)throw Fi.create("no-options");const a=mh.get(o);if(a){if(Ms(t,a.options)&&Ms(n,a.config))return a;throw Fi.create("duplicate-app",{appName:o})}const u=new f1(o);for(const p of vp.values())u.addComponent(p);const d=new aA(t,n,u);return mh.set(o,d),d}function lA(i=_p){const e=mh.get(i);if(!e&&i===_p&&OE())return qE();if(!e)throw Fi.create("no-app",{appName:i});return e}function Ui(i,e,t){let n=iA[i]??i;t&&(n+=`-${t}`);const o=n.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${n}" with version "${e}":`];o&&u.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(u.join(" "));return}oa(new Fs(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const uA="firebase-heartbeat-database",cA=1,Hl="firebase-heartbeat-store";let np=null;function WE(){return np||(np=R1(uA,cA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Hl)}catch(t){console.warn(t)}}}}).catch(i=>{throw Fi.create("idb-open",{originalErrorMessage:i.message})})),np}async function hA(i){try{const t=(await WE()).transaction(Hl),n=await t.objectStore(Hl).get(KE(i));return await t.done,n}catch(e){if(e instanceof Hr)$r.warn(e.message);else{const t=Fi.create("idb-get",{originalErrorMessage:e?.message});$r.warn(t.message)}}}async function V_(i,e){try{const n=(await WE()).transaction(Hl,"readwrite");await n.objectStore(Hl).put(e,KE(i)),await n.done}catch(t){if(t instanceof Hr)$r.warn(t.message);else{const n=Fi.create("idb-set",{originalErrorMessage:t?.message});$r.warn(n.message)}}}function KE(i){return`${i.name}!${i.options.appId}`}const dA=1024,fA=30;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gA(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=O_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(o=>o.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>fA){const o=yA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$r.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=O_(),{heartbeatsToSend:t,unsentEntries:n}=mA(this._heartbeatsCache.heartbeats),o=DE(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return $r.warn(e),""}}}function O_(){return new Date().toISOString().substring(0,10)}function mA(i,e=dA){const t=[];let n=i.slice();for(const o of i){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),L_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),L_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class gA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BE()?n1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return V_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return V_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function L_(i){return DE(JSON.stringify({version:2,heartbeats:i})).length}function yA(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}function _A(i){oa(new Fs("platform-logger",e=>new x1(e),"PRIVATE")),oa(new Fs("heartbeat",e=>new pA(e),"PRIVATE")),Ui(yp,D_,i),Ui(yp,D_,"esm2020"),Ui("fire-js","")}_A("");var vA="firebase",EA="12.6.0";Ui(vA,EA,"app");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ji,HE;(function(){var i;function e(P,T){function k(){}k.prototype=T.prototype,P.F=T.prototype,P.prototype=new k,P.prototype.constructor=P,P.D=function(V,b,O){for(var R=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)R[Ge-2]=arguments[Ge];return T.prototype[b].apply(V,R)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,T,k){k||(k=0);const V=Array(16);if(typeof T=="string")for(var b=0;b<16;++b)V[b]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(b=0;b<16;++b)V[b]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=P.g[0],k=P.g[1],b=P.g[2];let O=P.g[3],R;R=T+(O^k&(b^O))+V[0]+3614090360&4294967295,T=k+(R<<7&4294967295|R>>>25),R=O+(b^T&(k^b))+V[1]+3905402710&4294967295,O=T+(R<<12&4294967295|R>>>20),R=b+(k^O&(T^k))+V[2]+606105819&4294967295,b=O+(R<<17&4294967295|R>>>15),R=k+(T^b&(O^T))+V[3]+3250441966&4294967295,k=b+(R<<22&4294967295|R>>>10),R=T+(O^k&(b^O))+V[4]+4118548399&4294967295,T=k+(R<<7&4294967295|R>>>25),R=O+(b^T&(k^b))+V[5]+1200080426&4294967295,O=T+(R<<12&4294967295|R>>>20),R=b+(k^O&(T^k))+V[6]+2821735955&4294967295,b=O+(R<<17&4294967295|R>>>15),R=k+(T^b&(O^T))+V[7]+4249261313&4294967295,k=b+(R<<22&4294967295|R>>>10),R=T+(O^k&(b^O))+V[8]+1770035416&4294967295,T=k+(R<<7&4294967295|R>>>25),R=O+(b^T&(k^b))+V[9]+2336552879&4294967295,O=T+(R<<12&4294967295|R>>>20),R=b+(k^O&(T^k))+V[10]+4294925233&4294967295,b=O+(R<<17&4294967295|R>>>15),R=k+(T^b&(O^T))+V[11]+2304563134&4294967295,k=b+(R<<22&4294967295|R>>>10),R=T+(O^k&(b^O))+V[12]+1804603682&4294967295,T=k+(R<<7&4294967295|R>>>25),R=O+(b^T&(k^b))+V[13]+4254626195&4294967295,O=T+(R<<12&4294967295|R>>>20),R=b+(k^O&(T^k))+V[14]+2792965006&4294967295,b=O+(R<<17&4294967295|R>>>15),R=k+(T^b&(O^T))+V[15]+1236535329&4294967295,k=b+(R<<22&4294967295|R>>>10),R=T+(b^O&(k^b))+V[1]+4129170786&4294967295,T=k+(R<<5&4294967295|R>>>27),R=O+(k^b&(T^k))+V[6]+3225465664&4294967295,O=T+(R<<9&4294967295|R>>>23),R=b+(T^k&(O^T))+V[11]+643717713&4294967295,b=O+(R<<14&4294967295|R>>>18),R=k+(O^T&(b^O))+V[0]+3921069994&4294967295,k=b+(R<<20&4294967295|R>>>12),R=T+(b^O&(k^b))+V[5]+3593408605&4294967295,T=k+(R<<5&4294967295|R>>>27),R=O+(k^b&(T^k))+V[10]+38016083&4294967295,O=T+(R<<9&4294967295|R>>>23),R=b+(T^k&(O^T))+V[15]+3634488961&4294967295,b=O+(R<<14&4294967295|R>>>18),R=k+(O^T&(b^O))+V[4]+3889429448&4294967295,k=b+(R<<20&4294967295|R>>>12),R=T+(b^O&(k^b))+V[9]+568446438&4294967295,T=k+(R<<5&4294967295|R>>>27),R=O+(k^b&(T^k))+V[14]+3275163606&4294967295,O=T+(R<<9&4294967295|R>>>23),R=b+(T^k&(O^T))+V[3]+4107603335&4294967295,b=O+(R<<14&4294967295|R>>>18),R=k+(O^T&(b^O))+V[8]+1163531501&4294967295,k=b+(R<<20&4294967295|R>>>12),R=T+(b^O&(k^b))+V[13]+2850285829&4294967295,T=k+(R<<5&4294967295|R>>>27),R=O+(k^b&(T^k))+V[2]+4243563512&4294967295,O=T+(R<<9&4294967295|R>>>23),R=b+(T^k&(O^T))+V[7]+1735328473&4294967295,b=O+(R<<14&4294967295|R>>>18),R=k+(O^T&(b^O))+V[12]+2368359562&4294967295,k=b+(R<<20&4294967295|R>>>12),R=T+(k^b^O)+V[5]+4294588738&4294967295,T=k+(R<<4&4294967295|R>>>28),R=O+(T^k^b)+V[8]+2272392833&4294967295,O=T+(R<<11&4294967295|R>>>21),R=b+(O^T^k)+V[11]+1839030562&4294967295,b=O+(R<<16&4294967295|R>>>16),R=k+(b^O^T)+V[14]+4259657740&4294967295,k=b+(R<<23&4294967295|R>>>9),R=T+(k^b^O)+V[1]+2763975236&4294967295,T=k+(R<<4&4294967295|R>>>28),R=O+(T^k^b)+V[4]+1272893353&4294967295,O=T+(R<<11&4294967295|R>>>21),R=b+(O^T^k)+V[7]+4139469664&4294967295,b=O+(R<<16&4294967295|R>>>16),R=k+(b^O^T)+V[10]+3200236656&4294967295,k=b+(R<<23&4294967295|R>>>9),R=T+(k^b^O)+V[13]+681279174&4294967295,T=k+(R<<4&4294967295|R>>>28),R=O+(T^k^b)+V[0]+3936430074&4294967295,O=T+(R<<11&4294967295|R>>>21),R=b+(O^T^k)+V[3]+3572445317&4294967295,b=O+(R<<16&4294967295|R>>>16),R=k+(b^O^T)+V[6]+76029189&4294967295,k=b+(R<<23&4294967295|R>>>9),R=T+(k^b^O)+V[9]+3654602809&4294967295,T=k+(R<<4&4294967295|R>>>28),R=O+(T^k^b)+V[12]+3873151461&4294967295,O=T+(R<<11&4294967295|R>>>21),R=b+(O^T^k)+V[15]+530742520&4294967295,b=O+(R<<16&4294967295|R>>>16),R=k+(b^O^T)+V[2]+3299628645&4294967295,k=b+(R<<23&4294967295|R>>>9),R=T+(b^(k|~O))+V[0]+4096336452&4294967295,T=k+(R<<6&4294967295|R>>>26),R=O+(k^(T|~b))+V[7]+1126891415&4294967295,O=T+(R<<10&4294967295|R>>>22),R=b+(T^(O|~k))+V[14]+2878612391&4294967295,b=O+(R<<15&4294967295|R>>>17),R=k+(O^(b|~T))+V[5]+4237533241&4294967295,k=b+(R<<21&4294967295|R>>>11),R=T+(b^(k|~O))+V[12]+1700485571&4294967295,T=k+(R<<6&4294967295|R>>>26),R=O+(k^(T|~b))+V[3]+2399980690&4294967295,O=T+(R<<10&4294967295|R>>>22),R=b+(T^(O|~k))+V[10]+4293915773&4294967295,b=O+(R<<15&4294967295|R>>>17),R=k+(O^(b|~T))+V[1]+2240044497&4294967295,k=b+(R<<21&4294967295|R>>>11),R=T+(b^(k|~O))+V[8]+1873313359&4294967295,T=k+(R<<6&4294967295|R>>>26),R=O+(k^(T|~b))+V[15]+4264355552&4294967295,O=T+(R<<10&4294967295|R>>>22),R=b+(T^(O|~k))+V[6]+2734768916&4294967295,b=O+(R<<15&4294967295|R>>>17),R=k+(O^(b|~T))+V[13]+1309151649&4294967295,k=b+(R<<21&4294967295|R>>>11),R=T+(b^(k|~O))+V[4]+4149444226&4294967295,T=k+(R<<6&4294967295|R>>>26),R=O+(k^(T|~b))+V[11]+3174756917&4294967295,O=T+(R<<10&4294967295|R>>>22),R=b+(T^(O|~k))+V[2]+718787259&4294967295,b=O+(R<<15&4294967295|R>>>17),R=k+(O^(b|~T))+V[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+b&4294967295,P.g[3]=P.g[3]+O&4294967295}n.prototype.v=function(P,T){T===void 0&&(T=P.length);const k=T-this.blockSize,V=this.C;let b=this.h,O=0;for(;O<T;){if(b==0)for(;O<=k;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<T;)if(V[b++]=P.charCodeAt(O++),b==this.blockSize){o(this,V),b=0;break}}else for(;O<T;)if(V[b++]=P[O++],b==this.blockSize){o(this,V),b=0;break}}this.h=b,this.o+=T},n.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;T=this.o*8;for(var k=P.length-8;k<P.length;++k)P[k]=T&255,T/=256;for(this.v(P),P=Array(16),T=0,k=0;k<4;++k)for(let V=0;V<32;V+=8)P[T++]=this.g[k]>>>V&255;return P};function a(P,T){var k=d;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=T(P)}function u(P,T){this.h=T;const k=[];let V=!0;for(let b=P.length-1;b>=0;b--){const O=P[b]|0;V&&O==T||(k[b]=O,V=!1)}this.g=k}var d={};function p(P){return-128<=P&&P<128?a(P,function(T){return new u([T|0],T<0?-1:0)}):new u([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return w;if(P<0)return $(y(-P));const T=[];let k=1;for(let V=0;P>=k;V++)T[V]=P/k|0,k*=4294967296;return new u(T,0)}function E(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return $(E(P.substring(1),T));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=y(Math.pow(T,8));let V=w;for(let O=0;O<P.length;O+=8){var b=Math.min(8,P.length-O);const R=parseInt(P.substring(O,O+b),T);b<8?(b=y(Math.pow(T,b)),V=V.j(b).add(y(R))):(V=V.j(k),V=V.add(y(R)))}return V}var w=p(0),A=p(1),j=p(16777216);i=u.prototype,i.m=function(){if(W(this))return-$(this).m();let P=0,T=1;for(let k=0;k<this.g.length;k++){const V=this.i(k);P+=(V>=0?V:4294967296+V)*T,T*=4294967296}return P},i.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(H(this))return"0";if(W(this))return"-"+$(this).toString(P);const T=y(Math.pow(P,6));var k=this;let V="";for(;;){const b=Ie(k,T).g;k=te(k,b.j(T));let O=((k.g.length>0?k.g[0]:k.h)>>>0).toString(P);if(k=b,H(k))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},i.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function H(P){if(P.h!=0)return!1;for(let T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function W(P){return P.h==-1}i.l=function(P){return P=te(this,P),W(P)?-1:H(P)?0:1};function $(P){const T=P.g.length,k=[];for(let V=0;V<T;V++)k[V]=~P.g[V];return new u(k,~P.h).add(A)}i.abs=function(){return W(this)?$(this):this},i.add=function(P){const T=Math.max(this.g.length,P.g.length),k=[];let V=0;for(let b=0;b<=T;b++){let O=V+(this.i(b)&65535)+(P.i(b)&65535),R=(O>>>16)+(this.i(b)>>>16)+(P.i(b)>>>16);V=R>>>16,O&=65535,R&=65535,k[b]=R<<16|O}return new u(k,k[k.length-1]&-2147483648?-1:0)};function te(P,T){return P.add($(T))}i.j=function(P){if(H(this)||H(P))return w;if(W(this))return W(P)?$(this).j($(P)):$($(this).j(P));if(W(P))return $(this.j($(P)));if(this.l(j)<0&&P.l(j)<0)return y(this.m()*P.m());const T=this.g.length+P.g.length,k=[];for(var V=0;V<2*T;V++)k[V]=0;for(V=0;V<this.g.length;V++)for(let b=0;b<P.g.length;b++){const O=this.i(V)>>>16,R=this.i(V)&65535,Ge=P.i(b)>>>16,St=P.i(b)&65535;k[2*V+2*b]+=R*St,se(k,2*V+2*b),k[2*V+2*b+1]+=O*St,se(k,2*V+2*b+1),k[2*V+2*b+1]+=R*Ge,se(k,2*V+2*b+1),k[2*V+2*b+2]+=O*Ge,se(k,2*V+2*b+2)}for(P=0;P<T;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=T;P<2*T;P++)k[P]=0;return new u(k,0)};function se(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function ae(P,T){this.g=P,this.h=T}function Ie(P,T){if(H(T))throw Error("division by zero");if(H(P))return new ae(w,w);if(W(P))return T=Ie($(P),T),new ae($(T.g),$(T.h));if(W(T))return T=Ie(P,$(T)),new ae($(T.g),T.h);if(P.g.length>30){if(W(P)||W(T))throw Error("slowDivide_ only works with positive integers.");for(var k=A,V=T;V.l(P)<=0;)k=Te(k),V=Te(V);var b=X(k,1),O=X(V,1);for(V=X(V,2),k=X(k,2);!H(V);){var R=O.add(V);R.l(P)<=0&&(b=b.add(k),O=R),V=X(V,1),k=X(k,1)}return T=te(P,b.j(T)),new ae(b,T)}for(b=w;P.l(T)>=0;){for(k=Math.max(1,Math.floor(P.m()/T.m())),V=Math.ceil(Math.log(k)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=y(k),R=O.j(T);W(R)||R.l(P)>0;)k-=V,O=y(k),R=O.j(T);H(O)&&(O=A),b=b.add(O),P=te(P,R)}return new ae(b,P)}i.B=function(P){return Ie(this,P).h},i.and=function(P){const T=Math.max(this.g.length,P.g.length),k=[];for(let V=0;V<T;V++)k[V]=this.i(V)&P.i(V);return new u(k,this.h&P.h)},i.or=function(P){const T=Math.max(this.g.length,P.g.length),k=[];for(let V=0;V<T;V++)k[V]=this.i(V)|P.i(V);return new u(k,this.h|P.h)},i.xor=function(P){const T=Math.max(this.g.length,P.g.length),k=[];for(let V=0;V<T;V++)k[V]=this.i(V)^P.i(V);return new u(k,this.h^P.h)};function Te(P){const T=P.g.length+1,k=[];for(let V=0;V<T;V++)k[V]=P.i(V)<<1|P.i(V-1)>>>31;return new u(k,P.h)}function X(P,T){const k=T>>5;T%=32;const V=P.g.length-k,b=[];for(let O=0;O<V;O++)b[O]=T>0?P.i(O+k)>>>T|P.i(O+k+1)<<32-T:P.i(O+k);return new u(b,P.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,HE=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=E,ji=u}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var GE,bl,QE,Xc,Ep,YE,JE,XE;(function(){var i,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=t(this);function o(c,g){if(g)e:{var _=n;c=c.split(".");for(var I=0;I<c.length-1;I++){var F=c[I];if(!(F in _))break e;_=_[F]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(g){var _=[],I;for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&_.push([I,g[I]]);return _}});var a=a||{},u=this||self;function d(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function p(c,g,_){return c.call.apply(c.bind,arguments)}function y(c,g,_){return y=p,y.apply(null,arguments)}function E(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function w(c,g){function _(){}_.prototype=g.prototype,c.Z=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(I,F,z){for(var ee=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ee[Re-2]=arguments[Re];return g.prototype[F].apply(I,ee)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function j(c){const g=c.length;if(g>0){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function H(c,g){for(let I=1;I<arguments.length;I++){const F=arguments[I];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=c.length||0;const z=F.length||0;c.length=_+z;for(let ee=0;ee<z;ee++)c[_+ee]=F[ee]}else c.push(F)}}class W{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function $(c){u.setTimeout(()=>{throw c},0)}function te(){var c=P;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class se{constructor(){this.h=this.g=null}add(g,_){const I=ae.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var ae=new W(()=>new Ie,c=>c.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,X=!1,P=new se,T=()=>{const c=Promise.resolve(void 0);Te=()=>{c.then(k)}};function k(){for(var c;c=te();){try{c.h.call(c.g)}catch(_){$(_)}var g=ae;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}X=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};u.addEventListener("test",_,g),u.removeEventListener("test",_,g)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function Ge(c,g){b.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}w(Ge,b),Ge.prototype.init=function(c,g){const _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(_=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var St="closure_listenable_"+(Math.random()*1e6|0),Lt=0;function Ze(c,g,_,I,F){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=F,this.key=++Lt,this.da=this.fa=!1}function ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function me(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function C(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function K(c){const g={};for(const _ in c)g[_]=c[_];return g}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(c,g){let _,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(_ in I)c[_]=I[_];for(let z=0;z<fe.length;z++)_=fe[z],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,g,_,I,F){const z=c.toString();c=this.g[z],c||(c=this.g[z]=[],this.h++);const ee=De(c,g,I,F);return ee>-1?(g=c[ee],_||(g.fa=!1)):(g=new Ze(g,this.src,z,!!I,F),g.fa=_,c.push(g)),g};function Be(c,g){const _=g.type;if(_ in c.g){var I=c.g[_],F=Array.prototype.indexOf.call(I,g,void 0),z;(z=F>=0)&&Array.prototype.splice.call(I,F,1),z&&(ne(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function De(c,g,_,I){for(let F=0;F<c.length;++F){const z=c[F];if(!z.da&&z.listener==g&&z.capture==!!_&&z.ha==I)return F}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Oe={};function Ct(c,g,_,I,F){if(Array.isArray(g)){for(let z=0;z<g.length;z++)Ct(c,g[z],_,I,F);return null}return _=Ca(_),c&&c[St]?c.J(g,_,d(I)?!!I.capture:!1,F):vd(c,g,_,!1,I,F)}function vd(c,g,_,I,F,z){if(!g)throw Error("Invalid event type");const ee=d(F)?!!F.capture:!!F;let Re=no(c);if(Re||(c[Ue]=Re=new Pe(c)),_=Re.add(g,_,I,ee,z),_.proxy)return _;if(I=eo(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)O||(F=ee),F===void 0&&(F=!1),c.addEventListener(g.toString(),I,F);else if(c.attachEvent)c.attachEvent(to(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function eo(){function c(_){return g.call(c.src,c.listener,_)}const g=Pu;return c}function xa(c,g,_,I,F){if(Array.isArray(g))for(var z=0;z<g.length;z++)xa(c,g[z],_,I,F);else I=d(I)?!!I.capture:!!I,_=Ca(_),c&&c[St]?(c=c.i,z=String(g).toString(),z in c.g&&(g=c.g[z],_=De(g,_,I,F),_>-1&&(ne(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete c.g[z],c.h--)))):c&&(c=no(c))&&(g=c.g[g.toString()],c=-1,g&&(c=De(g,_,I,F)),(_=c>-1?g[c]:null)&&Jr(_))}function Jr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[St])Be(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(to(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=no(g))?(Be(_,c),_.h==0&&(_.src=null,g[Ue]=null)):ne(c)}}}function to(c){return c in Oe?Oe[c]:Oe[c]="on"+c}function Pu(c,g){if(c.da)c=!0;else{g=new Ge(g,this);const _=c.listener,I=c.ha||c.src;c.fa&&Jr(c),c=_.call(I,g)}return c}function no(c){return c=c[Ue],c instanceof Pe?c:null}var Yi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ca(c){return typeof c=="function"?c:(c[Yi]||(c[Yi]=function(g){return c.handleEvent(g)}),c[Yi])}function ft(){V.call(this),this.i=new Pe(this),this.M=this,this.G=null}w(ft,V),ft.prototype[St]=!0,ft.prototype.removeEventListener=function(c,g,_,I){xa(this,c,g,_,I)};function ct(c,g){var _,I=c.G;if(I)for(_=[];I;I=I.G)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new b(g,c);else if(g instanceof b)g.target=g.target||c;else{var F=g;g=new b(I,c),xe(g,F)}F=!0;let z,ee;if(_)for(ee=_.length-1;ee>=0;ee--)z=g.g=_[ee],F=Dn(z,I,!0,g)&&F;if(z=g.g=c,F=Dn(z,I,!0,g)&&F,F=Dn(z,I,!1,g)&&F,_)for(ee=0;ee<_.length;ee++)z=g.g=_[ee],F=Dn(z,I,!1,g)&&F}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const _=c.g[g];for(let I=0;I<_.length;I++)ne(_[I]);delete c.g[g],c.h--}}this.G=null},ft.prototype.J=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},ft.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function Dn(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let z=0;z<g.length;++z){const ee=g[z];if(ee&&!ee.da&&ee.capture==_){const Re=ee.listener,ht=ee.ha||ee.src;ee.fa&&Be(c.i,ee),F=Re.call(ht,I)!==!1&&F}}return F&&!I.defaultPrevented}function ba(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:u.setTimeout(c,g||0)}function Da(c){c.g=ba(()=>{c.g=null,c.i&&(c.i=!1,Da(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ku extends V{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Da(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(c){V.call(this),this.h=c,this.g={}}w(Xr,V);var Na=[];function ro(c){me(c.g,function(g,_){this.g.hasOwnProperty(_)&&Jr(g)},c),c.g={}}Xr.prototype.N=function(){Xr.Z.N.call(this),ro(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=u.JSON.stringify,xu=u.JSON.parse,Ji=class{stringify(c){return u.JSON.stringify(c,void 0)}parse(c){return u.JSON.parse(c,void 0)}};function ei(){}function Cu(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function io(){b.call(this,"d")}w(io,b);function Va(){b.call(this,"c")}w(Va,b);var Nn={},so=null;function ni(){return so=so||new ft}Nn.Ia="serverreachability";function oo(c){b.call(this,Nn.Ia,c)}w(oo,b);function Er(c){const g=ni();ct(g,new oo(g))}Nn.STAT_EVENT="statevent";function Ir(c,g){b.call(this,Nn.STAT_EVENT,c),this.stat=g}w(Ir,b);function at(c){const g=ni();ct(g,new Ir(g,c))}Nn.Ja="timingevent";function Oa(c,g){b.call(this,Nn.Ja,c),this.size=g}w(Oa,b);function ri(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){c()},g)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function bu(c,g,_,I,F,z){c.info(function(){if(c.g)if(z){var ee="",Re=z.split("&");for(let $e=0;$e<Re.length;$e++){var ht=Re[$e].split("=");if(ht.length>1){const pt=ht[0];ht=ht[1];const hn=pt.split("_");ee=hn.length>=2&&hn[1]=="type"?ee+(pt+"="+ht+"&"):ee+(pt+"=redacted&")}}}else ee=null;else ee=z;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+g+`
`+_+`
`+ee})}function Du(c,g,_,I,F,z,ee){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+g+`
`+_+`
`+z+" "+ee})}function Gn(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Xi(c,_)+(I?" "+I:"")})}function Nu(c,g){c.info(function(){return"TIMEOUT: "+g})}ii.prototype.info=function(){};function Xi(c,g){if(!c.g)return g;if(!g)return null;try{const z=JSON.parse(g);if(z){for(c=0;c<z.length;c++)if(Array.isArray(z[c])){var _=z[c];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ee=1;ee<I.length;ee++)I[ee]=""}}}}return Zr(z)}catch{return g}}var si={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},oi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vu;function wr(){}w(wr,ei),wr.prototype.g=function(){return new XMLHttpRequest},Vu=new wr;function Qn(c){return encodeURIComponent(String(c))}function ao(c){var g=1;c=c.split(":");const _=[];for(;g>0&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function vn(c,g,_,I){this.j=c,this.i=g,this.l=_,this.S=I||1,this.V=new Xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ou}function Ou(){this.i=null,this.g="",this.h=!1}var Lu={},La={};function Vn(c,g,_){c.M=1,c.A=Sr(En(g)),c.u=_,c.R=!0,Ma(c,null)}function Ma(c,g){c.F=Date.now(),Zi(c),c.B=En(c.A);var _=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Ha(_.i,"t",I),c.C=0,_=c.j.L,c.h=new Ou,c.g=Ku(c.j,_?g:null,!c.u),c.P>0&&(c.O=new ku(y(c.Y,c,c.g),c.P)),g=c.V,_=c.g,I=c.ba;var F="readystatechange";Array.isArray(F)||(F&&(Na[0]=F.toString()),F=Na);for(let z=0;z<F.length;z++){const ee=Ct(_,F[z],I||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=c.J?K(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),Er(),bu(c.i,c.v,c.B,c.l,c.S,c.u)}vn.prototype.ba=function(c){c=c.target;const g=this.O;g&&nr(c)==3?g.j():this.Y(c)},vn.prototype.Y=function(c){try{if(c==this.g)e:{const Re=nr(this.g),ht=this.g.ya(),$e=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||qu(this.g)))){this.K||Re!=4||ht==7||(ht==8||$e<=0?Er(3):Er(2)),lo(this);var g=this.g.ca();this.X=g;var _=Mu(this);if(this.o=g==200,Du(this.i,this.v,this.B,this.l,this.S,Re,g),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var z=I;break t}}z=null}if(c=z)Gn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ye(this,c);else{this.o=!1,this.m=3,at(12),Tr(this),es(this);break e}}if(this.R){c=!0;let pt;for(;!this.K&&this.C<_.length;)if(pt=Uu(this,_),pt==La){Re==4&&(this.m=4,at(14),c=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Lu){this.m=4,at(15),Gn(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else Gn(this.i,this.l,pt,null),Ye(this,pt);if(Fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||_.length!=0||this.h.h||(this.m=1,at(16),c=!1),this.o=this.o&&c,!c)Gn(this.i,this.l,_,"[Invalid Chunked Response]"),Tr(this),es(this);else if(_.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),us(ee),ee.P=!0,at(11))}}else Gn(this.i,this.l,_,null),Ye(this,_);Re==4&&Tr(this),this.o&&!this.K&&(Re==4?vo(this.j,this):(this.o=!1,Zi(this)))}else Qa(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),Tr(this),es(this)}}}catch{}finally{}};function Mu(c){if(!Fu(c))return c.g.la();const g=qu(c.g);if(g==="")return"";let _="";const I=g.length,F=nr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Tr(c),es(c),"";c.h.i=new u.TextDecoder}for(let z=0;z<I;z++)c.h.h=!0,_+=c.h.i.decode(g[z],{stream:!(F&&z==I-1)});return g.length=0,c.h.g+=_,c.C=0,c.h.g}function Fu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Uu(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?La:(_=Number(g.substring(_,I)),isNaN(_)?Lu:(I+=1,I+_>g.length?La:(g=g.slice(I,I+_),c.C=I+_,g)))}vn.prototype.cancel=function(){this.K=!0,Tr(this)};function Zi(c){c.T=Date.now()+c.H,Fa(c,c.H)}function Fa(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ri(y(c.aa,c),g)}function lo(c){c.D&&(u.clearTimeout(c.D),c.D=null)}vn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Nu(this.i,this.B),this.M!=2&&(Er(),at(17)),Tr(this),this.m=2,es(this)):Fa(this,this.T-c)};function es(c){c.j.I==0||c.K||vo(c.j,c)}function Tr(c){lo(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,ro(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function Ye(c,g){try{var _=c.j;if(_.I!=0&&(_.g==c||ja(_.h,c))){if(!c.L&&ja(_.h,c)&&_.I==3){try{var I=_.Ba.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)_o(_),un(_);else break e;sr(_),at(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ri(y(_.Va,_),6e3));ts(_.h)<=1&&_.ta&&(_.ta=void 0)}else cn(_,11)}else if((c.L||_.g==c)&&_o(_),!R(g))for(F=_.Ba.g.parse(g),g=0;g<F.length;g++){let $e=F[g];const pt=$e[0];if(!(pt<=_.K))if(_.K=pt,$e=$e[1],_.I==2)if($e[0]=="c"){_.M=$e[1],_.ba=$e[2];const hn=$e[3];hn!=null&&(_.ka=hn,_.j.info("VER="+_.ka));const xr=$e[4];xr!=null&&(_.za=xr,_.j.info("SVER="+_.za));const or=$e[5];or!=null&&typeof or=="number"&&or>0&&(I=1.5*or,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const ar=c.g;if(ar){const wo=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var z=I.h;z.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(co(z,z.h),z.h=null))}if(I.G){const Xa=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(I.wa=Xa,je(I.J,I.G,Xa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var ee=c;if(I.na=Ja(I,I.L?I.ba:null,I.W),ee.L){ns(I.h,ee);var Re=ee,ht=I.O;ht&&(Re.H=ht),Re.D&&(lo(Re),Zi(Re)),I.g=ee}else Mt(I);_.i.length>0&&kr(_)}else $e[0]!="stop"&&$e[0]!="close"||cn(_,7);else _.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?cn(_,7):go(_):$e[0]!="noop"&&_.l&&_.l.qa($e),_.A=0)}}Er(4)}catch{}}var Ed=class{constructor(c,g){this.g=c,this.map=g}};function uo(c){this.l=c||10,u.PerformanceNavigationTiming?(c=u.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ua(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ts(c){return c.h?1:c.g?c.g.size:0}function ja(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function co(c,g){c.g?c.g.add(g):c.h=g}function ns(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}uo.prototype.cancel=function(){if(this.i=on(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function on(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.G);return g}return j(c.i)}var ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function an(c,g){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const I=c[_].indexOf("=");let F,z=null;I>=0?(F=c[_].substring(0,I),z=c[_].substring(I+1)):F=c[_],g(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Yn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof Yn?(this.l=c.l,rs(this,c.j),this.o=c.o,this.g=c.g,Jn(this,c.u),this.h=c.h,ai(this,Ga(c.i)),this.m=c.m):c&&(g=String(c).match(ju))?(this.l=!1,rs(this,g[1]||"",!0),this.o=is(g[2]||""),this.g=is(g[3]||"",!0),Jn(this,g[4]),this.h=is(g[5]||"",!0),ai(this,g[6]||"",!0),this.m=is(g[7]||"")):(this.l=!1,this.i=new Ne(null,this.l))}Yn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(ss(g,za,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ss(g,za,!0),"@"),c.push(Qn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ss(_,_.charAt(0)=="/"?os:$a,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ss(_,qa)),c.join("")},Yn.prototype.resolve=function(c){const g=En(this);let _=!!c.j;_?rs(g,c.j):_=!!c.o,_?g.o=c.o:_=!!c.g,_?g.g=c.g:_=c.u!=null;var I=c.h;if(_)Jn(g,c.u);else if(_=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=g.h.lastIndexOf("/");F!=-1&&(I=g.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let ee=0;ee<F.length;){const Re=F[ee++];Re=="."?I&&ee==F.length&&z.push(""):Re==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),I&&ee==F.length&&z.push("")):(z.push(Re),I=!0)}I=z.join("/")}else I=F}return _?g.h=I:_=c.i.toString()!=="",_?ai(g,Ga(c.i)):_=!!c.m,_&&(g.m=c.m),g};function En(c){return new Yn(c)}function rs(c,g,_){c.j=_?is(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Jn(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function ai(c,g,_){g instanceof Ne?(c.i=g,fo(c.i,c.l)):(_||(g=ss(g,Id)),c.i=new Ne(g,c.l))}function je(c,g,_){c.i.set(g,_)}function Sr(c){return je(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function is(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ss(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Ba),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ba(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var za=/[#\/\?@]/g,$a=/[#\?:]/g,os=/[#\?]/g,Id=/[#\?@]/g,qa=/#/g;function Ne(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Xn(c){c.g||(c.g=new Map,c.h=0,c.i&&an(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}i=Ne.prototype,i.add=function(c,g){Xn(this),this.i=null,c=Zn(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Wa(c,g){Xn(c),g=Zn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function ho(c,g){return Xn(c),g=Zn(c,g),c.g.has(g)}i.forEach=function(c,g){Xn(this),this.g.forEach(function(_,I){_.forEach(function(F){c.call(g,F,I,this)},this)},this)};function Ka(c,g){Xn(c);let _=[];if(typeof g=="string")ho(c,g)&&(_=_.concat(c.g.get(Zn(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)_=_.concat(c[g]);return _}i.set=function(c,g){return Xn(this),this.i=null,c=Zn(this,c),ho(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},i.get=function(c,g){return c?(c=Ka(this,c),c.length>0?String(c[0]):g):g};function Ha(c,g,_){Wa(c,g),_.length>0&&(c.i=null,c.g.set(Zn(c,g),j(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let I=0;I<g.length;I++){var _=g[I];const F=Qn(_);_=Ka(this,_);for(let z=0;z<_.length;z++){let ee=F;_[z]!==""&&(ee+="="+Qn(_[z])),c.push(ee)}}return this.i=c.join("&")};function Ga(c){const g=new Ne;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function Zn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function fo(c,g){g&&!c.j&&(Xn(c),c.i=null,c.g.forEach(function(_,I){const F=I.toLowerCase();I!=F&&(Wa(this,I),Ha(this,F,_))},c)),c.j=g}function er(c,g){const _=new ii;if(u.Image){const I=new Image;I.onload=E(bt,_,"TestLoadImage: loaded",!0,g,I),I.onerror=E(bt,_,"TestLoadImage: error",!1,g,I),I.onabort=E(bt,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=E(bt,_,"TestLoadImage: timeout",!1,g,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function tr(c,g){const _=new ii,I=new AbortController,F=setTimeout(()=>{I.abort(),bt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(z=>{clearTimeout(F),z.ok?bt(_,"TestPingServer: ok",!0,g):bt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),bt(_,"TestPingServer: error",!1,g)})}function bt(c,g,_,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(_)}catch{}}function as(){this.g=new Ji}function Ar(c){this.i=c.Sb||null,this.h=c.ab||!1}w(Ar,ei),Ar.prototype.g=function(){return new ln(this.i,this.h)};function ln(c,g){ft.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(ln,ft),i=ln.prototype,i.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,On(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||u).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bu(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bu(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?li(this):On(this),this.readyState==3&&Bu(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,li(this))},i.Na=function(c){this.g&&(this.response=c,li(this))},i.ga=function(){this.g&&li(this)};function li(c){c.readyState=4,c.l=null,c.j=null,c.B=null,On(c)}i.setRequestHeader=function(c,g){this.A.append(c,g)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function On(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zu(c){let g="";return me(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function po(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=zu(_),typeof c=="string"?_!=null&&Qn(_):je(c,g,_))}function He(c){ft.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(He,ft);var $u=/^https?$/i,wd=["POST","PUT"];i=He.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vu.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(z){ui(this,z);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)_.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())_.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=u.FormData&&c instanceof u.FormData,!(Array.prototype.indexOf.call(wd,g,void 0)>=0)||I||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of _)this.g.setRequestHeader(z,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(z){ui(this,z)}};function ui(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,ci(c),Pr(c)}function ci(c){c.A||(c.A=!0,ct(c,"complete"),ct(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,ct(this,"complete"),ct(this,"abort"),Pr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pr(this,!0)),He.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Rr(this):this.Xa())},i.Xa=function(){Rr(this)};function Rr(c){if(c.h&&typeof a<"u"){if(c.v&&nr(c)==4)setTimeout(c.Ca.bind(c),0);else if(ct(c,"readystatechange"),nr(c)==4){c.h=!1;try{const z=c.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=z===0){let ee=String(c.D).match(ju)[1]||null;!ee&&u.self&&u.self.location&&(ee=u.self.location.protocol.slice(0,-1)),I=!$u.test(ee?ee.toLowerCase():"")}_=I}if(_)ct(c,"complete"),ct(c,"success");else{c.o=6;try{var F=nr(c)>2?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.ca()+"]",ci(c)}}finally{Pr(c)}}}}function Pr(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,g||ct(c,"ready");try{_.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function nr(c){return c.g?c.g.readyState:0}i.ca=function(){try{return nr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),xu(g)}};function qu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qa(c){const g={};c=(c.g&&nr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(R(c[I]))continue;var _=ao(c[I]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=g[F]||[];g[F]=z,z.push(_)}C(g,function(I){return I.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function mo(c){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rr("baseRetryDelayMs",5e3,c),this.Za=rr("retryDelaySeedMs",1e4,c),this.Ta=rr("forwardChannelMaxRetries",2,c),this.va=rr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new uo(c&&c.concurrentRequestLimit),this.Ba=new as,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=mo.prototype,i.ka=8,i.I=1,i.connect=function(c,g,_,I){at(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Ja(this,null,this.W),kr(this)};function go(c){if(yo(c),c.I==3){var g=c.V++,_=En(c.J);if(je(_,"SID",c.M),je(_,"RID",g),je(_,"TYPE","terminate"),ir(c,_),g=new vn(c,c.j,g),g.M=2,g.A=Sr(En(_)),_=!1,u.navigator&&u.navigator.sendBeacon)try{_=u.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&u.Image&&(new Image().src=g.A,_=!0),_||(g.g=Ku(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Zi(g)}cs(c)}function un(c){c.g&&(us(c),c.g.cancel(),c.g=null)}function yo(c){un(c),c.v&&(u.clearTimeout(c.v),c.v=null),_o(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&u.clearTimeout(c.m),c.m=null)}function kr(c){if(!Ua(c.h)&&!c.m){c.m=!0;var g=c.Ea;Te||T(),X||(Te(),X=!0),P.add(g,c),c.D=0}}function Wu(c,g){return ts(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ri(y(c.Ea,c,g),Eo(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const F=new vn(this,this.j,c);let z=this.o;if(this.U&&(z?(z=K(z),xe(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ya(this,F,g),_=En(this.J),je(_,"RID",c),je(_,"CVER",22),this.G&&je(_,"X-HTTP-Session-Id",this.G),ir(this,_),z&&(this.R?g="headers="+Qn(zu(z))+"&"+g:this.u&&po(_,this.u,z)),co(this.h,F),this.Ra&&je(_,"TYPE","init"),this.S?(je(_,"$req",g),je(_,"SID","null"),F.U=!0,Vn(F,_,null)):Vn(F,_,g),this.I=2}}else this.I==3&&(c?ls(this,c):this.i.length==0||Ua(this.h)||ls(this))};function ls(c,g){var _;g?_=g.l:_=c.V++;const I=En(c.J);je(I,"SID",c.M),je(I,"RID",_),je(I,"AID",c.K),ir(c,I),c.u&&c.o&&po(I,c.u,c.o),_=new vn(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Ya(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),co(c.h,_),Vn(_,I,g)}function ir(c,g){c.H&&me(c.H,function(_,I){je(g,I,_)}),c.l&&me({},function(_,I){je(g,I,_)})}function Ya(c,g,_){_=Math.min(c.i.length,_);const I=c.l?y(c.l.Ka,c.l,c):null;e:{var F=c.i;let Re=-1;for(;;){const ht=["count="+_];Re==-1?_>0?(Re=F[0].g,ht.push("ofs="+Re)):Re=0:ht.push("ofs="+Re);let $e=!0;for(let pt=0;pt<_;pt++){var z=F[pt].g;const hn=F[pt].map;if(z-=Re,z<0)Re=Math.max(0,F[pt].g-100),$e=!1;else try{z="req"+z+"_"||"";try{var ee=hn instanceof Map?hn:Object.entries(hn);for(const[xr,or]of ee){let ar=or;d(or)&&(ar=Zr(or)),ht.push(z+xr+"="+encodeURIComponent(ar))}}catch(xr){throw ht.push(z+"type="+encodeURIComponent("_badmap")),xr}}catch{I&&I(hn)}}if($e){ee=ht.join("&");break e}}ee=void 0}return c=c.i.splice(0,_),g.G=c,ee}function Mt(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;Te||T(),X||(Te(),X=!0),P.add(g,c),c.A=0}}function sr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ri(y(c.Da,c),Eo(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,hi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ri(y(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),un(this),hi(this))};function us(c){c.B!=null&&(u.clearTimeout(c.B),c.B=null)}function hi(c){c.g=new vn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=En(c.na);je(g,"RID","rpc"),je(g,"SID",c.M),je(g,"AID",c.K),je(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&je(g,"TO",c.ia),je(g,"TYPE","xmlhttp"),ir(c,g),c.u&&c.o&&po(g,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Sr(En(g)),_.u=null,_.R=!0,Ma(_,c)}i.Va=function(){this.C!=null&&(this.C=null,un(this),sr(this),at(19))};function _o(c){c.C!=null&&(u.clearTimeout(c.C),c.C=null)}function vo(c,g){var _=null;if(c.g==g){_o(c),us(c),c.g=null;var I=2}else if(ja(c.h,g))_=g.G,ns(c.h,g),I=1;else return;if(c.I!=0){if(g.o)if(I==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var F=c.D;I=ni(),ct(I,new Oa(I,_)),kr(c)}else Mt(c);else if(F=g.m,F==3||F==0&&g.X>0||!(I==1&&Wu(c,g)||I==2&&sr(c)))switch(_&&_.length>0&&(g=c.h,g.i=g.i.concat(_)),F){case 1:cn(c,5);break;case 4:cn(c,10);break;case 3:cn(c,6);break;default:cn(c,2)}}}function Eo(c,g){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*g}function cn(c,g){if(c.j.info("Error code "+g),g==2){var _=y(c.bb,c),I=c.Ua;const F=!I;I=new Yn(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||rs(I,"https"),Sr(I),F?er(I.toString(),_):tr(I.toString(),_)}else at(2);c.I=0,c.l&&c.l.pa(g),cs(c),yo(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function cs(c){if(c.I=0,c.ja=[],c.l){const g=on(c.h);(g.length!=0||c.i.length!=0)&&(H(c.ja,g),H(c.ja,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.oa()}}function Ja(c,g,_){var I=_ instanceof Yn?En(_):new Yn(_);if(I.g!="")g&&(I.g=g+"."+I.g),Jn(I,I.u);else{var F=u.location;I=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const z=new Yn(null);I&&rs(z,I),g&&(z.g=g),F&&Jn(z,F),_&&(z.h=_),I=z}return _=c.G,g=c.wa,_&&g&&je(I,_,g),je(I,"VER",c.ka),ir(c,I),I}function Ku(c,g,_){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new He(new Ar({ab:_})):new He(c.ma),g.Fa(c.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}i=Hu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Io(){}Io.prototype.g=function(c,g){return new Dt(c,g)};function Dt(c,g){ft.call(this),this.g=new mo(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!R(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new di(this)}w(Dt,ft),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){go(this.g)},Dt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=Zr(c),c=_);g.i.push(new Ed(g.Ya++,c)),g.I==3&&kr(g)},Dt.prototype.N=function(){this.g.l=null,delete this.j,go(this.g),delete this.g,Dt.Z.N.call(this)};function Gu(c){io.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}w(Gu,io);function Qu(){Va.call(this),this.status=1}w(Qu,Va);function di(c){this.g=c}w(di,Hu),di.prototype.ra=function(){ct(this.g,"a")},di.prototype.qa=function(c){ct(this.g,new Gu(c))},di.prototype.pa=function(c){ct(this.g,new Qu)},di.prototype.oa=function(){ct(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,XE=function(){return new Io},JE=function(){return ni()},YE=Nn,Ep={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},si.NO_ERROR=0,si.TIMEOUT=8,si.HTTP_ERROR=6,Xc=si,oi.COMPLETE="complete",QE=oi,Cu.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",ft.prototype.listen=ft.prototype.J,bl=Cu,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,GE=He}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore",U_="4.9.2";class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let Aa="12.3.0";const Us=new nm("@firebase/firestore");function Qo(){return Us.logLevel}function J(i,...e){if(Us.logLevel<=be.DEBUG){const t=e.map(sm);Us.debug(`Firestore (${Aa}): ${i}`,...t)}}function Qt(i,...e){if(Us.logLevel<=be.ERROR){const t=e.map(sm);Us.error(`Firestore (${Aa}): ${i}`,...t)}}function Gl(i,...e){if(Us.logLevel<=be.WARN){const t=e.map(sm);Us.warn(`Firestore (${Aa}): ${i}`,...t)}}function sm(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function ce(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,ZE(i,n,t)}function ZE(i,e,t){let n=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Qt(n),new Error(n)}function pe(i,e,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,i||ZE(e,o,n)}function Ae(i,e){return i}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class IA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class TA{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0,42304);let n=this.i;const o=p=>this.i!==n?(n=this.i,t(p)):Promise.resolve();let a=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Br,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Br)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(pe(typeof n.accessToken=="string",31837,{l:n}),new IA(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class SA{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AA{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new SA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class j_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pe(this.o===void 0,3512);const n=a=>{a.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,J("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const o=a=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new j_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new j_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function PA(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}class om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const o=PA(40);for(let a=0;a<o.length;++a)n.length<20&&o[a]<t&&(n+=e.charAt(o[a]%62))}return n}}function Se(i,e){return i<e?-1:i>e?1:0}function Ip(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++){const o=i.charAt(n),a=e.charAt(n);if(o!==a)return rp(o)===rp(a)?Se(o,a):rp(o)?1:-1}return Se(i.length,e.length)}const kA=55296,xA=57343;function rp(i){const e=i.charCodeAt(0);return e>=kA&&e<=xA}function aa(i,e,t){return i.length===e.length&&i.every(((n,o)=>t(n,e[o])))}function eI(i){return i+"\0"}const B_="__name__";class dr{constructor(e,t,n){t===void 0?t=0:t>e.length&&ce(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ce(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){const a=dr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Se(e.length,t.length)}static compareSegments(e,t){const n=dr.isNumericId(e),o=dr.isNumericId(t);return n&&!o?-1:!n&&o?1:n&&o?dr.extractNumericId(e).compare(dr.extractNumericId(t)):Ip(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}}class ze extends dr{construct(e,t,n){return new ze(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ie(q.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((o=>o.length>0)))}return new ze(t)}static emptyPath(){return new ze([])}}const CA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends dr{construct(e,t,n){return new st(e,t,n)}static isValidIdentifier(e){return CA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B_}static keyField(){return new st([B_])}static fromServerFormat(e){const t=[];let n="",o=0;const a=()=>{if(n.length===0)throw new ie(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ie(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ie(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(n+=d,o++):(a(),o++)}if(a(),u)throw new ie(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(t)}static emptyPath(){return new st([])}}class re{constructor(e){this.path=e}static fromPath(e){return new re(ze.fromString(e))}static fromName(e){return new re(ze.fromString(e).popFirst(5))}static empty(){return new re(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new ze(e.slice()))}}function tI(i,e,t){if(!t)throw new ie(q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function bA(i,e,t,n){if(e===!0&&n===!0)throw new ie(q.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function z_(i){if(!re.isDocumentKey(i))throw new ie(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $_(i){if(re.isDocumentKey(i))throw new ie(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function nI(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function am(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ce(12329,{type:typeof i})}function ta(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ie(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=am(i);throw new ie(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function yt(i,e){const t={typeString:i};return e&&(t.value=e),t}function fu(i,e){if(!nI(i))throw new ie(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const o=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in i)){t=`JSON missing required field: '${n}'`;break}const u=i[n];if(o&&typeof u!==o){t=`JSON field '${n}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new ie(q.INVALID_ARGUMENT,t);return!0}const q_=-62135596800,W_=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*W_);return new qe(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q_)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W_}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fu(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:yt("string",qe._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new qe(0,0))}static max(){return new ge(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ql=-1;class gh{constructor(e,t,n,o){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=o}}function wp(i){return i.fields.find((e=>e.kind===2))}function As(i){return i.fields.filter((e=>e.kind!==2))}gh.UNKNOWN_ID=-1;class Zc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yl(0,_n.min())}}function DA(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,o=ge.fromTimestamp(n===1e9?new qe(t+1,0):new qe(t,n));return new _n(o,re.empty(),e)}function rI(i){return new _n(i.readTime,i.key,Ql)}class _n{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _n(ge.min(),re.empty(),Ql)}static max(){return new _n(ge.max(),re.empty(),Ql)}}function lm(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=re.comparator(i.documentKey,e.documentKey),t!==0?t:Se(i.largestBatchId,e.largestBatchId))}const iI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Js(i){if(i.code!==q.FAILED_PRECONDITION||i.message!==iI)throw i;J("LocalStore","Unexpectedly lost primary lease")}class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((n,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,n)=>{t(e)}))}static reject(e){return new L(((t,n)=>{n(e)}))}static waitFor(e){return new L(((t,n)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>n(p)))})),u=!0,a===o&&t()}))}static or(e){let t=L.resolve(!1);for(const n of e)t=t.next((o=>o?L.resolve(o):n()));return t}static forEach(e,t){const n=[];return e.forEach(((o,a)=>{n.push(t.call(this,o,a))})),this.waitFor(n)}static mapArray(e,t){return new L(((n,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next((E=>{u[y]=E,++d,d===a&&n(u)}),(E=>o(E)))}}))}static doWhile(e,t){return new L(((n,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):n()};a()}))}}const mn="SimpleDb";class qh{static open(e,t,n,o){try{return new qh(t,e.transaction(o,n))}catch(a){throw new Ml(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Br,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ml(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const o=um(n.target.error);this.S.reject(new Ml(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(J(mn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new VA(t)}}class Bi{static delete(e){return J(mn,"Removing database:",e),Ps(VE().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!BE())return!1;if(Bi.F())return!0;const e=It(),t=Bi.M(e),n=0<t&&t<10,o=oI(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,Bi.M(It())===12.2&&Qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(J(mn,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=a=>{const u=a.target.result;t(u)},o.onblocked=()=>{n(new Ml(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=a=>{const u=a.target.error;u.name==="VersionError"?n(new ie(q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new ie(q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new Ml(e,u))},o.onupgradeneeded=a=>{J(mn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.N.k(u,o.transaction,a.oldVersion,this.version).next((()=>{J(mn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,o){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const d=qh.open(this.db,e,a?"readonly":"readwrite",n),p=o(d).next((y=>(d.C(),y))).catch((y=>(d.abort(y),L.reject(y)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,y=p.name!=="FirebaseError"&&u<3;if(J(mn,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oI(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class NA{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ps(this.U.delete())}}class Ml extends ie{constructor(e,t){super(q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hi(i){return i.name==="IndexedDbTransactionError"}class VA{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(J(mn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(J(mn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ps(n)}add(e){return J(mn,"ADD",this.store.name,e,e),Ps(this.store.add(e))}get(e){return Ps(this.store.get(e)).next((t=>(t===void 0&&(t=null),J(mn,"GET",this.store.name,e,t),t)))}delete(e){return J(mn,"DELETE",this.store.name,e),Ps(this.store.delete(e))}count(){return J(mn,"COUNT",this.store.name),Ps(this.store.count())}J(e,t){const n=this.options(e,t),o=n.index?this.store.index(n.index):this.store;if(typeof o.getAll=="function"){const a=o.getAll(n.range);return new L(((u,d)=>{a.onerror=p=>{d(p.target.error)},a.onsuccess=p=>{u(p.target.result)}}))}{const a=this.cursor(n),u=[];return this.H(a,((d,p)=>{u.push(p)})).next((()=>u))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new L(((o,a)=>{n.onerror=u=>{a(u.target.error)},n.onsuccess=u=>{o(u.target.result)}}))}Z(e,t){J(mn,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const o=this.cursor(n);return this.H(o,((a,u,d)=>d.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const o=this.cursor(n);return this.H(o,t)}te(e){const t=this.cursor({});return new L(((n,o)=>{t.onerror=a=>{const u=um(a.target.error);o(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((d=>{d?u.continue():n()})):n()}}))}H(e,t){const n=[];return new L(((o,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void o();const p=new NA(d),y=t(d.primaryKey,d.value,p);if(y instanceof L){const E=y.catch((w=>(p.done(),L.reject(w))));n.push(E)}p.isDone?o():p.G===null?d.continue():d.continue(p.G)}})).next((()=>L.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ps(i){return new L(((e,t)=>{i.onsuccess=n=>{const o=n.target.result;e(o)},i.onerror=n=>{const o=um(n.target.error);t(o)}}))}let K_=!1;function um(i){const e=Bi.M(It());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const n=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return K_||(K_=!0,setTimeout((()=>{throw n}),0)),n}}return i}const Fl="IndexBackfiller";class OA{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){J(Fl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();J(Fl,`Documents written: ${t}`)}catch(t){Hi(t)?J(Fl,"Ignoring IndexedDB error during index backfill: ",t):await Js(t)}await this.re(6e4)}))}}class LA{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let o=t,a=!0;return L.doWhile((()=>a===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!n.has(u))return J(Fl,`Processing collection: ${u}`),this.oe(e,u,o).next((d=>{o-=d,n.add(u)}));a=!1})))).next((()=>t-o))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,n).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(o,a))).next((d=>(J(Fl,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>u.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((o,a)=>{const u=rI(a);lm(u,n)>0&&(n=u)})),new _n(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Cn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;const Ds=-1;function Wh(i){return i==null}function Jl(i){return i===0&&1/i==-1/0}function MA(i){return typeof i=="number"&&Number.isInteger(i)&&!Jl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const yh="";function Wt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=H_(e)),e=FA(i.get(t),e);return H_(e)}function FA(i,e){let t=e;const n=i.length;for(let o=0;o<n;o++){const a=i.charAt(o);switch(a){case"\0":t+="";break;case yh:t+="";break;default:t+=a}}return t}function H_(i){return i+yh+""}function fr(i){const e=i.length;if(pe(e>=2,64408,{path:i}),e===2)return pe(i.charAt(0)===yh&&i.charAt(1)==="",56145,{path:i}),ze.emptyPath();const t=e-2,n=[];let o="";for(let a=0;a<e;){const u=i.indexOf(yh,a);switch((u<0||u>t)&&ce(50515,{path:i}),i.charAt(u+1)){case"":const d=i.substring(a,u);let p;o.length===0?p=d:(o+=d,p=o,o=""),n.push(p);break;case"":o+=i.substring(a,u),o+="\0";break;case"":o+=i.substring(a,u+1);break;default:ce(61167,{path:i})}a=u+2}return new ze(n)}const Rs="remoteDocuments",pu="owner",$o="owner",Xl="mutationQueues",UA="userId",zn="mutations",G_="batchId",bs="userMutationsIndex",Q_=["userId","batchId"];function eh(i,e){return[i,Wt(e)]}function aI(i,e,t){return[i,Wt(e),t]}const jA={},la="documentMutations",_h="remoteDocumentsV14",BA=["prefixPath","collectionGroup","readTime","documentId"],th="documentKeyIndex",zA=["prefixPath","collectionGroup","documentId"],lI="collectionGroupIndex",$A=["collectionGroup","readTime","prefixPath","documentId"],Zl="remoteDocumentGlobal",Tp="remoteDocumentGlobalKey",ua="targets",uI="queryTargetsIndex",qA=["canonicalId","targetId"],ca="targetDocuments",WA=["targetId","path"],cm="documentTargetsIndex",KA=["path","targetId"],vh="targetGlobalKey",Ns="targetGlobal",eu="collectionParents",HA=["collectionId","parent"],ha="clientMetadata",GA="clientId",Kh="bundles",QA="bundleId",Hh="namedQueries",YA="name",hm="indexConfiguration",JA="indexId",Sp="collectionGroupIndex",XA="collectionGroup",Ul="indexState",ZA=["indexId","uid"],cI="sequenceNumberIndex",eR=["uid","sequenceNumber"],jl="indexEntries",tR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hI="documentKeyIndex",nR=["indexId","uid","orderedDocumentKey"],Gh="documentOverlays",rR=["userId","collectionPath","documentId"],Ap="collectionPathOverlayIndex",iR=["userId","collectionPath","largestBatchId"],dI="collectionGroupOverlayIndex",sR=["userId","collectionGroup","largestBatchId"],dm="globals",oR="name",fI=[Xl,zn,la,Rs,ua,pu,Ns,ca,ha,Zl,eu,Kh,Hh],aR=[...fI,Gh],pI=[Xl,zn,la,_h,ua,pu,Ns,ca,ha,Zl,eu,Kh,Hh,Gh],mI=pI,fm=[...mI,hm,Ul,jl],lR=fm,gI=[...fm,dm],uR=gI;class Rp extends sI{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Tt(i,e){const t=Ae(i);return Bi.O(t.le,e)}function Y_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Gi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function yI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class nt{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,n,o,a){this.key=e,this.value=t,this.color=n??Ot.RED,this.left=o??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,a){return new Ot(e??this.key,t??this.value,n??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this;const a=n(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,n),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,t,n,o,a){return this}insert(e,t,n){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class We{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J_(this.data.getIterator())}getIteratorFrom(e){return new J_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new We(this.comparator);return t.data=e,t}}class J_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qo(i){return i.hasNext()?i.getNext():void 0}class sn{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new sn([])}unionWith(e){let t=new We(st.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class _I extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _I("Invalid base64 string: "+a):a}})(e);return new _t(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new _t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const cR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(i){if(pe(!!i,39018),typeof i=="string"){let e=0;const t=cR.exec(i);if(pe(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:tt(i.seconds),nanos:tt(i.nanos)}}function tt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Wr(i){return typeof i=="string"?_t.fromBase64String(i):_t.fromUint8Array(i)}const vI="server_timestamp",EI="__type__",II="__previous_value__",wI="__local_write_time__";function pm(i){return(i?.mapValue?.fields||{})[EI]?.stringValue===vI}function Qh(i){const e=i.mapValue.fields[II];return pm(e)?Qh(e):e}function tu(i){const e=qr(i.mapValue.fields[wI].timestampValue);return new qe(e.seconds,e.nanos)}class hR{constructor(e,t,n,o,a,u,d,p,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const Eh="(default)";class js{constructor(e,t){this.projectId=e,this.database=t||Eh}static empty(){return new js("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof js&&e.projectId===this.projectId&&e.database===this.database}}const mm="__type__",TI="__max__",Li={mapValue:{fields:{__type__:{stringValue:TI}}}},gm="__vector__",da="value",nh={nullValue:"NULL_VALUE"};function $i(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?pm(i)?4:SI(i)?9007199254740991:Yh(i)?10:11:ce(28295,{value:i})}function vr(i,e){if(i===e)return!0;const t=$i(i);if(t!==$i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return tu(i).isEqual(tu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=qr(o.timestampValue),d=qr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,a){return Wr(o.bytesValue).isEqual(Wr(a.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,a){return tt(o.geoPointValue.latitude)===tt(a.geoPointValue.latitude)&&tt(o.geoPointValue.longitude)===tt(a.geoPointValue.longitude)})(i,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return tt(o.integerValue)===tt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=tt(o.doubleValue),d=tt(a.doubleValue);return u===d?Jl(u)===Jl(d):isNaN(u)&&isNaN(d)}return!1})(i,e);case 9:return aa(i.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Y_(u)!==Y_(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!vr(u[p],d[p])))return!1;return!0})(i,e);default:return ce(52216,{left:i})}}function nu(i,e){return(i.values||[]).find((t=>vr(t,e)))!==void 0}function qi(i,e){if(i===e)return 0;const t=$i(i),n=$i(e);if(t!==n)return Se(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(i.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=tt(a.integerValue||a.doubleValue),p=tt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(i,e);case 3:return X_(i.timestampValue,e.timestampValue);case 4:return X_(tu(i),tu(e));case 5:return Ip(i.stringValue,e.stringValue);case 6:return(function(a,u){const d=Wr(a),p=Wr(u);return d.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=Se(d[y],p[y]);if(E!==0)return E}return Se(d.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Se(tt(a.latitude),tt(u.latitude));return d!==0?d:Se(tt(a.longitude),tt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Z_(i.arrayValue,e.arrayValue);case 10:return(function(a,u){const d=a.fields||{},p=u.fields||{},y=d[da]?.arrayValue,E=p[da]?.arrayValue,w=Se(y?.values?.length||0,E?.values?.length||0);return w!==0?w:Z_(y,E)})(i.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Li.mapValue&&u===Li.mapValue)return 0;if(a===Li.mapValue)return 1;if(u===Li.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const A=Ip(p[w],E[w]);if(A!==0)return A;const j=qi(d[p[w]],y[E[w]]);if(j!==0)return j}return Se(p.length,E.length)})(i.mapValue,e.mapValue);default:throw ce(23264,{he:t})}}function X_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Se(i,e);const t=qr(i),n=qr(e),o=Se(t.seconds,n.seconds);return o!==0?o:Se(t.nanos,n.nanos)}function Z_(i,e){const t=i.values||[],n=e.values||[];for(let o=0;o<t.length&&o<n.length;++o){const a=qi(t[o],n[o]);if(a)return a}return Se(t.length,n.length)}function fa(i){return Pp(i)}function Pp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const n=qr(t);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Wr(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return re.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let n="[",o=!0;for(const a of t.values||[])o?o=!1:n+=",",n+=Pp(a);return n+"]"})(i.arrayValue):"mapValue"in i?(function(t){const n=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of n)a?a=!1:o+=",",o+=`${u}:${Pp(t.fields[u])}`;return o+"}"})(i.mapValue):ce(61005,{value:i})}function rh(i){switch($i(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qh(i);return e?16+rh(e):16;case 5:return 2*i.stringValue.length;case 6:return Wr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((o,a)=>o+rh(a)),0)})(i.arrayValue);case 10:case 11:return(function(n){let o=0;return Gi(n.fields,((a,u)=>{o+=a.length+rh(u)})),o})(i.mapValue);default:throw ce(13486,{value:i})}}function ym(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function kp(i){return!!i&&"integerValue"in i}function ru(i){return!!i&&"arrayValue"in i}function ev(i){return!!i&&"nullValue"in i}function tv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ih(i){return!!i&&"mapValue"in i}function Yh(i){return(i?.mapValue?.fields||{})[mm]?.stringValue===gm}function Bl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Gi(i.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Bl(n))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bl(i.arrayValue.values[t]);return e}return{...i}}function SI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===TI}const AI={mapValue:{fields:{[mm]:{stringValue:gm},[da]:{arrayValue:{}}}}};function dR(i){return"nullValue"in i?nh:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ym(js.empty(),re.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Yh(i)?AI:{mapValue:{}}:ce(35942,{value:i})}function fR(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ym(js.empty(),re.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?AI:"mapValue"in i?Yh(i)?{mapValue:{}}:Li:ce(61959,{value:i})}function nv(i,e){const t=qi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function rv(i,e){const t=qi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(t)}setAll(e){let t=st.emptyPath(),n={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,n,o),n={},o=[],t=d.popLast()}u?n[d.lastSegment()]=Bl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,o)}delete(e){const t=this.field(e.popLast());ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let o=t.mapValue.fields[e.get(n)];ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,n){Gi(t,((o,a)=>e[o]=a));for(const o of n)delete e[o]}clone(){return new qt(Bl(this.value))}}function RI(i){const e=[];return Gi(i.fields,((t,n)=>{const o=new st([t]);if(ih(n)){const a=RI(n.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new sn(e)}class ut{constructor(e,t,n,o,a,u,d){this.key=e,this.documentType=t,this.version=n,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new ut(e,0,ge.min(),ge.min(),ge.min(),qt.empty(),0)}static newFoundDocument(e,t,n,o){return new ut(e,1,t,ge.min(),n,o,0)}static newNoDocument(e,t){return new ut(e,2,t,ge.min(),ge.min(),qt.empty(),0)}static newUnknownDocument(e,t){return new ut(e,3,t,ge.min(),ge.min(),qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pa{constructor(e,t){this.position=e,this.inclusive=t}}function iv(i,e,t){let n=0;for(let o=0;o<i.position.length;o++){const a=e[o],u=i.position[o];if(a.field.isKeyField()?n=re.comparator(re.fromName(u.referenceValue),t.key):n=qi(u,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function sv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!vr(i.position[t],e.position[t]))return!1;return!0}class Ih{constructor(e,t="asc"){this.field=e,this.dir=t}}function pR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class PI{}class Ve extends PI{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new mR(e,t,n):t==="array-contains"?new _R(e,n):t==="in"?new NI(e,n):t==="not-in"?new vR(e,n):t==="array-contains-any"?new ER(e,n):new Ve(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new gR(e,n):new yR(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qi(t,this.value)):t!==null&&$i(this.value)===$i(t)&&this.matchesComparison(qi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends PI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ke(e,t)}matches(e){return ma(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ma(i){return i.op==="and"}function xp(i){return i.op==="or"}function _m(i){return kI(i)&&ma(i)}function kI(i){for(const e of i.filters)if(e instanceof Ke)return!1;return!0}function Cp(i){if(i instanceof Ve)return i.field.canonicalString()+i.op.toString()+fa(i.value);if(_m(i))return i.filters.map((e=>Cp(e))).join(",");{const e=i.filters.map((t=>Cp(t))).join(",");return`${i.op}(${e})`}}function xI(i,e){return i instanceof Ve?(function(n,o){return o instanceof Ve&&n.op===o.op&&n.field.isEqual(o.field)&&vr(n.value,o.value)})(i,e):i instanceof Ke?(function(n,o){return o instanceof Ke&&n.op===o.op&&n.filters.length===o.filters.length?n.filters.reduce(((a,u,d)=>a&&xI(u,o.filters[d])),!0):!1})(i,e):void ce(19439)}function CI(i,e){const t=i.filters.concat(e);return Ke.create(t,i.op)}function bI(i){return i instanceof Ve?(function(t){return`${t.field.canonicalString()} ${t.op} ${fa(t.value)}`})(i):i instanceof Ke?(function(t){return t.op.toString()+" {"+t.getFilters().map(bI).join(" ,")+"}"})(i):"Filter"}class mR extends Ve{constructor(e,t,n){super(e,t,n),this.key=re.fromName(n.referenceValue)}matches(e){const t=re.comparator(e.key,this.key);return this.matchesComparison(t)}}class gR extends Ve{constructor(e,t){super(e,"in",t),this.keys=DI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yR extends Ve{constructor(e,t){super(e,"not-in",t),this.keys=DI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DI(i,e){return(e.arrayValue?.values||[]).map((t=>re.fromName(t.referenceValue)))}class _R extends Ve{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ru(t)&&nu(t.arrayValue,this.value)}}class NI extends Ve{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nu(this.value.arrayValue,t)}}class vR extends Ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nu(this.value.arrayValue,t)}}class ER extends Ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ru(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>nu(this.value.arrayValue,n)))}}class IR{constructor(e,t=null,n=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function bp(i,e=null,t=[],n=[],o=null,a=null,u=null){return new IR(i,e,t,n,o,a,u)}function Bs(i){const e=Ae(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Cp(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),Wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>fa(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>fa(n))).join(",")),e.Te=t}return e.Te}function mu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!pR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!xI(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!sv(i.startAt,e.startAt)&&sv(i.endAt,e.endAt)}function wh(i){return re.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Th(i,e){return i.filters.filter((t=>t instanceof Ve&&t.field.isEqual(e)))}function ov(i,e,t){let n=nh,o=!0;for(const a of Th(i,e)){let u=nh,d=!0;switch(a.op){case"<":case"<=":u=dR(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=nh}nv({value:n,inclusive:o},{value:u,inclusive:d})<0&&(n=u,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const u=t.position[a];nv({value:n,inclusive:o},{value:u,inclusive:t.inclusive})<0&&(n=u,o=t.inclusive);break}}return{value:n,inclusive:o}}function av(i,e,t){let n=Li,o=!0;for(const a of Th(i,e)){let u=Li,d=!0;switch(a.op){case">=":case">":u=fR(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=Li}rv({value:n,inclusive:o},{value:u,inclusive:d})>0&&(n=u,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const u=t.position[a];rv({value:n,inclusive:o},{value:u,inclusive:t.inclusive})>0&&(n=u,o=t.inclusive);break}}return{value:n,inclusive:o}}class Jh{constructor(e,t=null,n=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wR(i,e,t,n,o,a,u,d){return new Jh(i,e,t,n,o,a,u,d)}function Xh(i){return new Jh(i)}function lv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function TR(i){return i.collectionGroup!==null}function zl(i){const e=Ae(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new We(st.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ih(a,n))})),t.has(st.keyField().canonicalString())||e.Ie.push(new Ih(st.keyField(),n))}return e.Ie}function bn(i){const e=Ae(i);return e.Ee||(e.Ee=SR(e,zl(i))),e.Ee}function SR(i,e){if(i.limitType==="F")return bp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Ih(o.field,a)}));const t=i.endAt?new pa(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new pa(i.startAt.position,i.startAt.inclusive):null;return bp(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function Dp(i,e,t){return new Jh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Zh(i,e){return mu(bn(i),bn(e))&&i.limitType===e.limitType}function VI(i){return`${Bs(bn(i))}|lt:${i.limitType}`}function Yo(i){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((o=>bI(o))).join(", ")}]`),Wh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>fa(o))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>fa(o))).join(",")),`Target(${n})`})(bn(i))}; limitType=${i.limitType})`}function gu(i,e){return e.isFoundDocument()&&(function(n,o){const a=o.key.path;return n.collectionGroup!==null?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):re.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(i,e)&&(function(n,o){for(const a of zl(n))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(i,e)&&(function(n,o){for(const a of n.filters)if(!a.matches(o))return!1;return!0})(i,e)&&(function(n,o){return!(n.startAt&&!(function(u,d,p){const y=iv(u,d,p);return u.inclusive?y<=0:y<0})(n.startAt,zl(n),o)||n.endAt&&!(function(u,d,p){const y=iv(u,d,p);return u.inclusive?y>=0:y>0})(n.endAt,zl(n),o))})(i,e)}function AR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function OI(i){return(e,t)=>{let n=!1;for(const o of zl(i)){const a=RR(o,e,t);if(a!==0)return a;n=n||o.field.isKeyField()}return 0}}function RR(i,e,t){const n=i.field.isKeyField()?re.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?qi(p,y):ce(42886)})(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return ce(19790,{direction:i.dir})}}class Gr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[o,a]of n)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],e))return n.length===1?delete this.inner[t]:n.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,((t,n)=>{for(const[o,a]of n)e(o,a)}))}isEmpty(){return yI(this.inner)}size(){return this.innerSize}}const PR=new nt(re.comparator);function gn(){return PR}const LI=new nt(re.comparator);function Dl(...i){let e=LI;for(const t of i)e=e.insert(t.key,t);return e}function MI(i){let e=LI;return i.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function pr(){return $l()}function FI(){return $l()}function $l(){return new Gr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const kR=new nt(re.comparator),xR=new We(re.comparator);function ke(...i){let e=xR;for(const t of i)e=e.add(t);return e}const CR=new We(Se);function bR(){return CR}function vm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function UI(i){return{integerValue:""+i}}function DR(i,e){return MA(e)?UI(e):vm(i,e)}class ed{constructor(){this._=void 0}}function NR(i,e,t){return i instanceof ga?(function(o,a){const u={fields:{[EI]:{stringValue:vI},[wI]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&pm(a)&&(a=Qh(a)),a&&(u.fields[II]=a),{mapValue:u}})(t,e):i instanceof ya?BI(i,e):i instanceof _a?zI(i,e):(function(o,a){const u=jI(o,a),d=uv(u)+uv(o.Ae);return kp(u)&&kp(o.Ae)?UI(d):vm(o.serializer,d)})(i,e)}function VR(i,e,t){return i instanceof ya?BI(i,e):i instanceof _a?zI(i,e):t}function jI(i,e){return i instanceof iu?(function(n){return kp(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class ga extends ed{}class ya extends ed{constructor(e){super(),this.elements=e}}function BI(i,e){const t=$I(e);for(const n of i.elements)t.some((o=>vr(o,n)))||t.push(n);return{arrayValue:{values:t}}}class _a extends ed{constructor(e){super(),this.elements=e}}function zI(i,e){let t=$I(e);for(const n of i.elements)t=t.filter((o=>!vr(o,n)));return{arrayValue:{values:t}}}class iu extends ed{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function uv(i){return tt(i.integerValue||i.doubleValue)}function $I(i){return ru(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class qI{constructor(e,t){this.field=e,this.transform=t}}function OR(i,e){return i.field.isEqual(e.field)&&(function(n,o){return n instanceof ya&&o instanceof ya||n instanceof _a&&o instanceof _a?aa(n.elements,o.elements,vr):n instanceof iu&&o instanceof iu?vr(n.Ae,o.Ae):n instanceof ga&&o instanceof ga})(i.transform,e.transform)}class LR{constructor(e,t){this.version=e,this.transformResults=t}}class Yt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class td{}function WI(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new nd(i.key,Yt.none()):new Ra(i.key,i.data,Yt.none());{const t=i.data,n=qt.empty();let o=new We(st.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?n.delete(a):n.set(a,u),o=o.add(a)}return new Qr(i.key,n,new sn(o.toArray()),Yt.none())}}function MR(i,e,t){i instanceof Ra?(function(o,a,u){const d=o.value.clone(),p=hv(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(i,e,t):i instanceof Qr?(function(o,a,u){if(!sh(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=hv(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(KI(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(i,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ql(i,e,t,n){return i instanceof Ra?(function(a,u,d,p){if(!sh(a.precondition,u))return d;const y=a.value.clone(),E=dv(a.fieldTransforms,p,u);return y.setAll(E),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(i,e,t,n):i instanceof Qr?(function(a,u,d,p){if(!sh(a.precondition,u))return d;const y=dv(a.fieldTransforms,p,u),E=u.data;return E.setAll(KI(a)),E.setAll(y),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(i,e,t,n):(function(a,u,d){return sh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(i,e,t)}function FR(i,e){let t=null;for(const n of i.fieldTransforms){const o=e.data.field(n.field),a=jI(n.transform,o||null);a!=null&&(t===null&&(t=qt.empty()),t.set(n.field,a))}return t||null}function cv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(n,o){return n===void 0&&o===void 0||!(!n||!o)&&aa(n,o,((a,u)=>OR(a,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ra extends td{constructor(e,t,n,o=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Qr extends td{constructor(e,t,n,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function KI(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}})),e}function hv(i,e,t){const n=new Map;pe(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const a=i[o],u=a.transform,d=e.data.field(a.field);n.set(a.field,VR(u,d,t[o]))}return n}function dv(i,e,t){const n=new Map;for(const o of i){const a=o.transform,u=t.data.field(o.field);n.set(o.field,NR(a,u,e))}return n}class nd extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HI extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Em{constructor(e,t,n,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=o}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&MR(a,e,n[o])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ql(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ql(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=FI();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=WI(u,d);p!==null&&n.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(ge.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,((t,n)=>cv(t,n)))&&aa(this.baseMutations,e.baseMutations,((t,n)=>cv(t,n)))}}class Im{constructor(e,t,n,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=o}static from(e,t,n){pe(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let o=(function(){return kR})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,n[u].version);return new Im(e,t,n,o)}}class wm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class UR{constructor(e,t){this.count=e,this.unchangedNames=t}}var gt,Le;function jR(i){switch(i){case q.OK:return ce(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ce(15467,{code:i})}}function GI(i){if(i===void 0)return Qt("GRPC error has no .code"),q.UNKNOWN;switch(i){case gt.OK:return q.OK;case gt.CANCELLED:return q.CANCELLED;case gt.UNKNOWN:return q.UNKNOWN;case gt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case gt.INTERNAL:return q.INTERNAL;case gt.UNAVAILABLE:return q.UNAVAILABLE;case gt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case gt.NOT_FOUND:return q.NOT_FOUND;case gt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case gt.ABORTED:return q.ABORTED;case gt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case gt.DATA_LOSS:return q.DATA_LOSS;default:return ce(39323,{code:i})}}(Le=gt||(gt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";function BR(){return new TextEncoder}const zR=new ji([4294967295,4294967295],0);function fv(i){const e=BR().encode(i),t=new HE;return t.update(e),new Uint8Array(t.digest())}function pv(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ji([t,n],0),new ji([o,a],0)]}class Tm{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Nl(`Invalid padding: ${t}`);if(n<0)throw new Nl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ji.fromNumber(this.ge)}ye(e,t,n){let o=e.add(t.multiply(ji.fromNumber(n)));return o.compare(zR)===1&&(o=new ji([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=fv(e),[n,o]=pv(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(n,o,a);if(!this.we(u))return!1}return!0}static create(e,t,n){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Tm(a,o,t);return n.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=fv(e),[n,o]=pv(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(n,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rd{constructor(e,t,n,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const o=new Map;return o.set(e,yu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new rd(ge.min(),o,new nt(Se),gn(),ke())}}class yu{constructor(e,t,n,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new yu(n,t,ke(),ke(),ke())}}class oh{constructor(e,t,n,o){this.be=e,this.removedTargetIds=t,this.key=n,this.De=o}}class QI{constructor(e,t){this.targetId=e,this.Ce=t}}class YI{constructor(e,t,n=_t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=o}}class mv{constructor(){this.ve=0,this.Fe=gv(),this.Me=_t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),n=ke();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:n=n.add(o);break;default:ce(38017,{changeType:a})}})),new yu(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=gv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $R{constructor(e){this.Ge=e,this.ze=new Map,this.je=gn(),this.Je=Kc(),this.He=Kc(),this.Ye=new nt(Se)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,n=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(wh(a))if(n===0){const u=new re(a.path);this.et(t,u,ut.newNoDocument(u,ge.min()))}else pe(n===1,20013,{expectedCount:n});else{const u=this._t(t);if(u!==n){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Wr(n).toUint8Array()}catch(p){if(p instanceof _I)return Gl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Tm(u,o,a)}catch(p){return Gl(p instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let o=0;return n.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&wh(d.target)){const p=new re(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,ut.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let n=ke();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(n=n.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new rd(e,t,this.Ye,this.je,n);return this.je=gn(),this.Je=Kc(),this.He=Kc(),this.Ye=new nt(Se),o}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new We(Se),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new We(Se),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new nt(re.comparator)}function gv(){return new nt(re.comparator)}const qR={asc:"ASCENDING",desc:"DESCENDING"},WR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KR={and:"AND",or:"OR"};class HR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Np(i,e){return i.useProto3Json||Wh(e)?e:{value:e}}function va(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JI(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function GR(i,e){return va(i,e.toTimestamp())}function Jt(i){return pe(!!i,49232),ge.fromTimestamp((function(t){const n=qr(t);return new qe(n.seconds,n.nanos)})(i))}function Sm(i,e){return Vp(i,e).canonicalString()}function Vp(i,e){const t=(function(o){return new ze(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function XI(i){const e=ze.fromString(i);return pe(aw(e),10190,{key:e.toString()}),e}function Sh(i,e){return Sm(i.databaseId,e.path)}function Vs(i,e){const t=XI(e);if(t.get(1)!==i.databaseId.projectId)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new re(tw(t))}function ZI(i,e){return Sm(i.databaseId,e)}function ew(i){const e=XI(i);return e.length===4?ze.emptyPath():tw(e)}function Op(i){return new ze(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function tw(i){return pe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function yv(i,e,t){return{name:Sh(i,e),fields:t.value.mapValue.fields}}function QR(i,e,t){const n=Vs(i,e.name),o=Jt(e.updateTime),a=e.createTime?Jt(e.createTime):ge.min(),u=new qt({mapValue:{fields:e.fields}}),d=ut.newFoundDocument(n,o,a,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function YR(i,e){let t;if("targetChange"in e){e.targetChange;const n=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ce(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(y,E){return y.useProto3Json?(pe(E===void 0||typeof E=="string",58123),_t.fromBase64String(E||"")):(pe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),_t.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(y){const E=y.code===void 0?q.UNKNOWN:GI(y.code);return new ie(E,y.message||"")})(u);t=new YI(n,o,a,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const o=Vs(i,n.document.name),a=Jt(n.document.updateTime),u=n.document.createTime?Jt(n.document.createTime):ge.min(),d=new qt({mapValue:{fields:n.document.fields}}),p=ut.newFoundDocument(o,a,u,d),y=n.targetIds||[],E=n.removedTargetIds||[];t=new oh(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const o=Vs(i,n.document),a=n.readTime?Jt(n.readTime):ge.min(),u=ut.newNoDocument(o,a),d=n.removedTargetIds||[];t=new oh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const o=Vs(i,n.document),a=n.removedTargetIds||[];t=new oh([],a,o,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:o=0,unchangedNames:a}=n,u=new UR(o,a),d=n.targetId;t=new QI(d,u)}}return t}function Ah(i,e){let t;if(e instanceof Ra)t={update:yv(i,e.key,e.value)};else if(e instanceof nd)t={delete:Sh(i,e.key)};else if(e instanceof Qr)t={update:yv(i,e.key,e.data),updateMask:nP(e.fieldMask)};else{if(!(e instanceof HI))return ce(16599,{Vt:e.type});t={verify:Sh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,u){const d=u.transform;if(d instanceof ga)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ya)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _a)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof iu)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw ce(20930,{transform:u.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:GR(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ce(27497)})(i,e.precondition)),t}function Lp(i,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Yt.updateTime(Jt(a.updateTime)):a.exists!==void 0?Yt.exists(a.exists):Yt.none()})(e.currentDocument):Yt.none(),n=e.updateTransforms?e.updateTransforms.map((o=>(function(u,d){let p=null;if("setToServerValue"in d)pe(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new ga;else if("appendMissingElements"in d){const E=d.appendMissingElements.values||[];p=new ya(E)}else if("removeAllFromArray"in d){const E=d.removeAllFromArray.values||[];p=new _a(E)}else"increment"in d?p=new iu(u,d.increment):ce(16584,{proto:d});const y=st.fromServerFormat(d.fieldPath);return new qI(y,p)})(i,o))):[];if(e.update){e.update.name;const o=Vs(i,e.update.name),a=new qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(p){const y=p.fieldPaths||[];return new sn(y.map((E=>st.fromServerFormat(E))))})(e.updateMask);return new Qr(o,a,u,t,n)}return new Ra(o,a,t,n)}if(e.delete){const o=Vs(i,e.delete);return new nd(o,t)}if(e.verify){const o=Vs(i,e.verify);return new HI(o,t)}return ce(1463,{proto:e})}function JR(i,e){return i&&i.length>0?(pe(e!==void 0,14353),i.map((t=>(function(o,a){let u=o.updateTime?Jt(o.updateTime):Jt(a);return u.isEqual(ge.min())&&(u=Jt(a)),new LR(u,o.transformResults||[])})(t,e)))):[]}function nw(i,e){return{documents:[ZI(i,e.path)]}}function rw(i,e){const t={structuredQuery:{}},n=e.path;let o;e.collectionGroup!==null?(o=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=ZI(i,o);const a=(function(y){if(y.length!==0)return ow(Ke.create(y,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(y){if(y.length!==0)return y.map((E=>(function(A){return{field:Jo(A.field),direction:ZR(A.dir)}})(E)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Np(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function iw(i){let e=ew(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let o=null;if(n>0){pe(n===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let a=[];t.where&&(a=(function(w){const A=sw(w);return A instanceof Ke&&_m(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((A=>(function(H){return new Ih(Xo(H.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let A;return A=typeof w=="object"?w.value:w,Wh(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(w){const A=!!w.before,j=w.values||[];return new pa(j,A)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const A=!w.before,j=w.values||[];return new pa(j,A)})(t.endAt)),wR(e,o,u,a,d,"F",p,y)}function XR(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sw(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Xo(t.unaryFilter.field);return Ve.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=Xo(t.unaryFilter.field);return Ve.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Xo(t.unaryFilter.field);return Ve.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xo(t.unaryFilter.field);return Ve.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Ve.create(Xo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Ke.create(t.compositeFilter.filters.map((n=>sw(n))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ce(1026)}})(t.compositeFilter.op))})(i):ce(30097,{filter:i})}function ZR(i){return qR[i]}function eP(i){return WR[i]}function tP(i){return KR[i]}function Jo(i){return{fieldPath:i.canonicalString()}}function Xo(i){return st.fromServerFormat(i.fieldPath)}function ow(i){return i instanceof Ve?(function(t){if(t.op==="=="){if(tv(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(ev(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tv(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(ev(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:eP(t.op),value:t.value}}})(i):i instanceof Ke?(function(t){const n=t.getFilters().map((o=>ow(o)));return n.length===1?n[0]:{compositeFilter:{op:tP(t.op),filters:n}}})(i):ce(54877,{filter:i})}function nP(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Fr{constructor(e,t,n,o,a=ge.min(),u=ge.min(),d=_t.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lw{constructor(e){this.yt=e}}function rP(i,e){let t;if(e.document)t=QR(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=re.fromSegments(e.noDocument.path),o=$s(e.noDocument.readTime);t=ut.newNoDocument(n,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ce(56709);{const n=re.fromSegments(e.unknownDocument.path),o=$s(e.unknownDocument.version);t=ut.newUnknownDocument(n,o)}}return e.readTime&&t.setReadTime((function(o){const a=new qe(o[0],o[1]);return ge.fromTimestamp(a)})(e.readTime)),t}function _v(i,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,u){return{name:Sh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:va(a,u.version.toTimestamp()),createTime:va(a,u.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:zs(e.version)};else{if(!e.isUnknownDocument())return ce(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:zs(e.version)}}return n}function Rh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function zs(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $s(i){const e=new qe(i.seconds,i.nanoseconds);return ge.fromTimestamp(e)}function ks(i,e){const t=(e.baseMutations||[]).map((a=>Lp(i.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>Lp(i.yt,a))),o=qe.fromMillis(e.localWriteTimeMs);return new Em(e.batchId,o,t,n)}function Vl(i){const e=$s(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?$s(i.lastLimboFreeSnapshotVersion):ge.min();let n;return n=(function(a){return a.documents!==void 0})(i.query)?(function(a){const u=a.documents.length;return pe(u===1,1966,{count:u}),bn(Xh(ew(a.documents[0])))})(i.query):(function(a){return bn(iw(a))})(i.query),new Fr(n,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,_t.fromBase64String(i.resumeToken))}function uw(i,e){const t=zs(e.snapshotVersion),n=zs(e.lastLimboFreeSnapshotVersion);let o;o=wh(e.target)?nw(i.yt,e.target):rw(i.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bs(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:o}}function cw(i){const e=iw({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Dp(e,e.limit,"L"):e}function ip(i,e){return new wm(e.largestBatchId,Lp(i.yt,e.overlayMutation))}function vv(i,e){const t=e.path.lastSegment();return[i,Wt(e.path.popLast()),t]}function Ev(i,e,t,n){return{indexId:i,uid:e,sequenceNumber:t,readTime:zs(n.readTime),documentKey:Wt(n.documentKey.path),largestBatchId:n.largestBatchId}}class iP{getBundleMetadata(e,t){return Iv(e).get(t).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:$s(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,t){return Iv(e).put((function(o){return{bundleId:o.id,createTime:zs(Jt(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return wv(e).get(t).next((n=>{if(n)return(function(a){return{name:a.name,query:cw(a.bundledQuery),readTime:$s(a.readTime)}})(n)}))}saveNamedQuery(e,t){return wv(e).put((function(o){return{name:o.name,readTime:zs(Jt(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function Iv(i){return Tt(i,Kh)}function wv(i){return Tt(i,Hh)}class id{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new id(e,n)}getOverlay(e,t){return Sl(e).get(vv(this.userId,t)).next((n=>n?ip(this.serializer,n):null))}getOverlays(e,t){const n=pr();return L.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&n.set(o,a)})))).next((()=>n))}saveOverlays(e,t,n){const o=[];return n.forEach(((a,u)=>{const d=new wm(t,u);o.push(this.St(e,d))})),L.waitFor(o)}removeOverlaysForBatchId(e,t,n){const o=new Set;t.forEach((u=>o.add(Wt(u.getCollectionPath()))));const a=[];return o.forEach((u=>{const d=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);a.push(Sl(e).Z(Ap,d))})),L.waitFor(a)}getOverlaysForCollection(e,t,n){const o=pr(),a=Wt(t),u=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Sl(e).J(Ap,u).next((d=>{for(const p of d){const y=ip(this.serializer,p);o.set(y.getKey(),y)}return o}))}getOverlaysForCollectionGroup(e,t,n,o){const a=pr();let u;const d=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sl(e).ee({index:dI,range:d},((p,y,E)=>{const w=ip(this.serializer,y);a.size()<o||w.largestBatchId===u?(a.set(w.getKey(),w),u=w.largestBatchId):E.done()})).next((()=>a))}St(e,t){return Sl(e).put((function(o,a,u){const[d,p,y]=vv(a,u.mutation.key);return{userId:a,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ah(o.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Sl(i){return Tt(i,Gh)}class sP{bt(e){return Tt(e,dm)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?_t.fromUint8Array(n):_t.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class xs{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(tt(e.integerValue));else if("doubleValue"in e){const n=tt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Jl(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=qr(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Wr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?SI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Yh(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ce(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const o of Object.keys(n))this.Ot(o,t),this.Ct(n[o],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const o=da,a=n[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(tt(a)),this.Ot(o,t),this.Ct(n[o],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const o of n)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),re.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}xs.Kt=new xs;const Wo=255;function oP(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function Tv(i){const e=64-(function(n){let o=0;for(let a=0;a<8;++a){const u=oP(255&n[a]);if(o+=u,u!==8)break}return o})(i);return Math.ceil(e/8)}class aP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),n=Tv(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let o=t.length-n;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),n=Tv(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let o=t.length-n;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(Wo),this.sn(255)}_n(){this.an(Wo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let o=1;o<t.length;++o)t[o]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Wo?(this.sn(Wo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Wo?(this.an(Wo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const o=new Uint8Array(n);o.set(this.buffer),this.buffer=o}}class lP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class uP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Al{constructor(){this.cn=new aP,this.ln=new lP(this.cn),this.hn=new uP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Cs{constructor(e,t,n,o){this.Tn=e,this.In=t,this.En=n,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Cs(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:ah(this.En),directionalValue:ah(this.dn),orderedDocumentKey:ah(t),documentKey:n.path.toArray()}}Vn(e,t,n){const o=this.Rn(e,t,n);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Pi(i,e){let t=i.Tn-e.Tn;return t!==0?t:(t=Sv(i.En,e.En),t!==0?t:(t=Sv(i.dn,e.dn),t!==0?t:re.comparator(i.In,e.In)))}function Sv(i,e){for(let t=0;t<i.length&&t<e.length;++t){const n=i[t]-e[t];if(n!==0)return n}return i.length-e.length}function ah(i){return jE()?(function(t){let n="";for(let o=0;o<t.length;o++)n+=String.fromCharCode(t[o]);return n})(i):i}function Av(i){return typeof i!="string"?i:(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(i)}class Rv{constructor(e){this.mn=new We(((t,n)=>st.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(pe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=wp(e);if(t!==void 0&&!this.wn(t))return!1;const n=As(e);let o=new Set,a=0,u=0;for(;a<n.length&&this.wn(n[a]);++a)o=o.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=n[a];if(!this.Sn(d,p)||!this.bn(this.fn[u++],p))return!1}++a}for(;a<n.length;++a){const d=n[a];if(u>=this.fn.length||!this.bn(this.fn[u++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new We(st.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Zc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Zc(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Zc(n.field,n.dir==="asc"?0:1)));return new gh(gh.UNKNOWN_ID,this.collectionId,t,Yl.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function hw(i){if(pe(i instanceof Ve||i instanceof Ke,20012),i instanceof Ve){if(i instanceof NI){const t=i.value.arrayValue?.values?.map((n=>Ve.create(i.field,"==",n)))||[];return Ke.create(t,"or")}return i}const e=i.filters.map((t=>hw(t)));return Ke.create(e,i.op)}function cP(i){if(i.getFilters().length===0)return[];const e=Up(hw(i));return pe(dw(e),7391),Mp(e)||Fp(e)?[e]:e.getFilters()}function Mp(i){return i instanceof Ve}function Fp(i){return i instanceof Ke&&_m(i)}function dw(i){return Mp(i)||Fp(i)||(function(t){if(t instanceof Ke&&xp(t)){for(const n of t.getFilters())if(!Mp(n)&&!Fp(n))return!1;return!0}return!1})(i)}function Up(i){if(pe(i instanceof Ve||i instanceof Ke,34018),i instanceof Ve)return i;if(i.filters.length===1)return Up(i.filters[0]);const e=i.filters.map((n=>Up(n)));let t=Ke.create(e,i.op);return t=Ph(t),dw(t)?t:(pe(t instanceof Ke,64498),pe(ma(t),40251),pe(t.filters.length>1,57927),t.filters.reduce(((n,o)=>Am(n,o))))}function Am(i,e){let t;return pe(i instanceof Ve||i instanceof Ke,38388),pe(e instanceof Ve||e instanceof Ke,25473),t=i instanceof Ve?e instanceof Ve?(function(o,a){return Ke.create([o,a],"and")})(i,e):Pv(i,e):e instanceof Ve?Pv(e,i):(function(o,a){if(pe(o.filters.length>0&&a.filters.length>0,48005),ma(o)&&ma(a))return CI(o,a.getFilters());const u=xp(o)?o:a,d=xp(o)?a:o,p=u.filters.map((y=>Am(y,d)));return Ke.create(p,"or")})(i,e),Ph(t)}function Pv(i,e){if(ma(e))return CI(e,i.getFilters());{const t=e.filters.map((n=>Am(i,n)));return Ke.create(t,"or")}}function Ph(i){if(pe(i instanceof Ve||i instanceof Ke,11850),i instanceof Ve)return i;const e=i.getFilters();if(e.length===1)return Ph(e[0]);if(kI(i))return i;const t=e.map((o=>Ph(o))),n=[];return t.forEach((o=>{o instanceof Ve?n.push(o):o instanceof Ke&&(o.op===i.op?n.push(...o.filters):n.push(o))})),n.length===1?n[0]:Ke.create(n,i.op)}class hP{constructor(){this.Cn=new Rm}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(_n.min())}updateCollectionGroup(e,t,n){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class Rm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t]||new We(ze.comparator),a=!o.has(n);return this.index[t]=o.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t];return o&&o.has(n)}getEntries(e){return(this.index[e]||new We(ze.comparator)).toArray()}}const kv="IndexedDbIndexManager",Hc=new Uint8Array(0);class dP{constructor(e,t){this.databaseId=t,this.vn=new Rm,this.Fn=new Gr((n=>Bs(n)),((n,o)=>mu(n,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:n,parent:Wt(o)};return xv(e).put(a)}return L.resolve()}getCollectionParents(e,t){const n=[],o=IDBKeyRange.bound([t,""],[eI(t),""],!1,!0);return xv(e).J(o).next((a=>{for(const u of a){if(u.collectionId!==t)break;n.push(fr(u.parent))}return n}))}addFieldIndex(e,t){const n=Rl(e),o=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const a=n.add(o);if(t.indexState){const u=Ho(e);return a.next((d=>{u.put(Ev(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const n=Rl(e),o=Ho(e),a=Ko(e);return n.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Rl(e),n=Ko(e),o=Ho(e);return t.Z().next((()=>n.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((o=>{if(o===0||o===1){const a=new Rv(n).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const n=Ko(e);let o=!0;const a=new Map;return L.forEach(this.Mn(t),(u=>this.xn(e,u).next((d=>{o&&(o=!!d),a.set(u,d)})))).next((()=>{if(o){let u=ke();const d=[];return L.forEach(a,((p,y)=>{J(kv,`Using index ${(function(ae){return`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map((Ie=>`${Ie.fieldPath}:${Ie.kind}`)).join(",")}`})(p)} to execute ${Bs(t)}`);const E=(function(ae,Ie){const Te=wp(Ie);if(Te===void 0)return null;for(const X of Th(ae,Te.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null})(y,p),w=(function(ae,Ie){const Te=new Map;for(const X of As(Ie))for(const P of Th(ae,X.fieldPath))switch(P.op){case"==":case"in":Te.set(X.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return Te.set(X.fieldPath.canonicalString(),P.value),Array.from(Te.values())}return null})(y,p),A=(function(ae,Ie){const Te=[];let X=!0;for(const P of As(Ie)){const T=P.kind===0?ov(ae,P.fieldPath,ae.startAt):av(ae,P.fieldPath,ae.startAt);Te.push(T.value),X&&(X=T.inclusive)}return new pa(Te,X)})(y,p),j=(function(ae,Ie){const Te=[];let X=!0;for(const P of As(Ie)){const T=P.kind===0?av(ae,P.fieldPath,ae.endAt):ov(ae,P.fieldPath,ae.endAt);Te.push(T.value),X&&(X=T.inclusive)}return new pa(Te,X)})(y,p),H=this.On(p,y,A),W=this.On(p,y,j),$=this.Nn(p,y,w),te=this.Bn(p.indexId,E,H,A.inclusive,W,j.inclusive,$);return L.forEach(te,(se=>n.Y(se,t.limit).next((ae=>{ae.forEach((Ie=>{const Te=re.fromSegments(Ie.documentKey);u.has(Te)||(u=u.add(Te),d.push(Te))}))}))))})).next((()=>d))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=cP(Ke.create(e.filters,"and")).map((n=>bp(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,o,a,u,d){const p=(t!=null?t.length:1)*Math.max(n.length,a.length),y=p/(t!=null?t.length:1),E=[];for(let w=0;w<p;++w){const A=t?this.Ln(t[w/y]):Hc,j=this.kn(e,A,n[w%y],o),H=this.qn(e,A,a[w%y],u),W=d.map(($=>this.kn(e,A,$,!0)));E.push(...this.createRange(j,H,W))}return E}kn(e,t,n,o){const a=new Cs(e,re.empty(),t,n);return o?a:a.An()}qn(e,t,n,o){const a=new Cs(e,re.empty(),t,n);return o?a.An():a}xn(e,t){const n=new Rv(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((a=>{let u=null;for(const d of a)n.yn(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u}))}getIndexType(e,t){let n=2;const o=this.Mn(t);return L.forEach(o,(a=>this.xn(e,a).next((u=>{u?n!==0&&u.fields.length<(function(p){let y=new We(st.comparator),E=!1;for(const w of p.filters)for(const A of w.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:y=y.add(A.field));for(const w of p.orderBy)w.field.isKeyField()||(y=y.add(w.field));return y.size+(E?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(u){return u.limit!==null})(t)&&o.length>1&&n===2?1:n))}Qn(e,t){const n=new Al;for(const o of As(e)){const a=t.data.field(o.fieldPath);if(a==null)return null;const u=n.Pn(o.kind);xs.Kt.Dt(a,u)}return n.un()}Ln(e){const t=new Al;return xs.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Al;return xs.Kt.Dt(ym(this.databaseId,t),n.Pn((function(a){const u=As(a);return u.length===0?0:u[u.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let o=[];o.push(new Al);let a=0;for(const u of As(e)){const d=n[a++];for(const p of o)if(this.Un(t,u.fieldPath)&&ru(d))o=this.Kn(o,u,d);else{const y=p.Pn(u.kind);xs.Kt.Dt(d,y)}}return this.Wn(o)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const o=[...e],a=[];for(const u of n.arrayValue.values||[])for(const d of o){const p=new Al;p.seed(d.un()),xs.Kt.Dt(u,p.Pn(t.kind)),a.push(p)}return a}Un(e,t){return!!e.filters.find((n=>n instanceof Ve&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Rl(e),o=Ho(e);return(t?n.J(Sp,IDBKeyRange.bound(t,t)):n.J()).next((a=>{const u=[];return L.forEach(a,(d=>o.get([d.indexId,this.uid]).next((p=>{u.push((function(E,w){const A=w?new Yl(w.sequenceNumber,new _n($s(w.readTime),new re(fr(w.documentKey)),w.largestBatchId)):Yl.empty(),j=E.fields.map((([H,W])=>new Zc(st.fromServerFormat(H),W)));return new gh(E.indexId,E.collectionGroup,j,A)})(d,p))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,o)=>{const a=n.indexState.sequenceNumber-o.indexState.sequenceNumber;return a!==0?a:Se(n.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const o=Rl(e),a=Ho(e);return this.Gn(e).next((u=>o.J(Sp,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(p=>a.put(Ev(p.indexId,this.uid,u,n))))))))}updateIndexEntries(e,t){const n=new Map;return L.forEach(t,((o,a)=>{const u=n.get(o.collectionGroup);return(u?L.resolve(u):this.getFieldIndexes(e,o.collectionGroup)).next((d=>(n.set(o.collectionGroup,d),L.forEach(d,(p=>this.zn(e,o,p).next((y=>{const E=this.jn(a,p);return y.isEqual(E)?L.resolve():this.Jn(e,a,p,y,E)})))))))}))}Hn(e,t,n,o){return Ko(e).put(o.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,o){return Ko(e).delete(o.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const o=Ko(e);let a=new We(Pi);return o.ee({index:hI,range:IDBKeyRange.only([n.indexId,this.uid,ah(this.$n(n,t))])},((u,d)=>{a=a.add(new Cs(n.indexId,t,Av(d.arrayValue),Av(d.directionalValue)))})).next((()=>a))}jn(e,t){let n=new We(Pi);const o=this.Qn(t,e);if(o==null)return n;const a=wp(t);if(a!=null){const u=e.data.field(a.fieldPath);if(ru(u))for(const d of u.arrayValue.values||[])n=n.add(new Cs(t.indexId,e.key,this.Ln(d),o))}else n=n.add(new Cs(t.indexId,e.key,Hc,o));return n}Jn(e,t,n,o,a){J(kv,"Updating index entries for document '%s'",t.key);const u=[];return(function(p,y,E,w,A){const j=p.getIterator(),H=y.getIterator();let W=qo(j),$=qo(H);for(;W||$;){let te=!1,se=!1;if(W&&$){const ae=E(W,$);ae<0?se=!0:ae>0&&(te=!0)}else W!=null?se=!0:te=!0;te?(w($),$=qo(H)):se?(A(W),W=qo(j)):(W=qo(j),$=qo(H))}})(o,a,Pi,(d=>{u.push(this.Hn(e,t,n,d))}),(d=>{u.push(this.Yn(e,t,n,d))})),L.waitFor(u)}Gn(e){let t=1;return Ho(e).ee({index:cI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,o,a)=>{a.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((u,d)=>Pi(u,d))).filter(((u,d,p)=>!d||Pi(u,p[d-1])!==0));const o=[];o.push(e);for(const u of n){const d=Pi(u,e),p=Pi(u,t);if(d===0)o[0]=e.An();else if(d>0&&p<0)o.push(u),o.push(u.An());else if(p>0)break}o.push(t);const a=[];for(let u=0;u<o.length;u+=2){if(this.Zn(o[u],o[u+1]))return[];const d=o[u].Vn(this.uid,Hc,re.empty()),p=o[u+1].Vn(this.uid,Hc,re.empty());a.push(IDBKeyRange.bound(d,p))}return a}Zn(e,t){return Pi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Cv)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(n=>this.xn(e,n).next((o=>o||ce(44426))))).next(Cv)}}function xv(i){return Tt(i,eu)}function Ko(i){return Tt(i,jl)}function Rl(i){return Tt(i,hm)}function Ho(i){return Tt(i,Ul)}function Cv(i){pe(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<i.length;n++){const o=i[n].indexState.offset;lm(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new _n(e.readTime,e.documentKey,t)}const bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fw=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function pw(i,e,t){const n=i.store(zn),o=i.store(la),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const p=n.ee({range:u},((E,w,A)=>(d++,A.delete())));a.push(p.next((()=>{pe(d===1,47070,{batchId:t.batchId})})));const y=[];for(const E of t.mutations){const w=aI(e,E.key.path,t.batchId);a.push(o.delete(w)),y.push(E.key)}return L.waitFor(a).next((()=>y))}function kh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ce(14731);e=i.noDocument}return JSON.stringify(e).length}$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(fw,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class sd{constructor(e,t,n,o){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=o,this.Xn={}}static wt(e,t,n,o){pe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new sd(a,t,n,o)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).ee({index:bs,range:n},((o,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,n,o){const a=Zo(e),u=ki(e);return u.add({}).next((d=>{pe(typeof d=="number",49019);const p=new Em(d,t,n,o),y=(function(j,H,W){const $=W.baseMutations.map((se=>Ah(j.yt,se))),te=W.mutations.map((se=>Ah(j.yt,se)));return{userId:H,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:$,mutations:te}})(this.serializer,this.userId,p),E=[];let w=new We(((A,j)=>Se(A.canonicalString(),j.canonicalString())));for(const A of o){const j=aI(this.userId,A.key.path,d);w=w.add(A.key.path.popLast()),E.push(u.put(y)),E.push(a.put(j,jA))}return w.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Xn[d]=p.keys()})),L.waitFor(E).next((()=>p))}))}lookupMutationBatch(e,t){return ki(e).get(t).next((n=>n?(pe(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),ks(this.serializer,n)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const o=n.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return ki(e).ee({index:bs,range:o},((u,d,p)=>{d.userId===this.userId&&(pe(d.batchId>=n,47524,{tr:n}),a=ks(this.serializer,d)),p.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Ds;return ki(e).ee({index:bs,range:t,reverse:!0},((o,a,u)=>{n=a.batchId,u.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ds],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).J(bs,t).next((n=>n.map((o=>ks(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=eh(this.userId,t.path),o=IDBKeyRange.lowerBound(n),a=[];return Zo(e).ee({range:o},((u,d,p)=>{const[y,E,w]=u,A=fr(E);if(y===this.userId&&t.path.isEqual(A))return ki(e).get(w).next((j=>{if(!j)throw ce(61480,{nr:u,batchId:w});pe(j.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:j.userId,batchId:w}),a.push(ks(this.serializer,j))}));p.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new We(Se);const o=[];return t.forEach((a=>{const u=eh(this.userId,a.path),d=IDBKeyRange.lowerBound(u),p=Zo(e).ee({range:d},((y,E,w)=>{const[A,j,H]=y,W=fr(j);A===this.userId&&a.path.isEqual(W)?n=n.add(H):w.done()}));o.push(p)})),L.waitFor(o).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1,a=eh(this.userId,n),u=IDBKeyRange.lowerBound(a);let d=new We(Se);return Zo(e).ee({range:u},((p,y,E)=>{const[w,A,j]=p,H=fr(A);w===this.userId&&n.isPrefixOf(H)?H.length===o&&(d=d.add(j)):E.done()})).next((()=>this.rr(e,d)))}rr(e,t){const n=[],o=[];return t.forEach((a=>{o.push(ki(e).get(a).next((u=>{if(u===null)throw ce(35274,{batchId:a});pe(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),n.push(ks(this.serializer,u))})))})),L.waitFor(o).next((()=>n))}removeMutationBatch(e,t){return pw(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(n,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const n=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),o=[];return Zo(e).ee({range:n},((a,u,d)=>{if(a[0]===this.userId){const p=fr(a[1]);o.push(p)}else d.done()})).next((()=>{pe(o.length===0,56720,{sr:o.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return mw(e,this.userId,t)}_r(e){return gw(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ds,lastStreamToken:""}))}}function mw(i,e,t){const n=eh(e,t.path),o=n[1],a=IDBKeyRange.lowerBound(n);let u=!1;return Zo(i).ee({range:a,X:!0},((d,p,y)=>{const[E,w,A]=d;E===e&&w===o&&(u=!0),y.done()})).next((()=>u))}function ki(i){return Tt(i,zn)}function Zo(i){return Tt(i,la)}function gw(i){return Tt(i,Xl)}class qs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qs(0)}static cr(){return new qs(-1)}}class fP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new qs(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ge.fromTimestamp(new qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Go(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(pe(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let o=0;const a=[];return Go(e).ee(((u,d)=>{const p=Vl(d);p.sequenceNumber<=t&&n.get(p.targetId)===null&&(o++,a.push(this.removeTargetData(e,p)))})).next((()=>L.waitFor(a))).next((()=>o))}forEachTarget(e,t){return Go(e).ee(((n,o)=>{const a=Vl(o);t(a)}))}lr(e){return Dv(e).get(vh).next((t=>(pe(t!==null,2888),t)))}hr(e,t){return Dv(e).put(vh,t)}Pr(e,t){return Go(e).put(uw(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Bs(t),o=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return Go(e).ee({range:o,index:uI},((u,d,p)=>{const y=Vl(d);mu(t,y.target)&&(a=y,p.done())})).next((()=>a))}addMatchingKeys(e,t,n){const o=[],a=bi(e);return t.forEach((u=>{const d=Wt(u.path);o.push(a.put({targetId:n,path:d})),o.push(this.referenceDelegate.addReference(e,n,u))})),L.waitFor(o)}removeMatchingKeys(e,t,n){const o=bi(e);return L.forEach(t,(a=>{const u=Wt(a.path);return L.waitFor([o.delete([n,u]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,t){const n=bi(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(o)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),o=bi(e);let a=ke();return o.ee({range:n,X:!0},((u,d,p)=>{const y=fr(u[1]),E=new re(y);a=a.add(E)})).next((()=>a))}containsKey(e,t){const n=Wt(t.path),o=IDBKeyRange.bound([n],[eI(n)],!1,!0);let a=0;return bi(e).ee({index:cm,X:!0,range:o},(([u,d],p,y)=>{u!==0&&(a++,y.done())})).next((()=>a>0))}At(e,t){return Go(e).get(t).next((n=>n?Vl(n):null))}}function Go(i){return Tt(i,ua)}function Dv(i){return Tt(i,Ns)}function bi(i){return Tt(i,ca)}const Nv="LruGarbageCollector",yw=1048576;function Vv([i,e],[t,n]){const o=Se(i,t);return o===0?Se(e,n):o}class pP{constructor(e){this.Ir=e,this.buffer=new We(Vv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Vv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _w{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(Nv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hi(t)?J(Nv,"Ignoring IndexedDB error during garbage collection: ",t):await Js(t)}await this.Vr(3e5)}))}}class mP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Cn.ce);const n=new pP(t);return this.mr.forEachTarget(e,(o=>n.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>n.Ar(o))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(bv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,o,a,u,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(n=w,d=Date.now(),this.removeTargets(e,n,t)))).next((w=>(a=w,p=Date.now(),this.removeOrphanedDocuments(e,n)))).next((w=>(y=Date.now(),Qo()<=be.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-E}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function vw(i,e){return new mP(i,e)}class gP{constructor(e,t){this.db=e,this.garbageCollector=vw(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,o)=>t(o)))}addReference(e,t,n){return Gc(e,n)}removeReference(e,t,n){return Gc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Gc(e,t)}br(e,t){return(function(o,a){let u=!1;return gw(o).te((d=>mw(o,d,a).next((p=>(p&&(u=!0),L.resolve(!p)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let a=0;return this.Sr(e,((u,d)=>{if(d<=t){const p=this.br(e,u).next((y=>{if(!y)return a++,n.getEntry(e,u).next((()=>(n.removeEntry(u,ge.min()),bi(e).delete((function(w){return[0,Wt(w.path)]})(u)))))}));o.push(p)}})).next((()=>L.waitFor(o))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Gc(e,t)}Sr(e,t){const n=bi(e);let o,a=Cn.ce;return n.ee({index:cm},(([u,d],{path:p,sequenceNumber:y})=>{u===0?(a!==Cn.ce&&t(new re(fr(o)),a),a=y,o=p):a=Cn.ce})).next((()=>{a!==Cn.ce&&t(new re(fr(o)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gc(i,e){return bi(i).put((function(n,o){return{targetId:0,path:Wt(n.path),sequenceNumber:o}})(e,i.currentSequenceNumber))}class Ew{constructor(){this.changes=new Gr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?L.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ts(e).put(n)}removeEntry(e,t,n){return Ts(e).delete((function(a,u){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Rh(u),d[d.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=ut.newInvalidDocument(t);return Ts(e).ee({index:th,range:IDBKeyRange.only(Pl(t))},((o,a)=>{n=this.Cr(t,a)})).next((()=>n))}vr(e,t){let n={size:0,document:ut.newInvalidDocument(t)};return Ts(e).ee({index:th,range:IDBKeyRange.only(Pl(t))},((o,a)=>{n={document:this.Cr(t,a),size:kh(a)}})).next((()=>n))}getEntries(e,t){let n=gn();return this.Fr(e,t,((o,a)=>{const u=this.Cr(o,a);n=n.insert(o,u)})).next((()=>n))}Mr(e,t){let n=gn(),o=new nt(re.comparator);return this.Fr(e,t,((a,u)=>{const d=this.Cr(a,u);n=n.insert(a,d),o=o.insert(a,kh(u))})).next((()=>({documents:n,Or:o})))}Fr(e,t,n){if(t.isEmpty())return L.resolve();let o=new We(Mv);t.forEach((p=>o=o.add(p)));const a=IDBKeyRange.bound(Pl(o.first()),Pl(o.last())),u=o.getIterator();let d=u.getNext();return Ts(e).ee({index:th,range:a},((p,y,E)=>{const w=re.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Mv(d,w)<0;)n(d,null),d=u.getNext();d&&d.isEqual(w)&&(n(d,y),d=u.hasNext()?u.getNext():null),d?E.j(Pl(d)):E.done()})).next((()=>{for(;d;)n(d,null),d=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,n,o,a){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Rh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ts(e).J(IDBKeyRange.bound(d,p,!0)).next((y=>{a?.incrementDocumentReadCount(y.length);let E=gn();for(const w of y){const A=this.Cr(re.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);A.isFoundDocument()&&(gu(t,A)||o.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(e,t,n,o){let a=gn();const u=Lv(t,n),d=Lv(t,_n.max());return Ts(e).ee({index:lI,range:IDBKeyRange.bound(u,d,!0)},((p,y,E)=>{const w=this.Cr(re.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(w.key,w),a.size===o&&E.done()})).next((()=>a))}newChangeBuffer(e){return new _P(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Ov(e).get(Tp).next((t=>(pe(!!t,20021),t)))}Dr(e,t){return Ov(e).put(Tp,t)}Cr(e,t){if(t){const n=rP(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(ge.min())))return n}return ut.newInvalidDocument(e)}}function Iw(i){return new yP(i)}class _P extends Ew{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Gr((n=>n.toString()),((n,o)=>n.isEqual(o)))}applyChanges(e){const t=[];let n=0,o=new We(((a,u)=>Se(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const d=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,d.readTime)),u.isValidDocument()){const p=_v(this.Nr.serializer,u);o=o.add(a.path.popLast());const y=kh(p);n+=y-d.size,t.push(this.Nr.addEntry(e,a,p))}else if(n-=d.size,this.trackRemovals){const p=_v(this.Nr.serializer,u.convertToNoDocument(ge.min()));t.push(this.Nr.addEntry(e,a,p))}})),o.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,n)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:o})=>(o.forEach(((a,u)=>{this.Br.set(a,{size:u,readTime:n.get(a).readTime})})),n)))}}function Ov(i){return Tt(i,Zl)}function Ts(i){return Tt(i,_h)}function Pl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Lv(i,e){const t=e.documentKey.path.toArray();return[i,Rh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Mv(i,e){const t=i.path.toArray(),n=e.path.toArray();let o=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(o=Se(t[a],n[a]),o)return o;return o=Se(t.length,n.length),o||(o=Se(t[t.length-2],n[n.length-2]),o||Se(t[t.length-1],n[n.length-1]))}class vP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ww{constructor(e,t,n,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=o}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(n=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(n!==null&&ql(n.mutation,o,sn.empty(),qe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,ke()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=ke()){const o=pr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,n).next((a=>{let u=Dl();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const n=pr();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ke())))}populateOverlays(e,t,n){const o=[];return n.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,n,o){let a=gn();const u=$l(),d=(function(){return $l()})();return t.forEach(((p,y)=>{const E=n.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Qr)?a=a.insert(y.key,y):E!==void 0?(u.set(y.key,E.mutation.getFieldMask()),ql(E.mutation,y,E.mutation.getFieldMask(),qe.now())):u.set(y.key,sn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((y,E)=>u.set(y,E))),t.forEach(((y,E)=>d.set(y,new vP(E,u.get(y)??null)))),d)))}recalculateAndSaveOverlays(e,t){const n=$l();let o=new nt(((u,d)=>u-d)),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let E=n.get(p)||sn.empty();E=d.applyToLocalView(y,E),n.set(p,E);const w=(o.get(d.batchId)||ke()).add(p);o=o.insert(d.batchId,w)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,w=FI();E.forEach((A=>{if(!a.has(A)){const j=WI(t.get(A),n.get(A));j!==null&&w.set(A,j),a=a.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return L.waitFor(u)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,o){return(function(u){return re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,o):this.getDocumentsMatchingCollectionQuery(e,t,n,o)}getNextDocuments(e,t,n,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,o-a.size):L.resolve(pr());let d=Ql,p=a;return u.next((y=>L.forEach(y,((E,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(E)?L.resolve():this.remoteDocumentCache.getEntry(e,E).next((A=>{p=p.insert(E,A)}))))).next((()=>this.populateOverlays(e,y,a))).next((()=>this.computeViews(e,p,y,ke()))).next((E=>({batchId:d,changes:MI(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new re(t)).next((n=>{let o=Dl();return n.isFoundDocument()&&(o=o.insert(n.key,n)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,o){const a=t.collectionGroup;let u=Dl();return this.indexManager.getCollectionParents(e,a).next((d=>L.forEach(d,(p=>{const y=(function(w,A){return new Jh(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,n,o).next((E=>{E.forEach(((w,A)=>{u=u.insert(w,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,n,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,o)))).next((u=>{a.forEach(((p,y)=>{const E=y.getKey();u.get(E)===null&&(u=u.insert(E,ut.newInvalidDocument(E)))}));let d=Dl();return u.forEach(((p,y)=>{const E=a.get(p);E!==void 0&&ql(E.mutation,y,sn.empty(),qe.now()),gu(t,y)&&(d=d.insert(p,y))})),d}))}}class EP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Jt(o.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:cw(o.bundledQuery),readTime:Jt(o.readTime)}})(t)),L.resolve()}}class IP{constructor(){this.overlays=new nt(re.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const n=pr();return L.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&n.set(o,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((o,a)=>{this.St(e,t,a)})),L.resolve()}removeOverlaysForBatchId(e,t,n){const o=this.qr.get(n);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),L.resolve()}getOverlaysForCollection(e,t,n){const o=pr(),a=t.length+1,u=new re(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>n&&o.set(p.getKey(),p)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,n,o){let a=new nt(((y,E)=>y-E));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>n){let E=a.get(y.largestBatchId);E===null&&(E=pr(),a=a.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=pr(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,E)=>d.set(y,E))),!(d.size()>=o)););return L.resolve(d)}St(e,t,n){const o=this.overlays.get(n.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(n.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new wm(t,n));let a=this.qr.get(t);a===void 0&&(a=ke(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}class wP{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}class Pm{constructor(){this.Qr=new We(kt.$r),this.Ur=new We(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new kt(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new kt(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new re(new ze([])),n=new kt(t,e),o=new kt(t,e+1),a=[];return this.Ur.forEachInRange([n,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new re(new ze([])),n=new kt(t,e),o=new kt(t,e+1);let a=ke();return this.Ur.forEachInRange([n,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new kt(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return re.comparator(e.key,t.key)||Se(e.Yr,t.Yr)}static Kr(e,t){return Se(e.Yr,t.Yr)||re.comparator(e.key,t.key)}}class TP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new We(kt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Em(a,t,n,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new kt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(u)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=this.ei(n),a=o<0?0:o;return L.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Ds:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),L.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new We(Se);return t.forEach((o=>{const a=new kt(o,0),u=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{n=n.add(d.Yr)}))})),L.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1;let a=n;re.isDocumentKey(a)||(a=a.child(""));const u=new kt(new re(a),0);let d=new We(Se);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!n.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Yr)),!0)}),u),L.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((n=>{const o=this.Xr(n);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return L.forEach(t.mutations,(o=>{const a=new kt(o.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new kt(t,0),o=this.Zr.firstAfterOrEqual(n);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class SP{constructor(e){this.ri=e,this.docs=(function(){return new nt(re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,o=this.docs.get(n),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return L.resolve(n?n.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let n=gn();return t.forEach((o=>{const a=this.docs.get(o);n=n.insert(o,a?a.document.mutableCopy():ut.newInvalidDocument(o))})),L.resolve(n)}getDocumentsMatchingQuery(e,t,n,o){let a=gn();const u=t.path,d=new re(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||lm(rI(E),n)<=0||(o.has(E.key)||gu(t,E))&&(a=a.insert(E.key,E.mutableCopy()))}return L.resolve(a)}getAllFromCollectionGroup(e,t,n,o){ce(9500)}ii(e,t){return L.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new AP(this)}getSize(e){return L.resolve(this.size)}}class AP extends Ew{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(n)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class RP{constructor(e){this.persistence=e,this.si=new Gr((t=>Bs(t)),mu),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Pm,this.targetCount=0,this.ai=qs.ur()}forEachTarget(e,t){return this.si.forEach(((n,o)=>t(o))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qs(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,n){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&n.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),L.waitFor(a).next((()=>o))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return L.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),L.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),L.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return L.resolve(n)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}class km{constructor(e,t){this.ui={},this.overlays={},this.ci=new Cn(0),this.li=!1,this.li=!0,this.hi=new wP,this.referenceDelegate=e(this),this.Pi=new RP(this),this.indexManager=new hP,this.remoteDocumentCache=(function(o){return new SP(o)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new lw(t),this.Ii=new EP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new TP(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){J("MemoryPersistence","Starting transaction:",e);const o=new PP(this.ci.next());return this.referenceDelegate.Ei(),n(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return L.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class PP extends sI{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.Ri=new Pm,this.Vi=null}static mi(e){return new od(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),L.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(n=>{const o=re.fromPath(n);return this.gi(e,o).next((a=>{a||t.removeEntry(o,ge.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xh{constructor(e,t){this.persistence=e,this.pi=new Gr((n=>Wt(n.path)),((n,o)=>n.isEqual(o))),this.garbageCollector=vw(this,t)}static mi(e,t){return new xh(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((n,o)=>this.br(e,n,o).next((a=>a?L.resolve():t(o)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(n++,a.removeEntry(u,ge.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rh(e.data.value)),t}br(e,t,n){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return L.resolve(o!==void 0&&o>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class kP{constructor(e){this.serializer=e}k(e,t,n,o){const a=new qh("createOrUpgrade",t);n<1&&o>=1&&((function(p){p.createObjectStore(pu)})(e),(function(p){p.createObjectStore(Xl,{keyPath:UA}),p.createObjectStore(zn,{keyPath:G_,autoIncrement:!0}).createIndex(bs,Q_,{unique:!0}),p.createObjectStore(la)})(e),Fv(e),(function(p){p.createObjectStore(Rs)})(e));let u=L.resolve();return n<3&&o>=3&&(n!==0&&((function(p){p.deleteObjectStore(ca),p.deleteObjectStore(ua),p.deleteObjectStore(Ns)})(e),Fv(e)),u=u.next((()=>(function(p){const y=p.store(Ns),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return y.put(vh,E)})(a)))),n<4&&o>=4&&(n!==0&&(u=u.next((()=>(function(p,y){return y.store(zn).J().next((w=>{p.deleteObjectStore(zn),p.createObjectStore(zn,{keyPath:G_,autoIncrement:!0}).createIndex(bs,Q_,{unique:!0});const A=y.store(zn),j=w.map((H=>A.put(H)));return L.waitFor(j)}))})(e,a)))),u=u.next((()=>{(function(p){p.createObjectStore(ha,{keyPath:GA})})(e)}))),n<5&&o>=5&&(u=u.next((()=>this.yi(a)))),n<6&&o>=6&&(u=u.next((()=>((function(p){p.createObjectStore(Zl)})(e),this.wi(a))))),n<7&&o>=7&&(u=u.next((()=>this.Si(a)))),n<8&&o>=8&&(u=u.next((()=>this.bi(e,a)))),n<9&&o>=9&&(u=u.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&o>=10&&(u=u.next((()=>this.Di(a)))),n<11&&o>=11&&(u=u.next((()=>{(function(p){p.createObjectStore(Kh,{keyPath:QA})})(e),(function(p){p.createObjectStore(Hh,{keyPath:YA})})(e)}))),n<12&&o>=12&&(u=u.next((()=>{(function(p){const y=p.createObjectStore(Gh,{keyPath:rR});y.createIndex(Ap,iR,{unique:!1}),y.createIndex(dI,sR,{unique:!1})})(e)}))),n<13&&o>=13&&(u=u.next((()=>(function(p){const y=p.createObjectStore(_h,{keyPath:BA});y.createIndex(th,zA),y.createIndex(lI,$A)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Rs)))),n<14&&o>=14&&(u=u.next((()=>this.Fi(e,a)))),n<15&&o>=15&&(u=u.next((()=>(function(p){p.createObjectStore(hm,{keyPath:JA,autoIncrement:!0}).createIndex(Sp,XA,{unique:!1}),p.createObjectStore(Ul,{keyPath:ZA}).createIndex(cI,eR,{unique:!1}),p.createObjectStore(jl,{keyPath:tR}).createIndex(hI,nR,{unique:!1})})(e)))),n<16&&o>=16&&(u=u.next((()=>{t.objectStore(Ul).clear()})).next((()=>{t.objectStore(jl).clear()}))),n<17&&o>=17&&(u=u.next((()=>{(function(p){p.createObjectStore(dm,{keyPath:oR})})(e)}))),n<18&&o>=18&&jE()&&(u=u.next((()=>{t.objectStore(Ul).clear()})).next((()=>{t.objectStore(jl).clear()}))),u}wi(e){let t=0;return e.store(Rs).ee(((n,o)=>{t+=kh(o)})).next((()=>{const n={byteSize:t};return e.store(Zl).put(Tp,n)}))}yi(e){const t=e.store(Xl),n=e.store(zn);return t.J().next((o=>L.forEach(o,(a=>{const u=IDBKeyRange.bound([a.userId,Ds],[a.userId,a.lastAcknowledgedBatchId]);return n.J(bs,u).next((d=>L.forEach(d,(p=>{pe(p.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=ks(this.serializer,p);return pw(e,a.userId,y).next((()=>{}))}))))}))))}Si(e){const t=e.store(ca),n=e.store(Rs);return e.store(Ns).get(vh).next((o=>{const a=[];return n.ee(((u,d)=>{const p=new ze(u),y=(function(w){return[0,Wt(w)]})(p);a.push(t.get(y).next((E=>E?L.resolve():(w=>t.put({targetId:0,path:Wt(w),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>L.waitFor(a)))}))}bi(e,t){e.createObjectStore(eu,{keyPath:HA});const n=t.store(eu),o=new Rm,a=u=>{if(o.add(u)){const d=u.lastSegment(),p=u.popLast();return n.put({collectionId:d,parent:Wt(p)})}};return t.store(Rs).ee({X:!0},((u,d)=>{const p=new ze(u);return a(p.popLast())})).next((()=>t.store(la).ee({X:!0},(([u,d,p],y)=>{const E=fr(d);return a(E.popLast())}))))}Di(e){const t=e.store(ua);return t.ee(((n,o)=>{const a=Vl(o),u=uw(this.serializer,a);return t.put(u)}))}Ci(e,t){const n=t.store(Rs),o=[];return n.ee(((a,u)=>{const d=t.store(_h),p=(function(w){return w.document?new re(ze.fromString(w.document.name).popFirst(5)):w.noDocument?re.fromSegments(w.noDocument.path):w.unknownDocument?re.fromSegments(w.unknownDocument.path):ce(36783)})(u).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};o.push(d.put(y))})).next((()=>L.waitFor(o)))}Fi(e,t){const n=t.store(zn),o=Iw(this.serializer),a=new km(od.mi,this.serializer.yt);return n.J().next((u=>{const d=new Map;return u.forEach((p=>{let y=d.get(p.userId)??ke();ks(this.serializer,p).keys().forEach((E=>y=y.add(E))),d.set(p.userId,y)})),L.forEach(d,((p,y)=>{const E=new Gt(y),w=id.wt(this.serializer,E),A=a.getIndexManager(E),j=sd.wt(E,this.serializer,A,a.referenceDelegate);return new ww(o,j,w,A).recalculateAndSaveOverlaysForDocumentKeys(new Rp(t,Cn.ce),p).next()}))}))}}function Fv(i){i.createObjectStore(ca,{keyPath:WA}).createIndex(cm,KA,{unique:!0}),i.createObjectStore(ua,{keyPath:"targetId"}).createIndex(uI,qA,{unique:!0}),i.createObjectStore(Ns)}const xi="IndexedDbPersistence",sp=18e5,op=5e3,ap="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xP="main";class xm{constructor(e,t,n,o,a,u,d,p,y,E,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=a,this.window=u,this.document=d,this.xi=y,this.Oi=E,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!xm.v())throw new ie(q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gP(this,o),this.$i=t+xP,this.serializer=new lw(p),this.Ui=new Bi(this.$i,this.Ni,new kP(this.serializer)),this.hi=new sP,this.Pi=new fP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Iw(this.serializer),this.Ii=new iP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&Qt(xi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(q.FAILED_PRECONDITION,ap);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Cn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Qc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Hi(e))return J(xi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J(xi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return kl(e).get($o).next((t=>L.resolve(this.es(t))))}ts(e){return Qc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,sp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=Tt(t,ha);return n.J().next((o=>{const a=this.ss(o,sp),u=o.filter((d=>a.indexOf(d)===-1));return L.forEach(u,(d=>n.delete(d.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):kl(e).get($o).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,op)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ie(q.FAILED_PRECONDITION,ap);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qc(e).J().next((n=>this.ss(n,op).find((o=>{if(this.clientId!==o.clientId){const a=!this.networkEnabled&&o.networkEnabled,u=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(a||u&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&J(xi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[pu,ha],(e=>{const t=new Rp(e,Cn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Qc(e).J().next((t=>this.ss(t,sp).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return sd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return id.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){J(xi,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",a=(function(p){return p===18?uR:p===17?gI:p===16?lR:p===15?fm:p===14?mI:p===13?pI:p===12?aR:p===11?fI:void ce(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,o,a,(d=>(u=new Rp(d,this.ci?this.ci.next():Cn.ce),t==="readwrite-primary"?this.Hi(u).next((p=>!!p||this.Yi(u))).next((p=>{if(!p)throw Qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ie(q.FAILED_PRECONDITION,iI);return n(u)})).next((p=>this.Xi(u).next((()=>p)))):this.Is(u).next((()=>n(u)))))).then((d=>(u.raiseOnCommittedEvent(),d)))}Is(e){return kl(e).get($o).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,op)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(q.FAILED_PRECONDITION,ap)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kl(e).put($o,t)}static v(){return Bi.v()}Zi(e){const t=kl(e);return t.get($o).next((n=>this.es(n)?(J(xi,"Releasing primary lease."),t.delete($o)):L.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Qt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;UE()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return J(xi,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Qt(xi,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Qt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kl(i){return Tt(i,pu)}function Qc(i){return Tt(i,ha)}function CP(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Cm{constructor(e,t,n,o){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=o}static As(e,t){let n=ke(),o=ke();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Cm(e,t.fromCache,n,o)}}class bP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Tw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return UE()?8:oI(It())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,n).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new bP;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,n,o){return n.documentReadCount<this.fs?(Qo()<=be.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Qo()<=be.DEBUG&&J("QueryEngine","Query:",Yo(t),"scans",n.documentReadCount,"local documents and returns",o,"documents as results."),n.documentReadCount>this.gs*o?(Qo()<=be.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(t))):L.resolve())}ys(e,t){if(lv(t))return L.resolve(null);let n=bn(t);return this.indexManager.getIndexType(e,n).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Dp(t,null,"F"),n=bn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const u=ke(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,n).next((p=>{const y=this.Ds(t,d);return this.Cs(t,y,u,p.readTime)?this.ys(e,Dp(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,n,o){return lv(t)||o.isEqual(ge.min())?L.resolve(null):this.ps.getDocuments(e,n).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,n,o)?L.resolve(null):(Qo()<=be.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Yo(t)),this.vs(e,u,t,DA(o,Ql)).next((d=>d)))}))}Ds(e,t){let n=new We(OI(e));return t.forEach(((o,a)=>{gu(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,o){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,n){return Qo()<=be.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Yo(t)),this.ps.getDocumentsMatchingQuery(e,t,_n.min(),n)}vs(e,t,n,o){return this.ps.getDocumentsMatchingQuery(e,n,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const bm="LocalStore",DP=3e8;class NP{constructor(e,t,n,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new nt(Se),this.xs=new Gr((a=>Bs(a)),mu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ww(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Sw(i,e,t,n){return new NP(i,e,t,n)}async function Aw(i,e){const t=Ae(i);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let o;return t.mutationQueue.getAllMutationBatches(n).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const u=[],d=[];let p=ke();for(const y of o){u.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of a){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(n,p).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:d})))}))}))}function VP(i,e){const t=Ae(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,y,E){const w=y.batch,A=w.keys();let j=L.resolve();return A.forEach((H=>{j=j.next((()=>E.getEntry(p,H))).next((W=>{const $=y.docVersions.get(H);pe($!==null,48541),W.version.compareTo($)<0&&(w.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),E.addEntry(W)))}))})),j.next((()=>d.mutationQueue.removeMutationBatch(p,w)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(d){let p=ke();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(n,o)))}))}function Rw(i){const e=Ae(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function OP(i,e){const t=Ae(i),n=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((E,w)=>{const A=o.get(w);if(!A)return;d.push(t.Pi.removeMatchingKeys(a,E.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,E.addedDocuments,w))));let j=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?j=j.withResumeToken(_t.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,n)),o=o.insert(w,j),(function(W,$,te){return W.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=DP?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(A,j,E)&&d.push(t.Pi.updateTargetData(a,j))}));let p=gn(),y=ke();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))})),d.push(LP(a,u,e.documentUpdates).next((E=>{p=E.ks,y=E.qs}))),!n.isEqual(ge.min())){const E=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));d.push(E)}return L.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,y))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function LP(i,e,t){let n=ke(),o=ke();return t.forEach((a=>n=n.add(a))),e.getEntries(i,n).next((a=>{let u=gn();return t.forEach(((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(ge.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):J(bm,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function MP(i,e){const t=Ae(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Ds),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function FP(i,e){const t=Ae(i);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let o;return t.Pi.getTargetData(n,e).next((a=>a?(o=a,L.resolve(o)):t.Pi.allocateTargetId(n).next((u=>(o=new Fr(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,o).next((()=>o)))))))})).then((n=>{const o=t.Ms.get(n.targetId);return(o===null||n.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function jp(i,e,t){const n=Ae(i),o=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(u=>n.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Hi(u))throw u;J(bm,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Ms=n.Ms.remove(e),n.xs.delete(o.target)}function Uv(i,e,t){const n=Ae(i);let o=ge.min(),a=ke();return n.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,E){const w=Ae(p),A=w.xs.get(E);return A!==void 0?L.resolve(w.Ms.get(A)):w.Pi.getTargetData(y,E)})(n,u,bn(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>n.Fs.getDocumentsMatchingQuery(u,e,t?o:ge.min(),t?a:ke()))).next((d=>(UP(n,AR(e),d),{documents:d,Qs:a})))))}function UP(i,e,t){let n=i.Os.get(e)||ge.min();t.forEach(((o,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),i.Os.set(e,n)}class jv{constructor(){this.activeTargetIds=bR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pw{constructor(){this.Mo=new jv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jP{Oo(e){}shutdown(){}}const Bv="ConnectivityMonitor";class zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(Bv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(Bv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Yc=null;function Bp(){return Yc===null?Yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yc++,"0x"+Yc.toString(16)}const lp="RestConnection",BP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${o}`,this.Wo=this.databaseId.database===Eh?`project_id=${n}`:`project_id=${n}&database_id=${o}`}Go(e,t,n,o,a){const u=Bp(),d=this.zo(e,t.toUriEncodedString());J(lp,`Sending RPC '${e}' ${u}:`,d,n);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:y}=new URL(d),E=Ta(y);return this.Jo(e,d,p,n,E).then((w=>(J(lp,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Gl(lp,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",n),w}))}Ho(e,t,n,o,a,u){return this.Go(e,t,n,o,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Aa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),n&&n.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const n=BP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class $P{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const zt="WebChannelConnection";class qP extends zP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,o,a){const u=Bp();return new Promise(((d,p)=>{const y=new GE;y.setWithCredentials(!0),y.listenOnce(QE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Xc.NO_ERROR:const w=y.getResponseJson();J(zt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case Xc.TIMEOUT:J(zt,`RPC '${e}' ${u} timed out`),p(new ie(q.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const A=y.getStatus();if(J(zt,`RPC '${e}' ${u} failed with status:`,A,"response text:",y.getResponseText()),A>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const H=j?.error;if(H&&H.status&&H.message){const W=(function(te){const se=te.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(se)>=0?se:q.UNKNOWN})(H.status);p(new ie(W,H.message))}else p(new ie(q.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ie(q.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{J(zt,`RPC '${e}' ${u} completed.`)}}));const E=JSON.stringify(o);J(zt,`RPC '${e}' ${u} sending request:`,o),y.send(t,"POST",E,n,15)}))}T_(e,t,n){const o=Bp(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=XE(),d=JE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,n),p.encodeInitMessageHeaders=!0;const E=a.join("");J(zt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=u.createWebChannel(E,p);this.I_(w);let A=!1,j=!1;const H=new $P({Yo:$=>{j?J(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(A||(J(zt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),J(zt,`RPC '${e}' stream ${o} sending:`,$),w.send($))},Zo:()=>w.close()}),W=($,te,se)=>{$.listen(te,(ae=>{try{se(ae)}catch(Ie){setTimeout((()=>{throw Ie}),0)}}))};return W(w,bl.EventType.OPEN,(()=>{j||(J(zt,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),W(w,bl.EventType.CLOSE,(()=>{j||(j=!0,J(zt,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(w))})),W(w,bl.EventType.ERROR,($=>{j||(j=!0,Gl(zt,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),H.a_(new ie(q.UNAVAILABLE,"The operation could not be completed")))})),W(w,bl.EventType.MESSAGE,($=>{if(!j){const te=$.data[0];pe(!!te,16349);const se=te,ae=se?.error||se[0]?.error;if(ae){J(zt,`RPC '${e}' stream ${o} received error:`,ae);const Ie=ae.status;let Te=(function(T){const k=gt[T];if(k!==void 0)return GI(k)})(Ie),X=ae.message;Te===void 0&&(Te=q.INTERNAL,X="Unknown error status: "+Ie+" with message "+ae.message),j=!0,H.a_(new ie(Te,X)),w.close()}else J(zt,`RPC '${e}' stream ${o} received:`,te),H.u_(te)}})),W(d,YE.STAT_EVENT,($=>{$.stat===Ep.PROXY?J(zt,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Ep.NOPROXY&&J(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function WP(){return typeof window<"u"?window:null}function lh(){return typeof document<"u"?document:null}function ad(i){return new HR(i,!0)}class kw{constructor(e,t,n=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-n);o>0&&J("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $v="PersistentStream";class xw{constructor(e,t,n,o,a,u,d,p){this.Mi=e,this.S_=n,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Qt(t.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,o])=>{this.D_===t&&this.G_(n,o)}),(n=>{e((()=>{const o=new ie(q.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(o)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{n((()=>this.z_(o)))})),this.stream.onMessage((o=>{n((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return J($v,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(J($v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KP extends xw{constructor(e,t,n,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=YR(this.serializer,e),n=(function(a){if(!("targetChange"in a))return ge.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ge.min():u.readTime?Jt(u.readTime):ge.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Op(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=wh(p)?{documents:nw(a,p)}:{query:rw(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=JI(a,u.resumeToken);const y=Np(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(ge.min())>0){d.readTime=va(a,u.snapshotVersion.toTimestamp());const y=Np(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const n=XR(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Op(this.serializer),t.removeTarget=e,this.q_(t)}}class HP extends xw{constructor(e,t,n,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=JR(e.writeResults,e.commitTime),n=Jt(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Op(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Ah(this.serializer,n)))};this.q_(t)}}class GP{}class QP extends GP{constructor(e,t,n,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Vp(t,n),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(q.UNKNOWN,a.toString())}))}Ho(e,t,n,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Vp(t,n),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ie(q.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class YP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qt(t),this.aa=!1):J("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ws="RemoteStore";class JP{constructor(e,t,n,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{n.enqueueAndForget((async()=>{Xs(this)&&(J(Ws,"Restarting streams for network reachability change."),await(async function(p){const y=Ae(p);y.Ea.add(4),await _u(y),y.Ra.set("Unknown"),y.Ea.delete(4),await ld(y)})(this))}))})),this.Ra=new YP(n,o)}}async function ld(i){if(Xs(i))for(const e of i.da)await e(!0)}async function _u(i){for(const e of i.da)await e(!1)}function Cw(i,e){const t=Ae(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Om(t)?Vm(t):Pa(t).O_()&&Nm(t,e))}function Dm(i,e){const t=Ae(i),n=Pa(t);t.Ia.delete(e),n.O_()&&bw(t,e),t.Ia.size===0&&(n.O_()?n.L_():Xs(t)&&t.Ra.set("Unknown"))}function Nm(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pa(i).Y_(e)}function bw(i,e){i.Va.Ue(e),Pa(i).Z_(e)}function Vm(i){i.Va=new $R({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Pa(i).start(),i.Ra.ua()}function Om(i){return Xs(i)&&!Pa(i).x_()&&i.Ia.size>0}function Xs(i){return Ae(i).Ea.size===0}function Dw(i){i.Va=void 0}async function XP(i){i.Ra.set("Online")}async function ZP(i){i.Ia.forEach(((e,t)=>{Nm(i,e)}))}async function ek(i,e){Dw(i),Om(i)?(i.Ra.ha(e),Vm(i)):i.Ra.set("Unknown")}async function tk(i,e,t){if(i.Ra.set("Online"),e instanceof YI&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(i,e)}catch(n){J(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ch(i,n)}else if(e instanceof oh?i.Va.Ze(e):e instanceof QI?i.Va.st(e):i.Va.tt(e),!t.isEqual(ge.min()))try{const n=await Rw(i.localStore);t.compareTo(n)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=a.Ia.get(y);E&&a.Ia.set(y,E.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,y)=>{const E=a.Ia.get(p);if(!E)return;a.Ia.set(p,E.withResumeToken(_t.EMPTY_BYTE_STRING,E.snapshotVersion)),bw(a,p);const w=new Fr(E.target,p,y,E.sequenceNumber);Nm(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(i,t)}catch(n){J(Ws,"Failed to raise snapshot:",n),await Ch(i,n)}}async function Ch(i,e,t){if(!Hi(e))throw e;i.Ea.add(1),await _u(i),i.Ra.set("Offline"),t||(t=()=>Rw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{J(Ws,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await ld(i)}))}function Nw(i,e){return e().catch((t=>Ch(i,t,e)))}async function vu(i){const e=Ae(i),t=Wi(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ds;for(;nk(e);)try{const o=await MP(e.localStore,n);if(o===null){e.Ta.length===0&&t.L_();break}n=o.batchId,rk(e,o)}catch(o){await Ch(e,o)}Vw(e)&&Ow(e)}function nk(i){return Xs(i)&&i.Ta.length<10}function rk(i,e){i.Ta.push(e);const t=Wi(i);t.O_()&&t.X_&&t.ea(e.mutations)}function Vw(i){return Xs(i)&&!Wi(i).x_()&&i.Ta.length>0}function Ow(i){Wi(i).start()}async function ik(i){Wi(i).ra()}async function sk(i){const e=Wi(i);for(const t of i.Ta)e.ea(t.mutations)}async function ok(i,e,t){const n=i.Ta.shift(),o=Im.from(n,e,t);await Nw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await vu(i)}async function ak(i,e){e&&Wi(i).X_&&await(async function(n,o){if((function(u){return jR(u)&&u!==q.ABORTED})(o.code)){const a=n.Ta.shift();Wi(n).B_(),await Nw(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,o))),await vu(n)}})(i,e),Vw(i)&&Ow(i)}async function qv(i,e){const t=Ae(i);t.asyncQueue.verifyOperationInProgress(),J(Ws,"RemoteStore received new credentials");const n=Xs(t);t.Ea.add(3),await _u(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ld(t)}async function lk(i,e){const t=Ae(i);e?(t.Ea.delete(2),await ld(t)):e||(t.Ea.add(2),await _u(t),t.Ra.set("Unknown"))}function Pa(i){return i.ma||(i.ma=(function(t,n,o){const a=Ae(t);return a.sa(),new KP(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(i.datastore,i.asyncQueue,{Xo:XP.bind(null,i),t_:ZP.bind(null,i),r_:ek.bind(null,i),H_:tk.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Om(i)?Vm(i):i.Ra.set("Unknown")):(await i.ma.stop(),Dw(i))}))),i.ma}function Wi(i){return i.fa||(i.fa=(function(t,n,o){const a=Ae(t);return a.sa(),new HP(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:ik.bind(null,i),r_:ak.bind(null,i),ta:sk.bind(null,i),na:ok.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await vu(i)):(await i.fa.stop(),i.Ta.length>0&&(J(Ws,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Lm{constructor(e,t,n,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=a,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,a){const u=Date.now()+n,d=new Lm(e,t,u,o,a);return d.start(n),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(i,e){if(Qt("AsyncQueue",`${e}: ${i}`),Hi(i))return new ie(q.UNAVAILABLE,`${e}: ${i}`);throw i}class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||re.comparator(t.key,n.key):(t,n)=>re.comparator(t.key,n.key),this.keyedMap=Dl(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new na;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Wv{constructor(){this.ga=new nt(re.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ea{constructor(e,t,n,o,a,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,n,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ea(e,t,na.emptySet(t),u,n,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==n[o].type||!t[o].doc.isEqual(n[o].doc))return!1;return!0}}class uk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ck{constructor(){this.queries=Kv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const o=Ae(t),a=o.queries;o.queries=Kv(),a.forEach(((u,d)=>{for(const p of d.Sa)p.onError(n)}))})(this,new ie(q.ABORTED,"Firestore shutting down"))}}function Kv(){return new Gr((i=>VI(i)),Zh)}async function Lw(i,e){const t=Ae(i);let n=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(n=2):(a=new uk,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Mm(u,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Fm(t)}async function Mw(i,e){const t=Ae(i),n=e.query;let o=3;const a=t.queries.get(n);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function hk(i,e){const t=Ae(i);let n=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(n=!0);u.wa=o}}n&&Fm(t)}function dk(i,e,t){const n=Ae(i),o=n.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);n.queries.delete(e)}function Fm(i){i.Ca.forEach((e=>{e.next()}))}var zp,Hv;(Hv=zp||(zp={})).Ma="default",Hv.Cache="cache";class Fw{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const o of e.docChanges)o.type!==3&&n.push(o);e=new Ea(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zp.Cache}}class Uw{constructor(e){this.key=e}}class jw{constructor(e){this.key=e}}class fk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=OI(e),this.tu=new na(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Wv,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,w)=>{const A=o.get(E),j=gu(this.query,w)?w:null,H=!!A&&this.mutatedKeys.has(A.key),W=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let $=!1;A&&j?A.data.isEqual(j.data)?H!==W&&(n.track({type:3,doc:j}),$=!0):this.su(A,j)||(n.track({type:2,doc:j}),$=!0,(p&&this.eu(j,p)>0||y&&this.eu(j,y)<0)&&(d=!0)):!A&&j?(n.track({type:0,doc:j}),$=!0):A&&!j&&(n.track({type:1,doc:A}),$=!0,(p||y)&&(d=!0)),$&&(j?(u=u.add(j),a=W?a.add(E):a.delete(E)):(u=u.delete(E),a=a.delete(E)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const E=this.query.limitType==="F"?u.last():u.first();u=u.delete(E.key),a=a.delete(E.key),n.track({type:1,doc:E})}return{tu:u,iu:n,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((E,w)=>(function(j,H){const W=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:$})}};return W(j)-W(H)})(E.type,w.type)||this.eu(E.doc,w.doc))),this.ou(n),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,u.length!==0||y?{snapshot:new Ea(this.query,e.tu,a,u,e.mutatedKeys,p===0,y,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new jw(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Uw(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Um="SyncEngine";class pk{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class mk{constructor(e){this.key=e,this.hu=!1}}class gk{constructor(e,t,n,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Gr((d=>VI(d)),Zh),this.Iu=new Map,this.Eu=new Set,this.du=new nt(re.comparator),this.Au=new Map,this.Ru=new Pm,this.Vu={},this.mu=new Map,this.fu=qs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yk(i,e,t=!0){const n=Kw(i);let o;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await Bw(n,e,t,!0),o}async function _k(i,e){const t=Kw(i);await Bw(t,e,!0,!1)}async function Bw(i,e,t,n){const o=await FP(i.localStore,bn(e)),a=o.targetId,u=i.sharedClientState.addLocalQueryTarget(a,t);let d;return n&&(d=await vk(i,e,a,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&Cw(i.remoteStore,o),d}async function vk(i,e,t,n,o){i.pu=(w,A,j)=>(async function(W,$,te,se){let ae=$.view.ru(te);ae.Cs&&(ae=await Uv(W.localStore,$.query,!1).then((({documents:P})=>$.view.ru(P,ae))));const Ie=se&&se.targetChanges.get($.targetId),Te=se&&se.targetMismatches.get($.targetId)!=null,X=$.view.applyChanges(ae,W.isPrimaryClient,Ie,Te);return Qv(W,$.targetId,X.au),X.snapshot})(i,w,A,j);const a=await Uv(i.localStore,e,!0),u=new fk(e,a.Qs),d=u.ru(a.documents),p=yu.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",o),y=u.applyChanges(d,i.isPrimaryClient,p);Qv(i,t,y.au);const E=new pk(e,t,u);return i.Tu.set(e,E),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function Ek(i,e,t){const n=Ae(i),o=n.Tu.get(e),a=n.Iu.get(o.targetId);if(a.length>1)return n.Iu.set(o.targetId,a.filter((u=>!Zh(u,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||await jp(n.localStore,o.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(o.targetId),t&&Dm(n.remoteStore,o.targetId),$p(n,o.targetId)})).catch(Js)):($p(n,o.targetId),await jp(n.localStore,o.targetId,!0))}async function Ik(i,e){const t=Ae(i),n=t.Tu.get(e),o=t.Iu.get(n.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Dm(t.remoteStore,n.targetId))}async function wk(i,e,t){const n=Hw(i);try{const o=await(function(u,d){const p=Ae(u),y=qe.now(),E=d.reduce(((j,H)=>j.add(H.key)),ke());let w,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let H=gn(),W=ke();return p.Ns.getEntries(j,E).next(($=>{H=$,H.forEach(((te,se)=>{se.isValidDocument()||(W=W.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(j,H))).next(($=>{w=$;const te=[];for(const se of d){const ae=FR(se,w.get(se.key).overlayedDocument);ae!=null&&te.push(new Qr(se.key,ae,RI(ae.value.mapValue),Yt.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,te,d)})).next(($=>{A=$;const te=$.applyToLocalDocumentSet(w,W);return p.documentOverlayCache.saveOverlays(j,$.batchId,te)}))})).then((()=>({batchId:A.batchId,changes:MI(w)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let y=u.Vu[u.currentUser.toKey()];y||(y=new nt(Se)),y=y.insert(d,p),u.Vu[u.currentUser.toKey()]=y})(n,o.batchId,t),await Eu(n,o.changes),await vu(n.remoteStore)}catch(o){const a=Mm(o,"Failed to persist write");t.reject(a)}}async function zw(i,e){const t=Ae(i);try{const n=await OP(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(pe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?pe(u.hu,14607):o.removedDocuments.size>0&&(pe(u.hu,42227),u.hu=!1))})),await Eu(t,n,e)}catch(n){await Js(n)}}function Gv(i,e,t){const n=Ae(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const o=[];n.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ae(u);p.onlineState=d;let y=!1;p.queries.forEach(((E,w)=>{for(const A of w.Sa)A.va(d)&&(y=!0)})),y&&Fm(p)})(n.eventManager,e),o.length&&n.Pu.H_(o),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Tk(i,e,t){const n=Ae(i);n.sharedClientState.updateQueryState(e,"rejected",t);const o=n.Au.get(e),a=o&&o.key;if(a){let u=new nt(re.comparator);u=u.insert(a,ut.newNoDocument(a,ge.min()));const d=ke().add(a),p=new rd(ge.min(),new Map,new nt(Se),u,d);await zw(n,p),n.du=n.du.remove(a),n.Au.delete(e),jm(n)}else await jp(n.localStore,e,!1).then((()=>$p(n,e,t))).catch(Js)}async function Sk(i,e){const t=Ae(i),n=e.batch.batchId;try{const o=await VP(t.localStore,e);qw(t,n,null),$w(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Eu(t,o)}catch(o){await Js(o)}}async function Ak(i,e,t){const n=Ae(i);try{const o=await(function(u,d){const p=Ae(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return p.mutationQueue.lookupMutationBatch(y,d).next((w=>(pe(w!==null,37113),E=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>p.localDocuments.getDocuments(y,E)))}))})(n.localStore,e);qw(n,e,t),$w(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Eu(n,o)}catch(o){await Js(o)}}function $w(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function qw(i,e,t){const n=Ae(i);let o=n.Vu[n.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),n.Vu[n.currentUser.toKey()]=o}}function $p(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Iu.get(e))i.Tu.delete(n),t&&i.Pu.yu(n,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((n=>{i.Ru.containsKey(n)||Ww(i,n)}))}function Ww(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Dm(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),jm(i))}function Qv(i,e,t){for(const n of t)n instanceof Uw?(i.Ru.addReference(n.key,e),Rk(i,n)):n instanceof jw?(J(Um,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,e),i.Ru.containsKey(n.key)||Ww(i,n.key)):ce(19791,{wu:n})}function Rk(i,e){const t=e.key,n=t.path.canonicalString();i.du.get(t)||i.Eu.has(n)||(J(Um,"New document in limbo: "+t),i.Eu.add(n),jm(i))}function jm(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new re(ze.fromString(e)),n=i.fu.next();i.Au.set(n,new mk(t)),i.du=i.du.insert(t,n),Cw(i.remoteStore,new Fr(bn(Xh(t.path)),n,"TargetPurposeLimboResolution",Cn.ce))}}async function Eu(i,e,t){const n=Ae(i),o=[],a=[],u=[];n.Tu.isEmpty()||(n.Tu.forEach(((d,p)=>{u.push(n.pu(p,e,t).then((y=>{if((y||t)&&n.isPrimaryClient){const E=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;n.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Cm.As(p.targetId,y);a.push(E)}})))})),await Promise.all(u),n.Pu.H_(o),await(async function(p,y){const E=Ae(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>L.forEach(y,(A=>L.forEach(A.Es,(j=>E.persistence.referenceDelegate.addReference(w,A.targetId,j))).next((()=>L.forEach(A.ds,(j=>E.persistence.referenceDelegate.removeReference(w,A.targetId,j)))))))))}catch(w){if(!Hi(w))throw w;J(bm,"Failed to update sequence numbers: "+w)}for(const w of y){const A=w.targetId;if(!w.fromCache){const j=E.Ms.get(A),H=j.snapshotVersion,W=j.withLastLimboFreeSnapshotVersion(H);E.Ms=E.Ms.insert(A,W)}}})(n.localStore,a))}async function Pk(i,e){const t=Ae(i);if(!t.currentUser.isEqual(e)){J(Um,"User change. New user:",e.toKey());const n=await Aw(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new ie(q.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Eu(t,n.Ls)}}function kk(i,e){const t=Ae(i),n=t.Au.get(e);if(n&&n.hu)return ke().add(n.key);{let o=ke();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function Kw(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tk.bind(null,e),e.Pu.H_=hk.bind(null,e.eventManager),e.Pu.yu=dk.bind(null,e.eventManager),e}function Hw(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ak.bind(null,e),e}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Sw(this.persistence,new Tw,e.initialUser,this.serializer)}Cu(e){return new km(od.mi,this.serializer)}Du(e){return new Pw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class xk extends su{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pe(this.persistence.referenceDelegate instanceof xh,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new _w(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new km((n=>xh.mi(n,t)),this.serializer)}}class Ck extends su{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Hw(this.xu.syncEngine),await vu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Sw(this.persistence,new Tw,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new _w(n,e.asyncQueue,t)}Mu(e,t){const n=new LA(t,this.persistence);return new OA(e.asyncQueue,n)}Cu(e){const t=CP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new xm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,WP(),lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Pw}}class bh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Gv(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pk.bind(null,this.syncEngine),await lk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ck})()}createDatastore(e){const t=ad(e.databaseInfo.databaseId),n=(function(a){return new qP(a)})(e.databaseInfo);return(function(a,u,d,p){return new QP(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,o,a,u,d){return new JP(n,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Gv(this.syncEngine,t,0)),(function(){return zv.v()?new zv:new jP})())}createSyncEngine(e,t){return(function(o,a,u,d,p,y,E){const w=new gk(o,a,u,d,p,y);return E&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ae(t);J(Ws,"RemoteStore shutting down."),n.Ea.add(5),await _u(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bh.provider={build:()=>new bh};class Gw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ki="FirestoreClient";class bk{constructor(e,t,n,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async u=>{J(Ki,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(n,(u=>(J(Ki,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Mm(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function up(i,e){i.asyncQueue.verifyOperationInProgress(),J(Ki,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener((async o=>{n.isEqual(o)||(await Aw(e.localStore,o),n=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Yv(i,e){i.asyncQueue.verifyOperationInProgress();const t=await Dk(i);J(Ki,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((n=>qv(e.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,o)=>qv(e.remoteStore,o))),i._onlineComponents=e}async function Dk(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){J(Ki,"Using user provided OfflineComponentProvider");try{await up(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===q.FAILED_PRECONDITION||o.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Gl("Error using user provided cache. Falling back to memory cache: "+t),await up(i,new su)}}else J(Ki,"Using default OfflineComponentProvider"),await up(i,new xk(void 0));return i._offlineComponents}async function Qw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(J(Ki,"Using user provided OnlineComponentProvider"),await Yv(i,i._uninitializedComponentsProvider._online)):(J(Ki,"Using default OnlineComponentProvider"),await Yv(i,new bh))),i._onlineComponents}function Nk(i){return Qw(i).then((e=>e.syncEngine))}async function qp(i){const e=await Qw(i),t=e.eventManager;return t.onListen=yk.bind(null,e.syncEngine),t.onUnlisten=Ek.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_k.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ik.bind(null,e.syncEngine),t}function Vk(i,e,t={}){const n=new Br;return i.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,y){const E=new Gw({next:A=>{E.Nu(),u.enqueueAndForget((()=>Mw(a,w))),A.fromCache&&p.source==="server"?y.reject(new ie(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new Fw(d,E,{includeMetadataChanges:!0,qa:!0});return Lw(a,w)})(await qp(i),i.asyncQueue,e,t,n))),n.promise}function Yw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Jv=new Map;const Ok="firestore.googleapis.com",Xv=!0;class Zv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ok,this.ssl=Xv}else this.host=e.host,this.ssl=e.ssl??Xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yw)throw new ie(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yw(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,o){return n.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bm{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new wA;switch(n.type){case"firstParty":return new AA(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ie(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Jv.get(t);n&&(J("ComponentProvider","Removing Datastore"),Jv.delete(t),n.terminate())})(this),Promise.resolve()}}class Iu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Iu(this.firestore,e,this._query)}}class xt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fu(t,xt._jsonSchema))return new xt(e,n||null,new re(ze.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:yt("string",xt._jsonSchemaVersion),referencePath:yt("string")};class zi extends Iu{constructor(e,t,n){super(e,t,Xh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new re(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function ud(i,e,...t){if(i=wt(i),tI("collection","path",e),i instanceof Bm){const n=ze.fromString(e,...t);return $_(n),new zi(i,null,n)}{if(!(i instanceof xt||i instanceof zi))throw new ie(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(ze.fromString(e,...t));return $_(n),new zi(i.firestore,null,n)}}function Jw(i,e,...t){if(i=wt(i),arguments.length===1&&(e=om.newId()),tI("doc","path",e),i instanceof Bm){const n=ze.fromString(e,...t);return z_(n),new xt(i,null,new re(n))}{if(!(i instanceof xt||i instanceof zi))throw new ie(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(ze.fromString(e,...t));return z_(n),new xt(i.firestore,i instanceof zi?i.converter:null,new re(n))}}const eE="AsyncQueue";class tE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kw(this,"async_queue_retry"),this._c=()=>{const n=lh();n&&J(eE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Br;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hi(e))throw e;J(eE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Qt("INTERNAL UNHANDLED ERROR: ",nE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Lm.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&ce(47125,{Pc:nE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function rE(i){return(function(t,n){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of n)if(a in o&&typeof o[a]=="function")return!0;return!1})(i,["next","error","complete"])}const Lk=-1;class ou extends Bm{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new tE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tE(e),this._firestoreClient=void 0,await e}}}function Mk(i,e,t){t||(t=Eh);const n=im(i,"firestore");if(n.isInitialized(t)){const o=n.getImmediate({identifier:t}),a=n.getOptions(t);if(Ms(a,e))return o;throw new ie(q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yw)throw new ie(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ta(e.host)&&ME(e.host),n.initialize({options:e,instanceIdentifier:t})}function cd(i){if(i._terminated)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Fk(i),i._firestoreClient}function Fk(i){const e=i._freezeSettings(),t=(function(o,a,u,d){return new hR(o,a,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Yw(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new bk(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}})(i._componentsProvider))}class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(_t.fromBase64String(e))}catch(t){throw new ie(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xn(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fu(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:yt("string",xn._jsonSchemaVersion),bytes:yt("string")};class hd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dd{constructor(e){this._methodName=e}}class mr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mr._jsonSchemaVersion}}static fromJSON(e){if(fu(e,mr._jsonSchema))return new mr(e.latitude,e.longitude)}}mr._jsonSchemaVersion="firestore/geoPoint/1.0",mr._jsonSchema={type:yt("string",mr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};class gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,o){if(n.length!==o.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fu(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gr(e.vectorValues);throw new ie(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:yt("string",gr._jsonSchemaVersion),vectorValues:yt("object")};const Uk=/^__.*__$/;class jk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ra(e,this.data,t,this.fieldTransforms)}}class Xw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:i})}}class zm{constructor(e,t,n,o,a,u){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Zw(this.Ac)&&Uk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Bk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ad(e)}Cc(e,t,n,o=!1){return new zm({Ac:e,methodName:t,Dc:n,path:st.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zk(i){const e=i._freezeSettings(),t=ad(i._databaseId);return new Bk(i._databaseId,!!e.ignoreUndefinedProperties,t)}function $k(i,e,t,n,o,a={}){const u=i.Cc(a.merge||a.mergeFields?2:0,e,t,o);qm("Data must be an object, but it was:",u,n);const d=eT(n,u);let p,y;if(a.merge)p=new sn(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const E=[];for(const w of a.mergeFields){const A=Wp(e,w,t);if(!u.contains(A))throw new ie(q.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);nT(E,A)||E.push(A)}p=new sn(E),y=u.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=u.fieldTransforms;return new jk(new qt(d),p,y)}class fd extends dd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}class $m extends dd{_toFieldTransform(e){return new qI(e.path,new ga)}isEqual(e){return e instanceof $m}}function qk(i,e,t,n){const o=i.Cc(1,e,t);qm("Data must be an object, but it was:",o,n);const a=[],u=qt.empty();Gi(n,((p,y)=>{const E=Wm(e,p,t);y=wt(y);const w=o.yc(E);if(y instanceof fd)a.push(E);else{const A=pd(y,w);A!=null&&(a.push(E),u.set(E,A))}}));const d=new sn(a);return new Xw(u,d,o.fieldTransforms)}function Wk(i,e,t,n,o,a){const u=i.Cc(1,e,t),d=[Wp(e,n,t)],p=[o];if(a.length%2!=0)throw new ie(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(Wp(e,a[A])),p.push(a[A+1]);const y=[],E=qt.empty();for(let A=d.length-1;A>=0;--A)if(!nT(y,d[A])){const j=d[A];let H=p[A];H=wt(H);const W=u.yc(j);if(H instanceof fd)y.push(j);else{const $=pd(H,W);$!=null&&(y.push(j),E.set(j,$))}}const w=new sn(y);return new Xw(E,w,u.fieldTransforms)}function pd(i,e){if(tT(i=wt(i)))return qm("Unsupported field value:",e,i),eT(i,e);if(i instanceof dd)return(function(n,o){if(!Zw(o.Ac))throw o.Sc(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,o){const a=[];let u=0;for(const d of n){let p=pd(d,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(i,e)}return(function(n,o){if((n=wt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return DR(o.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=qe.fromDate(n);return{timestampValue:va(o.serializer,a)}}if(n instanceof qe){const a=new qe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:va(o.serializer,a)}}if(n instanceof mr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof xn)return{bytesValue:JI(o.serializer,n._byteString)};if(n instanceof xt){const a=o.databaseId,u=n.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Sm(n.firestore._databaseId||o.databaseId,n._key.path)}}if(n instanceof gr)return(function(u,d){return{mapValue:{fields:{[mm]:{stringValue:gm},[da]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw d.Sc("VectorValues must only contain numeric values.");return vm(d.serializer,y)}))}}}}}})(n,o);throw o.Sc(`Unsupported field value: ${am(n)}`)})(i,e)}function eT(i,e){const t={};return yI(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(i,((n,o)=>{const a=pd(o,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function tT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof qe||i instanceof mr||i instanceof xn||i instanceof xt||i instanceof dd||i instanceof gr)}function qm(i,e,t){if(!tT(t)||!nI(t)){const n=am(t);throw n==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+n)}}function Wp(i,e,t){if((e=wt(e))instanceof hd)return e._internalPath;if(typeof e=="string")return Wm(i,e);throw Dh("Field path arguments must be of type string or ",i,!1,void 0,t)}const Kk=new RegExp("[~\\*/\\[\\]]");function Wm(i,e,t){if(e.search(Kk)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Dh(i,e,t,n,o){const a=n&&!n.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${n}`),u&&(p+=` in document ${o}`),p+=")"),new ie(q.INVALID_ARGUMENT,d+i+p)}function nT(i,e){return i.some((t=>t.isEqual(e)))}class rT{constructor(e,t,n,o,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Hk extends rT{data(){return super.data()}}function iT(i,e){return typeof e=="string"?Wm(i,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function sT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ie(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gk{convertValue(e,t="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Gi(e,((o,a)=>{n[o]=this.convertValue(a,t)})),n}convertVectorValue(e){const t=e.fields?.[da].arrayValue?.values?.map((n=>tt(n.doubleValue)));return new gr(t)}convertGeoPoint(e){return new mr(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Qh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=qr(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ze.fromString(e);pe(aw(n),9688,{name:e});const o=new js(n.get(1),n.get(3)),a=new re(n.popFirst(5));return o.isEqual(t)||Qt(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Qk(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Os extends rT{constructor(e,t,n,o,a,u){super(e,t,n,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(iT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Os._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Os._jsonSchemaVersion="firestore/documentSnapshot/1.0",Os._jsonSchema={type:yt("string",Os._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class uh extends Os{data(e={}){return super.data(e)}}class Ls{constructor(e,t,n,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ol(o.hasPendingWrites,o.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new uh(this._firestore,this._userDataWriter,n.key,n,new Ol(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new uh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ol(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new uh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ol(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),E=u.indexOf(d.doc.key)),{type:Yk(d.type),doc:p,oldIndex:y,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ls._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Yk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:i})}}Ls._jsonSchemaVersion="firestore/querySnapshot/1.0",Ls._jsonSchema={type:yt("string",Ls._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Km extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function Jk(i){i=ta(i,Iu);const e=ta(i.firestore,ou),t=cd(e),n=new Km(e);return sT(i._query),Vk(t,i._query).then((o=>new Ls(e,n,i,o)))}function Xk(i,...e){i=wt(i);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||rE(e[n])||(t=e[n++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(rE(e[n])){const p=e[n];e[n]=p.next?.bind(p),e[n+1]=p.error?.bind(p),e[n+2]=p.complete?.bind(p)}let a,u,d;if(i instanceof xt)u=ta(i.firestore,ou),d=Xh(i._key.path),a={next:p=>{e[n]&&e[n](ex(u,i,p))},error:e[n+1],complete:e[n+2]};else{const p=ta(i,Iu);u=ta(p.firestore,ou),d=p._query;const y=new Km(u);a={next:E=>{e[n]&&e[n](new Ls(u,y,p,E))},error:e[n+1],complete:e[n+2]},sT(i._query)}return(function(y,E,w,A){const j=new Gw(A),H=new Fw(E,j,w);return y.asyncQueue.enqueueAndForget((async()=>Lw(await qp(y),H))),()=>{j.Nu(),y.asyncQueue.enqueueAndForget((async()=>Mw(await qp(y),H)))}})(cd(u),d,o,a)}function Zk(i,e){return(function(n,o){const a=new Br;return n.asyncQueue.enqueueAndForget((async()=>wk(await Nk(n),o,a))),a.promise})(cd(i),e)}function ex(i,e,t){const n=t.docs.get(e._key),o=new Km(i);return new Os(i,o,e._key,n,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}class tx{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=ix(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function nx(i){return new tx(i)}class rx{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bh.provider,this._offlineComponentProvider={build:t=>new Ck(t,e?.cacheSizeBytes,this.forceOwnership)}}}function ix(i){return new rx(i?.forceOwnership)}class sx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zk(e)}set(e,t,n){this._verifyNotCommitted();const o=cp(e,this._firestore),a=Qk(o.converter,t,n),u=$k(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,n);return this._mutations.push(u.toMutation(o._key,Yt.none())),this}update(e,t,n,...o){this._verifyNotCommitted();const a=cp(e,this._firestore);let u;return u=typeof(t=wt(t))=="string"||t instanceof hd?Wk(this._dataReader,"WriteBatch.update",a._key,t,n,o):qk(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cp(e,this._firestore);return this._mutations=this._mutations.concat(new nd(t._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cp(i,e){if((i=wt(i)).firestore!==e)throw new ie(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function oT(){return new $m("serverTimestamp")}function aT(i){return cd(i=ta(i,ou)),new sx(i,(e=>Zk(i,e)))}(function(e,t=!0){(function(o){Aa=o})(Sa),oa(new Fs("firestore",((n,{instanceIdentifier:o,options:a})=>{const u=n.getProvider("app").getImmediate(),d=new ou(new TA(n.getProvider("auth-internal")),new RA(u,n.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ie(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(y.options.projectId,E)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Ui(F_,U_,e),Ui(F_,U_,"esm2020")})();function lT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ox=lT,uT=new hu("auth","Firebase",lT());const Nh=new nm("@firebase/auth");function ax(i,...e){Nh.logLevel<=be.WARN&&Nh.warn(`Auth (${Sa}): ${i}`,...e)}function ch(i,...e){Nh.logLevel<=be.ERROR&&Nh.error(`Auth (${Sa}): ${i}`,...e)}function Hn(i,...e){throw Hm(i,...e)}function yr(i,...e){return Hm(i,...e)}function cT(i,e,t){const n={...ox(),[e]:t};return new hu("auth","Firebase",n).create(e,{appName:i.name})}function zr(i){return cT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hm(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return uT.create(i,...e)}function Ee(i,e,...t){if(!i)throw Hm(e,...t)}function Ur(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ch(e),new Error(e)}function Kr(i,e){i||Ur(e)}function Kp(){return typeof self<"u"&&self.location?.href||""}function lx(){return iE()==="http:"||iE()==="https:"}function iE(){return typeof self<"u"&&self.location?.protocol||null}function ux(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lx()||ZS()||"connection"in navigator)?navigator.onLine:!0}function cx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class wu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kr(t>e,"Short delay should be less than long delay!"),this.isMobile=JS()||e1()}get(){return ux()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gm(i,e){Kr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class hT{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fx=new wu(3e4,6e4);function Qi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Yr(i,e,t,n,o={}){return dT(i,o,async()=>{let a={},u={};n&&(e==="GET"?u=n:a={body:JSON.stringify(n)});const d=du({key:i.config.apiKey,...u}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...a};return XS()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Ta(i.emulatorConfig.host)&&(y.credentials="include"),hT.fetch()(await fT(i,i.config.apiHost,t,d),y)})}async function dT(i,e,t){i._canInitEmulator=!1;const n={...hx,...e};try{const o=new mx(i),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Jc(i,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(i,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Jc(i,"email-already-in-use",u);if(p==="USER_DISABLED")throw Jc(i,"user-disabled",u);const E=n[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw cT(i,E,y);Hn(i,E)}}catch(o){if(o instanceof Hr)throw o;Hn(i,"network-request-failed",{message:String(o)})}}async function Tu(i,e,t,n,o={}){const a=await Yr(i,e,t,n,o);return"mfaPendingCredential"in a&&Hn(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function fT(i,e,t,n){const o=`${e}${t}?${n}`,a=i,u=a.config.emulator?Gm(i.config,o):`${i.config.apiScheme}://${o}`;return dx.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function px(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(yr(this.auth,"network-request-failed")),fx.get())})}}function Jc(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const o=yr(i,e,n);return o.customData._tokenResponse=t,o}function sE(i){return i!==void 0&&i.enterprise!==void 0}class gx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return px(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yx(i,e){return Yr(i,"GET","/v2/recaptchaConfig",Qi(i,e))}async function _x(i,e){return Yr(i,"POST","/v1/accounts:delete",e)}async function Vh(i,e){return Yr(i,"POST","/v1/accounts:lookup",e)}function Wl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vx(i,e=!1){const t=wt(i),n=await t.getIdToken(e),o=Qm(n);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:n,authTime:Wl(hp(o.auth_time)),issuedAtTime:Wl(hp(o.iat)),expirationTime:Wl(hp(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function hp(i){return Number(i)*1e3}function Qm(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return ch("JWT malformed, contained fewer than 3 sections"),null;try{const o=NE(t);return o?JSON.parse(o):(ch("Failed to decode base64 JWT payload"),null)}catch(o){return ch("Caught error parsing JWT payload as JSON",o?.toString()),null}}function oE(i){const e=Qm(i);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ia(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Hr&&Ex(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function Ex({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class Ix{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(i){const e=i.auth,t=await i.getIdToken(),n=await Ia(i,Vh(e,{idToken:t}));Ee(n?.users.length,e,"internal-error");const o=n.users[0];i._notifyReloadListener(o);const a=o.providerUserInfo?.length?pT(o.providerUserInfo):[],u=Tx(i.providerData,a),d=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!u?.length,y=d?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Hp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,E)}async function wx(i){const e=wt(i);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tx(i,e){return[...i.filter(n=>!e.some(o=>o.providerId===n.providerId)),...e]}function pT(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Sx(i,e){const t=await dT(i,{},async()=>{const n=du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=i.config,u=await fT(i,o,"/v1/token",`key=${a}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:n};return i.emulatorConfig&&Ta(i.emulatorConfig.host)&&(p.credentials="include"),hT.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ax(i,e){return Yr(i,"POST","/v2/accounts:revokeToken",Qi(i,e))}class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=oE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:a}=await Sx(e,t);this.updateTokensAndExpiration(n,o,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:o,expirationTime:a}=t,u=new ra;return n&&(Ee(typeof n=="string","internal-error",{appName:e}),u.refreshToken=n),o&&(Ee(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ee(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return Ur("not implemented")}}function Ci(i,e){Ee(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class $n{constructor({uid:e,auth:t,stsTokenManager:n,...o}){this.providerId="firebase",this.proactiveRefresh=new Ix(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ia(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vx(this,e)}reload(){return wx(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Oh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await Ia(this,_x(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:w,emailVerified:A,isAnonymous:j,providerData:H,stsTokenManager:W}=t;Ee(w&&W,e,"internal-error");const $=ra.fromJSON(this.name,W);Ee(typeof w=="string",e,"internal-error"),Ci(n,e.name),Ci(o,e.name),Ee(typeof A=="boolean",e,"internal-error"),Ee(typeof j=="boolean",e,"internal-error"),Ci(a,e.name),Ci(u,e.name),Ci(d,e.name),Ci(p,e.name),Ci(y,e.name),Ci(E,e.name);const te=new $n({uid:w,auth:e,email:o,emailVerified:A,displayName:n,isAnonymous:j,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:$,createdAt:y,lastLoginAt:E});return H&&Array.isArray(H)&&(te.providerData=H.map(se=>({...se}))),p&&(te._redirectEventId=p),te}static async _fromIdTokenResponse(e,t,n=!1){const o=new ra;o.updateFromServerResponse(t);const a=new $n({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:n});return await Oh(a),a}static async _fromGetAccountInfoResponse(e,t,n){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?pT(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new ra;d.updateFromIdToken(n);const p=new $n({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Hp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,y),p}}const aE=new Map;function jr(i){Kr(i instanceof Function,"Expected a class definition");let e=aE.get(i);return e?(Kr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,aE.set(i,e),e)}class mT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mT.type="NONE";const lE=mT;function hh(i,e,t){return`firebase:${i}:${e}:${t}`}class ia{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:o,name:a}=this.auth;this.fullUserKey=hh(this.userKey,o.apiKey,a),this.fullPersistenceKey=hh("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vh(this.auth,{idToken:e}).catch(()=>{});return t?$n._fromGetAccountInfoResponse(this.auth,t,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ia(jr(lE),e,n);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||jr(lE);const u=hh(n,e.config.apiKey,e.name);let d=null;for(const y of t)try{const E=await y._get(u);if(E){let w;if(typeof E=="string"){const A=await Vh(e,{idToken:E}).catch(()=>{});if(!A)break;w=await $n._fromGetAccountInfoResponse(e,A,E)}else w=$n._fromJSON(e,E);y!==a&&(d=w),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new ia(a,e,n):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new ia(a,e,n))}}function uE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IT(e))return"Blackberry";if(wT(e))return"Webos";if(yT(e))return"Safari";if((e.includes("chrome/")||_T(e))&&!e.includes("edge/"))return"Chrome";if(ET(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function gT(i=It()){return/firefox\//i.test(i)}function yT(i=It()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _T(i=It()){return/crios\//i.test(i)}function vT(i=It()){return/iemobile/i.test(i)}function ET(i=It()){return/android/i.test(i)}function IT(i=It()){return/blackberry/i.test(i)}function wT(i=It()){return/webos/i.test(i)}function Ym(i=It()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Rx(i=It()){return Ym(i)&&!!window.navigator?.standalone}function Px(){return t1()&&document.documentMode===10}function TT(i=It()){return Ym(i)||ET(i)||wT(i)||IT(i)||/windows phone/i.test(i)||vT(i)}function ST(i,e=[]){let t;switch(i){case"Browser":t=uE(It());break;case"Worker":t=`${uE(It())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${n}`}class kx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});n.onAbort=t,this.queue.push(n);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function xx(i,e={}){return Yr(i,"GET","/v2/passwordPolicy",Qi(i,e))}const Cx=6;class bx{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Cx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let o=0;o<e.length;o++)n=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Dx{constructor(e,t,n,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new kx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ia.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vh(this,{idToken:e}),n=await $n._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(kn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,u=n?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===u)&&d?.user&&(n=d.user,o=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(zr(this));const t=e?wt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xx(this),t=new bx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ax(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await ia.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,n,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ST(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ax(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Zs(i){return wt(i)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=a1(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nx(i){md=i}function AT(i){return md.loadJS(i)}function Vx(){return md.recaptchaEnterpriseScript}function Ox(){return md.gapiScript}function Lx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class Mx{constructor(){this.enterprise=new Fx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Fx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ux="recaptcha-enterprise",RT="NO_RECAPTCHA";class jx{constructor(e){this.type=Ux,this.auth=Zs(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{yx(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new gx(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;sE(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(RT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mx().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{n(this.auth).then(d=>{if(!t&&sE(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Vx();p.length!==0&&(p+=d),AT(p).then(()=>{o(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function hE(i,e,t,n=!1,o=!1){const a=new jx(i);let u;if(o)u=RT;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return n?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Gp(i,e,t,n,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await hE(i,e,t,t==="getOobCode");return n(i,a)}else return n(i,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await hE(i,e,t,t==="getOobCode");return n(i,u)}else return Promise.reject(a)})}function Bx(i,e){const t=im(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ms(a,e??{}))return o;Hn(o,"already-initialized")}return t.initialize({options:e})}function zx(i,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(jr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function $x(i,e,t){const n=Zs(i);Ee(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const o=!1,a=PT(e),{host:u,port:d}=qx(e),p=d===null?"":`:${d}`,y={url:`${a}//${u}${p}/`},E=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!n._canInitEmulator){Ee(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ee(Ms(y,n.config.emulator)&&Ms(E,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=y,n.emulatorConfig=E,n.settings.appVerificationDisabledForTesting=!0,Ta(u)?(ME(`${a}//${u}${p}`),YS("Auth",!0)):Wx()}function PT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function qx(i){const e=PT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const a=o[1];return{host:a,port:dE(n.substr(a.length+1))}}else{const[a,u]=n.split(":");return{host:a,port:dE(u)}}}function dE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function Wx(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Jm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function Kx(i,e){return Yr(i,"POST","/v1/accounts:signUp",e)}async function Hx(i,e){return Tu(i,"POST","/v1/accounts:signInWithPassword",Qi(i,e))}async function Gx(i,e){return Tu(i,"POST","/v1/accounts:signInWithEmailLink",Qi(i,e))}async function Qx(i,e){return Tu(i,"POST","/v1/accounts:signInWithEmailLink",Qi(i,e))}class au extends Jm{constructor(e,t,n,o=null){super("password",n),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new au(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new au(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,t,"signInWithPassword",Hx);case"emailLink":return Gx(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,n,"signUpPassword",Kx);case"emailLink":return Qx(e,{idToken:t,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sa(i,e){return Tu(i,"POST","/v1/accounts:signInWithIdp",Qi(i,e))}const Yx="http://localhost";class Ks extends Jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:o,...a}=t;if(!n||!o)return null;const u=new Ks(n,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sa(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sa(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}buildRequest(){const e={requestUri:Yx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=du(t)}return e}}function Jx(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xx(i){const e=xl(Cl(i)).link,t=e?xl(Cl(e)).deep_link_id:null,n=xl(Cl(i)).deep_link_id;return(n?xl(Cl(n)).link:null)||n||t||e||i}class Xm{constructor(e){const t=xl(Cl(e)),n=t.apiKey??null,o=t.oobCode??null,a=Jx(t.mode??null);Ee(n&&o&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Xx(e);try{return new Xm(t)}catch{return null}}}class ka{constructor(){this.providerId=ka.PROVIDER_ID}static credential(e,t){return au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Xm.parseLink(t);return Ee(n,"argument-error"),au._fromEmailAndCode(e,n.code,n.tenantId)}}ka.PROVIDER_ID="password";ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class kT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Su extends kT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Di extends Su{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";class Ni extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ks._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ni.credential(t,n)}catch{return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com";Ni.PROVIDER_ID="google.com";class Vi extends Su{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";class Oi extends Su{constructor(){super("twitter.com")}static credential(e,t){return Ks._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Oi.credential(t,n)}catch{return null}}}Oi.TWITTER_SIGN_IN_METHOD="twitter.com";Oi.PROVIDER_ID="twitter.com";async function Zx(i,e){return Tu(i,"POST","/v1/accounts:signUp",Qi(i,e))}class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,o=!1){const a=await $n._fromIdTokenResponse(e,n,o),u=fE(n);return new Hs({user:a,providerId:u,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const o=fE(n);return new Hs({user:e,providerId:o,_tokenResponse:n,operationType:t})}}function fE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Lh extends Hr{constructor(e,t,n,o){super(t.code,t.message),this.operationType=n,this.user=o,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,o){return new Lh(e,t,n,o)}}function xT(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(i,a,e,n):a})}async function eC(i,e,t=!1){const n=await Ia(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Hs._forOperation(i,"link",n)}async function tC(i,e,t=!1){const{auth:n}=i;if(kn(n.app))return Promise.reject(zr(n));const o="reauthenticate";try{const a=await Ia(i,xT(n,o,e,i),t);Ee(a.idToken,n,"internal-error");const u=Qm(a.idToken);Ee(u,n,"internal-error");const{sub:d}=u;return Ee(i.uid===d,n,"user-mismatch"),Hs._forOperation(i,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Hn(n,"user-mismatch"),a}}async function CT(i,e,t=!1){if(kn(i.app))return Promise.reject(zr(i));const n="signIn",o=await xT(i,n,e),a=await Hs._fromIdTokenResponse(i,n,o);return t||await i._updateCurrentUser(a.user),a}async function nC(i,e){return CT(Zs(i),e)}async function bT(i){const e=Zs(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lD(i,e,t){if(kn(i.app))return Promise.reject(zr(i));const n=Zs(i),u=await Gp(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zx).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&bT(i),p}),d=await Hs._fromIdTokenResponse(n,"signIn",u);return await n._updateCurrentUser(d.user),d}function uD(i,e,t){return kn(i.app)?Promise.reject(zr(i)):nC(wt(i),ka.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&bT(i),n})}async function rC(i,e){return Yr(i,"POST","/v1/accounts:update",e)}async function cD(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=wt(i),a={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Ia(n,rC(n.auth,a));n.displayName=u.displayName||null,n.photoURL=u.photoUrl||null;const d=n.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=n.displayName,d.photoURL=n.photoURL),await n._updateTokensIfNecessary(u)}function iC(i,e,t,n){return wt(i).onIdTokenChanged(e,t,n)}function sC(i,e,t){return wt(i).beforeAuthStateChanged(e,t)}function hD(i){return wt(i).signOut()}const Mh="__sak";class DT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mh,"1"),this.storage.removeItem(Mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const oC=1e3,aC=10;class NT extends DT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),o=this.localCache[t];n!==o&&e(t,o,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const n=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(n);!t&&this.localCache[n]===u||this.notifyListeners(n,u)},a=this.storage.getItem(n);Px()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,aC):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}NT.type="LOCAL";const lC=NT;class VT extends DT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VT.type="SESSION";const OT=VT;function uC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class gd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const n=new gd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),p=await uC(d);t.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gd.receivers=[];function Zm(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=Zm("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},n);u={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(E),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(A.data.response);break;default:clearTimeout(E),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function _r(){return window}function hC(i){_r().location.href=i}function LT(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function dC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){return navigator?.serviceWorker?.controller||null}function pC(){return LT()?self:null}const MT="firebaseLocalStorageDb",mC=1,Fh="firebaseLocalStorage",FT="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yd(i,e){return i.transaction([Fh],e?"readwrite":"readonly").objectStore(Fh)}function gC(){const i=indexedDB.deleteDatabase(MT);return new Au(i).toPromise()}function Qp(){const i=indexedDB.open(MT,mC);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(Fh,{keyPath:FT})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(Fh)?e(n):(n.close(),await gC(),e(await Qp()))})})}async function pE(i,e,t){const n=yd(i,!0).put({[FT]:e,value:t});return new Au(n).toPromise()}async function yC(i,e){const t=yd(i,!1).get(e),n=await new Au(t).toPromise();return n===void 0?null:n.value}function mE(i,e){const t=yd(i,!0).delete(e);return new Au(t).toPromise()}const _C=800,vC=3;class UT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>vC)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gd._getInstance(pC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qp();return await pE(e,Mh,"1"),await mE(e,Mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>pE(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>yC(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=yd(o,!1).getAll();return new Au(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_C)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UT.type="LOCAL";const EC=UT;new wu(3e4,6e4);function IC(i,e){return e?jr(e):(Ee(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class eg extends Jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wC(i){return CT(i.auth,new eg(i),i.bypassAuthState)}function TC(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),tC(t,new eg(i),i.bypassAuthState)}async function SC(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),eC(t,new eg(i),i.bypassAuthState)}class jT{constructor(e,t,n,o,a=!1){this.auth=e,this.resolver=n,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wC;case"linkViaPopup":case"linkViaRedirect":return SC;case"reauthViaPopup":case"reauthViaRedirect":return TC;default:Hn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AC=new wu(2e3,1e4);class ea extends jT{constructor(e,t,n,o,a){super(e,t,o,a),this.provider=n,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=Zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AC.get())};e()}}ea.currentPopupAction=null;const RC="pendingRedirect",dh=new Map;class PC extends jT{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const n=await kC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kC(i,e){const t=bC(e),n=CC(i);if(!await n._isAvailable())return!1;const o=await n._get(t)==="true";return await n._remove(t),o}function xC(i,e){dh.set(i._key(),e)}function CC(i){return jr(i._redirectPersistence)}function bC(i){return hh(RC,i.config.apiKey,i.name)}async function DC(i,e,t=!1){if(kn(i.app))return Promise.reject(zr(i));const n=Zs(i),o=IC(n,e),u=await new PC(n,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await n._persistUserIfCurrent(u.user),await n._setRedirectUser(null,e)),u}const NC=600*1e3;class VC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!BT(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yr(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NC&&this.cachedEventUids.clear(),this.cachedEventUids.has(gE(e))}saveEventToCache(e){this.cachedEventUids.add(gE(e)),this.lastProcessedEventTime=Date.now()}}function gE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function BT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function OC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BT(i);default:return!1}}async function LC(i,e={}){return Yr(i,"GET","/v1/projects",e)}const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FC=/^https?/;async function UC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await LC(i);for(const t of e)try{if(jC(t))return}catch{}Hn(i,"unauthorized-domain")}function jC(i){const e=Kp(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===n}if(!FC.test(t))return!1;if(MC.test(i))return n===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}const BC=new wu(3e4,6e4);function yE(){const i=_r().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function zC(i){return new Promise((e,t)=>{function n(){yE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yE(),t(yr(i,"network-request-failed"))},timeout:BC.get()})}if(_r().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_r().gapi?.load)n();else{const o=Lx("iframefcb");return _r()[o]=()=>{gapi.load?n():t(yr(i,"network-request-failed"))},AT(`${Ox()}?onload=${o}`).catch(a=>t(a))}}).catch(e=>{throw fh=null,e})}let fh=null;function $C(i){return fh=fh||zC(i),fh}const qC=new wu(5e3,15e3),WC="__/auth/iframe",KC="emulator/auth/iframe",HC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QC(i){const e=i.config;Ee(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Gm(e,KC):`https://${i.config.authDomain}/${WC}`,n={apiKey:e.apiKey,appName:i.name,v:Sa},o=GC.get(i.config.apiHost);o&&(n.eid=o);const a=i._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${du(n).slice(1)}`}async function YC(i){const e=await $C(i),t=_r().gapi;return Ee(t,i,"internal-error"),e.open({where:document.body,url:QC(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HC,dontclear:!0},n=>new Promise(async(o,a)=>{await n.restyle({setHideOnLeave:!1});const u=yr(i,"network-request-failed"),d=_r().setTimeout(()=>{a(u)},qC.get());function p(){_r().clearTimeout(d),o(n)}n.ping(p).then(p,()=>{a(u)})}))}const JC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,ZC=600,eb="_blank",tb="http://localhost";class _E{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nb(i,e,t,n=XC,o=ZC){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const p={...JC,width:n.toString(),height:o.toString(),top:a,left:u},y=It().toLowerCase();t&&(d=_T(y)?eb:t),gT(y)&&(e=e||tb,p.scrollbars="yes");const E=Object.entries(p).reduce((A,[j,H])=>`${A}${j}=${H},`,"");if(Rx(y)&&d!=="_self")return rb(e||"",d),new _E(null);const w=window.open(e||"",d,E);Ee(w,i,"popup-blocked");try{w.focus()}catch{}return new _E(w)}function rb(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const ib="__/auth/handler",sb="emulator/auth/handler",ob=encodeURIComponent("fac");async function vE(i,e,t,n,o,a){Ee(i.config.authDomain,i,"auth-domain-config-required"),Ee(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:Sa,eventId:o};if(e instanceof kT){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",o1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))u[E]=w}if(e instanceof Su){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(u.scopes=E.join(","))}i.tenantId&&(u.tid=i.tenantId);const d=u;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await i._getAppCheckToken(),y=p?`#${ob}=${encodeURIComponent(p)}`:"";return`${ab(i)}?${du(d).slice(1)}${y}`}function ab({config:i}){return i.emulator?Gm(i,sb):`https://${i.authDomain}/${ib}`}const dp="webStorageSupport";class lb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OT,this._completeRedirectFn=DC,this._overrideRedirectResult=xC}async _openPopup(e,t,n,o){Kr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await vE(e,t,n,Kp(),o);return nb(e,a,Zm())}async _openRedirect(e,t,n,o){await this._originValidation(e);const a=await vE(e,t,n,Kp(),o);return hC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Kr(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await YC(e),n=new VC(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dp,{type:dp},o=>{const a=o?.[0]?.[dp];a!==void 0&&t(!!a),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TT()||yT()||Ym()}}const ub=lb;var EE="@firebase/auth",IE="1.11.1";class cb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hb(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function db(i){oa(new Fs("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=n.options;Ee(u&&!u.includes(":"),"invalid-api-key",{appName:n.name});const p={apiKey:u,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ST(i)},y=new Dx(n,o,a,p);return zx(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),oa(new Fs("auth-internal",e=>{const t=Zs(e.getProvider("auth").getImmediate());return(n=>new cb(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ui(EE,IE,hb(i)),Ui(EE,IE,"esm2020")}const fb=300,pb=LE("authIdTokenMaxAge")||fb;let wE=null;const mb=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>pb)return;const o=t?.token;wE!==o&&(wE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gb(i=lA()){const e=im(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Bx(i,{popupRedirectResolver:ub,persistence:[EC,lC,OT]}),n=LE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const u=mb(a.toString());sC(t,u,()=>u(t.currentUser)),iC(t,d=>u(d))}}const o=KS("auth");return o&&$x(t,`http://${o}`),t}function yb(){return document.getElementsByTagName("head")?.[0]??document}Nx({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=o=>{const a=yr("internal-error");a.customData=o,t(a)},n.type="text/javascript",n.charset="UTF-8",yb().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});db("Browser");const Yp={apiKey:"AIzaSyC3ZH_roI3O4e8O0TEcLbgJCuVI64t8b4c",authDomain:"devinsfarm-2025.firebaseapp.com",projectId:"devinsfarm-2025",storageBucket:"devinsfarm-2025.firebasestorage.app",messagingSenderId:"603947883430",appId:"1:603947883430:web:ac52cd8333bc7603c14d67",measurementId:"G-T8H86QB318"};function tg(){return Yp.apiKey!=="YOUR_API_KEY"&&Yp.projectId!=="YOUR_PROJECT_ID"}let fp=null,Gs=null,Qs=null;try{tg()?(fp=qE(Yp),Gs=Mk(fp,{localCache:nx({cacheSizeBytes:Lk})}),Qs=gb(fp),console.log(" Firebase initialized successfully with persistence")):window.__firebaseConfigLogged||(console.info(" Firebase not configured. Running in local-only mode."),window.__firebaseConfigLogged=!0)}catch(i){console.error(" Firebase initialization error:",i)}let Kl=!1,Kn="offline",Jp=[];function _b(){return tg()?(Kl=localStorage.getItem("devinsfarm:sync:enabled")==="true",Kl&&Qs.currentUser&&(console.log(" Sync initialized for user:",Qs.currentUser.uid),zT()),Kl):(Kn="disabled",!1)}function dD(i){Kl=i,localStorage.setItem("devinsfarm:sync:enabled",i.toString()),i&&Qs.currentUser?zT():$T()}function Ru(){return Kl&&tg()&&Qs.currentUser!==null}function fD(){return Kn}function _d(){return Qs.currentUser?`users/${Qs.currentUser.uid}`:null}async function vb(i,e){if(!Ru())return!1;try{Kn="syncing";const t=_d();if(!t)return!1;const n=aT(Gs),o=ud(Gs,t,i);for(const a of e){if(!a.id){console.warn(`Skipping item in ${i} without an ID`);continue}const u=Jw(o,a.id);n.set(u,{...a,updatedAt:oT()},{merge:!0})}return await n.commit(),Kn="synced",console.log(` Synced ${i} to Firebase`),!0}catch(t){return console.error(` Error syncing ${i}:`,t),Kn="error",!1}}function zT(){if(!Ru())return;const i=["animals","transactions","inventory","tasks","crops","treatments","feeding","breeding","measurements","milkYield","groups","pastures","schedules","calves","azolla","bsf","reminders","notifications"],e=_d();e&&($T(),i.forEach(t=>{const n=ud(Gs,e,t),o=Xk(n,a=>{const u=a.docs.map(E=>E.data()),d=`devinsfarm:${t}`,p=localStorage.getItem(d),y=JSON.stringify(u);p!==y&&(localStorage.setItem(d,y),console.log(` Updated ${t} from Firebase`),window.dispatchEvent(new StorageEvent("storage",{key:d,newValue:y,url:window.location.href})))},a=>{console.error(` Error in ${t} listener:`,a)});Jp.push(o)}),console.log(" Real-time sync listeners started"))}function $T(){Jp.forEach(i=>i()),Jp=[],console.log(" Real-time sync listeners stopped")}async function pD(){if(!Ru())return!1;try{Kn="syncing";const i={animals:localStorage.getItem("devinsfarm:animals"),transactions:localStorage.getItem("devinsfarm:transactions"),inventory:localStorage.getItem("devinsfarm:inventory"),tasks:localStorage.getItem("devinsfarm:tasks"),crops:localStorage.getItem("devinsfarm:crops"),treatments:localStorage.getItem("devinsfarm:treatments"),feeding:localStorage.getItem("devinsfarm:feeding"),breeding:localStorage.getItem("devinsfarm:breeding"),measurements:localStorage.getItem("devinsfarm:measurements"),milkYield:localStorage.getItem("devinsfarm:milkYield"),groups:localStorage.getItem("devinsfarm:groups"),pastures:localStorage.getItem("devinsfarm:pastures"),schedules:localStorage.getItem("devinsfarm:schedules"),calves:localStorage.getItem("cattalytics:calf:management"),azolla:localStorage.getItem("cattalytics:azolla:ponds"),bsf:localStorage.getItem("cattalytics:bsf:colonies"),reminders:localStorage.getItem("devinsfarm:reminders"),notifications:localStorage.getItem("devinsfarm:notifications")},e=_d();if(!e)return!1;const t=aT(Gs);let n=0;for(const[o,a]of Object.entries(i))if(a){const u=JSON.parse(a),d=ud(Gs,e,o);for(const p of u){if(!p.id)continue;const y=Jw(d,p.id);t.set(y,{...p,updatedAt:oT()},{merge:!0})}n++}return await t.commit(),Kn="synced",console.log(` Pushed ${n} collections to Firebase`),!0}catch(i){return console.error(" Error pushing to Firebase:",i),Kn="error",!1}}async function mD(){if(!Ru())return!1;try{Kn="syncing";const i=_d();if(!i)return!1;const e=["animals","transactions","inventory","tasks","crops","treatments","feeding","breeding","measurements","milkYield","groups","pastures","schedules","calves","azolla","bsf","reminders","notifications"];let t=0;for(const n of e){const o=ud(Gs,i,n),u=(await Jk(o)).docs.map(d=>d.data());if(u.length>0){const d=n.startsWith("cattalytics:")?n:`devinsfarm:${n}`;localStorage.setItem(d,JSON.stringify(u)),t++}}return Kn="synced",console.log(` Pulled ${t} collections from Firebase`),window.location.reload(),!0}catch(i){return console.error(" Error pulling from Firebase:",i),Kn="error",!1}}function Eb(){if(!Ru())return;const i=localStorage.setItem;localStorage.setItem=function(e,t){if(i.call(localStorage,e,t),e.startsWith("devinsfarm:")||e.startsWith("cattalytics:")){const n=e.replace("devinsfarm:","").replace("cattalytics:","");try{const o=JSON.parse(t);vb(n,o)}catch{}}}}const Ib=ve.lazy(()=>ot(()=>import("./Dashboard-eRIBWOn9.js"),__vite__mapDeps([0,1]))),wb=ve.lazy(()=>ot(()=>import("./NotificationCenter-D7AOUhPj.js"),[])),Tb=ve.lazy(()=>ot(()=>import("./Animals-Bok2WmX5.js"),__vite__mapDeps([2,3,4,5,1,6,7,8]))),Sb=ve.lazy(()=>ot(()=>import("./Tasks-BEJ6iBTt.js"),__vite__mapDeps([9,5]))),Ab=ve.lazy(()=>ot(()=>import("./Finance-dYonL5fB.js"),__vite__mapDeps([10,5,1]))),Rb=ve.lazy(()=>ot(()=>import("./Schedules-BVe89tpF.js"),[])),Pb=ve.lazy(()=>ot(()=>import("./CropsWithSubsections-DhSM4HNi.js"),__vite__mapDeps([11,1,5]))),kb=ve.lazy(()=>ot(()=>import("./Reports-DUaloa2X.js"),__vite__mapDeps([12,13,6,7,14]))),xb=ve.lazy(()=>ot(()=>import("./Inventory-CaIMJgQw.js"),__vite__mapDeps([15,5])));ve.lazy(()=>ot(()=>import("./Groups-Ch-fbuhG.js"),[]));ve.lazy(()=>ot(()=>import("./Pastures-Bu0AWBSF.js"),[]));ve.lazy(()=>ot(()=>import("./HealthSystem-ComJ_pia.js").then(i=>i.a),[]));const Cb=ve.lazy(()=>ot(()=>import("./Login-CZVHEMNx.js"),[])),bb=ve.lazy(()=>ot(()=>import("./AuditLog-DbML4r_X.js"),[])),Db=ve.lazy(()=>ot(()=>import("./BackupRestore-BXwLGJgD.js"),[])),Nb=ve.lazy(()=>ot(()=>import("./SyncSettings-7Y9mHV_P.js"),[])),Vb=ve.lazy(()=>ot(()=>import("./AdvancedAnalytics-CpQ17B-p.js"),__vite__mapDeps([16,6,7]))),Ob=ve.lazy(()=>ot(()=>import("./EnhancedSettings-DREOSek9.js"),__vite__mapDeps([17,7]))),Lb=ve.lazy(()=>ot(()=>import("./BulkOperations-5j_KLP1a.js"),__vite__mapDeps([18,5]))),Mb=ve.lazy(()=>ot(()=>import("./AdditionalReports-C0OwqnzE.js"),__vite__mapDeps([19,6,7,13]))),Fb=ve.lazy(()=>ot(()=>import("./PetManagement-By4p3HzC.js"),__vite__mapDeps([20,14]))),Ub=ve.lazy(()=>ot(()=>import("./CanineManagement-Dx9aWvah.js"),[])),jb=ve.lazy(()=>ot(()=>import("./CalendarView-CZTOs1O0.js"),__vite__mapDeps([21,1]))),TE=()=>N.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",flexDirection:"column",gap:"12px"},children:[N.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #e5e7eb",borderTopColor:"#059669",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),N.jsx("div",{style:{color:"#9ca3af",fontSize:"13px",fontWeight:"500"},children:"Loading module..."})]});function Bb(){const{theme:i,getThemeColors:e}=AE(),t=e(),[n,o]=ve.useState(!1),[a,u]=ve.useState(null),[d,p]=ve.useState("dashboard"),[y,E]=ve.useState([]),[w,A]=ve.useState(0),[j,H]=ve.useState(!1),W="devinsfarm:ui:settings",$={backgroundOn:!1,background:"bg-farm.svg",logo:"jr-farm-logo.svg",uploadedLogo:"",theme:"catalytics"},[te,se]=ve.useState($);ve.useEffect(()=>{const X=P=>{H(!0)};return window.addEventListener("pwa-install-available",X),()=>{window.removeEventListener("pwa-install-available",X)}},[]),ve.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(X=>{setInterval(()=>{X.update()},3600*1e3)})},[]);const ae=async()=>{await window.installPWA?.()&&H(!1)};ve.useEffect(()=>{if(TS()){if(vS()){const X=Ys();u(X),o(!0)}}else{const X=SS();u(X),o(!0)}},[]),ve.useEffect(()=>{if(n){A_();const X=kS(),P=()=>{A(RS())};P();const T=setInterval(P,3e4),k=setInterval(A_,3600*1e3);return window.addEventListener("newNotification",P),_b(),Eb(),()=>{xS(X),clearInterval(T),clearInterval(k),window.removeEventListener("newNotification",P)}}},[n]),ve.useEffect(()=>{try{const X=localStorage.getItem("cattalytics:animals");X&&E(JSON.parse(X))}catch{E([])}},[d]),ve.useEffect(()=>{try{const X=JSON.parse(localStorage.getItem(W)||"null");X&&se(P=>({...P,...X}))}catch{}},[]),ve.useEffect(()=>{try{localStorage.setItem(W,JSON.stringify(te))}catch{}},[te]);function Ie(X){u(X),o(!0)}function Te(){jh(Pn.LOGOUT,Uh.USER,a?.userId||"unknown",{username:a?.username}),_S(),o(!1),u(null),p("dashboard")}return n?N.jsxs("div",{className:`app ${te.backgroundOn?"bg-on":""} theme-${te.theme||"bold"}`,style:{...te.backgroundOn&&te.background?{backgroundImage:`url('/assets/${te.background}')`}:{},background:t.bg.primary,color:t.text.primary,minHeight:"100vh",transition:"background 0.3s, color 0.3s"},children:[N.jsxs("header",{style:{background:t.bg.elevated,borderBottom:`2px solid ${t.border.primary}`,boxShadow:t.shadow.md},children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},className:"brand",children:[N.jsx("div",{className:"logo-wrap","aria-hidden":!0,children:N.jsx("img",{src:te.logo==="uploaded"&&te.uploadedLogo?te.uploadedLogo:`/assets/${te.logo}`,className:"logo",alt:"JR FARM - Comprehensive Farm Management",onError:()=>se(X=>({...X,logo:""}))})}),N.jsxs("div",{children:[N.jsx("h2",{style:{margin:"0 0 4px 0",fontSize:"1.4rem",fontWeight:"900",letterSpacing:"0.5px",color:t.text.primary},children:"JR FARM"}),N.jsx("p",{style:{margin:"0",fontSize:"0.75rem",opacity:"0.95",color:t.text.secondary||t.text.primary},children:"Comprehensive Farm Management"})]})]}),N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[j&&N.jsx("button",{onClick:ae,style:{padding:"6px 12px",background:"#10b981",border:"none",color:"white",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",gap:6},title:"Install app on your device",children:" Install App"}),w>0&&N.jsxs("div",{onClick:()=>p("notifications"),style:{position:"relative",cursor:"pointer",padding:"6px 10px",background:"rgba(255,255,255,0.2)",borderRadius:6,display:"flex",alignItems:"center",gap:6},title:"View notifications",children:["",N.jsx("span",{style:{background:"#ef4444",color:"white",borderRadius:10,padding:"2px 6px",fontSize:11,fontWeight:600},children:w})]}),N.jsxs("div",{style:{fontSize:13,color:"rgba(255,255,255,0.9)",textAlign:"right"},children:[N.jsx("div",{style:{fontWeight:600},children:ES()}),N.jsx("div",{style:{fontSize:11},children:IS()})]}),N.jsx("button",{onClick:Te,style:{padding:"6px 12px",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"white",borderRadius:6,cursor:"pointer",fontSize:13},children:"Logout"})]})]}),N.jsxs("nav",{style:{background:t.bg.elevated,padding:"12px 20px",boxShadow:t.shadow.sm,borderBottom:`2px solid ${t.border.primary}`,display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[N.jsx("button",{className:d==="dashboard"?"active":"",onClick:()=>p("dashboard"),style:{background:d==="dashboard"?t.action.success:t.bg.tertiary,color:d==="dashboard"?t.text.inverse:t.text.primary,border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:" Dashboard"}),N.jsxs("button",{className:d==="notifications"?"active":"",onClick:()=>p("notifications"),style:{background:d==="notifications"?t.action.success:t.bg.tertiary,color:d==="notifications"?t.text.inverse:t.text.primary,border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[" Notifications",w>0&&N.jsx("span",{style:{marginLeft:4,background:"#ef4444",color:"white",borderRadius:10,padding:"1px 5px",fontSize:10,fontWeight:600},children:w})]}),N.jsx("button",{className:d==="animals"?"active":"",onClick:()=>p("animals"),style:{background:d==="animals"?"#059669":"#f3f4f6",color:d==="animals"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Livestock"}),N.jsx("button",{className:d==="crops"?"active":"",onClick:()=>p("crops"),style:{background:d==="crops"?"#059669":"#f3f4f6",color:d==="crops"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Crops"}),N.jsx("button",{className:d==="tasks"?"active":"",onClick:()=>p("tasks"),style:{background:d==="tasks"?"#059669":"#f3f4f6",color:d==="tasks"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Tasks"}),N.jsx("button",{className:d==="schedules"?"active":"",onClick:()=>p("schedules"),style:{background:d==="schedules"?"#059669":"#f3f4f6",color:d==="schedules"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Schedules"}),N.jsx("button",{className:d==="calendar"?"active":"",onClick:()=>p("calendar"),style:{background:d==="calendar"?"#059669":"#f3f4f6",color:d==="calendar"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Calendar"}),N.jsx("button",{className:d==="inventory"?"active":"",onClick:()=>p("inventory"),style:{background:d==="inventory"?"#059669":"#f3f4f6",color:d==="inventory"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Inventory"}),N.jsx("button",{className:d==="finance"?"active":"",onClick:()=>p("finance"),style:{background:d==="finance"?"#059669":"#f3f4f6",color:d==="finance"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Finance"}),N.jsx("button",{className:d==="reports"?"active":"",onClick:()=>p("reports"),style:{background:d==="reports"?"#059669":"#f3f4f6",color:d==="reports"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Reports"}),N.jsx("button",{className:d==="analytics"?"active":"",onClick:()=>p("analytics"),style:{background:d==="analytics"?"#059669":"#f3f4f6",color:d==="analytics"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Analytics"}),N.jsx("button",{className:d==="additionalReports"?"active":"",onClick:()=>p("additionalReports"),style:{background:d==="additionalReports"?"#059669":"#f3f4f6",color:d==="additionalReports"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Health Reports"}),N.jsx("button",{className:d==="bulk"?"active":"",onClick:()=>p("bulk"),style:{background:d==="bulk"?"#059669":"#f3f4f6",color:d==="bulk"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Bulk Ops"}),N.jsx("button",{className:d==="audit"?"active":"",onClick:()=>p("audit"),style:{background:d==="audit"?"#059669":"#f3f4f6",color:d==="audit"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Audit Log"}),N.jsx("button",{className:d==="backup"?"active":"",onClick:()=>p("backup"),style:{background:d==="backup"?"#059669":"#f3f4f6",color:d==="backup"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Backup"}),N.jsx("button",{className:d==="settings"?"active":"",onClick:()=>p("settings"),style:{background:d==="settings"?"#059669":"#f3f4f6",color:d==="settings"?"#fff":"#1f2937",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Settings"}),N.jsx("div",{style:{marginLeft:"auto"},children:N.jsx(cS,{})})]}),N.jsx("main",{children:N.jsxs(ve.Suspense,{fallback:N.jsx(TE,{}),children:[d==="dashboard"&&N.jsx(Ib,{onNavigate:p}),d==="notifications"&&N.jsx(wb,{}),d==="animals"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[N.jsx("button",{onClick:()=>p("animals"),style:{padding:"8px 16px",background:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:" Livestock"}),N.jsx("button",{onClick:()=>p("pets"),style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Pets"}),N.jsx("button",{onClick:()=>p("canines"),style:{padding:"8px 16px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Canines"})]}),N.jsx(Tb,{})]}),d==="pets"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("animals"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Livestock"}),N.jsx(Fb,{})]}),d==="canines"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("animals"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Livestock"}),N.jsx(Ub,{animals:y,setAnimals:E})]}),d==="tasks"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Sb,{})]}),d==="schedules"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Rb,{})]}),d==="calendar"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(jb,{})]}),d==="crops"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Pb,{})]}),d==="inventory"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(xb,{})]}),d==="farmmap"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(FarmMap,{})]}),d==="reports"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(kb,{})]}),d==="analytics"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Vb,{})]}),d==="additionalReports"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Mb,{})]}),d==="bulk"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Lb,{})]}),d==="audit"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(bb,{})]}),d==="backup"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Db,{})]}),d==="finance"&&N.jsxs("section",{children:[N.jsx("button",{onClick:()=>p("dashboard"),style:{marginBottom:"16px",background:"#6b7280",color:"#fff",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:" Back to Dashboard"}),N.jsx(Ab,{})]}),d==="settings"&&N.jsxs("section",{children:[N.jsxs("div",{style:{marginBottom:"24px"},children:[N.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"8px"},children:"Settings"}),N.jsx("p",{style:{color:"var(--muted)",margin:0},children:"Customize your application appearance and preferences"})]}),N.jsxs("div",{style:{display:"flex",gap:10,marginBottom:20,borderBottom:"2px solid #e5e7eb",overflowX:"auto"},children:[N.jsx("button",{onClick:()=>se(X=>({...X,settingsTab:"enhanced"})),style:{background:"none",border:"none",borderBottom:(te.settingsTab||"enhanced")==="enhanced"?"2px solid #059669":"2px solid transparent",padding:"10px 20px",cursor:"pointer",fontWeight:(te.settingsTab||"enhanced")==="enhanced"?600:400,color:(te.settingsTab||"enhanced")==="enhanced"?"#059669":"#6b7280",whiteSpace:"nowrap"},children:" Settings"}),N.jsx("button",{onClick:()=>se(X=>({...X,settingsTab:"appearance"})),style:{background:"none",border:"none",borderBottom:te.settingsTab==="appearance"?"2px solid #059669":"2px solid transparent",padding:"10px 20px",cursor:"pointer",fontWeight:te.settingsTab==="appearance"?600:400,color:te.settingsTab==="appearance"?"#059669":"#6b7280",whiteSpace:"nowrap"},children:" Appearance"}),N.jsx("button",{onClick:()=>se(X=>({...X,settingsTab:"sync"})),style:{background:"none",border:"none",borderBottom:te.settingsTab==="sync"?"2px solid #059669":"2px solid transparent",padding:"10px 20px",cursor:"pointer",fontWeight:te.settingsTab==="sync"?600:400,color:te.settingsTab==="sync"?"#059669":"#6b7280",whiteSpace:"nowrap"},children:" Cloud Sync"})]}),(te.settingsTab||"enhanced")==="enhanced"&&N.jsx(Ob,{}),te.settingsTab==="sync"&&N.jsx(Nb,{}),(te.settingsTab||"appearance")==="appearance"&&N.jsxs("div",{style:{display:"grid",gap:"24px",maxWidth:"800px"},children:[N.jsxs("div",{className:"card",style:{padding:"24px"},children:[N.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"16px",color:"inherit"},children:"Appearance"}),N.jsxs("div",{style:{display:"grid",gap:"20px"},children:[N.jsxs("div",{style:{display:"grid",gap:"8px"},children:[N.jsx("label",{style:{fontWeight:"500",color:"inherit",fontSize:"14px"},children:"Theme"}),N.jsxs("select",{value:te.theme||"catalytics",onChange:X=>se(P=>({...P,theme:X.target.value})),style:{padding:"12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"14px",fontWeight:"500"},children:[N.jsx("option",{value:"catalytics",children:"Catalytics (Clean & Modern)"}),N.jsx("option",{value:"light",children:"Light"}),N.jsx("option",{value:"bold",children:"Bold Colorful"}),N.jsx("option",{value:"calm",children:"Calm Green"}),N.jsx("option",{value:"contrast",children:"High Contrast"}),N.jsx("option",{value:"evolution",children:"Evolution X (dark neon)"}),N.jsx("option",{value:"cyberpunk",children:"Cyberpunk (neon)"})]})]}),N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 0"},children:[N.jsx("input",{type:"checkbox",id:"backgroundToggle",checked:te.backgroundOn,onChange:X=>se(P=>({...P,backgroundOn:X.target.checked})),style:{width:"16px",height:"16px"}}),N.jsx("label",{htmlFor:"backgroundToggle",style:{fontWeight:"500",color:"inherit",fontSize:"14px"},children:"Enable background image"})]}),te.backgroundOn&&N.jsxs("div",{style:{display:"grid",gap:"8px"},children:[N.jsx("label",{style:{fontWeight:"500",color:"inherit",fontSize:"14px"},children:"Background Image"}),N.jsxs("select",{value:te.background,onChange:X=>se(P=>({...P,background:X.target.value})),style:{padding:"12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"14px",fontWeight:"500"},children:[N.jsx("option",{value:"",children:"None"}),N.jsx("option",{value:"bg-farm.svg",children:"Farm (default)"}),N.jsx("option",{value:"bg-fields.svg",children:"Fields"})]})]})]})]}),N.jsxs("div",{className:"card",style:{padding:"24px"},children:[N.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"16px",color:"inherit"},children:"Branding"}),N.jsxs("div",{style:{display:"grid",gap:"20px"},children:[N.jsxs("div",{style:{display:"grid",gap:"8px"},children:[N.jsx("label",{style:{fontWeight:"500",color:"inherit",fontSize:"14px"},children:"Logo Style"}),N.jsxs("select",{value:te.logo,onChange:X=>se(P=>({...P,logo:X.target.value})),style:{padding:"12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"14px",fontWeight:"500"},children:[N.jsx("option",{value:"logo-wordmark.svg",children:"Wordmark"}),N.jsx("option",{value:"logo-badge.svg",children:"Badge"}),N.jsx("option",{value:"logo-icon.svg",children:"Icon"}),N.jsx("option",{value:"uploaded",children:"Custom Upload"})]})]}),N.jsxs("div",{style:{display:"grid",gap:"8px"},children:[N.jsx("label",{style:{fontWeight:"500",color:"inherit",fontSize:"14px"},children:"Upload Custom Logo"}),N.jsx("input",{type:"file",accept:"image/*",onChange:X=>{const P=X.target.files&&X.target.files[0];if(!P)return;const T=new FileReader;T.onload=k=>{const V=k.target.result;se(b=>({...b,uploadedLogo:V,logo:"uploaded"}))},T.readAsDataURL(P)},style:{padding:"12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"14px",fontWeight:"500"}}),N.jsx("p",{style:{fontSize:"12px",color:"var(--muted)",margin:0},children:"Supports PNG, JPG, and SVG files"})]})]})]}),N.jsxs("div",{className:"card",style:{padding:"24px"},children:[N.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"16px",color:"inherit"},children:"Data Management"}),N.jsx("div",{style:{display:"grid",gap:"16px"},children:N.jsxs("div",{style:{padding:"16px",background:"#fef3c7",border:"1px solid #fde68a",borderRadius:"8px"},children:[N.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",margin:"0 0 8px 0",color:"#92400e"},children:"Reset Application Data"}),N.jsx("p",{style:{fontSize:"14px",margin:"0 0 12px 0",color:"#92400e"},children:"This will clear all your local demo data including animals, tasks, and settings."}),N.jsx("button",{onClick:()=>{confirm("Are you sure you want to clear all local demo data? This action cannot be undone.")&&(localStorage.clear(),location.reload())},style:{background:"#dc2626",color:"#ffffff",border:"none",padding:"10px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Clear All Data"})]})})]})]})]})]})}),N.jsx("footer",{style:{background:t.bg.secondary,color:t.text.secondary,padding:"16px",textAlign:"center",borderTop:`1px solid ${t.border.primary}`},children:N.jsx("small",{children:" Devins Farm  Comprehensive Farm Management System"})}),N.jsx(gS,{})]}):N.jsx(ve.Suspense,{fallback:N.jsx(TE,{}),children:N.jsx(Cb,{onLoginSuccess:Ie})})}function zb(){return N.jsx(Bb,{})}oS.createRoot(document.getElementById("root")).render(N.jsx(eS.StrictMode,{children:N.jsx(uS,{children:N.jsx(zb,{})})}));"serviceWorker"in navigator&&window.addEventListener("load",async()=>{navigator.serviceWorker.register("/devicattles/service-worker.js").then(i=>{if(console.log(" Service Worker registered successfully"),i.waiting)try{i.waiting.postMessage({type:"SKIP_WAITING"})}catch{}i.addEventListener("updatefound",()=>{const e=i.installing;e&&e.addEventListener("statechange",()=>{if(e.state==="installed"&&navigator.serviceWorker.controller){console.log(" New service worker update available");try{e.postMessage({type:"SKIP_WAITING"})}catch{}}})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log(" Reloading page with new service worker");try{window.location.reload()}catch{}})}).catch(i=>{console.warn(" Service worker registration failed:",i)})});window.deferredInstallPrompt=null;window.addEventListener("beforeinstallprompt",i=>{console.log(" PWA install prompt available"),i.preventDefault(),window.deferredInstallPrompt=i,window.dispatchEvent(new CustomEvent("pwa-install-available"))});window.addEventListener("appinstalled",()=>{console.log(" PWA installed successfully"),window.deferredInstallPrompt=null,window.dispatchEvent(new CustomEvent("pwa-install-hidden"))});window.installPWA=async()=>{if(!window.deferredInstallPrompt)return console.warn(" PWA install prompt not available"),!1;const i=window.deferredInstallPrompt;i.prompt();const{outcome:e}=await i.userChoice;return console.log(`PWA install outcome: ${e}`),window.deferredInstallPrompt=null,window.dispatchEvent(new CustomEvent("pwa-install-hidden")),e==="accepted"};export{Pn as A,Hb as B,Qs as C,uD as D,Uh as E,lD as F,cD as G,hD as H,tg as I,Ru as J,fD as K,_b as L,dD as M,qn as N,pD as O,yn as P,mD as Q,$b as R,Y0 as S,ot as _,uu as a,RS as b,cu as c,sD as d,oD as e,AS as f,tm as g,eD as h,nD as i,N as j,tD as k,zh as l,Zb as m,rD as n,iD as o,Jb as p,qb as q,ve as r,Xb as s,jh as t,lu as u,Kb as v,Wb as w,Yb as x,Gb as y,Qb as z};
