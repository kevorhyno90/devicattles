import{r as d,j as e}from"./index-B8Dyeey_.js";import{i as B,f as C,c as N,e as I}from"./exportImport-BcQPf7S7.js";function E(){const[s,u]=d.useState("animals"),[a,c]=d.useState([]),[h,p]=d.useState(null),[x,m]=d.useState(!1),g=d.useRef(null),b=o=>{const t=o.target.files?.[0];if(!t)return;m(!0);const n=t.name.split(".").pop()?.toLowerCase();n==="json"?B(t,(r,i)=>{if(m(!1),i){alert("Import failed: "+i.message);return}p(r),c(r)}):n==="csv"&&C(t,(r,i)=>{if(m(!1),i){alert("Import failed: "+i.message);return}p(r),c(r)})},y=()=>{if(!a.length)return;const o=s==="animals"?"cattalytics:animals":s==="expenses"?"cattalytics:finance":"cattalytics:tasks",n=[...JSON.parse(localStorage.getItem(o)||"[]"),...a];localStorage.setItem(o,JSON.stringify(n)),alert(`âœ… Successfully imported ${a.length} records!`),c([]),p(null),g.current.value="",window.location.reload()},j=()=>{const o="cattalytics:animals",t=JSON.parse(localStorage.getItem(o)||"[]");if(!t.length){alert("No animals to edit");return}const n=prompt(`Bulk action:
1. Update status to "Sold"
2. Update status to "Inactive"
3. Clear health alerts
4. Add tag
Enter number:`);if(!n)return;let r=[...t];if(n==="1"){if(!window.confirm(`Mark ${t.length} animals as Sold?`))return;r=t.map(l=>({...l,status:"Sold"}))}else if(n==="2"){if(!window.confirm(`Mark ${t.length} animals as Inactive?`))return;r=t.map(l=>({...l,status:"Inactive"}))}else if(n==="3")r=t.map(i=>({...i,healthAlerts:[]}));else if(n==="4"){const i=prompt("Enter tag to add to all animals:");if(!i)return;r=t.map(l=>({...l,tags:[...l.tags||[],i]}))}localStorage.setItem(o,JSON.stringify(r)),alert(`âœ… Updated ${r.length} animals!`),window.location.reload()},S=()=>{const o="cattalytics:finance",t=JSON.parse(localStorage.getItem(o)||"[]");if(!t.length){alert("No transactions to edit");return}const n=prompt(`Bulk action:
1. Recategorize all
2. Change payment method
Enter number:`);if(!n)return;let r=[...t];if(n==="1"){const i=prompt("New category:"),l=prompt("New subcategory:");i&&(r=t.map(f=>({...f,category:i,subcategory:l})))}else if(n==="2"){const i=prompt("New payment method:");i&&(r=t.map(l=>({...l,paymentMethod:i})))}localStorage.setItem(o,JSON.stringify(r)),alert(`âœ… Updated ${r.length} transactions!`),window.location.reload()},k=()=>{const o=s==="animals"?"cattalytics:animals":s==="expenses"?"cattalytics:finance":"cattalytics:tasks",t=JSON.parse(localStorage.getItem(o)||"[]"),n=prompt(`Filter ${s} to delete (e.g., status=Sold for animals):
Leave blank to delete ALL`);if(n===null)return;let r=t;if(n){const[l,f]=n.split("=");r=t.filter(v=>v[l.trim()]===f.trim())}if(!confirm(`Delete ${r.length} records? This cannot be undone!`))return;const i=t.filter(l=>!r.includes(l));localStorage.setItem(o,JSON.stringify(i)),alert(`âœ… Deleted ${r.length} records!`),window.location.reload()},w=()=>{const o=s==="animals"?"cattalytics:animals":s==="expenses"?"cattalytics:finance":"cattalytics:tasks",t=JSON.parse(localStorage.getItem(o)||"[]");if(!t.length){alert("No data to export");return}const n=prompt(`Export format:
1. JSON
2. CSV
Enter number:`,"1");n==="1"?N(t,`${s}_export.json`):n==="2"&&I(t,`${s}_export.csv`)};return e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"20px"},children:[e.jsx("h2",{children:"âš¡ Bulk Operations"}),e.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Manage multiple records at once with batch import, edit, and delete operations."}),e.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",borderBottom:"2px solid #e5e7eb"},children:["animals","expenses","tasks"].map(o=>e.jsx("button",{onClick:()=>u(o),style:{padding:"10px 20px",background:"none",border:"none",borderBottom:s===o?"3px solid #059669":"3px solid transparent",cursor:"pointer",fontWeight:s===o?"600":"400",color:s===o?"#059669":"#666",marginBottom:"-2px"},children:o==="animals"?"ðŸ„ Animals":o==="expenses"?"ðŸ’° Expenses":"âœ… Tasks"},o))}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"16px",marginBottom:"30px"},children:[e.jsxs("div",{style:{background:"#f0fdf4",padding:"16px",borderRadius:"8px",border:"1px solid #86efac"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"ðŸ“¥ Import Records"}),e.jsxs("p",{style:{fontSize:"12px",color:"#666",margin:"0 0 12px 0"},children:["Add multiple ",s," at once from CSV or JSON"]}),e.jsx("button",{onClick:()=>g.current?.click(),disabled:x,style:{width:"100%",padding:"8px 12px",background:"#22c55e",color:"white",border:"none",borderRadius:"6px",cursor:x?"not-allowed":"pointer",fontWeight:"600",opacity:x?.6:1},children:x?"â³ Loading...":"Choose File"}),e.jsx("input",{ref:g,type:"file",accept:".csv,.json",onChange:b,style:{display:"none"}})]}),e.jsxs("div",{style:{background:"#fef3c7",padding:"16px",borderRadius:"8px",border:"1px solid #fcd34d"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"âœï¸ Bulk Edit"}),e.jsx("p",{style:{fontSize:"12px",color:"#666",margin:"0 0 12px 0"},children:"Update status, tags, or other fields for all"}),e.jsxs("button",{onClick:s==="animals"?j:S,style:{width:"100%",padding:"8px 12px",background:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:["Edit All ",s]})]}),e.jsxs("div",{style:{background:"#fecaca",padding:"16px",borderRadius:"8px",border:"1px solid #fca5a5"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"ðŸ—‘ï¸ Bulk Delete"}),e.jsx("p",{style:{fontSize:"12px",color:"#666",margin:"0 0 12px 0"},children:"Remove multiple records with optional filter"}),e.jsx("button",{onClick:k,style:{width:"100%",padding:"8px 12px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"Delete Selected"})]}),e.jsxs("div",{style:{background:"#dbeafe",padding:"16px",borderRadius:"8px",border:"1px solid #93c5fd"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"ðŸ“¤ Export All"}),e.jsxs("p",{style:{fontSize:"12px",color:"#666",margin:"0 0 12px 0"},children:["Download all ",s," as CSV or JSON"]}),e.jsx("button",{onClick:w,style:{width:"100%",padding:"8px 12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"Export All"})]})]}),h&&e.jsxs("div",{style:{background:"#f9fafb",padding:"20px",borderRadius:"8px",border:"1px solid #e5e7eb",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{margin:0},children:["ðŸ“‹ Preview (",a.length," records)"]}),e.jsx("button",{onClick:()=>{p(null),c([])},style:{padding:"6px 12px",background:"#e5e7eb",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]}),e.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"16px"},children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"#e5e7eb"},children:a.length>0&&Object.keys(a[0]).slice(0,6).map(o=>e.jsx("th",{style:{padding:"8px",textAlign:"left",borderBottom:"1px solid #d1d5db"},children:o},o))})}),e.jsx("tbody",{children:a.slice(0,10).map((o,t)=>e.jsx("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:Object.values(o).slice(0,6).map((n,r)=>e.jsx("td",{style:{padding:"8px",color:"#666"},children:typeof n=="object"?JSON.stringify(n):String(n).substring(0,30)},r))},t))})]}),a.length>10&&e.jsxs("div",{style:{textAlign:"center",padding:"12px",color:"#666",fontSize:"12px"},children:["+",a.length-10," more records"]})]}),e.jsxs("button",{onClick:y,style:{width:"100%",padding:"12px",background:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"14px"},children:["âœ… Confirm Import ",a.length," Records"]})]}),e.jsxs("div",{style:{background:"#f0f9ff",padding:"16px",borderRadius:"8px",border:"1px solid #bae6fd"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"ðŸ’¡ Tips"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"#666"},children:[e.jsx("li",{children:"Use CSV or JSON format for imports"}),e.jsx("li",{children:"Export first to see the exact format needed"}),e.jsx("li",{children:"Bulk edits apply to all records without filter"}),e.jsx("li",{children:"Always backup data before bulk delete"}),e.jsx("li",{children:"Maximum 1000 records per import recommended"})]})]})]})}export{E as default};
