import{r as h,j as e}from"./index-B8Dyeey_.js";import{c as $,d as M}from"./moduleIntegration-Ds8vBRXc.js";function H(){const[a,u]=h.useState("month"),[p,g]=h.useState(new Date),[S,w]=h.useState([]),[n,k]=h.useState(null),[D,f]=h.useState(!1);h.useEffect(()=>{C()},[p]);const C=()=>{try{const r=[];JSON.parse(localStorage.getItem("cattalytics:tasks")||"[]").forEach(t=>{t.dueDate&&r.push({id:t.id,title:t.title,date:t.dueDate,time:t.dueTime||"09:00",type:"task",category:t.category,priority:t.priority,status:t.status,description:t.description,color:"#3b82f6"})}),JSON.parse(localStorage.getItem("cattalytics:schedules")||"[]").forEach(t=>{t.date&&r.push({id:t.id,title:t.title,date:t.date,time:t.time||"10:00",type:"schedule",category:t.category,description:t.description,recurring:t.frequency,color:"#10b981"})}),JSON.parse(localStorage.getItem("cattalytics:animals")||"[]").forEach(t=>{t.treatments&&t.treatments.length>0&&t.treatments.forEach(o=>{o.nextTreatment&&r.push({id:`treatment-${t.id}-${o.date}`,title:`Treatment: ${t.name}`,date:o.nextTreatment,time:"08:00",type:"treatment",category:"Animal Care",description:`${o.treatment} for ${t.name}`,animalName:t.name,color:"#f59e0b"})}),t.breeding&&t.breeding.length>0&&t.breeding.forEach(o=>{o.expectedCalvingDate&&r.push({id:`breeding-${t.id}-${o.breedingDate}`,title:`Expected birth: ${t.name}`,date:o.expectedCalvingDate,type:"breeding",category:"Breeding",description:`${t.name} expected to give birth`,animalName:t.name,color:"#ec4899"})})}),JSON.parse(localStorage.getItem("cattalytics:crops")||"[]").forEach(t=>{t.treatments&&t.treatments.length>0&&t.treatments.forEach(o=>{o.nextTreatment&&r.push({id:`crop-treatment-${t.id}-${o.date}`,title:`Crop Treatment: ${t.cropName}`,date:o.nextTreatment,time:"07:00",type:"crop-treatment",category:"Crop Care",description:`${o.treatment} for ${t.cropName}`,color:"#8b5cf6"})}),t.expectedHarvestDate&&r.push({id:`harvest-${t.id}`,title:`Harvest: ${t.cropName}`,date:t.expectedHarvestDate,type:"harvest",category:"Crop Care",description:`Expected harvest for ${t.cropName}`,color:"#059669"})}),$().forEach(t=>{r.push({...t,type:"pet-task",date:t.dueDate,time:"09:00",color:"#8b5cf6"})}),M().forEach(t=>{r.push({...t,type:"pet-schedule",color:"#6366f1"})}),w(r)}catch(r){console.error("Failed to load events:",r)}},W=r=>{const s=r.getFullYear(),i=r.getMonth(),l=new Date(s,i,1),d=new Date(s,i+1,0).getDate(),x=l.getDay(),t=[];for(let o=0;o<x;o++)t.push(null);for(let o=1;o<=d;o++)t.push(new Date(s,i,o));return t},E=r=>{const s=[],i=new Date(r);i.setDate(r.getDate()-r.getDay());for(let l=0;l<7;l++){const c=new Date(i);c.setDate(i.getDate()+l),s.push(c)}return s},y=r=>{if(!r)return[];const s=r.toISOString().slice(0,10);return S.filter(i=>i.date===s)},b=r=>{const s=new Date(p);s.setMonth(p.getMonth()+r),g(s)},j=r=>{const s=new Date(p);s.setDate(p.getDate()+r*7),g(s)},v=r=>{const s=new Date(p);s.setDate(p.getDate()+r),g(s)},z=()=>{g(new Date)},m=r=>{k(r),f(!0)},T=()=>{const r=W(p),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"1px",background:"#e5e7eb"},children:[s.map(i=>e.jsx("div",{style:{background:"#f3f4f6",padding:"12px",textAlign:"center",fontWeight:"600",fontSize:"14px"},children:i},i)),r.map((i,l)=>{const c=i?y(i):[],d=i&&i.toDateString()===new Date().toDateString();return e.jsx("div",{style:{background:i?"#fff":"#f9fafb",minHeight:"120px",padding:"8px",position:"relative",border:d?"2px solid #3b82f6":"none"},children:i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:d?"700":"600",marginBottom:"4px",color:d?"#3b82f6":"#374151"},children:i.getDate()}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[c.slice(0,3).map(x=>e.jsxs("div",{onClick:()=>m(x),style:{background:x.color,color:"white",padding:"4px 6px",borderRadius:"4px",fontSize:"11px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:x.title,children:[x.time," ",x.title]},x.id)),c.length>3&&e.jsxs("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["+",c.length-3," more"]})]})]})},l)})]})},I=()=>{const r=E(p),s=Array.from({length:24},(i,l)=>l);return e.jsxs("div",{style:{display:"flex",gap:"1px",background:"#e5e7eb",overflowX:"auto"},children:[e.jsxs("div",{style:{minWidth:"60px",background:"#f3f4f6"},children:[e.jsx("div",{style:{height:"60px",borderBottom:"1px solid #e5e7eb"}}),s.map(i=>e.jsxs("div",{style:{height:"60px",padding:"4px",fontSize:"12px",borderBottom:"1px solid #e5e7eb"},children:[i.toString().padStart(2,"0"),":00"]},i))]}),r.map(i=>{const l=y(i),c=i.toDateString()===new Date().toDateString();return e.jsxs("div",{style:{flex:1,minWidth:"120px",background:"#fff"},children:[e.jsxs("div",{style:{height:"60px",padding:"8px",borderBottom:"1px solid #e5e7eb",textAlign:"center",background:c?"#dbeafe":"#f3f4f6",fontWeight:c?"700":"600"},children:[e.jsx("div",{children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i.getDay()]}),e.jsx("div",{style:{fontSize:"20px",marginTop:"4px"},children:i.getDate()})]}),e.jsxs("div",{style:{position:"relative"},children:[s.map(d=>e.jsx("div",{style:{height:"60px",borderBottom:"1px solid #f3f4f6"}},d)),l.map(d=>{const[x]=d.time.split(":").map(Number);return e.jsxs("div",{onClick:()=>m(d),style:{position:"absolute",top:`${x*60}px`,left:"4px",right:"4px",background:d.color,color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",cursor:"pointer",zIndex:1},children:[e.jsx("div",{style:{fontWeight:"600"},children:d.time}),e.jsx("div",{style:{fontSize:"11px"},children:d.title})]},d.id)})]})]},i.toISOString())})]})},R=()=>{const r=Array.from({length:24},(i,l)=>l),s=y(p);return e.jsxs("div",{style:{display:"flex",gap:"1px",background:"#e5e7eb"},children:[e.jsx("div",{style:{minWidth:"80px",background:"#f3f4f6"},children:r.map(i=>e.jsxs("div",{style:{height:"80px",padding:"8px",fontSize:"14px",borderBottom:"1px solid #e5e7eb"},children:[i.toString().padStart(2,"0"),":00"]},i))}),e.jsxs("div",{style:{flex:1,background:"#fff",position:"relative"},children:[r.map(i=>e.jsx("div",{style:{height:"80px",borderBottom:"1px solid #f3f4f6"}},i)),s.map(i=>{const[l,c]=i.time.split(":").map(Number),d=l*80+c/60*80;return e.jsxs("div",{onClick:()=>m(i),style:{position:"absolute",top:`${d}px`,left:"8px",right:"8px",background:i.color,color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"14px",cursor:"pointer",zIndex:1,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px"},children:[i.time," - ",i.title]}),e.jsx("div",{style:{fontSize:"12px",opacity:.9},children:i.category})]},i.id)})]})]})};return e.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[e.jsx("h2",{style:{marginBottom:"20px",fontSize:"24px",fontWeight:"700"},children:"ðŸ“… Farm Calendar"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"10px"},children:[e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>{a==="month"?b(-1):a==="week"?j(-1):v(-1)},style:{padding:"8px 16px",background:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"â† Previous"}),e.jsx("button",{onClick:z,style:{padding:"8px 16px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Today"}),e.jsx("button",{onClick:()=>{a==="month"?b(1):a==="week"?j(1):v(1)},style:{padding:"8px 16px",background:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Next â†’"})]}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600"},children:[a==="month"&&p.toLocaleDateString("en-US",{month:"long",year:"numeric"}),a==="week"&&`Week of ${p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`,a==="day"&&p.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),e.jsxs("div",{style:{display:"flex",gap:"5px"},children:[e.jsx("button",{onClick:()=>u("month"),style:{padding:"8px 16px",background:a==="month"?"#3b82f6":"#e5e7eb",color:a==="month"?"white":"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"Month"}),e.jsx("button",{onClick:()=>u("week"),style:{padding:"8px 16px",background:a==="week"?"#3b82f6":"#e5e7eb",color:a==="week"?"white":"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"Week"}),e.jsx("button",{onClick:()=>u("day"),style:{padding:"8px 16px",background:a==="day"?"#3b82f6":"#e5e7eb",color:a==="day"?"white":"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"Day"})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"15px",marginBottom:"20px",padding:"15px",background:"#f9fafb",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",background:"#3b82f6",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"14px"},children:"Tasks"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",background:"#10b981",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"14px"},children:"Schedules"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",background:"#f59e0b",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"14px"},children:"Treatments"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",background:"#ec4899",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"14px"},children:"Breeding"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",background:"#8b5cf6",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"14px"},children:"Pet Care"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",background:"#059669",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"14px"},children:"Harvest"})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"8px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[a==="month"&&T(),a==="week"&&I(),a==="day"&&R()]}),D&&n&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>f(!1),children:e.jsxs("div",{onClick:r=>r.stopPropagation(),style:{background:"white",padding:"30px",borderRadius:"12px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:n.title}),e.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"20px",height:"20px",background:n.color,borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:n.category||n.type})]}),n.date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),n.time&&e.jsxs("div",{children:[e.jsx("strong",{children:"Time:"})," ",n.time]}),n.description&&e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"})," ",n.description]}),n.priority&&e.jsxs("div",{children:[e.jsx("strong",{children:"Priority:"})," ",e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",background:n.priority==="HIGH"?"#fee2e2":n.priority==="MEDIUM"?"#fef3c7":"#dbeafe",color:n.priority==="HIGH"?"#991b1b":n.priority==="MEDIUM"?"#92400e":"#1e40af"},children:n.priority})]}),n.status&&e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",background:n.status==="completed"?"#d1fae5":"#fef3c7",color:n.status==="completed"?"#065f46":"#92400e"},children:n.status})]}),n.recurring&&e.jsxs("div",{children:[e.jsx("strong",{children:"Recurring:"})," ",n.recurring]}),n.animalName&&e.jsxs("div",{children:[e.jsx("strong",{children:"Animal:"})," ",n.animalName]}),n.petName&&e.jsxs("div",{children:[e.jsx("strong",{children:"Pet:"})," ",n.petName]})]}),e.jsx("button",{onClick:()=>f(!1),style:{marginTop:"20px",width:"100%",padding:"10px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"Close"})]})})]})}export{H as default};
