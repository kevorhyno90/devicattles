import{r as i,g as L,a as O,b as M,c as U,d as P,e as B,j as s,f as H,N as r,m as G,h as Y,i as q,k as F,n as $,o as K,s as V,p as W,P as x}from"./index-B8Dyeey_.js";function J(){const[l,k]=i.useState([]),[_,y]=i.useState([]),[t,R]=i.useState(L()),[a,N]=i.useState("all"),[b,C]=i.useState(!1),[g,S]=i.useState(0);i.useEffect(()=>{c(),j();const e=()=>{c()};return window.addEventListener("newNotification",e),()=>{window.removeEventListener("newNotification",e)}},[]);const c=()=>{const e=O();k(e),S(M())},j=()=>{const e=U();y(e)},A=e=>{G(e),c()},D=()=>{Y(),c()},w=e=>{confirm("Delete this notification?")&&(q(e),c())},E=()=>{confirm("Clear all notifications?")&&(F(),c())},f=e=>{$(e),j()},p=e=>{confirm("Delete this reminder?")&&(K(e),j())},n=(e,m)=>{const u={...t,[e]:m};R(u),V(u)},T=async()=>{const e=await W();alert(e?"âœ… Browser notifications enabled!":"âŒ Notification permission denied. You can still see in-app notifications.")},v=l.filter(e=>a==="unread"?!e.read:a==="all"?!0:e.type===a),d=P(),o=B(),I=e=>{switch(e){case x.URGENT:return"#ef4444";case x.HIGH:return"#f59e0b";case x.MEDIUM:return"#3b82f6";case x.LOW:return"#6b7280";default:return"#6b7280"}},h=e=>{switch(e){case r.TREATMENT:return"ğŸ’‰";case r.BREEDING:return"ğŸ¤°";case r.TASK:return"âœ…";case r.INVENTORY:return"ğŸ“¦";case r.HEALTH:return"ğŸ¥";default:return"ğŸ””"}};return s.jsxs("div",{className:"notification-center",children:[s.jsxs("div",{className:"notification-header",children:[s.jsx("h1",{children:"ğŸ”” Notifications"}),s.jsxs("div",{className:"notification-header-actions",children:[g>0&&s.jsxs("button",{onClick:D,className:"btn-secondary",children:["Mark All Read (",g,")"]}),s.jsx("button",{onClick:()=>C(!b),className:"btn-secondary",children:"âš™ï¸ Settings"})]})]}),b&&s.jsxs("div",{className:"settings-panel",children:[s.jsx("h3",{children:"Notification Settings"}),!H()&&s.jsxs("div",{className:"alert-bar info",children:[s.jsx("p",{children:"Browser notifications are disabled."}),s.jsx("button",{onClick:T,className:"btn-primary",children:"Enable Browser Notifications"})]}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:t.enabled,onChange:e=>n("enabled",e.target.checked)}),"Enable Notifications"]})}),s.jsxs("div",{className:"settings-group",children:[s.jsx("h4",{children:"Notification Types"}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:t.treatmentReminders,onChange:e=>n("treatmentReminders",e.target.checked)}),"Treatment Reminders"]}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:t.breedingReminders,onChange:e=>n("breedingReminders",e.target.checked)}),"Breeding Due Dates"]}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:t.taskReminders,onChange:e=>n("taskReminders",e.target.checked)}),"Task Deadlines"]}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:t.inventoryAlerts,onChange:e=>n("inventoryAlerts",e.target.checked)}),"Inventory Alerts"]}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:t.healthAlerts,onChange:e=>n("healthAlerts",e.target.checked)}),"Health Alerts"]})]}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{children:["Reminder Lead Time (hours before event):",s.jsx("input",{type:"number",min:"1",max:"168",value:t.reminderLeadTime,onChange:e=>n("reminderLeadTime",parseInt(e.target.value))})]})}),s.jsx("div",{className:"settings-group",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:t.soundEnabled,onChange:e=>n("soundEnabled",e.target.checked)}),"Sound Enabled"]})})]}),(d.length>0||o.length>0)&&s.jsxs("div",{className:"reminders-section",children:[s.jsx("h3",{children:"â° Reminders"}),o.length>0&&s.jsxs("div",{className:"reminders-group overdue",children:[s.jsxs("h4",{children:["âš ï¸ Overdue (",o.length,")"]}),o.map(e=>s.jsxs("div",{className:"reminder-card urgent",children:[s.jsxs("div",{className:"reminder-content",children:[s.jsxs("div",{className:"reminder-title",children:[h(e.type)," ",e.title]}),s.jsx("div",{className:"reminder-body",children:e.body}),s.jsxs("div",{className:"reminder-meta",children:["Due: ",new Date(e.dueDate).toLocaleString()]})]}),s.jsxs("div",{className:"reminder-actions",children:[s.jsx("button",{onClick:()=>f(e.id),className:"btn-secondary",children:"Dismiss"}),s.jsx("button",{onClick:()=>p(e.id),className:"btn-danger",children:"Delete"})]})]},e.id))]}),d.length>0&&s.jsxs("div",{className:"reminders-group upcoming",children:[s.jsxs("h4",{children:["ğŸ“… Upcoming (",d.length,")"]}),d.slice(0,5).map(e=>s.jsxs("div",{className:"reminder-card",children:[s.jsxs("div",{className:"reminder-content",children:[s.jsxs("div",{className:"reminder-title",children:[h(e.type)," ",e.title]}),s.jsx("div",{className:"reminder-body",children:e.body}),s.jsxs("div",{className:"reminder-meta",children:["Due: ",new Date(e.dueDate).toLocaleString()]})]}),s.jsxs("div",{className:"reminder-actions",children:[s.jsx("button",{onClick:()=>f(e.id),className:"btn-secondary",children:"Dismiss"}),s.jsx("button",{onClick:()=>p(e.id),className:"btn-danger",children:"Delete"})]})]},e.id))]})]}),s.jsxs("div",{className:"filter-bar",children:[s.jsxs("button",{className:a==="all"?"active":"",onClick:()=>N("all"),children:["All (",l.length,")"]}),s.jsxs("button",{className:a==="unread"?"active":"",onClick:()=>N("unread"),children:["Unread (",g,")"]}),Object.values(r).map(e=>{const m=l.filter(u=>u.type===e).length;return m>0?s.jsxs("button",{className:a===e?"active":"",onClick:()=>N(e),children:[h(e)," ",e," (",m,")"]},e):null}),l.length>0&&s.jsx("button",{onClick:E,className:"btn-danger",style:{marginLeft:"auto"},children:"Clear All"})]}),s.jsx("div",{className:"notifications-list",children:v.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"No notifications to display"})}):v.map(e=>s.jsxs("div",{className:`notification-card ${e.read?"read":"unread"}`,style:{borderLeftColor:I(e.priority)},children:[s.jsx("div",{className:"notification-icon",children:h(e.type)}),s.jsxs("div",{className:"notification-content",children:[s.jsx("div",{className:"notification-title",children:e.title}),e.body&&s.jsx("div",{className:"notification-body",children:e.body}),s.jsxs("div",{className:"notification-meta",children:[new Date(e.timestamp).toLocaleString(),e.priority&&s.jsx("span",{className:`priority-badge ${e.priority}`,children:e.priority})]})]}),s.jsxs("div",{className:"notification-actions",children:[!e.read&&s.jsx("button",{onClick:()=>A(e.id),className:"btn-secondary",title:"Mark as read",children:"âœ“"}),s.jsx("button",{onClick:()=>w(e.id),className:"btn-danger",title:"Delete",children:"ğŸ—‘ï¸"})]})]},e.id))})]})}export{J as default};
