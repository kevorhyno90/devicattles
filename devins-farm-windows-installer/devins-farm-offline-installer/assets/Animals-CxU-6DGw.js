import{r as d,j as e}from"./index-CeDgDi5r.js";import it from"./Pastures-BTpI-tMs.js";import{f as Xe,H as at,u as Le}from"./HealthSystem-DniPKzF7.js";import{e as Fe,b as Re,a as we,c as Ie,d as Ke,i as Ze,f as et}from"./lib-export-Dp5-osfT.js";import{r as rt,a as Ge,u as st,b as lt}from"./lib-integration-BX7JWOcy.js";import{f as Ee}from"./currency-DPL_p1aK.js";import"./vendor-react-CqO7gtIP.js";import"./lib-core-XQuPJE47.js";import"./lib-notifications-DRlqN2Ug.js";import"./vendor-firebase-DPzZ0AXH.js";const Me=[{id:1,name:"Alfalfa Hay - Early Vegetative",category:"Forages",DM:88,CP:21,NDF:38,ADF:28,TDN:65,NEL:1.51,ME:10.5,Ca:1.5,P:.28,pricePerKg:28},{id:2,name:"Alfalfa Hay - Mid Vegetative",category:"Forages",DM:88,CP:17,NDF:45,ADF:35,TDN:58,NEL:1.35,ME:9.5,Ca:1.3,P:.23,pricePerKg:24},{id:3,name:"Alfalfa Hay - Late Vegetative",category:"Forages",DM:88,CP:14,NDF:52,ADF:40,TDN:54,NEL:1.26,ME:8.8,Ca:1.15,P:.2,pricePerKg:20},{id:4,name:"Timothy Hay - Early Vegetative",category:"Forages",DM:88,CP:14.5,NDF:48,ADF:28,TDN:64,NEL:1.49,ME:10.3,Ca:.52,P:.3,pricePerKg:22},{id:5,name:"Timothy Hay - Mid Vegetative",category:"Forages",DM:88,CP:11,NDF:55,ADF:32,TDN:60,NEL:1.4,ME:9.8,Ca:.45,P:.25,pricePerKg:18},{id:6,name:"Timothy Hay - Late Vegetative",category:"Forages",DM:88,CP:8.5,NDF:62,ADF:38,TDN:55,NEL:1.28,ME:9,Ca:.38,P:.22,pricePerKg:15},{id:7,name:"Rhodes Grass Hay - Early Vegetative",category:"Forages",DM:88,CP:13.5,NDF:52,ADF:32,TDN:62,NEL:1.44,ME:10.1,Ca:.58,P:.3,pricePerKg:20},{id:8,name:"Rhodes Grass Hay - Mid Vegetative",category:"Forages",DM:88,CP:10,NDF:58,ADF:36,TDN:57,NEL:1.32,ME:9.3,Ca:.5,P:.25,pricePerKg:16},{id:9,name:"Rhodes Grass Hay - Late Vegetative",category:"Forages",DM:88,CP:7.5,NDF:65,ADF:42,TDN:52,NEL:1.21,ME:8.5,Ca:.42,P:.22,pricePerKg:13},{id:10,name:"Napier Grass - Early Vegetative",category:"Forages",DM:18,CP:14.5,NDF:58,ADF:35,TDN:58,NEL:1.35,ME:9.5,Ca:.52,P:.32,pricePerKg:3},{id:11,name:"Napier Grass - Mid Vegetative",category:"Forages",DM:18,CP:10.5,NDF:65,ADF:40,TDN:52,NEL:1.21,ME:8.6,Ca:.45,P:.28,pricePerKg:2},{id:12,name:"Napier Grass - Late Vegetative",category:"Forages",DM:18,CP:7.8,NDF:72,ADF:46,TDN:48,NEL:1.12,ME:7.9,Ca:.38,P:.24,pricePerKg:1.5},{id:13,name:"Napier Grass - Silage",category:"Forages",DM:28,CP:9.8,NDF:62,ADF:38,TDN:56,NEL:1.3,ME:9.2,Ca:.42,P:.26,pricePerKg:4},{id:14,name:"Desmodium - Early Vegetative",category:"Forages",DM:24,CP:23.5,NDF:36,ADF:28,TDN:68,NEL:1.58,ME:11.1,Ca:1.5,P:.3,pricePerKg:7},{id:15,name:"Desmodium - Mid Vegetative",category:"Forages",DM:24,CP:19.5,NDF:42,ADF:32,TDN:63,NEL:1.47,ME:10.3,Ca:1.35,P:.26,pricePerKg:5},{id:16,name:"Desmodium - Late Vegetative",category:"Forages",DM:24,CP:16,NDF:48,ADF:36,TDN:58,NEL:1.35,ME:9.5,Ca:1.2,P:.23,pricePerKg:4},{id:17,name:"Kikuyu Pasture - Early Vegetative",category:"Forages",DM:20,CP:21,NDF:42,ADF:24,TDN:72,NEL:1.68,ME:11.8,Ca:.75,P:.38,pricePerKg:4},{id:18,name:"Kikuyu Pasture - Mid Vegetative",category:"Forages",DM:20,CP:18,NDF:48,ADF:28,TDN:67,NEL:1.55,ME:10.9,Ca:.65,P:.32,pricePerKg:3},{id:19,name:"Kikuyu Pasture - Late Vegetative",category:"Forages",DM:20,CP:14.5,NDF:55,ADF:33,TDN:62,NEL:1.44,ME:10.1,Ca:.55,P:.28,pricePerKg:2.5},{id:20,name:"Star Grass - Early Vegetative",category:"Forages",DM:22,CP:18.5,NDF:46,ADF:26,TDN:68,NEL:1.58,ME:11.1,Ca:.68,P:.35,pricePerKg:4},{id:21,name:"Star Grass - Mid Vegetative",category:"Forages",DM:22,CP:15.5,NDF:52,ADF:30,TDN:64,NEL:1.49,ME:10.4,Ca:.58,P:.3,pricePerKg:3},{id:22,name:"Star Grass - Late Vegetative",category:"Forages",DM:22,CP:12,NDF:58,ADF:35,TDN:58,NEL:1.35,ME:9.5,Ca:.5,P:.26,pricePerKg:2.5},{id:23,name:"Maize Silage - Whole Plant",category:"Forages",DM:35,CP:8.5,NDF:42,ADF:26,TDN:68,NEL:1.58,ME:11.1,Ca:.25,P:.22,pricePerKg:10},{id:24,name:"Maize Silage - High Moisture Corn",category:"Forages",DM:70,CP:9,NDF:12,ADF:4,TDN:88,NEL:2.05,ME:14.4,Ca:.03,P:.26,pricePerKg:18},{id:25,name:"Sorghum Silage - Grain Type",category:"Forages",DM:32,CP:7.8,NDF:48,ADF:30,TDN:62,NEL:1.44,ME:10.1,Ca:.3,P:.24,pricePerKg:8},{id:26,name:"Sorghum Silage - Forage Type",category:"Forages",DM:30,CP:7,NDF:54,ADF:34,TDN:58,NEL:1.35,ME:9.5,Ca:.35,P:.22,pricePerKg:7},{id:27,name:"Oat Hay",category:"Forages",DM:87,CP:9.5,NDF:60,ADF:38,TDN:55,NEL:1.28,ME:9,Ca:.35,P:.22,pricePerKg:15},{id:28,name:"Wheat Straw",category:"Forages",DM:90,CP:4,NDF:75,ADF:50,TDN:48,NEL:1.1,ME:7.8,Ca:.2,P:.08,pricePerKg:8},{id:29,name:"Maize Stover",category:"Forages",DM:85,CP:5.5,NDF:68,ADF:42,TDN:52,NEL:1.21,ME:8.5,Ca:.28,P:.12,pricePerKg:5},{id:30,name:"Lucerne (Green)",category:"Forages",DM:22,CP:20,NDF:38,ADF:28,TDN:65,NEL:1.51,ME:10.6,Ca:1.5,P:.28,pricePerKg:6},{id:31,name:"Calliandra Leaves",category:"Forages",DM:30,CP:22,NDF:35,ADF:26,TDN:66,NEL:1.53,ME:10.8,Ca:1.2,P:.24,pricePerKg:7},{id:32,name:"Leucaena Leaves",category:"Forages",DM:28,CP:24.5,NDF:32,ADF:24,TDN:68,NEL:1.58,ME:11.1,Ca:1.4,P:.26,pricePerKg:8},{id:33,name:"Sweet Potato Vines",category:"Forages",DM:15,CP:16.5,NDF:28,ADF:22,TDN:70,NEL:1.63,ME:11.4,Ca:.95,P:.35,pricePerKg:3},{id:34,name:"Cassava Leaves",category:"Forages",DM:25,CP:21,NDF:30,ADF:20,TDN:68,NEL:1.58,ME:11.1,Ca:1.8,P:.4,pricePerKg:4},{id:35,name:"Bean Straw",category:"Forages",DM:88,CP:8.5,NDF:55,ADF:38,TDN:56,NEL:1.3,ME:9.2,Ca:1.2,P:.18,pricePerKg:6},{id:36,name:"Rice Straw",category:"Forages",DM:90,CP:3.5,NDF:72,ADF:48,TDN:45,NEL:1.05,ME:7.4,Ca:.22,P:.06,pricePerKg:4},{id:37,name:"Barley Hay",category:"Forages",DM:88,CP:10.5,NDF:56,ADF:34,TDN:58,NEL:1.35,ME:9.5,Ca:.38,P:.24,pricePerKg:16},{id:38,name:"Clover Hay (Red)",category:"Forages",DM:88,CP:15.5,NDF:42,ADF:32,TDN:60,NEL:1.4,ME:9.8,Ca:1.25,P:.26,pricePerKg:22},{id:39,name:"Clover Hay (White)",category:"Forages",DM:88,CP:18,NDF:38,ADF:28,TDN:64,NEL:1.49,ME:10.4,Ca:1.4,P:.3,pricePerKg:25},{id:40,name:"Vetch Hay",category:"Forages",DM:88,CP:17.5,NDF:44,ADF:34,TDN:58,NEL:1.35,ME:9.5,Ca:1.35,P:.25,pricePerKg:23},{id:41,name:"Boma Rhodes (Mature)",category:"Forages",DM:90,CP:6.5,NDF:70,ADF:44,TDN:50,NEL:1.16,ME:8.2,Ca:.35,P:.18,pricePerKg:12},{id:42,name:"Teff Straw",category:"Forages",DM:91,CP:4.5,NDF:74,ADF:48,TDN:46,NEL:1.07,ME:7.5,Ca:.28,P:.08,pricePerKg:5},{id:43,name:"Millet Stover",category:"Forages",DM:88,CP:5,NDF:70,ADF:44,TDN:48,NEL:1.12,ME:7.9,Ca:.32,P:.1,pricePerKg:6},{id:44,name:"Sugarcane Tops (Fresh)",category:"Forages",DM:25,CP:6.5,NDF:62,ADF:38,TDN:54,NEL:1.26,ME:8.8,Ca:.42,P:.18,pricePerKg:2},{id:45,name:"Banana Leaves",category:"Forages",DM:12,CP:12,NDF:42,ADF:30,TDN:58,NEL:1.35,ME:9.5,Ca:.85,P:.22,pricePerKg:1.5},{id:46,name:"Banana Stems (Pseudostem)",category:"Forages",DM:8,CP:5.5,NDF:58,ADF:42,TDN:48,NEL:1.12,ME:7.9,Ca:.38,P:.15,pricePerKg:1},{id:47,name:"Pineapple Waste",category:"Forages",DM:15,CP:6,NDF:38,ADF:28,TDN:62,NEL:1.44,ME:10.1,Ca:.45,P:.12,pricePerKg:2},{id:48,name:"Kale (Fresh)",category:"Forages",DM:14,CP:16.5,NDF:32,ADF:22,TDN:68,NEL:1.58,ME:11.1,Ca:1.35,P:.42,pricePerKg:5},{id:50,name:"Maize Grain (Whole)",category:"Energy",DM:88,CP:9.5,NDF:10,ADF:3,TDN:90,NEL:2.1,ME:14.7,Ca:.02,P:.28,pricePerKg:33},{id:51,name:"Maize Grain (Ground)",category:"Energy",DM:88,CP:9.5,NDF:10,ADF:3,TDN:90,NEL:2.1,ME:14.7,Ca:.02,P:.28,pricePerKg:35},{id:52,name:"Maize Germ Meal",category:"Energy",DM:90,CP:12,NDF:14,ADF:5,TDN:88,NEL:2.05,ME:14.4,Ca:.04,P:.52,pricePerKg:30},{id:53,name:"Maize Bran",category:"Energy",DM:89,CP:11,NDF:28,ADF:8,TDN:78,NEL:1.82,ME:12.7,Ca:.08,P:.85,pricePerKg:24},{id:54,name:"Barley Grain (Ground)",category:"Energy",DM:89,CP:12.5,NDF:18,ADF:6,TDN:85,NEL:1.98,ME:13.9,Ca:.05,P:.35,pricePerKg:32},{id:55,name:"Oats Grain (Ground)",category:"Energy",DM:90,CP:12,NDF:28,ADF:12,TDN:76,NEL:1.78,ME:12.4,Ca:.08,P:.35,pricePerKg:30},{id:56,name:"Wheat Grain (Ground)",category:"Energy",DM:89,CP:13.5,NDF:12,ADF:4,TDN:88,NEL:2.05,ME:14.4,Ca:.04,P:.38,pricePerKg:36},{id:57,name:"Wheat Bran",category:"Energy",DM:90,CP:17.5,NDF:35,ADF:10,TDN:78,NEL:1.82,ME:12.7,Ca:.12,P:.95,pricePerKg:26},{id:58,name:"Wheat Pollard",category:"Energy",DM:89,CP:16,NDF:32,ADF:9,TDN:80,NEL:1.86,ME:13.1,Ca:.1,P:.88,pricePerKg:28},{id:59,name:"Rice Bran",category:"Energy",DM:91,CP:13.5,NDF:22,ADF:8,TDN:82,NEL:1.9,ME:13.4,Ca:.08,P:1.65,pricePerKg:32},{id:60,name:"Rice Polishings",category:"Energy",DM:90,CP:12,NDF:18,ADF:6,TDN:85,NEL:1.98,ME:13.9,Ca:.06,P:1.45,pricePerKg:35},{id:61,name:"Sorghum Grain",category:"Energy",DM:88,CP:10.5,NDF:12,ADF:4,TDN:88,NEL:2.05,ME:14.4,Ca:.03,P:.32,pricePerKg:30},{id:62,name:"Millet Grain",category:"Energy",DM:89,CP:11.5,NDF:14,ADF:5,TDN:85,NEL:1.98,ME:13.9,Ca:.04,P:.35,pricePerKg:38},{id:63,name:"Cassava Chips",category:"Energy",DM:88,CP:2.5,NDF:8,ADF:4,TDN:85,NEL:1.98,ME:13.9,Ca:.18,P:.12,pricePerKg:18},{id:64,name:"Sweet Potato (Dried)",category:"Energy",DM:87,CP:4.5,NDF:10,ADF:5,TDN:82,NEL:1.9,ME:13.4,Ca:.25,P:.15,pricePerKg:20},{id:65,name:"Molasses (Sugarcane)",category:"Energy",DM:75,CP:4.5,NDF:0,ADF:0,TDN:72,NEL:1.68,ME:11.8,Ca:.9,P:.09,pricePerKg:22},{id:66,name:"Beet Pulp",category:"Energy",DM:91,CP:9.5,NDF:45,ADF:22,TDN:72,NEL:1.68,ME:11.8,Ca:.7,P:.1,pricePerKg:26},{id:67,name:"Hominy Feed",category:"Energy",DM:90,CP:11,NDF:32,ADF:10,TDN:84,NEL:1.95,ME:13.7,Ca:.06,P:.45,pricePerKg:29},{id:68,name:"Bakery Waste",category:"Energy",DM:92,CP:10.5,NDF:8,ADF:3,TDN:88,NEL:2.05,ME:14.4,Ca:.15,P:.18,pricePerKg:20},{id:69,name:"Citrus Pulp (Dried)",category:"Energy",DM:90,CP:6.5,NDF:22,ADF:14,TDN:78,NEL:1.82,ME:12.7,Ca:1.8,P:.14,pricePerKg:24},{id:70,name:"Palm Kernel Meal",category:"Energy",DM:91,CP:17,NDF:65,ADF:35,TDN:68,NEL:1.58,ME:11.1,Ca:.22,P:.6,pricePerKg:35},{id:71,name:"Copra Meal",category:"Energy",DM:92,CP:21,NDF:52,ADF:28,TDN:75,NEL:1.75,ME:12.2,Ca:.18,P:.58,pricePerKg:40},{id:72,name:"Sunflower Cake",category:"Energy",DM:91,CP:28,NDF:38,ADF:24,TDN:75,NEL:1.75,ME:12.2,Ca:.32,P:.85,pricePerKg:45},{id:73,name:"Brewers Grains (Dried)",category:"Energy",DM:92,CP:26,NDF:42,ADF:18,TDN:70,NEL:1.63,ME:11.4,Ca:.28,P:.52,pricePerKg:28},{id:74,name:"Coffee Pulp (Dried)",category:"Energy",DM:90,CP:11.5,NDF:35,ADF:22,TDN:65,NEL:1.51,ME:10.6,Ca:.45,P:.18,pricePerKg:15},{id:75,name:"Sorghum Bran",category:"Energy",DM:89,CP:10,NDF:30,ADF:10,TDN:75,NEL:1.75,ME:12.2,Ca:.06,P:.72,pricePerKg:22},{id:76,name:"Finger Millet Bran",category:"Energy",DM:90,CP:12.5,NDF:26,ADF:8,TDN:78,NEL:1.82,ME:12.7,Ca:.35,P:.45,pricePerKg:28},{id:77,name:"Rapeseed Meal",category:"Energy",DM:91,CP:36,NDF:30,ADF:18,TDN:72,NEL:1.68,ME:11.8,Ca:.68,P:1.05,pricePerKg:52},{id:78,name:"Coconut Cake",category:"Energy",DM:92,CP:20,NDF:55,ADF:30,TDN:73,NEL:1.7,ME:11.9,Ca:.16,P:.55,pricePerKg:38},{id:79,name:"Apple Pomace (Dried)",category:"Energy",DM:90,CP:5.5,NDF:36,ADF:24,TDN:70,NEL:1.63,ME:11.4,Ca:.15,P:.08,pricePerKg:18},{id:80,name:"Grape Pomace (Dried)",category:"Energy",DM:91,CP:10.5,NDF:42,ADF:28,TDN:68,NEL:1.58,ME:11.1,Ca:.85,P:.18,pricePerKg:20},{id:81,name:"Tomato Pomace (Dried)",category:"Energy",DM:92,CP:21,NDF:38,ADF:26,TDN:72,NEL:1.68,ME:11.8,Ca:.35,P:.42,pricePerKg:25},{id:82,name:"Carrot Pulp (Dried)",category:"Energy",DM:90,CP:8.5,NDF:28,ADF:18,TDN:75,NEL:1.75,ME:12.2,Ca:.48,P:.25,pricePerKg:22},{id:83,name:"Potato Meal",category:"Energy",DM:89,CP:9,NDF:12,ADF:6,TDN:85,NEL:1.98,ME:13.9,Ca:.06,P:.22,pricePerKg:24},{id:84,name:"Tapioca (Cassava Meal)",category:"Energy",DM:88,CP:2.8,NDF:10,ADF:5,TDN:84,NEL:1.95,ME:13.7,Ca:.16,P:.14,pricePerKg:19},{id:85,name:"Maize Gluten Feed",category:"Energy",DM:90,CP:22,NDF:35,ADF:12,TDN:82,NEL:1.9,ME:13.4,Ca:.35,P:.85,pricePerKg:32},{id:86,name:"Maize Gluten Meal",category:"Energy",DM:91,CP:60,NDF:8,ADF:3,TDN:85,NEL:1.98,ME:13.9,Ca:.08,P:.48,pricePerKg:72},{id:87,name:"Rye Grain",category:"Energy",DM:88,CP:11.5,NDF:14,ADF:5,TDN:86,NEL:2,ME:14,Ca:.06,P:.35,pricePerKg:34},{id:88,name:"Triticale Grain",category:"Energy",DM:89,CP:13,NDF:13,ADF:4,TDN:87,NEL:2.03,ME:14.2,Ca:.05,P:.36,pricePerKg:35},{id:89,name:"Corn Cobs (Ground)",category:"Energy",DM:90,CP:2.5,NDF:85,ADF:38,TDN:52,NEL:1.21,ME:8.5,Ca:.08,P:.04,pricePerKg:8},{id:90,name:"Peas (Field)",category:"Energy",DM:89,CP:23,NDF:14,ADF:7,TDN:83,NEL:1.93,ME:13.5,Ca:.1,P:.4,pricePerKg:48},{id:91,name:"Chickpeas (Gram)",category:"Energy",DM:90,CP:20.5,NDF:16,ADF:8,TDN:82,NEL:1.9,ME:13.4,Ca:.14,P:.38,pricePerKg:52},{id:92,name:"Lupin Seeds",category:"Energy",DM:90,CP:32,NDF:20,ADF:12,TDN:80,NEL:1.86,ME:13.1,Ca:.22,P:.45,pricePerKg:55},{id:90,name:"Soybean Meal 44%",category:"Protein",DM:90,CP:48.5,NDF:9,ADF:7,TDN:82,NEL:1.9,ME:13.4,Ca:.3,P:.65,pricePerKg:63},{id:91,name:"Soybean Meal 48%",category:"Protein",DM:90,CP:53.5,NDF:8,ADF:6,TDN:84,NEL:1.95,ME:13.7,Ca:.32,P:.7,pricePerKg:68},{id:92,name:"Soybean (Roasted Full Fat)",category:"Protein",DM:92,CP:38,NDF:12,ADF:8,TDN:115,NEL:2.68,ME:18.8,Ca:.25,P:.62,pricePerKg:85},{id:93,name:"Cottonseed Meal",category:"Protein",DM:91,CP:41,NDF:25,ADF:15,TDN:75,NEL:1.75,ME:12.2,Ca:.2,P:1.2,pricePerKg:48},{id:94,name:"Cottonseed Cake (Expeller)",category:"Protein",DM:92,CP:43.5,NDF:22,ADF:13,TDN:78,NEL:1.82,ME:12.7,Ca:.22,P:1.25,pricePerKg:52},{id:95,name:"Cottonseed (Whole)",category:"Protein",DM:90,CP:23,NDF:45,ADF:28,TDN:95,NEL:2.21,ME:15.5,Ca:.18,P:.68,pricePerKg:55},{id:96,name:"Cottonseed (Whole Fuzzy)",category:"Protein",DM:89,CP:22.5,NDF:47,ADF:30,TDN:93,NEL:2.17,ME:15.2,Ca:.16,P:.65,pricePerKg:53},{id:97,name:"Canola Meal",category:"Protein",DM:90,CP:38,NDF:28,ADF:18,TDN:72,NEL:1.68,ME:11.8,Ca:.7,P:1.1,pricePerKg:54},{id:98,name:"Sunflower Meal (Dehulled)",category:"Protein",DM:92,CP:42,NDF:22,ADF:14,TDN:78,NEL:1.82,ME:12.7,Ca:.38,P:1.05,pricePerKg:50},{id:99,name:"Sunflower Meal (w/ Hulls)",category:"Protein",DM:92,CP:35,NDF:32,ADF:20,TDN:70,NEL:1.63,ME:11.4,Ca:.35,P:.95,pricePerKg:42},{id:100,name:"Sunflower Cake (Expeller)",category:"Protein",DM:91,CP:38,NDF:26,ADF:16,TDN:76,NEL:1.78,ME:12.4,Ca:.36,P:1,pricePerKg:48},{id:101,name:"Groundnut Cake",category:"Protein",DM:91,CP:48,NDF:12,ADF:8,TDN:80,NEL:1.86,ME:13.1,Ca:.18,P:.62,pricePerKg:70},{id:102,name:"Sesame Cake",category:"Protein",DM:92,CP:42,NDF:18,ADF:12,TDN:78,NEL:1.82,ME:12.7,Ca:1.5,P:1.1,pricePerKg:65},{id:103,name:"Linseed Meal",category:"Protein",DM:91,CP:36,NDF:22,ADF:14,TDN:78,NEL:1.82,ME:12.7,Ca:.38,P:.85,pricePerKg:60},{id:104,name:"Fish Meal (65% CP)",category:"Protein",DM:92,CP:65,NDF:0,ADF:0,TDN:78,NEL:1.82,ME:12.7,Ca:5.5,P:3.2,pricePerKg:120},{id:105,name:"Fish Meal (60% CP)",category:"Protein",DM:91,CP:60,NDF:0,ADF:0,TDN:75,NEL:1.75,ME:12.2,Ca:4.8,P:2.85,pricePerKg:110},{id:106,name:"Blood Meal",category:"Protein",DM:92,CP:85,NDF:0,ADF:0,TDN:72,NEL:1.68,ME:11.8,Ca:.25,P:.25,pricePerKg:95},{id:107,name:"Meat Meal",category:"Protein",DM:93,CP:55,NDF:0,ADF:0,TDN:75,NEL:1.75,ME:12.2,Ca:8.5,P:4.2,pricePerKg:85},{id:108,name:"Meat & Bone Meal",category:"Protein",DM:93,CP:50,NDF:0,ADF:0,TDN:72,NEL:1.68,ME:11.8,Ca:10,P:5,pricePerKg:75},{id:109,name:"Poultry By-Product Meal",category:"Protein",DM:92,CP:58,NDF:0,ADF:0,TDN:75,NEL:1.75,ME:12.2,Ca:4.2,P:2.5,pricePerKg:80},{id:110,name:"Feather Meal",category:"Protein",DM:93,CP:82,NDF:0,ADF:0,TDN:68,NEL:1.58,ME:11.1,Ca:.35,P:.6,pricePerKg:70},{id:111,name:"Distillers Grains (DDG)",category:"Protein",DM:90,CP:30,NDF:40,ADF:15,TDN:85,NEL:1.98,ME:13.9,Ca:.12,P:.8,pricePerKg:36},{id:112,name:"Distillers Grains (DDGS)",category:"Protein",DM:89,CP:28,NDF:38,ADF:14,TDN:88,NEL:2.05,ME:14.4,Ca:.1,P:.75,pricePerKg:38},{id:113,name:"Alfalfa Meal (Dehy)",category:"Protein",DM:91,CP:17,NDF:42,ADF:30,TDN:58,NEL:1.35,ME:9.5,Ca:1.45,P:.24,pricePerKg:27},{id:114,name:"Pea Protein",category:"Protein",DM:90,CP:22,NDF:15,ADF:8,TDN:82,NEL:1.9,ME:13.4,Ca:.12,P:.42,pricePerKg:50},{id:115,name:"Bean Meal",category:"Protein",DM:89,CP:24,NDF:18,ADF:10,TDN:80,NEL:1.86,ME:13.1,Ca:.15,P:.45,pricePerKg:45},{id:116,name:"Cowpea Meal",category:"Protein",DM:90,CP:23.5,NDF:16,ADF:9,TDN:81,NEL:1.88,ME:13.2,Ca:.14,P:.4,pricePerKg:42},{id:117,name:"Lablab Meal",category:"Protein",DM:89,CP:25,NDF:17,ADF:10,TDN:79,NEL:1.84,ME:12.9,Ca:.16,P:.38,pricePerKg:40},{id:118,name:"Pigeon Pea Meal",category:"Protein",DM:90,CP:21.5,NDF:20,ADF:12,TDN:78,NEL:1.82,ME:12.7,Ca:.18,P:.35,pricePerKg:38},{id:119,name:"Urea (46% N = 287% CP)",category:"Protein",DM:99,CP:287,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:68},{id:120,name:"Dairy Whey Powder",category:"Protein",DM:95,CP:13,NDF:0,ADF:0,TDN:95,NEL:2.21,ME:15.5,Ca:.85,P:.75,pricePerKg:90},{id:121,name:"Skim Milk Powder",category:"Protein",DM:96,CP:35,NDF:0,ADF:0,TDN:98,NEL:2.28,ME:16,Ca:1.3,P:1,pricePerKg:180},{id:122,name:"Casein",category:"Protein",DM:92,CP:88,NDF:0,ADF:0,TDN:82,NEL:1.9,ME:13.4,Ca:.12,P:.85,pricePerKg:450},{id:153,name:"Yeast Culture",category:"Protein",DM:95,CP:18,NDF:0,ADF:0,TDN:65,NEL:1.52,ME:10.6,Ca:.15,P:1.2,pricePerKg:570},{id:154,name:"Brewers Yeast",category:"Protein",DM:93,CP:45,NDF:0,ADF:0,TDN:72,NEL:1.68,ME:11.8,Ca:.12,P:1.45,pricePerKg:380},{id:155,name:"Torula Yeast",category:"Protein",DM:93,CP:48,NDF:0,ADF:0,TDN:75,NEL:1.75,ME:12.2,Ca:.1,P:1.5,pricePerKg:420},{id:156,name:"Safflower Meal",category:"Protein",DM:92,CP:38,NDF:28,ADF:18,TDN:72,NEL:1.68,ME:11.8,Ca:.32,P:.88,pricePerKg:46},{id:157,name:"Pumpkin Seed Meal",category:"Protein",DM:91,CP:42,NDF:16,ADF:10,TDN:78,NEL:1.82,ME:12.7,Ca:.28,P:.95,pricePerKg:58},{id:158,name:"Moringa Leaf Meal",category:"Protein",DM:92,CP:27.5,NDF:24,ADF:16,TDN:68,NEL:1.58,ME:11.1,Ca:2.1,P:.32,pricePerKg:85},{id:159,name:"Spirulina",category:"Protein",DM:95,CP:62,NDF:0,ADF:0,TDN:70,NEL:1.63,ME:11.4,Ca:.12,P:.85,pricePerKg:1850},{id:160,name:"Silkworm Pupae Meal",category:"Protein",DM:93,CP:52,NDF:0,ADF:0,TDN:78,NEL:1.82,ME:12.7,Ca:.48,P:.75,pricePerKg:125},{id:161,name:"Cricket Meal",category:"Protein",DM:94,CP:65,NDF:0,ADF:0,TDN:80,NEL:1.86,ME:13.1,Ca:.35,P:.85,pricePerKg:380},{id:162,name:"Black Soldier Fly Larvae Meal",category:"Protein",DM:94,CP:42,NDF:0,ADF:0,TDN:85,NEL:1.98,ME:13.9,Ca:5.2,P:.95,pricePerKg:285},{id:163,name:"Mealworm Meal",category:"Protein",DM:95,CP:53,NDF:0,ADF:0,TDN:82,NEL:1.9,ME:13.4,Ca:.18,P:.72,pricePerKg:420},{id:164,name:"Shrimp Meal",category:"Protein",DM:92,CP:58,NDF:0,ADF:0,TDN:75,NEL:1.75,ME:12.2,Ca:6.8,P:2.1,pricePerKg:145},{id:165,name:"Crab Meal",category:"Protein",DM:92,CP:32,NDF:0,ADF:0,TDN:68,NEL:1.58,ME:11.1,Ca:12.5,P:1.85,pricePerKg:95},{id:166,name:"Squid Meal",category:"Protein",DM:92,CP:72,NDF:0,ADF:0,TDN:78,NEL:1.82,ME:12.7,Ca:2.4,P:1.55,pricePerKg:165},{id:167,name:"Anchovy Meal",category:"Protein",DM:92,CP:63,NDF:0,ADF:0,TDN:76,NEL:1.78,ME:12.4,Ca:5.2,P:3.05,pricePerKg:115},{id:168,name:"Hydrolyzed Feather Meal",category:"Protein",DM:93,CP:85,NDF:0,ADF:0,TDN:72,NEL:1.68,ME:11.8,Ca:.38,P:.65,pricePerKg:78},{id:180,name:"Soybean Oil",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:210},{id:181,name:"Palm Oil",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:180},{id:182,name:"Sunflower Oil",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:220},{id:183,name:"Canola Oil",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:230},{id:184,name:"Corn Oil",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:215},{id:185,name:"Coconut Oil",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:250},{id:186,name:"Animal Fat (Tallow)",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:200,NEL:4.66,ME:32.7,Ca:0,P:0,pricePerKg:150},{id:187,name:"Poultry Fat",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:205,NEL:4.77,ME:33.5,Ca:0,P:0,pricePerKg:160},{id:188,name:"Lard (Pork Fat)",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:205,NEL:4.77,ME:33.5,Ca:0,P:0,pricePerKg:165},{id:189,name:"Fish Oil",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:280},{id:190,name:"Flaxseed Oil (Linseed Oil)",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:210,NEL:4.89,ME:34.3,Ca:0,P:0,pricePerKg:320},{id:191,name:"Calcium Soaps (Fat)",category:"Fats",DM:98,CP:0,NDF:0,ADF:0,TDN:195,NEL:4.54,ME:31.9,Ca:8.5,P:0,pricePerKg:190},{id:192,name:"Bypass Fat Supplement",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:198,NEL:4.61,ME:32.4,Ca:.1,P:0,pricePerKg:220},{id:193,name:"Hydrogenated Fat",category:"Fats",DM:99,CP:0,NDF:0,ADF:0,TDN:200,NEL:4.66,ME:32.7,Ca:0,P:0,pricePerKg:175},{id:194,name:"Lecithin",category:"Fats",DM:98,CP:0,NDF:0,ADF:0,TDN:190,NEL:4.43,ME:31.1,Ca:0,P:1.85,pricePerKg:420},{id:210,name:"Limestone (Calcium Carbonate)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:38,P:0,pricePerKg:13},{id:211,name:"Oyster Shell",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:38.5,P:0,pricePerKg:15},{id:212,name:"Calcite",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:40,P:0,pricePerKg:14},{id:213,name:"Dolomitic Limestone",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:22,P:0,pricePerKg:15},{id:214,name:"Dicalcium Phosphate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:22,P:18.5,pricePerKg:98},{id:215,name:"Monocalcium Phosphate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:16,P:21,pricePerKg:105},{id:216,name:"Tricalcium Phosphate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:38,P:20,pricePerKg:110},{id:217,name:"Defluorinated Phosphate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:32,P:18,pricePerKg:95},{id:218,name:"Bone Meal (Steamed)",category:"Minerals",DM:95,CP:10,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:24,P:12,pricePerKg:65},{id:219,name:"Rock Phosphate (Soft)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:33,P:14.5,pricePerKg:45},{id:220,name:"Salt (Sodium Chloride)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:18},{id:221,name:"Iodized Salt",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:22},{id:222,name:"Trace Mineralized Salt",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:28},{id:223,name:"Magnesium Oxide",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:143},{id:224,name:"Magnesium Sulfate (Epsom Salt)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:85},{id:225,name:"Magnesium Carbonate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:95},{id:226,name:"Sodium Bicarbonate (Baking Soda)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:63},{id:227,name:"Sodium Sesquicarbonate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:75},{id:228,name:"Potassium Carbonate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:120},{id:229,name:"Potassium Chloride",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:85},{id:230,name:"Sulfur (Elemental)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:45},{id:231,name:"Ammonium Sulfate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:52},{id:232,name:"Zinc Oxide",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:280},{id:233,name:"Zinc Sulfate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:185},{id:234,name:"Copper Sulfate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:350},{id:235,name:"Copper Oxide",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:420},{id:236,name:"Manganese Oxide",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:240},{id:237,name:"Manganese Sulfate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:165},{id:238,name:"Iron Sulfate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:75},{id:239,name:"Iron Oxide",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:95},{id:240,name:"Selenium Premix (0.2%)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:2800},{id:241,name:"Sodium Selenite",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:3500},{id:242,name:"Cobalt Carbonate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:850},{id:243,name:"Cobalt Sulfate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:720},{id:244,name:"Iodine (Potassium Iodide)",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1200},{id:245,name:"Calcium Iodate",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1400},{id:246,name:"Trace Mineral Mix",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:180},{id:247,name:"Macro Mineral Mix",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:15,P:8,pricePerKg:85},{id:248,name:"Dairy Mineral Premix",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:18,P:10,pricePerKg:120},{id:249,name:"Poultry Mineral Premix",category:"Minerals",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:12,P:6,pricePerKg:95},{id:270,name:"Vitamin A Premix (500k IU/g)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:850},{id:271,name:"Vitamin D3 Premix (500k IU/g)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:920},{id:272,name:"Vitamin E Premix (50%)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1100},{id:273,name:"Vitamin A-D-E Premix",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:375},{id:274,name:"Vitamin K3 (Menadione)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:780},{id:275,name:"Thiamine (Vitamin B1)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:520},{id:276,name:"Riboflavin (Vitamin B2)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:880},{id:277,name:"Niacin (Vitamin B3)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:550},{id:278,name:"Pantothenic Acid (B5)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:720},{id:279,name:"Pyridoxine (Vitamin B6)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:950},{id:280,name:"Folic Acid (Vitamin B9)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1850},{id:281,name:"Vitamin B12 (Cobalamin)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:12500},{id:282,name:"B-Complex Vitamins",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:680},{id:283,name:"Biotin Premix (2%)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:975},{id:284,name:"Choline Chloride (60%)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:420},{id:285,name:"Vitamin C (Ascorbic Acid)",category:"Vitamins",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:480},{id:286,name:"Lysine HCl (78%)",category:"Additives",DM:99,CP:78,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:320},{id:287,name:"L-Lysine Sulfate (55%)",category:"Additives",DM:99,CP:55,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:280},{id:288,name:"DL-Methionine (99%)",category:"Additives",DM:99,CP:59,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:580},{id:289,name:"Methionine Hydroxy Analog",category:"Additives",DM:88,CP:42,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:420},{id:290,name:"L-Threonine (98%)",category:"Additives",DM:99,CP:75,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:420},{id:291,name:"L-Tryptophan (98%)",category:"Additives",DM:99,CP:85,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1850},{id:292,name:"Probiotics (Multi-Strain)",category:"Additives",DM:95,CP:12,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1850},{id:293,name:"Lactobacillus Culture",category:"Additives",DM:95,CP:8,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1250},{id:294,name:"Bacillus Subtilis",category:"Additives",DM:95,CP:6,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1450},{id:295,name:"Enzymes (Multi-Enzyme Complex)",category:"Additives",DM:98,CP:5,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:2200},{id:296,name:"Phytase Enzyme",category:"Additives",DM:98,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1850},{id:297,name:"Xylanase Enzyme",category:"Additives",DM:98,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:1650},{id:298,name:"Toxin Binder (Mycotoxin)",category:"Additives",DM:98,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:380},{id:299,name:"Organic Acids Blend",category:"Additives",DM:99,CP:0,NDF:0,ADF:0,TDN:0,NEL:0,ME:0,Ca:0,P:0,pricePerKg:520}],Ae={"Dairy - High Production (>35kg/day)":{DM:24,CP:18,NDF:32,ADF:21,NEL:1.75,Ca:.75,P:.45,category:"Dairy Cattle"},"Dairy - Mid Production (25-35kg/day)":{DM:22,CP:16,NDF:35,ADF:23,NEL:1.65,Ca:.7,P:.4,category:"Dairy Cattle"},"Dairy - Low Production (<25kg/day)":{DM:20,CP:14,NDF:38,ADF:25,NEL:1.55,Ca:.65,P:.38,category:"Dairy Cattle"},"Dairy - Dry Cow (Far-off)":{DM:12,CP:12,NDF:45,ADF:30,NEL:1.35,Ca:.5,P:.3,category:"Dairy Cattle"},"Dairy - Dry Cow (Close-up)":{DM:13,CP:14,NDF:40,ADF:28,NEL:1.5,Ca:.6,P:.38,category:"Dairy Cattle"},"Dairy - Fresh Cow (0-21 days)":{DM:20,CP:18,NDF:33,ADF:22,NEL:1.7,Ca:.8,P:.5,category:"Dairy Cattle"},"Beef - Growing (200-400kg)":{DM:10,CP:14,NDF:40,ADF:26,NEL:1.45,Ca:.4,P:.25,category:"Beef Cattle"},"Beef - Finishing (>400kg)":{DM:11,CP:13,NDF:25,ADF:16,NEL:1.65,Ca:.35,P:.3,category:"Beef Cattle"},"Beef - Cow-Calf (Lactating)":{DM:12,CP:12,NDF:45,ADF:30,NEL:1.4,Ca:.45,P:.28,category:"Beef Cattle"},"Beef - Cow-Calf (Dry)":{DM:10,CP:10,NDF:50,ADF:33,NEL:1.25,Ca:.35,P:.22,category:"Beef Cattle"},"Beef - Bull (Breeding)":{DM:14,CP:12,NDF:42,ADF:28,NEL:1.45,Ca:.4,P:.3,category:"Beef Cattle"},"Heifer - Growing (200-400kg)":{DM:10,CP:14,NDF:40,ADF:26,NEL:1.5,Ca:.5,P:.35,category:"Heifers & Calves"},"Heifer - Breeding (>400kg)":{DM:11,CP:13,NDF:42,ADF:28,NEL:1.45,Ca:.55,P:.38,category:"Heifers & Calves"},"Calf - Starter (50-100kg)":{DM:2,CP:20,NDF:20,ADF:12,NEL:1.85,Ca:.7,P:.45,category:"Heifers & Calves"},"Calf - Grower (100-200kg)":{DM:5,CP:16,NDF:30,ADF:18,NEL:1.65,Ca:.6,P:.4,category:"Heifers & Calves"},"Sheep - Ewe Lactating":{DM:2.5,CP:16,NDF:35,ADF:23,NEL:1.6,Ca:.6,P:.38,category:"Sheep"},"Sheep - Ewe Dry":{DM:1.8,CP:11,NDF:45,ADF:30,NEL:1.3,Ca:.4,P:.25,category:"Sheep"},"Sheep - Lamb Growing":{DM:1.5,CP:16,NDF:30,ADF:20,NEL:1.7,Ca:.55,P:.35,category:"Sheep"},"Sheep - Ram Breeding":{DM:2.2,CP:13,NDF:40,ADF:26,NEL:1.45,Ca:.45,P:.3,category:"Sheep"},"Goat - Doe Lactating":{DM:3,CP:17,NDF:33,ADF:22,NEL:1.62,Ca:.65,P:.4,category:"Goats"},"Goat - Doe Dry":{DM:2,CP:12,NDF:42,ADF:28,NEL:1.35,Ca:.45,P:.28,category:"Goats"},"Goat - Kid Growing":{DM:1.2,CP:18,NDF:28,ADF:18,NEL:1.75,Ca:.6,P:.38,category:"Goats"},"Goat - Buck Breeding":{DM:2.5,CP:14,NDF:38,ADF:25,NEL:1.5,Ca:.5,P:.32,category:"Goats"},"Horse - Maintenance":{DM:10,CP:10,NDF:45,ADF:30,NEL:1.3,Ca:.3,P:.2,category:"Horses"},"Horse - Light Work":{DM:11,CP:11,NDF:40,ADF:26,NEL:1.45,Ca:.35,P:.25,category:"Horses"},"Horse - Moderate Work":{DM:12,CP:12,NDF:35,ADF:23,NEL:1.6,Ca:.4,P:.3,category:"Horses"},"Horse - Heavy Work":{DM:14,CP:14,NDF:30,ADF:20,NEL:1.75,Ca:.45,P:.35,category:"Horses"},"Horse - Lactating Mare":{DM:13,CP:14,NDF:35,ADF:23,NEL:1.65,Ca:.55,P:.4,category:"Horses"},"Horse - Growing (Yearling)":{DM:9,CP:14,NDF:35,ADF:23,NEL:1.6,Ca:.6,P:.45,category:"Horses"},"Pig - Growing (20-50kg)":{DM:2.5,CP:18,NDF:15,ADF:8,NEL:2.3,Ca:.7,P:.6,category:"Swine"},"Pig - Finishing (50-120kg)":{DM:3.5,CP:16,NDF:18,ADF:10,NEL:2.2,Ca:.6,P:.5,category:"Swine"},"Pig - Sow Lactating":{DM:6.5,CP:17,NDF:20,ADF:12,NEL:2.25,Ca:.85,P:.7,category:"Swine"},"Pig - Sow Gestating":{DM:2.5,CP:13,NDF:25,ADF:15,NEL:2.1,Ca:.75,P:.6,category:"Swine"},"Layer - Pullet (0-6 weeks)":{DM:.03,CP:20,NDF:8,ADF:4,NEL:2.9,Ca:1,P:.7,category:"Poultry - Layers"},"Layer - Grower (7-18 weeks)":{DM:.08,CP:16,NDF:10,ADF:5,NEL:2.8,Ca:.9,P:.65,category:"Poultry - Layers"},"Layer - Production (>18 weeks)":{DM:.11,CP:18,NDF:12,ADF:6,NEL:2.85,Ca:3.5,P:.4,category:"Poultry - Layers"},"Layer - Breeder":{DM:.12,CP:17,NDF:12,ADF:6,NEL:2.8,Ca:3.25,P:.45,category:"Poultry - Layers"},"Broiler - Starter (0-10 days)":{DM:.025,CP:23,NDF:6,ADF:3,NEL:3.1,Ca:1,P:.75,category:"Poultry - Broilers"},"Broiler - Grower (11-24 days)":{DM:.07,CP:21,NDF:8,ADF:4,NEL:3.05,Ca:.9,P:.7,category:"Poultry - Broilers"},"Broiler - Finisher (25+ days)":{DM:.11,CP:19,NDF:10,ADF:5,NEL:3,Ca:.85,P:.65,category:"Poultry - Broilers"},"Turkey - Starter (0-4 weeks)":{DM:.04,CP:28,NDF:7,ADF:3,NEL:3,Ca:1.2,P:.8,category:"Poultry - Turkeys"},"Turkey - Grower (5-12 weeks)":{DM:.18,CP:24,NDF:9,ADF:4,NEL:2.95,Ca:1,P:.7,category:"Poultry - Turkeys"},"Turkey - Finisher (13+ weeks)":{DM:.28,CP:20,NDF:11,ADF:5,NEL:2.9,Ca:.85,P:.6,category:"Poultry - Turkeys"},"Turkey - Breeder":{DM:.2,CP:18,NDF:12,ADF:6,NEL:2.75,Ca:2.25,P:.55,category:"Poultry - Turkeys"},"Duck - Starter (0-2 weeks)":{DM:.03,CP:22,NDF:7,ADF:3,NEL:2.95,Ca:.9,P:.7,category:"Poultry - Ducks"},"Duck - Grower (3-7 weeks)":{DM:.12,CP:18,NDF:10,ADF:5,NEL:2.85,Ca:.8,P:.65,category:"Poultry - Ducks"},"Duck - Finisher (8+ weeks)":{DM:.18,CP:16,NDF:12,ADF:6,NEL:2.8,Ca:.75,P:.6,category:"Poultry - Ducks"},"Duck - Breeder":{DM:.15,CP:17,NDF:11,ADF:5,NEL:2.75,Ca:2.75,P:.5,category:"Poultry - Ducks"}};function ot({animals:h}){const[E,b]=d.useState("ingredients"),[x,g]=d.useState([]),[f,j]=d.useState([]),[B,M]=d.useState(""),[q,U]=d.useState("all"),[H,P]=d.useState(""),[N,D]=d.useState("Dairy - High Production (>35kg/day)"),[A,O]=d.useState("all"),[m,k]=d.useState([]),[te,ne]=d.useState(""),[C,v]=d.useState(""),[R,G]=d.useState(""),[V,w]=d.useState(""),[W,t]=d.useState([]),[T,I]=d.useState(null),[ee,z]=d.useState(null);d.useEffect(()=>{const o=localStorage.getItem("rumen8:diets"),i=localStorage.getItem("rumen8:rations");o&&g(JSON.parse(o)),i&&j(JSON.parse(i))},[]),d.useEffect(()=>localStorage.setItem("rumen8:diets",JSON.stringify(x)),[x]),d.useEffect(()=>localStorage.setItem("rumen8:rations",JSON.stringify(f)),[f]);const se=[...new Set(Me.map(o=>o.category))],$=Me.filter(o=>!(q!=="all"&&o.category!==q||B&&!o.name.toLowerCase().includes(B.toLowerCase())));function ce(){if(!te||!C||parseFloat(C)<=0){alert("Select ingredient and enter valid amount");return}const o=Me.find(i=>i.id===parseInt(te));k([...m,{...o,amount:parseFloat(C)}]),ne(""),v("")}function oe(o){k(m.filter(i=>i.id!==o))}function me(){const o=m.reduce((Y,ge)=>Y+ge.amount,0);if(o===0)return null;let i=0,u=0,Z=0,ye=0,fe=0,be=0,Se=0,c=0,S=0;return m.forEach(Y=>{const ge=Y.DM/100*Y.amount;i+=ge,u+=Y.CP/100*ge,Z+=Y.NDF/100*ge,ye+=Y.ADF/100*ge,fe+=Y.NEL*ge,be+=Y.ME*ge,Se+=Y.Ca/100*ge,c+=Y.P/100*ge,S+=Y.pricePerKg*Y.amount}),{DM:i,CP:u/i*100,NDF:Z/i*100,ADF:ye/i*100,NEL:fe/i,ME:be/i,Ca:Se/i*100,P:c/i*100,costPerKg:S/o,total:o}}function de(){if(!H||m.length===0){alert("Enter diet name and add ingredients");return}const o=me();if(T)g(x.map(i=>i.id===T?{...i,name:H,targetAnimal:N,ingredients:m,analysis:o}:i)),I(null),alert("Diet updated!");else{const i={id:Date.now(),name:H,targetAnimal:N,ingredients:m,analysis:o,created:new Date().toISOString()};g([...x,i]),alert("Diet saved!")}P(""),k([])}function r(o){I(o.id),P(o.name),D(o.targetAnimal),k(o.ingredients),b("formulation")}function F(){I(null),P(""),k([])}function Q(){if(!R||!V||W.length===0){alert("Complete all fields");return}const o=x.find(i=>i.id===parseInt(V));ee?(j(f.map(i=>i.id===ee?{...i,name:R,dietId:o.id,dietName:o.name,animals:W}:i)),z(null),alert("Ration updated!")):(j([...f,{id:Date.now(),name:R,dietId:o.id,dietName:o.name,animals:W,created:new Date().toISOString()}]),alert("Ration assigned!")),G(""),w(""),t([])}function X(o){z(o.id),G(o.name),w(String(o.dietId)),t(o.animals),b("assignment")}function ve(){z(null),G(""),w(""),t([])}const l=me(),y=Ae[N],J=[...new Set(Object.values(Ae).map(o=>o.category))],le=A==="all"?Object.entries(Ae):Object.entries(Ae).filter(([o,i])=>i.category===A);d.useRef(null);function K(){const o=Object.entries(Me).map(([i,u])=>({name:i,category:u.category,DM:u.DM,CP:u.CP,NDF:u.NDF,ADF:u.ADF,TDN:u.TDN,NEL:u.NEL,ME:u.ME,Ca:u.Ca,P:u.P,price:u.price||0}));Fe(o,"ingredients.csv")}function ie(){const o=x.map(i=>({id:i.id,name:i.name,targetAnimal:i.targetAnimal,created:i.created,ingredients:i.ingredients.map(u=>`${u.name}:${u.amount}kg`).join("; "),totalDM:i.analysis.totalDM.toFixed(2),totalCP:i.analysis.totalCP.toFixed(2),costPerKg:i.analysis.costPerKg.toFixed(2)}));Fe(o,"diets.csv")}function pe(){const o=f.map(i=>({id:i.id,name:i.name,dietName:i.dietName,animals:i.animals.join("; "),created:i.created}));Fe(o,"rations.csv")}function s(){if(f.length===0){alert("No rations to print");return}Re(f,o=>{const i=x.find(u=>u.id===o.dietId);return`
        <div style="padding: 20px; border: 2px solid #000;">
          <h2 style="margin-top: 0;">üîó Ration Card: ${o.name}</h2>
          <p><strong>Diet:</strong> ${o.dietName}</p>
          <p><strong>Created:</strong> ${new Date(o.created).toLocaleString()}</p>
          <h3>Assigned Animals:</h3>
          <ul>
            ${o.animals.map(u=>`<li>${u}</li>`).join("")}
          </ul>
          ${i?`
            <h3>Diet Composition:</h3>
            <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
              <thead>
                <tr>
                  <th style="border: 1px solid #000; padding: 8px; text-align: left;">Ingredient</th>
                  <th style="border: 1px solid #000; padding: 8px; text-align: right;">Amount (kg)</th>
                </tr>
              </thead>
              <tbody>
                ${i.ingredients.map(u=>`
                  <tr>
                    <td style="border: 1px solid #000; padding: 8px;">${u.name}</td>
                    <td style="border: 1px solid #000; padding: 8px; text-align: right;">${u.amount}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
            <div style="margin-top: 20px; padding: 10px; background: #f0f0f0;">
              <h4 style="margin-top: 0;">Nutritional Analysis:</h4>
              <p><strong>Total DM:</strong> {diet.analysis.totalDM.toFixed(2)} kg</p>
              <p><strong>Total CP:</strong> {diet.analysis.totalCP.toFixed(2)} kg</p>
              <p><strong>Cost per kg:</strong> KSH {diet.analysis.costPerKg.toFixed(2)}</p>
            </div>
          `:""}
        </div>
      `},"Ration Cards")}return e.jsxs("section",{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx("h3",{children:"üß™ Rumen8 Feed Formulation System"})}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:20,borderBottom:"2px solid #e5e7eb",flexWrap:"wrap"},children:[[{id:"ingredients",label:"üìö Ingredient Library"},{id:"requirements",label:"üéØ Requirements"},{id:"formulation",label:"üß™ Diet Formulation"},{id:"diets",label:"üíæ Saved Diets"},{id:"rations",label:"üîó Ration Assignment"},{id:"reports",label:"üìä Reports"}].map(o=>e.jsx("button",{onClick:()=>b(o.id),style:{padding:"10px 16px",border:"none",borderBottom:E===o.id?"3px solid #2563eb":"3px solid transparent",background:E===o.id?"#eff6ff":"transparent",cursor:"pointer",fontWeight:E===o.id?600:400,color:E===o.id?"#2563eb":"#666"},children:o.label},o.id)),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:4},children:[E==="ingredients"&&e.jsx("button",{onClick:K,style:{fontSize:12},title:"Export ingredients",children:"üìä Export"}),E==="diets"&&e.jsx("button",{onClick:ie,style:{fontSize:12},title:"Export diets",children:"üìä Export"}),E==="rations"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:pe,style:{fontSize:12},title:"Export rations",children:"üìä Export"}),e.jsx("button",{onClick:s,style:{fontSize:12},title:"Print all rations",children:"üñ®Ô∏è Print"})]})]})]}),E==="ingredients"&&e.jsxs("div",{children:[e.jsx("div",{className:"card",style:{padding:20,marginBottom:16},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:12},children:[e.jsx("input",{type:"text",placeholder:"Search ingredients...",value:B,onChange:o=>M(o.target.value)}),e.jsxs("select",{value:q,onChange:o=>U(o.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),se.map(o=>e.jsx("option",{value:o,children:o},o))]})]})}),e.jsx("div",{className:"card",style:{padding:0,overflow:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{style:{background:"#f9fafb",position:"sticky",top:0},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:10,textAlign:"left"},children:"Ingredient"}),e.jsx("th",{style:{padding:10},children:"DM%"}),e.jsx("th",{style:{padding:10},children:"CP%"}),e.jsx("th",{style:{padding:10},children:"NDF%"}),e.jsx("th",{style:{padding:10},children:"ADF%"}),e.jsx("th",{style:{padding:10},children:"NEL"}),e.jsx("th",{style:{padding:10},children:"ME"}),e.jsx("th",{style:{padding:10},children:"Ca%"}),e.jsx("th",{style:{padding:10},children:"P%"}),e.jsx("th",{style:{padding:10},children:"Price/kg"})]})}),e.jsx("tbody",{children:$.map(o=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:10},children:[e.jsx("div",{style:{fontWeight:600},children:o.name}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:o.category})]}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.DM.toFixed(1)}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.CP.toFixed(1)}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.NDF.toFixed(1)}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.ADF.toFixed(1)}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.NEL.toFixed(2)}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.ME.toFixed(1)}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.Ca.toFixed(2)}),e.jsx("td",{style:{padding:10,textAlign:"center"},children:o.P.toFixed(2)}),e.jsxs("td",{style:{padding:10,textAlign:"center"},children:["KES ",o.pricePerKg.toFixed(2),"/kg"]})]},o.id))})]})})]}),E==="requirements"&&e.jsxs("div",{children:[e.jsx("div",{className:"card",style:{padding:16,marginBottom:16},children:e.jsxs("select",{value:A,onChange:o=>O(o.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"all",children:"All Categories"}),J.map(o=>e.jsx("option",{value:o,children:o},o))]})}),e.jsx("div",{style:{display:"grid",gap:16},children:le.map(([o,i])=>e.jsxs("div",{className:"card",style:{padding:16,background:"#f9fafb"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:12},children:e.jsxs("div",{children:[e.jsx("h5",{style:{margin:0},children:o}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:4},children:i.category})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:12,fontSize:14},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"DM:"})," ",i.DM," kg/day"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CP:"})," ",i.CP,"%"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"NDF:"})," ",i.NDF,"%"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ADF:"})," ",i.ADF,"%"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"NEL:"})," ",i.NEL," Mcal/kg"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ca:"})," ",i.Ca,"%"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"P:"})," ",i.P,"%"]})]})]},o))})]}),E==="formulation"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:20,marginBottom:16},children:[e.jsx("h4",{children:"Create New Diet"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:12,marginTop:16},children:[e.jsx("input",{type:"text",placeholder:"Diet name...",value:H,onChange:o=>P(o.target.value)}),e.jsxs("select",{value:N,onChange:o=>D(o.target.value),children:[e.jsx("option",{value:"",children:"-- Select Animal Type --"}),J.map(o=>e.jsx("optgroup",{label:o,children:Object.entries(Ae).filter(([i,u])=>u.category===o).map(([i,u])=>e.jsx("option",{value:i,children:i},i))},o))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:12,marginTop:16},children:[e.jsxs("select",{value:te,onChange:o=>ne(o.target.value),children:[e.jsx("option",{value:"",children:"-- Select Ingredient --"}),Me.map(o=>e.jsxs("option",{value:o.id,children:[o.name," (",o.category,")"]},o.id))]}),e.jsx("input",{type:"number",placeholder:"Amount (kg)",value:C,onChange:o=>v(o.target.value),step:"0.1"}),e.jsx("button",{onClick:ce,children:"Add"})]})]}),m.length>0&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:16},children:[e.jsx("h4",{children:"Diet Composition"}),e.jsxs("table",{style:{width:"100%",marginTop:16},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:8,textAlign:"left"},children:"Ingredient"}),e.jsx("th",{style:{padding:8,textAlign:"right"},children:"Amount (kg)"}),e.jsx("th",{style:{padding:8,textAlign:"right"},children:"% of Mix"}),e.jsx("th",{style:{padding:8}})]})}),e.jsx("tbody",{children:m.map(o=>{const i=m.reduce((Z,ye)=>Z+ye.amount,0),u=o.amount/i*100;return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:8},children:o.name}),e.jsx("td",{style:{padding:8,textAlign:"right"},children:o.amount.toFixed(2)}),e.jsxs("td",{style:{padding:8,textAlign:"right"},children:[u.toFixed(1),"%"]}),e.jsx("td",{style:{padding:8,textAlign:"center"},children:e.jsx("button",{onClick:()=>oe(o.id),style:{color:"#dc2626"},children:"‚úï"})})]},o.id)})})]})]}),l&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:16},children:[e.jsx("h4",{children:"Nutritional Analysis"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:16,marginTop:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Dry Matter"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold"},children:[l.DM.toFixed(1)," kg"]}),y&&e.jsxs("div",{style:{fontSize:12,color:l.DM>=y.DM?"#059669":"#dc2626"},children:["Target: ",y.DM," kg"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Crude Protein"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold"},children:[l.CP.toFixed(1),"%"]}),y&&e.jsxs("div",{style:{fontSize:12,color:l.CP>=y.CP?"#059669":"#dc2626"},children:["Target: ",y.CP,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"NDF"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold"},children:[l.NDF.toFixed(1),"%"]}),y&&e.jsxs("div",{style:{fontSize:12,color:Math.abs(l.NDF-y.NDF)<=5?"#059669":"#dc2626"},children:["Target: ",y.NDF,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"NEL"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold"},children:l.NEL.toFixed(2)}),y&&e.jsxs("div",{style:{fontSize:12,color:l.NEL>=y.NEL?"#059669":"#dc2626"},children:["Target: ",y.NEL]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"ME (MJ/kg DM)"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold"},children:l.ME.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Calcium"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold"},children:[l.Ca.toFixed(2),"%"]}),y&&e.jsxs("div",{style:{fontSize:12,color:l.Ca>=y.Ca?"#059669":"#dc2626"},children:["Target: ",y.Ca,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Phosphorus"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold"},children:[l.P.toFixed(2),"%"]}),y&&e.jsxs("div",{style:{fontSize:12,color:l.P>=y.P?"#059669":"#dc2626"},children:["Target: ",y.P,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Cost"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold"},children:["KES ",l.costPerKg.toFixed(2),"/kg"]}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:["KES ",(l.costPerKg*l.DM).toFixed(2),"/head/day"]})]})]}),e.jsxs("div",{style:{marginTop:20,display:"flex",gap:8},children:[e.jsx("button",{onClick:de,style:{flex:1},children:T?"Update Diet":"Save Diet"}),T&&e.jsx("button",{onClick:F,style:{flex:1},children:"Cancel Edit"})]})]})]}),E==="diets"&&e.jsx("div",{children:x.length===0?e.jsxs("div",{className:"card",style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48},children:"üíæ"}),e.jsx("p",{style:{color:"#666"},children:"No saved diets yet"})]}):e.jsx("div",{style:{display:"grid",gap:16},children:x.map(o=>e.jsxs("div",{className:"card",style:{padding:20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px 0"},children:o.name}),e.jsx("div",{style:{fontSize:14,color:"#666"},children:o.targetAnimal})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>r(o),children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>g(x.filter(i=>i.id!==o.id)),style:{color:"#dc2626"},children:"üóëÔ∏è Delete"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,marginTop:16,fontSize:13},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"DM:"})," ",o.analysis.DM.toFixed(1)," kg"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CP:"})," ",o.analysis.CP.toFixed(1),"%"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"NEL:"})," ",o.analysis.NEL.toFixed(2)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ME:"})," ",o.analysis.ME.toFixed(1)," MJ/kg"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ca:"})," ",o.analysis.Ca.toFixed(2),"%"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"P:"})," ",o.analysis.P.toFixed(2),"%"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Cost:"})," KES ",o.analysis.costPerKg.toFixed(2),"/kg"]})]}),e.jsxs("details",{style:{marginTop:12},children:[e.jsxs("summary",{style:{cursor:"pointer",fontWeight:600},children:["Ingredients (",o.ingredients.length,")"]}),e.jsx("div",{style:{marginTop:8},children:o.ingredients.map(i=>e.jsxs("div",{style:{fontSize:13,padding:"4px 0"},children:[i.name,": ",i.amount," kg (",(i.amount/o.analysis.total*100).toFixed(1),"%)"]},i.id))})]})]},o.id))})}),E==="rations"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:20,marginBottom:16},children:[e.jsx("h4",{children:"Assign Ration to Animals"}),e.jsxs("div",{style:{display:"grid",gap:12,marginTop:16},children:[e.jsx("input",{type:"text",placeholder:"Ration name...",value:R,onChange:o=>G(o.target.value)}),e.jsxs("select",{value:V,onChange:o=>w(o.target.value),children:[e.jsx("option",{value:"",children:"-- Select Diet --"}),x.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]}),e.jsxs("div",{children:[e.jsx("label",{children:"Select Animals"}),e.jsx("div",{style:{maxHeight:200,overflow:"auto",border:"1px solid #e5e7eb",padding:8,borderRadius:4},children:(h||[]).map(o=>e.jsxs("label",{style:{display:"block",padding:4},children:[e.jsx("input",{type:"checkbox",checked:W.includes(o.id),onChange:i=>{i.target.checked?t([...W,o.id]):t(W.filter(u=>u!==o.id))}})," ",o.name||o.tag," (",o.breed,")"]},o.id))})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:Q,style:{flex:1},children:ee?"Update Ration":"Create Ration"}),ee&&e.jsx("button",{onClick:ve,style:{flex:1},children:"Cancel Edit"})]})]})]}),f.length>0&&e.jsx("div",{style:{display:"grid",gap:12},children:f.map(o=>e.jsx("div",{className:"card",style:{padding:16},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("h5",{style:{margin:0},children:o.name}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:["Diet: ",o.dietName]}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[o.animals.length," animals assigned"]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>X(o),children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>j(f.filter(i=>i.id!==o.id)),style:{color:"#dc2626"},children:"üóëÔ∏è Delete"})]})]})},o.id))})]}),E==="reports"&&e.jsxs("div",{className:"card",style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48},children:"üìä"}),e.jsx("h4",{children:"Reports & Analytics"}),e.jsx("p",{style:{color:"#666"},children:"Feed cost analysis, nutrient balance reports coming soon"})]})]})}const dt=[{id:"MEAS-001",animalId:"A-001",date:"2025-06-02",timestamp:"2025-06-02T10:00:00",type:"Weight",value:450,unit:"kg",bcs:3.5,height:null,length:null,girth:null,condition:"Good",measuredBy:"Farm Staff",notes:"Regular check"},{id:"MEAS-002",animalId:"A-002",date:"2025-06-01",timestamp:"2025-06-01T09:30:00",type:"Weight",value:380,unit:"kg",bcs:3,height:145,length:null,girth:null,condition:"Good",measuredBy:"Farm Staff",notes:""}],$e=["Weight","Height","Length","Girth","Body Condition Score","Temperature","Heart Rate","Respiratory Rate","Multiple"],Ve={Weight:["kg","lbs"],Height:["cm","inches"],Length:["cm","inches"],Girth:["cm","inches"],Temperature:["¬∞C","¬∞F"],"Heart Rate":["bpm"],"Respiratory Rate":["breaths/min"]},ct=["1.0 - Emaciated","1.5","2.0 - Thin","2.5","3.0 - Ideal","3.5","4.0 - Fat","4.5","5.0 - Obese"],gt=["Excellent","Good","Fair","Poor","Concern"];function pt({animals:h}){const E="cattalytics:animal:measurement",[b,x]=d.useState([]),[g,f]=d.useState(h&&h[0]?h[0].id:""),[j,B]=d.useState("Weight"),[M,q]=d.useState(""),[U,H]=d.useState("kg"),[P,N]=d.useState(""),[D,A]=d.useState(""),[O,m]=d.useState(""),[k,te]=d.useState(""),[ne,C]=d.useState("Good"),[v,R]=d.useState(""),[G,V]=d.useState(""),[w,W]=d.useState(!1),[t,T]=d.useState("all"),[I,ee]=d.useState("all"),[z,se]=d.useState("list"),[$,ce]=d.useState(null);d.useEffect(()=>{const l=localStorage.getItem(E);x(l?JSON.parse(l):dt)},[]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(b)),[b]);function oe(){if(!g||!M&&!P&&!D&&!O&&!k){alert("Please select animal and enter at least one measurement");return}if($)x(b.map(l=>l.id===$?{...l,animalId:g,type:j,value:parseFloat(M)||null,unit:U,bcs:parseFloat(P)||null,height:parseFloat(D)||null,length:parseFloat(O)||null,girth:parseFloat(k)||null,condition:ne,measuredBy:v.trim(),notes:G.trim()}:l)),ce(null);else{const y={id:"MEAS-"+Math.floor(1e3+Math.random()*9e3),animalId:g,date:new Date().toISOString().slice(0,10),timestamp:new Date().toISOString(),type:j,value:parseFloat(M)||null,unit:U,bcs:parseFloat(P)||null,height:parseFloat(D)||null,length:parseFloat(O)||null,girth:parseFloat(k)||null,condition:ne,measuredBy:v.trim(),notes:G.trim()};x([...b,y])}q(""),N(""),A(""),m(""),te(""),R(""),V(""),W(!1)}function me(l){confirm("Delete record "+l+"?")&&x(b.filter(y=>y.id!==l))}function de(l){ce(l.id),f(l.animalId),B(l.type),q(l.value?String(l.value):""),H(l.unit),N(l.bcs?String(l.bcs):""),A(l.height?String(l.height):""),m(l.length?String(l.length):""),te(l.girth?String(l.girth):""),C(l.condition),R(l.measuredBy||""),V(l.notes||""),W(!0)}function r(){ce(null),q(""),N(""),A(""),m(""),te(""),R(""),V(""),W(!1),h&&h[0]&&f(h[0].id)}const F=b.filter(l=>!(t!=="all"&&l.animalId!==t||I!=="all"&&l.type!==I)),Q={};F.forEach(l=>{Q[l.animalId]||(Q[l.animalId]={weights:[],latestWeight:null,firstWeight:null,avgWeight:0,weightGain:0,latestBCS:null,measurements:[]}),l.type==="Weight"&&l.value&&Q[l.animalId].weights.push({date:l.date,value:l.value}),Q[l.animalId].measurements.push(l)}),Object.keys(Q).forEach(l=>{const y=Q[l];y.weights.length>0&&(y.weights.sort((le,K)=>new Date(le.date)-new Date(K.date)),y.firstWeight=y.weights[0].value,y.latestWeight=y.weights[y.weights.length-1].value,y.avgWeight=y.weights.reduce((le,K)=>le+K.value,0)/y.weights.length,y.weightGain=y.latestWeight-y.firstWeight);const J=y.measurements.filter(le=>le.bcs);J.length>0&&(y.latestBCS=J[J.length-1].bcs)});const X=()=>{const l=F.map(y=>({ID:y.id,Date:y.date,Animal:h?.find(J=>J.id===y.animalId)?.name||y.animalId,Type:y.type,Value:y.value||"N/A",Unit:y.unit||"",BCS:y.bcs||"N/A",Condition:y.condition,MeasuredBy:y.measuredBy||"N/A",Notes:y.notes||""}));Fe(l,"animal_measurements.csv")},ve=()=>{const l=F.map(y=>({Date:y.date,Animal:h?.find(J=>J.id===y.animalId)?.name||y.animalId,Type:y.type,Value:y.value?`${y.value} ${y.unit}`:"N/A",BCS:y.bcs||"N/A",Condition:y.condition}));Ke(l,"animal_measurements","Animal Measurements & Growth")};return e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{children:"üìè Animal Measurements & Growth"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:X,title:"Export to CSV",style:{fontSize:12},children:"üìä CSV"}),e.jsx("button",{onClick:()=>we(F,"measurements.csv"),title:"Export to Excel",style:{fontSize:12},children:"üìà Excel"}),e.jsx("button",{onClick:ve,title:"Export to PDF",style:{fontSize:12},children:"üìï PDF"}),e.jsx("button",{onClick:()=>Ie(F,"measurements.json"),title:"Export to JSON",style:{fontSize:12},children:"üìÑ JSON"}),e.jsx("button",{className:z==="list"?"tab-btn active":"tab-btn",onClick:()=>se("list"),children:"List"}),e.jsx("button",{className:z==="growth"?"tab-btn active":"tab-btn",onClick:()=>se("growth"),children:"Growth Tracking"}),e.jsx("button",{onClick:()=>W(!w),children:w?$?"Cancel Edit":"‚úï Cancel":"+ Add Measurement"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Measurements"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:F.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Animals Tracked"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:Object.keys(Q).length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Weight Records"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:F.filter(l=>l.type==="Weight"&&l.value).length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#e0f2fe"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"BCS Records"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#0284c7"},children:F.filter(l=>l.bcs).length})]})]}),w&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:$?"Edit Measurement Record":"Add Measurement Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Animal *"}),e.jsxs("select",{value:g,onChange:l=>f(l.target.value),children:[e.jsx("option",{value:"",children:"-- Select Animal --"}),(h||[]).map(l=>e.jsxs("option",{value:l.id,children:[l.name||l.tag," (",l.breed,")"]},l.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Measurement Type"}),e.jsx("select",{value:j,onChange:l=>{B(l.target.value),H(Ve[l.target.value]?.[0]||"")},children:$e.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Overall Condition"}),e.jsx("select",{value:ne,onChange:l=>C(l.target.value),children:gt.map(l=>e.jsx("option",{value:l,children:l},l))})]}),j!=="Multiple"&&j!=="Body Condition Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{children:[j," Value"]}),e.jsx("input",{type:"number",step:"0.1",value:M,onChange:l=>q(l.target.value),placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Unit"}),e.jsx("select",{value:U,onChange:l=>H(l.target.value),children:(Ve[j]||["unit"]).map(l=>e.jsx("option",{value:l,children:l},l))})]})]}),j==="Multiple"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{children:"Weight (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:M,onChange:l=>q(l.target.value),placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Height (cm)"}),e.jsx("input",{type:"number",step:"0.1",value:D,onChange:l=>A(l.target.value),placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Length (cm)"}),e.jsx("input",{type:"number",step:"0.1",value:O,onChange:l=>m(l.target.value),placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Girth (cm)"}),e.jsx("input",{type:"number",step:"0.1",value:k,onChange:l=>te(l.target.value),placeholder:"0.0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Body Condition Score (1-5)"}),e.jsxs("select",{value:P,onChange:l=>N(l.target.value),children:[e.jsx("option",{value:"",children:"-- Not Scored --"}),ct.map(l=>e.jsx("option",{value:l.split(" -")[0],children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Measured By"}),e.jsx("input",{value:v,onChange:l=>R(l.target.value),placeholder:"Person's name"})]}),e.jsxs("div",{style:{gridColumn:"span 3"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:G,onChange:l=>V(l.target.value),rows:2,placeholder:"Additional observations or comments..."})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:oe,children:$?"Save Changes":"Add Measurement"}),$&&e.jsx("button",{onClick:r,children:"Cancel Edit"}),e.jsx("button",{onClick:()=>W(!1),children:"Cancel"})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16},children:[e.jsxs("select",{value:t,onChange:l=>T(l.target.value),children:[e.jsx("option",{value:"all",children:"All Animals"}),(h||[]).map(l=>e.jsx("option",{value:l.id,children:l.name||l.tag},l.id))]}),e.jsxs("select",{value:I,onChange:l=>ee(l.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),$e.map(l=>e.jsx("option",{value:l,children:l},l))]}),(t!=="all"||I!=="all")&&e.jsx("button",{onClick:()=>{T("all"),ee("all")},children:"Clear Filters"})]}),z==="growth"&&e.jsx("div",{style:{display:"grid",gap:16},children:Object.entries(Q).map(([l,y])=>{const J=(h||[]).find(le=>le.id===l);return e.jsxs("div",{className:"card",style:{padding:20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,marginBottom:4},children:J?.name||J?.tag||l}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[J?.breed," ‚Ä¢ ",J?.sex==="F"?"Female":"Male"]})]}),y.latestWeight&&e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:[y.latestWeight.toFixed(1)," kg"]}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Current Weight"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,marginBottom:16},children:[y.firstWeight&&e.jsxs("div",{className:"card",style:{padding:12,background:"#f9fafb"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Starting Weight"}),e.jsxs("div",{style:{fontSize:18,fontWeight:600},children:[y.firstWeight.toFixed(1)," kg"]})]}),y.avgWeight>0&&e.jsxs("div",{className:"card",style:{padding:12,background:"#f9fafb"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Average Weight"}),e.jsxs("div",{style:{fontSize:18,fontWeight:600},children:[y.avgWeight.toFixed(1)," kg"]})]}),y.weightGain!==0&&e.jsxs("div",{className:"card",style:{padding:12,background:y.weightGain>0?"#d1fae5":"#fee2e2"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Weight Gain/Loss"}),e.jsxs("div",{style:{fontSize:18,fontWeight:600,color:y.weightGain>0?"#059669":"#dc2626"},children:[y.weightGain>0?"+":"",y.weightGain.toFixed(1)," kg"]})]}),y.latestBCS&&e.jsxs("div",{className:"card",style:{padding:12,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Latest BCS"}),e.jsx("div",{style:{fontSize:18,fontWeight:600},children:y.latestBCS.toFixed(1)})]}),e.jsxs("div",{className:"card",style:{padding:12,background:"#e0f2fe"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Total Measurements"}),e.jsx("div",{style:{fontSize:18,fontWeight:600},children:y.measurements.length})]})]}),y.weights.length>1&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",fontSize:14},children:"Weight Progress"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:y.weights.map((le,K)=>{const ie=(le.value-y.firstWeight)/y.firstWeight*100;return e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[e.jsx("div",{style:{width:100,color:"#666"},children:new Date(le.date).toLocaleDateString()}),e.jsxs("div",{style:{flex:1,background:"#f3f4f6",borderRadius:4,height:20,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:`${Math.max(5,Math.min(100,le.value/y.latestWeight*100))}%`,background:"linear-gradient(90deg, #059669, #10b981)",transition:"width 0.3s"}}),e.jsxs("div",{style:{position:"relative",padding:"2px 8px",fontWeight:600},children:[le.value.toFixed(1)," kg"]})]}),ie!==0&&e.jsxs("div",{style:{width:60,textAlign:"right",color:ie>0?"#059669":"#dc2626",fontWeight:600},children:[ie>0?"+":"",ie.toFixed(1),"%"]})]},K)})})]})]},l)})}),z==="list"&&e.jsx("div",{className:"card",style:{padding:0,overflow:"hidden"},children:F.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"üìè"}),e.jsx("h4",{children:"No measurement records yet"}),e.jsx("p",{style:{color:"#666"},children:"Add your first measurement to start tracking growth"})]}):e.jsx("div",{style:{maxHeight:600,overflowY:"auto"},children:F.sort((l,y)=>new Date(y.timestamp||y.date)-new Date(l.timestamp||l.date)).map(l=>{const y=(h||[]).find(J=>J.id===l.animalId);return e.jsxs("div",{style:{padding:16,borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:16},children:l.type}),l.value&&e.jsxs("span",{style:{fontSize:18,color:"#059669",fontWeight:"bold"},children:[l.value," ",l.unit]}),e.jsx("span",{className:"badge",style:{background:l.condition==="Excellent"?"#d1fae5":l.condition==="Good"?"#e0f2fe":l.condition==="Fair"?"#fef3c7":"#fee2e2"},children:l.condition}),l.bcs&&e.jsxs("span",{className:"badge",style:{background:"#fef3c7"},children:["BCS: ",l.bcs]})]}),e.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:y?.name||y?.tag||l.animalId})," ‚Ä¢ ",new Date(l.timestamp||l.date).toLocaleDateString(),l.measuredBy&&` ‚Ä¢ ${l.measuredBy}`]}),(l.height||l.length||l.girth)&&e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[l.height&&`Height: ${l.height}cm ‚Ä¢ `,l.length&&`Length: ${l.length}cm ‚Ä¢ `,l.girth&&`Girth: ${l.girth}cm`]}),l.notes&&e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8,padding:8,background:"#f9fafb",borderRadius:4},children:l.notes})]}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{className:"tab-btn",onClick:()=>de(l),children:"‚úèÔ∏è"}),e.jsx("button",{className:"tab-btn",style:{color:"#dc2626"},onClick:()=>me(l.id),children:"üóëÔ∏è"})]})]},l.id)})})})]})}const ht=[{id:"BREED-001",animalId:"A-002",date:"2025-05-20",event:"AI",sire:"S-101",sireName:"Premium Bull",method:"Artificial Insemination",technician:"Dr. Smith",expectedDue:"2026-02-15",cost:150,notes:"First breeding attempt",status:"Confirmed"},{id:"BREED-002",animalId:"A-001",date:"2025-04-10",event:"Natural Breeding",sire:"S-100",sireName:"Duke",method:"Natural",technician:"",expectedDue:"2026-01-05",cost:0,notes:"",status:"Confirmed"}],ut=["AI","Natural Breeding","Embryo Transfer","Heat Detection","Pregnancy Check","Calving","Abortion","Not Pregnant"],xt=["Artificial Insemination","Natural","Embryo Transfer","IVF"],qe=["Scheduled","Completed","Confirmed","Failed","Pending Confirmation"],Te={Holstein:21,Friesian:21,Jersey:21,Guernsey:21,Ayrshire:21,"Brown Swiss":21,Angus:21,Hereford:21,Simmental:21,Charolais:21,Limousin:21,"Large White":21,Landrace:21,Duroc:21,Hampshire:21,Yorkshire:21,Berkshire:21,"Chester White":21,Pietrain:21,Merino:17,Dorper:17,Suffolk:17,"Hampshire (Sheep)":17,Rambouillet:17,Katahdin:17,Boer:21,Saanen:21,Alpine:21,Nubian:21,Toggenburg:21,LaMancha:21,default:21},Ue={Holstein:280,Friesian:280,Jersey:279,Guernsey:283,Ayrshire:279,"Brown Swiss":290,Angus:283,Hereford:285,Simmental:289,Charolais:289,Limousin:289,"Large White":114,Landrace:114,Duroc:114,Hampshire:114,Yorkshire:114,Berkshire:114,"Chester White":114,Pietrain:114,Merino:150,Dorper:150,Suffolk:147,"Hampshire (Sheep)":147,Rambouillet:150,Katahdin:152,Boer:150,Saanen:150,Alpine:150,Nubian:150,Toggenburg:150,LaMancha:145,default:283};function mt({animals:h}){const E="cattalytics:animal:breeding",[b,x]=d.useState([]),[g,f]=d.useState([]),[j,B]=d.useState("breeding"),[M,q]=d.useState(h&&h[0]?h[0].id:""),[U,H]=d.useState("AI"),[P,N]=d.useState(""),[D,A]=d.useState(""),[O,m]=d.useState("Artificial Insemination"),[k,te]=d.useState(""),[ne,C]=d.useState(""),[v,R]=d.useState(""),[G,V]=d.useState(""),[w,W]=d.useState("Completed"),[t,T]=d.useState(""),[I,ee]=d.useState(!1),[z,se]=d.useState({id:"",bullName:"",bullId:"",breed:"",supplier:"",batchNumber:"",productionDate:"",straws:"",location:"Semen Tank",quality:"Premium",price:"",notes:""}),[$,ce]=d.useState(null),[oe,me]=d.useState("all"),[de,r]=d.useState("all");d.useEffect(()=>{if(M&&h){const s=h.find(o=>o.id===M);s&&(U==="AI"||U==="Natural Breeding"||U==="Heat Detection")&&F(s.breed)}},[M,U,h]);function F(s){const o=new Date,i=Te[s]||Te.default,u=new Date(o);if(u.setDate(u.getDate()+i),R(u.toISOString().slice(0,10)),U==="AI"||U==="Natural Breeding"){const Z=Ue[s]||Ue.default,ye=new Date(o);ye.setDate(ye.getDate()+Z),C(ye.toISOString().slice(0,10))}}d.useEffect(()=>{const s=localStorage.getItem(E);x(s?JSON.parse(s):ht)},[]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(b)),[b]);function Q(){if(!M||!U){alert("Please select animal and breeding event");return}const o={id:"BREED-"+Math.floor(1e3+Math.random()*9e3),animalId:M,date:new Date().toISOString().slice(0,10),timestamp:new Date().toISOString(),event:U,sire:P.trim(),sireName:D.trim(),method:O,technician:k.trim(),expectedDue:ne,returnToHeat:v,cost:parseFloat(G)||0,status:w,notes:t.trim()};x([...b,o]),N(""),A(""),te(""),C(""),R(""),V(""),T(""),ee(!1)}function X(s){confirm("Delete record "+s+"?")&&x(b.filter(o=>o.id!==s))}function ve(s){if(s.preventDefault(),!z.bullName||!z.breed||!z.straws){alert("Please fill in bull name, breed, and number of straws");return}if($)f(g.map(o=>o.id===$?{...z,id:$}:o)),ce(null);else{const o={...z,id:`SEM-${Date.now()}`,dateAdded:new Date().toISOString().split("T")[0]};f([...g,o])}se({id:"",bullName:"",bullId:"",breed:"",supplier:"",batchNumber:"",productionDate:"",straws:"",location:"Semen Tank",quality:"Premium",price:"",notes:""})}function l(s){se(s),ce(s.id),window.scrollTo({top:0,behavior:"smooth"})}function y(s){confirm("Delete this semen record?")&&f(g.filter(o=>o.id!==s))}function J(s,o){const i=parseInt(o)||1;f(g.map(u=>{if(u.id===s){const Z=Math.max(0,(parseInt(u.straws)||0)-i);return{...u,straws:Z}}return u}))}const le=b.filter(s=>!(oe!=="all"&&s.animalId!==oe||de!=="all"&&s.status!==de)),K=le.reduce((s,o)=>s+(o.cost||0),0),ie=le.filter(s=>(s.status==="Confirmed"||s.event==="AI"||s.event==="Natural Breeding")&&s.expectedDue&&new Date(s.expectedDue)>new Date),pe=ie.filter(s=>{const o=Math.floor((new Date(s.expectedDue)-new Date)/864e5);return o<=30&&o>=0});return e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h2",{children:"üêÑ Breeding Management"}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("button",{onClick:()=>ee(!I),className:I?"secondary":"",disabled:j!=="breeding",children:I?"Cancel":"+ Add Breeding Record"})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",borderBottom:"2px solid var(--border-color)",paddingBottom:"8px"},children:[e.jsx("button",{onClick:()=>B("breeding"),className:`tab-btn ${j==="breeding"?"active":""}`,style:{padding:"8px 16px",background:j==="breeding"?"var(--green)":"transparent",color:j==="breeding"?"#fff":"inherit"},children:"üêÑ Breeding Records"}),e.jsx("button",{onClick:()=>B("semen"),className:`tab-btn ${j==="semen"?"active":""}`,style:{padding:"8px 16px",background:j==="semen"?"var(--green)":"transparent",color:j==="semen"?"#fff":"inherit"},children:"üß™ Semen Inventory"})]}),j==="breeding"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Breeding Events"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:le.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Pregnant Animals"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:ie.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fee2e2"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Due Within 30 Days"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#dc2626"},children:pe.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Cost"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:["KSH ",K.toLocaleString()]})]})]}),pe.length>0&&e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16,background:"#fef3c7",borderLeft:"4px solid #f59e0b"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:"#92400e"},children:"‚ö†Ô∏è Upcoming Calvings"}),pe.map(s=>{const o=(h||[]).find(u=>u.id===s.animalId),i=Math.floor((new Date(s.expectedDue)-new Date)/(1e3*60*60*24));return e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid #fbbf24"},children:[e.jsx("strong",{children:o?.name||o?.tag||s.animalId})," - Due in ",i," days (",new Date(s.expectedDue).toLocaleDateString(),")",s.sireName&&e.jsxs("span",{style:{color:"#666"},children:[" ‚Ä¢ Sire: ",s.sireName]})]},s.id)})]}),(()=>{const s=le.filter(o=>{if(!o.returnToHeat)return!1;const i=Math.floor((new Date(o.returnToHeat)-new Date)/(1e3*60*60*24));return i>=0&&i<=7});return s.length===0?null:e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16,background:"#e0f2fe",borderLeft:"4px solid #0ea5e9"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:"#075985"},children:"üîî Return to Heat Alert (Next 7 Days)"}),s.map(o=>{const i=(h||[]).find(Z=>Z.id===o.animalId),u=Math.floor((new Date(o.returnToHeat)-new Date)/(1e3*60*60*24));return e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid #7dd3fc"},children:[e.jsx("strong",{children:i?.name||i?.tag||o.animalId})," (",i?.breed,") -",u===0?" Today!":` in ${u} day${u>1?"s":""}`,"(",new Date(o.returnToHeat).toLocaleDateString(),")"]},o.id)})]})})(),I&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:"Add Breeding Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Animal *"}),e.jsxs("select",{value:M,onChange:s=>q(s.target.value),children:[e.jsx("option",{value:"",children:"-- Select Animal --"}),(h||[]).filter(s=>s.sex==="F").map(s=>e.jsxs("option",{value:s.id,children:[s.name||s.tag," (",s.breed,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Event Type *"}),e.jsx("select",{value:U,onChange:s=>H(s.target.value),children:ut.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sire ID"}),e.jsx("input",{value:P,onChange:s=>N(s.target.value),placeholder:"e.g., S-101"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sire Name"}),e.jsx("input",{value:D,onChange:s=>A(s.target.value),placeholder:"Bull name"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Method"}),e.jsx("select",{value:O,onChange:s=>m(s.target.value),children:xt.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Technician/Handler"}),e.jsx("input",{value:k,onChange:s=>te(s.target.value),placeholder:"Name"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Expected Due Date ",(U==="AI"||U==="Natural Breeding")&&"(Auto-calculated)"]}),e.jsx("input",{type:"date",value:ne,onChange:s=>C(s.target.value),title:M&&h?`Based on ${h.find(s=>s.id===M)?.breed||"breed"} gestation period`:""})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Return to Heat Date (Auto-calculated)"}),e.jsx("input",{type:"date",value:v,onChange:s=>R(s.target.value),style:{background:"#f0fdf4"},title:M&&h?`Based on ${h.find(s=>s.id===M)?.breed||"breed"} heat cycle (${Te[h.find(s=>s.id===M)?.breed]||Te.default} days)`:""})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Cost (KSH)"}),e.jsx("input",{type:"number",step:"0.01",value:G,onChange:s=>V(s.target.value),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Status"}),e.jsx("select",{value:w,onChange:s=>W(s.target.value),children:qe.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:t,onChange:s=>T(s.target.value),rows:2,placeholder:"Additional breeding notes..."})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:Q,children:"Add Breeding Record"}),e.jsx("button",{onClick:()=>ee(!1),children:"Cancel"})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16},children:[e.jsxs("select",{value:oe,onChange:s=>me(s.target.value),children:[e.jsx("option",{value:"all",children:"All Animals"}),(h||[]).filter(s=>s.sex==="F").map(s=>e.jsx("option",{value:s.id,children:s.name||s.tag},s.id))]}),e.jsxs("select",{value:de,onChange:s=>r(s.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),qe.map(s=>e.jsx("option",{value:s,children:s},s))]}),(oe!=="all"||de!=="all")&&e.jsx("button",{onClick:()=>{me("all"),r("all")},children:"Clear Filters"})]}),e.jsx("div",{className:"card",style:{padding:0,overflow:"hidden"},children:le.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"üêë"}),e.jsx("h4",{children:"No breeding records yet"}),e.jsx("p",{style:{color:"#666"},children:"Add your first breeding record to start tracking"})]}):e.jsx("div",{style:{maxHeight:600,overflowY:"auto"},children:le.sort((s,o)=>new Date(o.timestamp||o.date)-new Date(s.timestamp||s.date)).map(s=>{const o=(h||[]).find(Z=>Z.id===s.animalId),i=s.expectedDue?Math.floor((new Date(s.expectedDue)-new Date)/(1e3*60*60*24)):null,u=s.status==="Confirmed"&&i&&i>0;return e.jsxs("div",{style:{padding:16,borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:16},children:s.event}),e.jsx("span",{className:"badge",style:{background:s.status==="Confirmed"?"#d1fae5":s.status==="Failed"?"#fee2e2":"#e0f2fe"},children:s.status}),u&&e.jsx("span",{className:"badge",style:{background:"#fef3c7"},children:"ü§∞ Pregnant"}),s.method&&e.jsx("span",{className:"badge",style:{background:"#f3e8ff"},children:s.method}),s.cost>0&&e.jsxs("span",{className:"badge",style:{background:"#d1fae5"},children:["KSH ",Number(s.cost).toLocaleString()]})]}),e.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:o?.name||o?.tag||s.animalId})," ‚Ä¢ ",new Date(s.timestamp||s.date).toLocaleDateString()]}),s.sireName&&e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:["Sire: ",e.jsx("strong",{children:s.sireName})," ",s.sire&&`(${s.sire})`]}),s.expectedDue&&e.jsxs("div",{style:{fontSize:13,color:u?"#059669":"#666",marginBottom:4},children:["Expected Due: ",e.jsx("strong",{children:new Date(s.expectedDue).toLocaleDateString()}),i!==null&&i>0&&` (${i} days)`,i!==null&&i<=0&&" (Past due)"]}),s.returnToHeat&&e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:["Return to Heat: ",e.jsx("strong",{children:new Date(s.returnToHeat).toLocaleDateString()}),(()=>{const Z=Math.floor((new Date(s.returnToHeat)-new Date)/864e5);return Z>0?` (in ${Z} days)`:Z===0?" (Today!)":" (Past due)"})()]}),s.technician&&e.jsxs("div",{style:{fontSize:13,color:"#888"},children:["Technician: ",s.technician]}),s.notes&&e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8},children:s.notes})]}),e.jsx("button",{className:"tab-btn",style:{color:"#dc2626"},onClick:()=>X(s.id),children:"üóëÔ∏è"})]},s.id)})})})]}),j==="semen"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",style:{padding:"16px",marginBottom:"16px"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:$?"Edit Semen Record":"Add Semen to Inventory"}),e.jsxs("form",{onSubmit:ve,style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("label",{children:["Bull Name *",e.jsx("input",{type:"text",value:z.bullName,onChange:s=>se({...z,bullName:s.target.value}),placeholder:"e.g., Prime Bull",required:!0})]}),e.jsxs("label",{children:["Bull ID",e.jsx("input",{type:"text",value:z.bullId,onChange:s=>se({...z,bullId:s.target.value}),placeholder:"e.g., B-001"})]}),e.jsxs("label",{children:["Breed *",e.jsx("input",{type:"text",value:z.breed,onChange:s=>se({...z,breed:s.target.value}),placeholder:"e.g., Holstein",required:!0})]}),e.jsxs("label",{children:["Supplier",e.jsx("input",{type:"text",value:z.supplier,onChange:s=>se({...z,supplier:s.target.value}),placeholder:"e.g., National Breeding Center"})]}),e.jsxs("label",{children:["Batch Number",e.jsx("input",{type:"text",value:z.batchNumber,onChange:s=>se({...z,batchNumber:s.target.value}),placeholder:"e.g., BATCH-2025-001"})]}),e.jsxs("label",{children:["Production Date",e.jsx("input",{type:"date",value:z.productionDate,onChange:s=>se({...z,productionDate:s.target.value})})]}),e.jsxs("label",{children:["Number of Straws *",e.jsx("input",{type:"number",value:z.straws,onChange:s=>se({...z,straws:s.target.value}),placeholder:"0",min:"0",required:!0})]}),e.jsxs("label",{children:["Price per Straw (KSH)",e.jsx("input",{type:"number",step:"0.01",value:z.price,onChange:s=>se({...z,price:s.target.value}),placeholder:"0.00",min:"0"})]}),e.jsxs("label",{children:["Storage Location",e.jsxs("select",{value:z.location,onChange:s=>se({...z,location:s.target.value}),children:[e.jsx("option",{value:"Semen Tank",children:"Semen Tank"}),e.jsx("option",{value:"Liquid Nitrogen Tank 1",children:"Liquid Nitrogen Tank 1"}),e.jsx("option",{value:"Liquid Nitrogen Tank 2",children:"Liquid Nitrogen Tank 2"}),e.jsx("option",{value:"Cold Storage",children:"Cold Storage"}),e.jsx("option",{value:"Main Facility",children:"Main Facility"})]})]}),e.jsxs("label",{children:["Quality",e.jsxs("select",{value:z.quality,onChange:s=>se({...z,quality:s.target.value}),children:[e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Economy",children:"Economy"}),e.jsx("option",{value:"Tested",children:"Tested"})]})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:z.notes,onChange:s=>se({...z,notes:s.target.value}),placeholder:"Additional information about this semen...",rows:"2"})]}),e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:"8px"},children:[e.jsxs("button",{type:"submit",children:[$?"Update":"Add"," Semen"]}),$&&e.jsx("button",{type:"button",className:"secondary",onClick:()=>{se({id:"",bullName:"",bullId:"",breed:"",supplier:"",batchNumber:"",productionDate:"",straws:"",location:"Semen Tank",quality:"Premium",price:"",notes:""}),ce(null)},children:"Cancel"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:16},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Bulls"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:g.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Straws"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:g.reduce((s,o)=>s+(parseInt(o.straws)||0),0)})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Value"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#d97706"},children:["KSH ",g.reduce((s,o)=>s+(parseInt(o.straws)||0)*(parseFloat(o.price)||0),0).toLocaleString()]})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fee2e2"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Low Stock"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#dc2626"},children:g.filter(s=>(parseInt(s.straws)||0)<10).length})]})]}),e.jsxs("div",{className:"card",style:{padding:"16px"},children:[e.jsxs("h3",{style:{marginBottom:"16px"},children:["Semen Inventory (",g.length,")"]}),g.length===0?e.jsx("div",{className:"muted",style:{textAlign:"center",padding:"32px"},children:"No semen inventory records. Add your first entry above."}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:g.map(s=>{const o=(parseInt(s.straws)||0)*(parseFloat(s.price)||0),i=(parseInt(s.straws)||0)<10;return e.jsxs("div",{className:"card",style:{padding:"12px",background:i?"#fef2f2":"#f9fafb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"4px"},children:[s.bullName," ",s.bullId&&`(${s.bullId})`]}),e.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:[s.breed," ‚Ä¢ Batch: ",s.batchNumber||"N/A"]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:()=>l(s),style:{padding:"4px 8px",fontSize:"12px"},children:"Edit"}),e.jsx("button",{onClick:()=>y(s.id),className:"secondary",style:{padding:"4px 8px",fontSize:"12px"},children:"Delete"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px",fontSize:"13px",marginTop:"8px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Straws Available:"}),e.jsxs("span",{style:{marginLeft:"4px",color:i?"#dc2626":"#059669",fontWeight:"bold"},children:[s.straws," ",i&&"‚ö†Ô∏è"]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",s.location]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Quality:"})," ",s.quality]}),s.price&&e.jsxs("div",{children:[e.jsx("strong",{children:"Price/Straw:"})," KSH ",parseFloat(s.price).toLocaleString()]}),s.price&&e.jsxs("div",{children:[e.jsx("strong",{children:"Total Value:"})," KSH ",o.toLocaleString()]}),s.supplier&&e.jsxs("div",{children:[e.jsx("strong",{children:"Supplier:"})," ",s.supplier]}),s.productionDate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Production:"})," ",s.productionDate]})]}),s.notes&&e.jsx("div",{style:{marginTop:"8px",fontSize:"13px",color:"#666",fontStyle:"italic"},children:s.notes}),e.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>{const u=prompt("How many straws were used?","1");u&&!isNaN(u)&&J(s.id,u)},style:{padding:"6px 12px",fontSize:"12px",background:"#3b82f6",color:"#fff"},children:"Use Straws"}),e.jsx("button",{onClick:()=>{const u=prompt("How many straws to add?","10");u&&!isNaN(u)&&f(g.map(Z=>Z.id===s.id?{...Z,straws:(parseInt(Z.straws)||0)+parseInt(u)}:Z))},style:{padding:"6px 12px",fontSize:"12px",background:"#059669",color:"#fff"},children:"Restock"})]})]},s.id)})})]})]})]})}const yt=[{id:"MILK-001",animalId:"A-001",date:"2025-06-02",timestamp:"2025-06-02T06:30:00",session:"Morning",liters:18.5,fatContent:3.8,proteinContent:3.2,scc:15e4,temp:37.5,quality:"Grade A",pricePerLiter:45,totalPrice:832.5,buyer:"Dairy Co-op",sold:!0,notes:"Normal milking"},{id:"MILK-002",animalId:"A-001",date:"2025-06-02",timestamp:"2025-06-02T18:00:00",session:"Evening",liters:16.2,fatContent:4,proteinContent:3.3,scc:145e3,temp:37.2,quality:"Grade A",pricePerLiter:45,totalPrice:729,buyer:"Dairy Co-op",sold:!0,notes:""}],ft=["Morning","Midday","Evening","Night"],jt=["Grade A","Grade B","Grade C","Premium","Standard","Below Standard"];function vt({animals:h}){const E="cattalytics:animal:milkyield",[b,x]=d.useState([]),[g,f]=d.useState(h&&h[0]?h[0].id:""),[j,B]=d.useState("Morning"),[M,q]=d.useState(""),[U,H]=d.useState(""),[P,N]=d.useState(""),[D,A]=d.useState(""),[O,m]=d.useState(""),[k,te]=d.useState("Grade A"),[ne,C]=d.useState("45"),[v,R]=d.useState(""),[G,V]=d.useState(!1),[w,W]=d.useState(""),[t,T]=d.useState(!1),[I,ee]=d.useState("all"),[z,se]=d.useState(""),[$,ce]=d.useState("list"),[oe,me]=d.useState(null);d.useEffect(()=>{const i=localStorage.getItem(E);x(i?JSON.parse(i):yt)},[]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(b)),[b]);function de(){if(!g||!M){alert("Please select animal and enter milk quantity");return}const i=parseFloat(M),u=parseFloat(ne)||0,Z=i*u,ye=h?.find(fe=>fe.id===g)?.name||g;if(oe)x(b.map(fe=>fe.id===oe?{...fe,animalId:g,animalName:ye,session:j,liters:i,fatContent:parseFloat(U)||null,proteinContent:parseFloat(P)||null,scc:parseInt(D)||null,temp:parseFloat(O)||null,quality:k,pricePerLiter:u,totalPrice:Z,buyer:v.trim()||"Not specified",sold:G,notes:w.trim()}:fe)),me(null);else{const fe="MILK-"+Math.floor(1e3+Math.random()*9e3),be={id:fe,animalId:g,animalName:ye,date:new Date().toISOString().slice(0,10),timestamp:new Date().toISOString(),session:j,liters:i,fatContent:parseFloat(U)||null,proteinContent:parseFloat(P)||null,scc:parseInt(D)||null,temp:parseFloat(O)||null,quality:k,pricePerLiter:u,totalPrice:Z,buyer:v.trim()||"Not specified",sold:G,notes:w.trim()};x([...b,be]),G&&Z>0&&rt({amount:Z,category:"Milk Sales",subcategory:v?"Direct Sales":"Wholesale",description:`Milk from ${ye}: ${i} liters @ ${u}/liter`,vendor:v||"Dairy Buyer",source:"Milk Yield",linkedId:fe,date:be.date})}q(""),H(""),N(""),A(""),m(""),C("45"),R(""),V(!1),W(""),T(!1)}function r(i){confirm("Delete record "+i+"?")&&x(b.filter(u=>u.id!==i))}function F(i){me(i.id),f(i.animalId),B(i.session),q(String(i.liters)),H(i.fatContent?String(i.fatContent):""),N(i.proteinContent?String(i.proteinContent):""),A(i.scc?String(i.scc):""),m(i.temp?String(i.temp):""),te(i.quality),C(String(i.pricePerLiter)),R(i.buyer||""),V(i.sold),W(i.notes||""),T(!0)}function Q(){me(null),q(""),H(""),N(""),A(""),m(""),C("45"),R(""),V(!1),W(""),T(!1),h&&h[0]&&f(h[0].id)}const X=b.filter(i=>!(I!=="all"&&i.animalId!==I||z&&i.date!==z)),ve=X.reduce((i,u)=>i+(u.liters||0),0),l=X.reduce((i,u)=>i+(u.sold&&u.totalPrice||0),0),y=X.filter(i=>i.sold).reduce((i,u)=>i+(u.liters||0),0),J=X.length>0?ve/new Set(X.map(i=>i.date)).size:0,le=X.filter(i=>i.fatContent).length>0?X.reduce((i,u)=>i+(u.fatContent||0),0)/X.filter(i=>i.fatContent).length:0,K=X.filter(i=>i.proteinContent).length>0?X.reduce((i,u)=>i+(u.proteinContent||0),0)/X.filter(i=>i.proteinContent).length:0,ie=X.filter(i=>i.scc).length>0?X.reduce((i,u)=>i+(u.scc||0),0)/X.filter(i=>i.scc).length:0,pe={};X.forEach(i=>{pe[i.animalId]||(pe[i.animalId]={total:0,count:0,sessions:{}}),pe[i.animalId].total+=i.liters||0,pe[i.animalId].count+=1,pe[i.animalId].sessions[i.session]||(pe[i.animalId].sessions[i.session]=0),pe[i.animalId].sessions[i.session]+=i.liters||0});const s=()=>{const i=X.map(u=>({ID:u.id,Date:u.date,Animal:u.animalName||u.animalId,Session:u.session,Liters:u.liters,Fat:u.fatContent||"N/A",Protein:u.proteinContent||"N/A",SCC:u.scc||"N/A",Quality:u.quality,Price:u.pricePerLiter,Total:u.totalPrice,Sold:u.sold?"Yes":"No",Buyer:u.buyer||"N/A"}));Fe(i,"milk_production.csv")},o=()=>{const i=X.map(u=>({Date:u.date,Animal:u.animalName||u.animalId,Session:u.session,Liters:u.liters,Quality:u.quality,"Price/L":`KES ${u.pricePerLiter}`,Total:`KES ${u.totalPrice}`,Sold:u.sold?"Yes":"No"}));Ke(i,"milk_production","Milk Production Records")};return e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{children:"ü•õ Milk Production"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:s,title:"Export to CSV",style:{fontSize:12},children:"üìä CSV"}),e.jsx("button",{onClick:()=>we(X,"milk_production.csv"),title:"Export to Excel",style:{fontSize:12},children:"üìà Excel"}),e.jsx("button",{onClick:o,title:"Export to PDF",style:{fontSize:12},children:"üìï PDF"}),e.jsx("button",{onClick:()=>Ie(X,"milk_production.json"),title:"Export to JSON",style:{fontSize:12},children:"üìÑ JSON"}),e.jsx("button",{className:$==="list"?"tab-btn active":"tab-btn",onClick:()=>ce("list"),children:"List"}),e.jsx("button",{className:$==="summary"?"tab-btn active":"tab-btn",onClick:()=>ce("summary"),children:"Summary"}),e.jsx("button",{onClick:()=>T(!t),children:t?oe?"Cancel Edit":"‚úï Cancel":"+ Add Milk Record"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Production"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:[ve.toFixed(1)," L"]})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#d1fae5"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Revenue"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:["KES ",l.toFixed(2)]})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#e0f2fe"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Sold"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#0284c7"},children:[y.toFixed(1)," L"]})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Avg Daily"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:[J.toFixed(1)," L"]})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Avg Fat Content"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:le>0?le.toFixed(1)+"%":"N/A"})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#e0f2fe"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Avg Protein"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#0284c7"},children:K>0?K.toFixed(1)+"%":"N/A"})]}),ie>0&&e.jsxs("div",{className:"card",style:{padding:16,background:ie<2e5?"#d1fae5":ie<4e5?"#fef3c7":"#fee2e2"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Avg SCC"}),e.jsxs("div",{style:{fontSize:20,fontWeight:"bold",color:ie<2e5?"#059669":ie<4e5?"#f59e0b":"#dc2626"},children:[(ie/1e3).toFixed(0),"k"]})]})]}),t&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:oe?"Edit Milk Production Record":"Add Milk Production Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Animal *"}),e.jsxs("select",{value:g,onChange:i=>f(i.target.value),children:[e.jsx("option",{value:"",children:"-- Select Animal --"}),(h||[]).filter(i=>i.sex==="F"&&(i.lactationStatus==="Lactating"||!i.lactationStatus)).map(i=>e.jsxs("option",{value:i.id,children:[i.name||i.tag," (",i.breed,")"]},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Milking Session *"}),e.jsx("select",{value:j,onChange:i=>B(i.target.value),children:ft.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Quantity (Liters) *"}),e.jsx("input",{type:"number",step:"0.1",value:M,onChange:i=>q(i.target.value),placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Fat Content (%)"}),e.jsx("input",{type:"number",step:"0.1",value:U,onChange:i=>H(i.target.value),placeholder:"e.g., 3.8"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Protein Content (%)"}),e.jsx("input",{type:"number",step:"0.1",value:P,onChange:i=>N(i.target.value),placeholder:"e.g., 3.2"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"SCC (cells/mL)"}),e.jsx("input",{type:"number",value:D,onChange:i=>A(i.target.value),placeholder:"e.g., 150000"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Temperature (¬∞C)"}),e.jsx("input",{type:"number",step:"0.1",value:O,onChange:i=>m(i.target.value),placeholder:"e.g., 37.5"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Quality Grade"}),e.jsx("select",{value:k,onChange:i=>te(i.target.value),children:jt.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Price per Liter (KES)"}),e.jsx("input",{type:"number",step:"0.01",value:ne,onChange:i=>C(i.target.value),placeholder:"45.00"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Buyer"}),e.jsx("input",{type:"text",value:v,onChange:i=>R(i.target.value),placeholder:"e.g., Dairy Co-op"})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:G,onChange:i=>V(i.target.checked),style:{width:20,height:20}}),e.jsx("span",{children:"Mark as Sold (Auto-record income)"})]}),G&&ne&&M&&e.jsxs("div",{style:{fontSize:13,color:"#059669",marginTop:4,fontWeight:600},children:["Total: KES ",(parseFloat(M)*parseFloat(ne)).toFixed(2)]})]}),e.jsxs("div",{style:{gridColumn:"span 3"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:w,onChange:i=>W(i.target.value),rows:2,placeholder:"Additional notes about this milking session..."})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:de,children:oe?"Save Changes":"Add Milk Record"}),oe&&e.jsx("button",{onClick:Q,children:"Cancel Edit"}),e.jsx("button",{onClick:()=>T(!1),children:"Cancel"})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16},children:[e.jsxs("select",{value:I,onChange:i=>ee(i.target.value),children:[e.jsx("option",{value:"all",children:"All Animals"}),(h||[]).filter(i=>i.sex==="F").map(i=>e.jsx("option",{value:i.id,children:i.name||i.tag},i.id))]}),e.jsx("input",{type:"date",value:z,onChange:i=>se(i.target.value),placeholder:"Filter by date"}),(I!=="all"||z)&&e.jsx("button",{onClick:()=>{ee("all"),se("")},children:"Clear Filters"})]}),$==="summary"&&e.jsxs("div",{className:"card",style:{padding:20},children:[e.jsx("h4",{style:{marginTop:0},children:"Production Summary by Animal"}),e.jsx("div",{style:{display:"grid",gap:16},children:Object.entries(pe).map(([i,u])=>{const Z=(h||[]).find(fe=>fe.id===i),ye=u.total/u.count;return e.jsxs("div",{className:"card",style:{padding:16,background:"#f9fafb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,marginBottom:4},children:Z?.name||Z?.tag||i}),e.jsx("div",{style:{fontSize:13,color:"#666"},children:Z?.breed})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:[u.total.toFixed(1)," L"]}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[u.count," sessions"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:8},children:[e.jsxs("div",{style:{padding:8,background:"white",borderRadius:4},children:[e.jsx("div",{style:{fontSize:11,color:"#666"},children:"Avg/Session"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600},children:[ye.toFixed(1)," L"]})]}),Object.entries(u.sessions).map(([fe,be])=>e.jsxs("div",{style:{padding:8,background:"white",borderRadius:4},children:[e.jsx("div",{style:{fontSize:11,color:"#666"},children:fe}),e.jsxs("div",{style:{fontSize:16,fontWeight:600},children:[be.toFixed(1)," L"]})]},fe))]})]},i)})})]}),$==="list"&&e.jsx("div",{className:"card",style:{padding:0,overflow:"hidden"},children:X.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"ü•õ"}),e.jsx("h4",{children:"No milk production records yet"}),e.jsx("p",{style:{color:"#666"},children:"Add your first milk record to start tracking"})]}):e.jsx("div",{style:{maxHeight:600,overflowY:"auto"},children:X.sort((i,u)=>new Date(u.timestamp||u.date)-new Date(i.timestamp||i.date)).map(i=>{const u=(h||[]).find(ye=>ye.id===i.animalId),Z=i.scc?i.scc<2e5?"good":i.scc<4e5?"warning":"poor":null;return e.jsxs("div",{style:{padding:16,borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsxs("span",{style:{fontWeight:600,fontSize:18,color:"#059669"},children:[i.liters.toFixed(1)," L"]}),e.jsx("span",{className:"badge",style:{background:"#e0f2fe"},children:i.session}),e.jsx("span",{className:"badge",style:{background:"#f3e8ff"},children:i.quality}),i.sold&&e.jsx("span",{className:"badge",style:{background:"#d1fae5",color:"#065f46"},children:"‚úì Sold"}),i.totalPrice>0&&e.jsxs("span",{style:{fontWeight:600,color:"#059669"},children:["KES ",i.totalPrice.toFixed(2)]}),i.fatContent&&e.jsxs("span",{className:"badge",style:{background:"#fef3c7"},children:["Fat: ",i.fatContent,"%"]}),i.proteinContent&&e.jsxs("span",{className:"badge",style:{background:"#dbeafe"},children:["Protein: ",i.proteinContent,"%"]}),Z&&e.jsxs("span",{className:"badge",style:{background:Z==="good"?"#d1fae5":Z==="warning"?"#fef3c7":"#fee2e2",color:Z==="good"?"#059669":Z==="warning"?"#f59e0b":"#dc2626"},children:["SCC: ",(i.scc/1e3).toFixed(0),"k"]})]}),e.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:u?.name||u?.tag||i.animalId})," ‚Ä¢ ",new Date(i.timestamp||i.date).toLocaleString()]}),i.temp&&e.jsxs("div",{style:{fontSize:13,color:"#888"},children:["Temperature: ",i.temp,"¬∞C"]}),i.notes&&e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8},children:i.notes})]}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{className:"tab-btn",onClick:()=>F(i),children:"‚úèÔ∏è"}),e.jsx("button",{className:"tab-btn",style:{color:"#dc2626"},onClick:()=>r(i.id),children:"üóëÔ∏è"})]})]},i.id)})})})]})}const bt=[{id:"TREAT-001",animalId:"A-001",date:"2025-06-01",timestamp:"2025-06-01T10:30:00",treatmentType:"Hoof Care",treatment:"Hoof trim",veterinarian:"Dr. Smith",medication:"",dosage:"",cost:50,duration:"",nextDue:"",status:"Completed",severity:"Routine",notes:"Regular maintenance"},{id:"TREAT-002",animalId:"A-002",date:"2025-05-28",timestamp:"2025-05-28T14:00:00",treatmentType:"Vaccination",treatment:"Annual vaccination",veterinarian:"Dr. Wilson",medication:"Bovine Vaccine Mix",dosage:"2ml IM",cost:25,duration:"",nextDue:"2026-05-28",status:"Completed",severity:"Preventive",notes:""}],_e=["Vaccination","Medication","Surgery","Hoof Care","Dental","Wound Care","Parasite Control","Disease Treatment","Preventive Care","Emergency","Other"],Je=["Scheduled","In Progress","Completed","Follow-up Required","Cancelled"],Dt=["Routine","Preventive","Minor","Moderate","Severe","Critical","Emergency"];function Ct({animals:h}){const E="cattalytics:animal:treatment",[b,x]=d.useState([]),[g,f]=d.useState(h&&h[0]?h[0].id:""),[j,B]=d.useState("Medication"),[M,q]=d.useState(""),[U,H]=d.useState(""),[P,N]=d.useState(""),[D,A]=d.useState(""),[O,m]=d.useState(""),[k,te]=d.useState(""),[ne,C]=d.useState(""),[v,R]=d.useState("Completed"),[G,V]=d.useState("Routine"),[w,W]=d.useState(""),[t,T]=d.useState(!1),[I,ee]=d.useState(null),[z,se]=d.useState("all"),[$,ce]=d.useState("all"),[oe,me]=d.useState("all"),[de,r]=d.useState([]),[F,Q]=d.useState("");d.useEffect(()=>{const c=localStorage.getItem(E);x(c?JSON.parse(c):bt),r(Ge())},[]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(b)),[b]);function X(){if(!g||!M.trim()){alert("Please select animal and enter treatment description");return}const c=parseFloat(O)||0,S=h?.find(Y=>Y.id===g)?.name||g;if(I)x(b.map(Y=>Y.id===I?{...Y,animalId:g,treatmentType:j,treatment:M.trim(),veterinarian:U.trim(),medication:P.trim(),dosage:D.trim(),cost:c,duration:k.trim(),nextDue:ne,status:v,severity:G,notes:w.trim()}:Y)),ee(null);else{const Y="TREAT-"+Math.floor(1e3+Math.random()*9e3),ge={id:Y,animalId:g,date:new Date().toISOString().slice(0,10),timestamp:new Date().toISOString(),treatmentType:j,treatment:M.trim(),veterinarian:U.trim(),medication:P.trim(),dosage:D.trim(),cost:c,duration:k.trim(),nextDue:ne,status:v,severity:G,notes:w.trim()};if(F){const De=parseFloat(D)||1;if(!st(F,De,S,`Treatment: ${M}`)){alert("Failed to deduct from inventory. Please check stock levels.");return}}c>0&&lt({amount:c,category:"Veterinary",subcategory:j,description:`${j} for ${S}: ${M}`,vendor:U||"Vet Service",source:"Animal Treatment",linkedId:Y}),x([...b,ge])}q(""),H(""),N(""),A(""),m(""),te(""),C(""),W(""),Q(""),T(!1),r(Ge())}function ve(c){f(c.animalId),B(c.treatmentType),q(c.treatment),H(c.veterinarian||""),N(c.medication||""),A(c.dosage||""),m(c.cost||""),te(c.duration||""),C(c.nextDue||""),R(c.status),V(c.severity),W(c.notes||""),ee(c.id),T(!0),window.scrollTo({top:0,behavior:"smooth"})}function l(){q(""),H(""),N(""),A(""),m(""),te(""),C(""),W(""),Q(""),ee(null),T(!1)}function y(c){confirm("Delete record "+c+"?")&&x(b.filter(S=>S.id!==c))}const J=b.filter(c=>!(z!=="all"&&c.animalId!==z||$!=="all"&&c.treatmentType!==$||oe!=="all"&&c.status!==oe)),le=J.reduce((c,S)=>c+(S.cost||0),0),K=J.filter(c=>{if(!c.nextDue)return!1;const S=Math.floor((new Date(c.nextDue)-new Date)/(1e3*60*60*24));return S<=30&&S>=0}),ie=J.filter(c=>c.severity==="Critical"||c.severity==="Emergency"||c.severity==="Severe"),pe=J.filter(c=>c.status==="Follow-up Required"),s={};J.forEach(c=>{s[c.treatmentType]||(s[c.treatmentType]={count:0,cost:0}),s[c.treatmentType].count+=1,s[c.treatmentType].cost+=c.cost||0});const o=d.useRef(null);function i(){const c=J.map(S=>{const Y=(h||[]).find(ge=>ge.id===S.animalId);return{id:S.id,animalTag:Y?.tag||S.animalId,animalName:Y?.name||"",date:S.date,treatmentType:S.treatmentType,treatment:S.treatment,veterinarian:S.veterinarian,medication:S.medication,dosage:S.dosage,cost:S.cost,status:S.status,severity:S.severity,nextDue:S.nextDue,notes:S.notes}});Fe(c,"treatment_records.csv")}function u(){const c=J.map(S=>{const Y=(h||[]).find(ge=>ge.id===S.animalId);return{id:S.id,animalTag:Y?.tag||S.animalId,animalName:Y?.name||"",date:S.date,treatmentType:S.treatmentType,treatment:S.treatment,veterinarian:S.veterinarian,medication:S.medication,dosage:S.dosage,cost:S.cost,status:S.status,severity:S.severity,nextDue:S.nextDue,notes:S.notes}});we(c,"treatment_records_export.csv")}function Z(){Ie(J,"treatment_records.json")}function ye(){const c=J.map(S=>({ID:S.id,Date:S.date,Animal:h?.find(Y=>Y.id===S.animalId)?.name||S.animalId,Type:S.treatmentType,Treatment:S.treatment,Veterinarian:S.veterinarian,Medication:S.medication||"N/A",Cost:`KES ${S.cost}`,Status:S.status,Severity:S.severity,Notes:S.notes||""}));Ke(c,"treatment_records","Animal Treatment Records")}function fe(){o.current?.click()}function be(c){const S=c.target.files?.[0];if(!S)return;const Y=S.name.split(".").pop()?.toLowerCase();Y==="json"?Ze(S,(ge,De)=>{if(De){alert("Import failed: "+De.message);return}if(confirm(`Import ${ge.length} treatment records? This will merge with existing data.`)){const Ce=ge.map(a=>({...a,id:a.id||"TREAT-"+Math.floor(1e3+Math.random()*9e3)}));x([...b,...Ce]),alert(`Imported ${Ce.length} treatment records`)}}):Y==="csv"?et(S,(ge,De)=>{if(De){alert("Import failed: "+De.message);return}if(confirm(`Import ${ge.length} treatment records? This will merge with existing data.`)){const Ce=ge.map(a=>({id:a.id||"TREAT-"+Math.floor(1e3+Math.random()*9e3),animalId:a.animalId||"",date:a.date||new Date().toISOString().slice(0,10),timestamp:a.timestamp||new Date().toISOString(),treatmentType:a.treatmentType||"Other",treatment:a.treatment||"",veterinarian:a.veterinarian||"",medication:a.medication||"",dosage:a.dosage||"",cost:a.cost?Number(a.cost):0,duration:a.duration||"",nextDue:a.nextDue||"",status:a.status||"Completed",severity:a.severity||"Routine",notes:a.notes||""}));x([...b,...Ce]),alert(`Imported ${Ce.length} treatment records`)}}):alert("Unsupported file type. Use CSV or JSON."),c.target.value=""}function Se(){if(J.length===0){alert("No treatment records to print");return}Re(J,c=>{const S=(h||[]).find(Y=>Y.id===c.animalId);return`
        <div style="padding: 20px; border: 2px solid #000;">
          <h2 style="margin-top: 0;">üíä Treatment Record: ${c.id}</h2>
          <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <tr>
              <th style="text-align: left; width: 150px; border: 1px solid #000; padding: 8px;">Animal:</th>
              <td style="border: 1px solid #000; padding: 8px;">${S?.tag||c.animalId} - ${S?.name||"N/A"}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Date:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.date}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Treatment Type:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.treatmentType}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Treatment:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.treatment}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Veterinarian:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.veterinarian||"N/A"}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Medication:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.medication||"N/A"}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Dosage:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.dosage||"N/A"}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Status:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.status}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Severity:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.severity}</td>
            </tr>
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Cost:</th>
              <td style="border: 1px solid #000; padding: 8px;">$${c.cost||0}</td>
            </tr>
            ${c.nextDue?`
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Next Due:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.nextDue}</td>
            </tr>
            `:""}
            ${c.notes?`
            <tr>
              <th style="text-align: left; border: 1px solid #000; padding: 8px;">Notes:</th>
              <td style="border: 1px solid #000; padding: 8px;">${c.notes}</td>
            </tr>
            `:""}
          </table>
        </div>
      `},"Treatment Records","Animal Treatment Records")}return e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:8},children:[e.jsx("h3",{children:"üíä Treatments & Medical Records"}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:i,title:"Export to CSV",style:{fontSize:12},children:"üìä CSV"}),e.jsx("button",{onClick:u,title:"Export to Excel",style:{fontSize:12},children:"üìà Excel"}),e.jsx("button",{onClick:ye,title:"Export to PDF",style:{fontSize:12},children:"üìï PDF"}),e.jsx("button",{onClick:Z,title:"Export to JSON",style:{fontSize:12},children:"üìÑ JSON"}),e.jsx("button",{onClick:fe,title:"Import from file",style:{fontSize:12},children:"üì• Import"}),e.jsx("button",{onClick:Se,title:"Print all records",style:{fontSize:12},children:"üñ®Ô∏è Print"}),e.jsx("input",{ref:o,type:"file",accept:".csv,.json",style:{display:"none"},onChange:be}),e.jsx("button",{onClick:()=>T(!t),children:t?I?"Cancel Edit":"‚úï Cancel":"+ Add Treatment Record"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Treatments"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:J.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fee2e2"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Critical Cases"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#dc2626"},children:ie.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Upcoming (30 days)"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:K.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#e0f2fe"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Pending Follow-ups"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#0284c7"},children:pe.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Cost"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:["$",le.toFixed(2)]})]})]}),(K.length>0||pe.length>0||ie.length>0)&&e.jsxs("div",{style:{marginBottom:16,display:"flex",flexDirection:"column",gap:12},children:[ie.filter(c=>c.status!=="Completed").length>0&&e.jsxs("div",{className:"card",style:{padding:16,background:"#fee2e2",borderLeft:"4px solid #dc2626"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:"#7f1d1d"},children:"üö® Critical Cases Requiring Attention"}),ie.filter(c=>c.status!=="Completed").map(c=>{const S=(h||[]).find(Y=>Y.id===c.animalId);return e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid #fecaca"},children:[e.jsx("strong",{children:S?.name||S?.tag||c.animalId})," - ",c.treatment," (",c.severity,")"]},c.id)})]}),K.length>0&&e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7",borderLeft:"4px solid #f59e0b"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:"#92400e"},children:"‚ö†Ô∏è Upcoming Treatments"}),K.map(c=>{const S=(h||[]).find(ge=>ge.id===c.animalId),Y=Math.floor((new Date(c.nextDue)-new Date)/(1e3*60*60*24));return e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid #fbbf24"},children:[e.jsx("strong",{children:S?.name||S?.tag||c.animalId})," - ",c.treatment," (Due in ",Y," days - ",new Date(c.nextDue).toLocaleDateString(),")"]},c.id)})]})]}),t&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:I?"Edit Treatment Record":"Add Treatment Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Animal *"}),e.jsxs("select",{value:g,onChange:c=>f(c.target.value),children:[e.jsx("option",{value:"",children:"-- Select Animal --"}),(h||[]).map(c=>e.jsxs("option",{value:c.id,children:[c.name||c.tag," (",c.breed,")"]},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Treatment Type *"}),e.jsx("select",{value:j,onChange:c=>B(c.target.value),children:_e.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Severity Level"}),e.jsx("select",{value:G,onChange:c=>V(c.target.value),children:Dt.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{style:{gridColumn:"span 3"},children:[e.jsx("label",{children:"Treatment Description *"}),e.jsx("input",{value:M,onChange:c=>q(c.target.value),placeholder:"e.g., Administered antibiotic for respiratory infection"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Veterinarian/Handler"}),e.jsx("input",{value:U,onChange:c=>H(c.target.value),placeholder:"Dr. Smith"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Medication"}),e.jsx("input",{value:P,onChange:c=>N(c.target.value),placeholder:"e.g., Penicillin"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Dosage"}),e.jsx("input",{value:D,onChange:c=>A(c.target.value),placeholder:"e.g., 5ml IM"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Cost (KSH)"}),e.jsx("input",{type:"number",step:"0.01",value:O,onChange:c=>m(c.target.value),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Treatment Duration"}),e.jsx("input",{value:k,onChange:c=>te(c.target.value),placeholder:"e.g., 7 days"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Next Due Date"}),e.jsx("input",{type:"date",value:ne,onChange:c=>C(c.target.value)})]}),e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Status"}),e.jsx("select",{value:v,onChange:c=>R(c.target.value),children:Je.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{style:{gridColumn:"span 3"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:w,onChange:c=>W(c.target.value),rows:3,placeholder:"Additional medical notes, observations, or instructions..."})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:X,children:I?"Save Changes":"Add Treatment"}),e.jsx("button",{onClick:l,className:"secondary",children:"Cancel"})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16,flexWrap:"wrap"},children:[e.jsxs("select",{value:z,onChange:c=>se(c.target.value),children:[e.jsx("option",{value:"all",children:"All Animals"}),(h||[]).map(c=>e.jsx("option",{value:c.id,children:c.name||c.tag},c.id))]}),e.jsxs("select",{value:$,onChange:c=>ce(c.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),_e.map(c=>e.jsx("option",{value:c,children:c},c))]}),e.jsxs("select",{value:oe,onChange:c=>me(c.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),Je.map(c=>e.jsx("option",{value:c,children:c},c))]}),(z!=="all"||$!=="all"||oe!=="all")&&e.jsx("button",{onClick:()=>{se("all"),ce("all"),me("all")},children:"Clear Filters"})]}),Object.keys(s).length>0&&e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16,background:"#f9fafb"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Treatment Summary by Type"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},children:Object.entries(s).map(([c,S])=>e.jsxs("div",{style:{padding:12,background:"white",borderRadius:6},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:c}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[S.count," treatments ‚Ä¢ $",S.cost.toFixed(2)]})]},c))})]}),e.jsx("div",{className:"card",style:{padding:0,overflow:"hidden"},children:J.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"üíä"}),e.jsx("h4",{children:"No treatment records yet"}),e.jsx("p",{style:{color:"#666"},children:"Add your first treatment record to start tracking"})]}):e.jsx("div",{style:{maxHeight:600,overflowY:"auto"},children:J.sort((c,S)=>new Date(S.timestamp||S.date)-new Date(c.timestamp||c.date)).map(c=>{const S=(h||[]).find(ge=>ge.id===c.animalId),Y=c.severity==="Critical"||c.severity==="Emergency"?"#dc2626":c.severity==="Severe"?"#f59e0b":c.severity==="Preventive"?"#059669":"#6b7280";return e.jsx("div",{style:{padding:16,borderBottom:"1px solid #eee",borderLeft:`4px solid ${Y}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:16},children:c.treatment}),e.jsx("span",{className:"badge",style:{background:"#e0f2fe"},children:c.treatmentType}),e.jsx("span",{className:"badge",style:{background:c.status==="Completed"?"#d1fae5":c.status==="Follow-up Required"?"#fef3c7":c.status==="In Progress"?"#dbeafe":"#f3f4f6",color:c.status==="Completed"?"#059669":c.status==="Follow-up Required"?"#f59e0b":c.status==="In Progress"?"#0284c7":"#6b7280"},children:c.status}),e.jsx("span",{className:"badge",style:{background:"#fee2e2",color:Y},children:c.severity}),c.cost>0&&e.jsxs("span",{className:"badge",style:{background:"#d1fae5"},children:["KSH ",Number(c.cost).toLocaleString()]})]}),e.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:8},children:[e.jsx("strong",{children:S?.name||S?.tag||c.animalId})," ‚Ä¢ ",new Date(c.timestamp||c.date).toLocaleDateString(),c.veterinarian&&` ‚Ä¢ ${c.veterinarian}`]}),c.medication&&e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Medication:"})," ",c.medication," ",c.dosage&&`(${c.dosage})`]}),c.duration&&e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Duration:"})," ",c.duration]}),c.nextDue&&e.jsxs("div",{style:{fontSize:13,color:"#059669",marginBottom:4},children:[e.jsx("strong",{children:"Next Due:"})," ",new Date(c.nextDue).toLocaleDateString()]}),c.notes&&e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8,padding:8,background:"#f9fafb",borderRadius:4},children:c.notes})]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{className:"tab-btn",onClick:()=>ve(c),children:"‚úèÔ∏è"}),e.jsx("button",{className:"tab-btn",style:{color:"#dc2626"},onClick:()=>y(c.id),children:"üóëÔ∏è"})]})]})},c.id)})})})]})}const Nt=[{id:"CALF-001",tag:"CALF-101",name:"Daisy Jr.",damId:"A-001",damName:"Bessie",sireId:"S-101",sireName:"Premium Bull",dob:"2025-10-15",sex:"F",breed:"Holstein",birthWeight:38,currentWeight:45,weaningDate:"",weaningWeight:"",healthStatus:"Healthy",housingType:"Individual Pen",notes:"",colostrumIntake:"Adequate",navelTreatment:"Done",vaccination:[],dehorning:"",castration:"N/A"},{id:"CALF-002",tag:"CALF-102",name:"Thunder",damId:"A-002",damName:"Molly",sireId:"S-100",sireName:"Duke",dob:"2025-09-20",sex:"M",breed:"Jersey",birthWeight:32,currentWeight:55,weaningDate:"2025-11-20",weaningWeight:75,healthStatus:"Healthy",housingType:"Group Pen",notes:"Strong calf",colostrumIntake:"Adequate",navelTreatment:"Done",vaccination:["Brucella"],dehorning:"2025-10-05",castration:"2025-10-10"}],St=["Healthy","Sick","Under Treatment","Quarantine","Recovered"],Pt=["Individual Pen","Group Pen","Hutch","Barn","Free Range"],Ft=["Adequate","Insufficient","Unknown","Bottle Fed","Tube Fed"],Et=["Bottle","Bucket","Nursing","Automatic Feeder"];function Mt({animals:h}){const E="cattalytics:calf:management",b="cattalytics:calf:feeding",x="cattalytics:calf:health",[g,f]=d.useState([]),[j,B]=d.useState([]),[M,q]=d.useState([]),[U,H]=d.useState(!1),[P,N]=d.useState(null),[D,A]=d.useState("overview"),[O,m]=d.useState(null),[k,te]=d.useState(null),[ne,C]=d.useState(null),[v,R]=d.useState({tag:"",name:"",damId:"",damName:"",sireId:"",sireName:"",dob:"",sex:"F",breed:"",birthWeight:"",currentWeight:"",weaningDate:"",weaningWeight:"",healthStatus:"Healthy",housingType:"Individual Pen",colostrumIntake:"Adequate",navelTreatment:"",vaccination:[],dehorning:"",castration:"N/A",notes:""}),[G,V]=d.useState({calfId:"",date:new Date().toISOString().slice(0,10),feedType:"Milk Replacer",quantity:"",method:"Bottle",temperature:"",notes:""}),[w,W]=d.useState({calfId:"",date:new Date().toISOString().slice(0,10),type:"Vaccination",treatment:"",diagnosis:"",medication:"",dosage:"",veterinarian:"",cost:"",nextVisit:"",notes:""});d.useEffect(()=>{const r=localStorage.getItem(E);f(r?JSON.parse(r):Nt);const F=localStorage.getItem(b);F&&B(JSON.parse(F));const Q=localStorage.getItem(x);Q&&q(JSON.parse(Q))},[]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(g)),[g]),d.useEffect(()=>localStorage.setItem(b,JSON.stringify(j)),[j]),d.useEffect(()=>localStorage.setItem(x,JSON.stringify(M)),[M]);function t(){if(!v.tag||!v.dob){alert("Please provide tag and date of birth");return}if(O)f(g.map(r=>r.id===O?{...r,...v}:r)),m(null);else{const r="CALF-"+Date.now(),F={...v,id:r,vaccination:v.vaccination||[]};f([...g,F])}$(),H(!1)}function T(r){m(r.id),R({...r}),H(!0)}function I(){m(null),$(),H(!1)}function ee(r){confirm("Delete this calf record?")&&(f(g.filter(F=>F.id!==r)),P?.id===r&&N(null))}function z(){if(!G.calfId||!G.quantity){alert("Please select calf and enter quantity");return}if(k)B(j.map(r=>r.id===k?{...r,...G}:r)),te(null);else{const r="FEED-"+Date.now();B([...j,{...G,id:r,timestamp:new Date().toISOString()}])}V({...G,quantity:"",notes:""})}function se(){if(!w.calfId||!w.type){alert("Please select calf and type");return}if(ne)q(M.map(r=>r.id===ne?{...r,...w}:r)),C(null);else{const r="HEALTH-"+Date.now();q([...M,{...w,id:r,timestamp:new Date().toISOString()}])}W({...w,treatment:"",medication:"",dosage:"",cost:"",notes:""})}function $(){R({tag:"",name:"",damId:"",damName:"",sireId:"",sireName:"",dob:"",sex:"F",breed:"",birthWeight:"",currentWeight:"",weaningDate:"",weaningWeight:"",healthStatus:"Healthy",housingType:"Individual Pen",colostrumIntake:"Adequate",navelTreatment:"",vaccination:[],dehorning:"",castration:"N/A",notes:""})}const ce=g.filter(r=>!r.weaningDate||new Date(r.weaningDate)>new Date),oe=g.filter(r=>r.weaningDate&&new Date(r.weaningDate)<=new Date),me=g.length?g.reduce((r,F)=>r+(parseFloat(F.birthWeight)||0),0)/g.length:0,de=g.filter(r=>r.healthStatus==="Sick"||r.healthStatus==="Under Treatment");return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{children:"üêÆ Calf Management System"}),e.jsx("button",{onClick:()=>H(!U),children:U?"‚úï Cancel":"+ Add Calf"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Active Calves"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:ce.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Weaned Calves"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:oe.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fee2e2"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Sick/Under Treatment"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#dc2626"},children:de.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Avg Birth Weight"}),e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:[me.toFixed(1)," kg"]})]})]}),U&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:"Add New Calf"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Tag/ID *"}),e.jsx("input",{value:v.tag,onChange:r=>R({...v,tag:r.target.value}),placeholder:"CALF-101"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("input",{value:v.name,onChange:r=>R({...v,name:r.target.value}),placeholder:"Calf name"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date of Birth *"}),e.jsx("input",{type:"date",value:v.dob,onChange:r=>R({...v,dob:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sex"}),e.jsxs("select",{value:v.sex,onChange:r=>R({...v,sex:r.target.value}),children:[e.jsx("option",{value:"F",children:"Female"}),e.jsx("option",{value:"M",children:"Male"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Breed"}),e.jsx("input",{value:v.breed,onChange:r=>R({...v,breed:r.target.value}),placeholder:"Holstein"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Birth Weight (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:v.birthWeight,onChange:r=>R({...v,birthWeight:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Dam (Mother)"}),e.jsxs("select",{value:v.damId,onChange:r=>{const F=h?.find(Q=>Q.id===r.target.value);R({...v,damId:r.target.value,damName:F?.name||F?.tag||""})},children:[e.jsx("option",{value:"",children:"-- Select Dam --"}),(h||[]).filter(r=>r.sex==="F").map(r=>e.jsxs("option",{value:r.id,children:[r.name||r.tag," (",r.breed,")"]},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sire ID"}),e.jsx("input",{value:v.sireId,onChange:r=>R({...v,sireId:r.target.value}),placeholder:"S-101"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sire Name"}),e.jsx("input",{value:v.sireName,onChange:r=>R({...v,sireName:r.target.value}),placeholder:"Bull name"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Health Status"}),e.jsx("select",{value:v.healthStatus,onChange:r=>R({...v,healthStatus:r.target.value}),children:St.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Housing Type"}),e.jsx("select",{value:v.housingType,onChange:r=>R({...v,housingType:r.target.value}),children:Pt.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Colostrum Intake"}),e.jsx("select",{value:v.colostrumIntake,onChange:r=>R({...v,colostrumIntake:r.target.value}),children:Ft.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Navel Treatment Date"}),e.jsx("input",{type:"date",value:v.navelTreatment,onChange:r=>R({...v,navelTreatment:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Dehorning Date"}),e.jsx("input",{type:"date",value:v.dehorning,onChange:r=>R({...v,dehorning:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Castration Date (if applicable)"}),e.jsx("input",{type:"date",value:v.castration,onChange:r=>R({...v,castration:r.target.value})})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:v.notes,onChange:r=>R({...v,notes:r.target.value}),rows:2})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:t,children:O?"Update Calf":"Add Calf"}),O?e.jsx("button",{onClick:I,style:{background:"#6b7280"},children:"Cancel Edit"}):e.jsx("button",{onClick:()=>H(!1),style:{background:"#6b7280"},children:"Cancel"})]})]}),e.jsxs("div",{style:{marginBottom:16,borderBottom:"2px solid #e5e7eb"},children:[e.jsx("button",{onClick:()=>A("overview"),style:{padding:"8px 16px",border:"none",background:D==="overview"?"#059669":"transparent",color:D==="overview"?"#fff":"#666",borderBottom:D==="overview"?"2px solid #059669":"none",cursor:"pointer"},children:"Calves Overview"}),e.jsx("button",{onClick:()=>A("feeding"),style:{padding:"8px 16px",border:"none",background:D==="feeding"?"#059669":"transparent",color:D==="feeding"?"#fff":"#666",borderBottom:D==="feeding"?"2px solid #059669":"none",cursor:"pointer"},children:"Feeding Records"}),e.jsx("button",{onClick:()=>A("health"),style:{padding:"8px 16px",border:"none",background:D==="health"?"#059669":"transparent",color:D==="health"?"#fff":"#666",borderBottom:D==="health"?"2px solid #059669":"none",cursor:"pointer"},children:"Health Records"})]}),D==="overview"&&e.jsx("div",{className:"card",style:{padding:0,overflow:"hidden"},children:g.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"üêÆ"}),e.jsx("h4",{children:"No calves recorded yet"}),e.jsx("p",{style:{color:"#666"},children:"Add your first calf to start tracking"})]}):e.jsx("div",{style:{maxHeight:600,overflowY:"auto"},children:g.map(r=>{const F=Math.floor((new Date-new Date(r.dob))/864e5),Q=Math.floor(F/7),X=r.weaningDate&&new Date(r.weaningDate)<=new Date;return e.jsx("div",{style:{padding:16,borderBottom:"1px solid #eee"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:16},children:r.name||r.tag}),e.jsx("span",{className:"badge",children:r.sex==="F"?"‚ôÄ Female":"‚ôÇ Male"}),e.jsx("span",{className:"badge",style:{background:r.healthStatus==="Healthy"?"#d1fae5":"#fee2e2"},children:r.healthStatus}),X&&e.jsx("span",{className:"badge",style:{background:"#e0f2fe"},children:"Weaned"})]}),e.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Tag:"})," ",r.tag," ‚Ä¢ ",e.jsx("strong",{children:"Breed:"})," ",r.breed," ‚Ä¢ ",e.jsx("strong",{children:"Age:"})," ",Q," weeks (",F," days)"]}),e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Dam:"})," ",r.damName||r.damId||"Unknown"," ‚Ä¢ ",e.jsx("strong",{children:"Sire:"})," ",r.sireName||r.sireId||"Unknown"]}),e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Birth Weight:"})," ",r.birthWeight," kg ‚Ä¢ ",e.jsx("strong",{children:"Current Weight:"})," ",r.currentWeight||"Not recorded"," kg"]}),e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Housing:"})," ",r.housingType," ‚Ä¢ ",e.jsx("strong",{children:"Colostrum:"})," ",r.colostrumIntake]}),r.notes&&e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8,fontStyle:"italic"},children:r.notes})]}),e.jsxs("div",{style:{display:"flex",gap:4,flexDirection:"column"},children:[e.jsx("button",{onClick:()=>N(r),style:{fontSize:12,padding:"4px 8px"},children:"View Details"}),e.jsx("button",{onClick:()=>T(r),style:{fontSize:12,padding:"4px 8px",background:"#3b82f6"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>ee(r.id),style:{fontSize:12,padding:"4px 8px",background:"#dc2626"},children:"üóëÔ∏è Delete"})]})]})},r.id)})})}),D==="feeding"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16},children:[e.jsx("h4",{style:{marginTop:0},children:"Add Feeding Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Calf *"}),e.jsxs("select",{value:G.calfId,onChange:r=>V({...G,calfId:r.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Calf --"}),g.map(r=>e.jsx("option",{value:r.id,children:r.name||r.tag},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:G.date,onChange:r=>V({...G,date:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Feed Type"}),e.jsx("input",{value:G.feedType,onChange:r=>V({...G,feedType:r.target.value}),placeholder:"Milk Replacer"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Quantity (liters) *"}),e.jsx("input",{type:"number",step:"0.1",value:G.quantity,onChange:r=>V({...G,quantity:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Method"}),e.jsx("select",{value:G.method,onChange:r=>V({...G,method:r.target.value}),children:Et.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Temperature (¬∞C)"}),e.jsx("input",{type:"number",step:"0.1",value:G.temperature,onChange:r=>V({...G,temperature:r.target.value})})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:G.notes,onChange:r=>V({...G,notes:r.target.value})})]})]}),e.jsx("button",{onClick:z,style:{marginTop:12},children:"Add Feeding Record"})]}),e.jsx("div",{className:"card",style:{padding:0},children:j.length===0?e.jsx("div",{style:{padding:40,textAlign:"center"},children:e.jsx("h4",{children:"No feeding records yet"})}):e.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:j.sort((r,F)=>new Date(F.timestamp)-new Date(r.timestamp)).map(r=>{const F=g.find(Q=>Q.id===r.calfId);return e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee"},children:[e.jsx("div",{style:{fontWeight:600},children:F?.name||F?.tag||r.calfId}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[new Date(r.date).toLocaleDateString()," ‚Ä¢ ",r.feedType," ‚Ä¢ ",r.quantity,"L ‚Ä¢ ",r.method,r.temperature&&` ‚Ä¢ ${r.temperature}¬∞C`]}),r.notes&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4},children:r.notes})]},r.id)})})})]}),D==="health"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16},children:[e.jsx("h4",{style:{marginTop:0},children:"Add Health Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Calf *"}),e.jsxs("select",{value:w.calfId,onChange:r=>W({...w,calfId:r.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Calf --"}),g.map(r=>e.jsx("option",{value:r.id,children:r.name||r.tag},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:w.date,onChange:r=>W({...w,date:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Type *"}),e.jsxs("select",{value:w.type,onChange:r=>W({...w,type:r.target.value}),children:[e.jsx("option",{value:"Vaccination",children:"Vaccination"}),e.jsx("option",{value:"Treatment",children:"Treatment"}),e.jsx("option",{value:"Checkup",children:"Checkup"}),e.jsx("option",{value:"Deworming",children:"Deworming"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Treatment/Vaccine"}),e.jsx("input",{value:w.treatment,onChange:r=>W({...w,treatment:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Diagnosis"}),e.jsx("input",{value:w.diagnosis,onChange:r=>W({...w,diagnosis:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Medication"}),e.jsx("input",{value:w.medication,onChange:r=>W({...w,medication:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Dosage"}),e.jsx("input",{value:w.dosage,onChange:r=>W({...w,dosage:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Veterinarian"}),e.jsx("input",{value:w.veterinarian,onChange:r=>W({...w,veterinarian:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Cost"}),e.jsx("input",{type:"number",step:"0.01",value:w.cost,onChange:r=>W({...w,cost:r.target.value})})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:w.notes,onChange:r=>W({...w,notes:r.target.value})})]})]}),e.jsx("button",{onClick:se,style:{marginTop:12},children:"Add Health Record"})]}),e.jsx("div",{className:"card",style:{padding:0},children:M.length===0?e.jsx("div",{style:{padding:40,textAlign:"center"},children:e.jsx("h4",{children:"No health records yet"})}):e.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:M.sort((r,F)=>new Date(F.timestamp)-new Date(r.timestamp)).map(r=>{const F=g.find(Q=>Q.id===r.calfId);return e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{fontWeight:600},children:F?.name||F?.tag||r.calfId}),e.jsx("span",{className:"badge",children:r.type}),r.cost&&e.jsx("span",{className:"badge",style:{background:"#d1fae5"},children:Ee(parseFloat(r.cost))})]}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[new Date(r.date).toLocaleDateString(),r.treatment&&` ‚Ä¢ ${r.treatment}`,r.diagnosis&&` ‚Ä¢ ${r.diagnosis}`]}),r.medication&&e.jsxs("div",{style:{fontSize:13,color:"#666"},children:["Medication: ",r.medication," ",r.dosage&&`(${r.dosage})`]}),r.veterinarian&&e.jsxs("div",{style:{fontSize:12,color:"#888"},children:["Vet: ",r.veterinarian]}),r.notes&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4},children:r.notes})]},r.id)})})})]}),P&&e.jsx("div",{className:"drawer-overlay",onClick:()=>N(null),children:e.jsxs("div",{className:"drawer",onClick:r=>r.stopPropagation(),style:{maxWidth:"800px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{children:P.name||P.tag}),e.jsx("button",{onClick:()=>N(null),children:"Close"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Tag:"})," ",P.tag]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Sex:"})," ",P.sex==="F"?"Female":"Male"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Breed:"})," ",P.breed]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date of Birth:"})," ",new Date(P.dob).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Dam:"})," ",P.damName||P.damId||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Sire:"})," ",P.sireName||P.sireId||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Birth Weight:"})," ",P.birthWeight," kg"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Current Weight:"})," ",P.currentWeight||"Not recorded"," kg"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Health Status:"})," ",P.healthStatus]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Housing:"})," ",P.housingType]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Colostrum Intake:"})," ",P.colostrumIntake]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Navel Treatment:"})," ",P.navelTreatment?new Date(P.navelTreatment).toLocaleDateString():"Not done"]}),P.dehorning&&e.jsxs("div",{children:[e.jsx("strong",{children:"Dehorning:"})," ",new Date(P.dehorning).toLocaleDateString()]}),P.castration&&P.castration!=="N/A"&&e.jsxs("div",{children:[e.jsx("strong",{children:"Castration:"})," ",new Date(P.castration).toLocaleDateString()]}),P.weaningDate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Weaning Date:"})," ",new Date(P.weaningDate).toLocaleDateString()]}),P.weaningWeight&&e.jsxs("div",{children:[e.jsx("strong",{children:"Weaning Weight:"})," ",P.weaningWeight," kg"]})]}),P.notes&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("strong",{children:"Notes:"}),e.jsx("p",{style:{color:"#666",marginTop:8},children:P.notes})]})]})})]})}const At=[{id:"BSF-001",name:"Colony A",location:"Barn 1",establishedDate:"2025-09-01",status:"Active",population:5e3,substrate:"Food Waste",substrateAmount:50,temperature:28,humidity:70,notes:"Good production"},{id:"BSF-002",name:"Colony B",location:"Barn 2",establishedDate:"2025-10-15",status:"Growing",population:2e3,substrate:"Mixed Organic",substrateAmount:30,temperature:27,humidity:65,notes:""}],Ye=["Food Waste","Animal Manure","Vegetable Waste","Mixed Organic","Brewery Waste","Fish Waste"],Tt=["Active","Growing","Inactive","Harvesting","Maintenance"],kt=["Larvae","Prepupae","Adult Flies","Frass (Compost)"];function wt(){const h="cattalytics:bsf:colonies",E="cattalytics:bsf:feeding",b="cattalytics:bsf:harvest",[x,g]=d.useState([]),[f,j]=d.useState([]),[B,M]=d.useState([]),[q,U]=d.useState(!1),[H,P]=d.useState("colonies"),[N,D]=d.useState({name:"",location:"",establishedDate:new Date().toISOString().slice(0,10),status:"Growing",population:"",substrate:"Food Waste",substrateAmount:"",temperature:"",humidity:"",notes:""}),[A,O]=d.useState({colonyId:"",date:new Date().toISOString().slice(0,10),substrate:"Food Waste",amount:"",cost:"",notes:""}),[m,k]=d.useState({colonyId:"",date:new Date().toISOString().slice(0,10),type:"Larvae",quantity:"",weight:"",quality:"Good",purpose:"Animal Feed",salePrice:"",notes:""});d.useEffect(()=>{const t=localStorage.getItem(h);g(t?JSON.parse(t):At);const T=localStorage.getItem(E);T&&j(JSON.parse(T));const I=localStorage.getItem(b);I&&M(JSON.parse(I))},[]),d.useEffect(()=>localStorage.setItem(h,JSON.stringify(x)),[x]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(f)),[f]),d.useEffect(()=>localStorage.setItem(b,JSON.stringify(B)),[B]);function te(){if(!N.name){alert("Please provide colony name");return}const t="BSF-"+Date.now();g([...x,{...N,id:t}]),R(),U(!1)}function ne(t){confirm("Delete this colony?")&&g(x.filter(T=>T.id!==t))}function C(){if(!A.colonyId||!A.amount){alert("Please select colony and enter amount");return}const t="FEED-"+Date.now();j([...f,{...A,id:t,timestamp:new Date().toISOString()}]),O({...A,amount:"",cost:"",notes:""})}function v(){if(!m.colonyId||!m.quantity){alert("Please select colony and enter quantity");return}const t="HARVEST-"+Date.now();M([...B,{...m,id:t,timestamp:new Date().toISOString()}]),k({...m,quantity:"",weight:"",salePrice:"",notes:""})}function R(){D({name:"",location:"",establishedDate:new Date().toISOString().slice(0,10),status:"Growing",population:"",substrate:"Food Waste",substrateAmount:"",temperature:"",humidity:"",notes:""})}const G=x.filter(t=>t.status==="Active"),V=x.reduce((t,T)=>t+(parseInt(T.population)||0),0),w=B.reduce((t,T)=>t+(parseFloat(T.weight)||0),0),W=B.reduce((t,T)=>t+(parseFloat(T.salePrice)||0),0);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{children:"ü™∞ BSF (Black Soldier Fly) Farming"}),e.jsx("button",{onClick:()=>U(!q),children:q?"‚úï Cancel":"+ Add Colony"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Active Colonies"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:G.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Population"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:V.toLocaleString()})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Harvest (kg)"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:w.toFixed(1)})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#d1fae5"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Revenue"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:Ee(W)})]})]}),q&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:"Add New BSF Colony"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Colony Name *"}),e.jsx("input",{value:N.name,onChange:t=>D({...N,name:t.target.value}),placeholder:"Colony A"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Location"}),e.jsx("input",{value:N.location,onChange:t=>D({...N,location:t.target.value}),placeholder:"Barn 1"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Established Date"}),e.jsx("input",{type:"date",value:N.establishedDate,onChange:t=>D({...N,establishedDate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Status"}),e.jsx("select",{value:N.status,onChange:t=>D({...N,status:t.target.value}),children:Tt.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Initial Population"}),e.jsx("input",{type:"number",value:N.population,onChange:t=>D({...N,population:t.target.value}),placeholder:"5000"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Substrate Type"}),e.jsx("select",{value:N.substrate,onChange:t=>D({...N,substrate:t.target.value}),children:Ye.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Substrate Amount (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:N.substrateAmount,onChange:t=>D({...N,substrateAmount:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Temperature (¬∞C)"}),e.jsx("input",{type:"number",step:"0.1",value:N.temperature,onChange:t=>D({...N,temperature:t.target.value}),placeholder:"27-32"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Humidity (%)"}),e.jsx("input",{type:"number",value:N.humidity,onChange:t=>D({...N,humidity:t.target.value}),placeholder:"60-70"})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:N.notes,onChange:t=>D({...N,notes:t.target.value}),rows:2})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:te,children:"Add Colony"}),e.jsx("button",{onClick:()=>U(!1),style:{background:"#6b7280"},children:"Cancel"})]})]}),e.jsxs("div",{style:{marginBottom:16,borderBottom:"2px solid #e5e7eb"},children:[e.jsx("button",{onClick:()=>P("colonies"),style:{padding:"8px 16px",border:"none",background:H==="colonies"?"#059669":"transparent",color:H==="colonies"?"#fff":"#666",cursor:"pointer"},children:"Colonies"}),e.jsx("button",{onClick:()=>P("feeding"),style:{padding:"8px 16px",border:"none",background:H==="feeding"?"#059669":"transparent",color:H==="feeding"?"#fff":"#666",cursor:"pointer"},children:"Feeding Records"}),e.jsx("button",{onClick:()=>P("harvest"),style:{padding:"8px 16px",border:"none",background:H==="harvest"?"#059669":"transparent",color:H==="harvest"?"#fff":"#666",cursor:"pointer"},children:"Harvest Records"})]}),H==="colonies"&&e.jsx("div",{className:"card",style:{padding:0,overflow:"hidden"},children:x.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"ü™∞"}),e.jsx("h4",{children:"No BSF colonies yet"}),e.jsx("p",{style:{color:"#666"},children:"Add your first colony to start tracking"})]}):e.jsx("div",{style:{maxHeight:600,overflowY:"auto"},children:x.map(t=>{const T=Math.floor((new Date-new Date(t.establishedDate))/864e5);return e.jsx("div",{style:{padding:16,borderBottom:"1px solid #eee"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:16},children:t.name}),e.jsx("span",{className:"badge",style:{background:t.status==="Active"?"#d1fae5":t.status==="Growing"?"#fef3c7":"#e5e7eb"},children:t.status})]}),e.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Location:"})," ",t.location," ‚Ä¢ ",e.jsx("strong",{children:"Established:"})," ",new Date(t.establishedDate).toLocaleDateString()," (",T," days ago)"]}),e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Population:"})," ",parseInt(t.population||0).toLocaleString()," ‚Ä¢ ",e.jsx("strong",{children:"Substrate:"})," ",t.substrate," (",t.substrateAmount,"kg)"]}),e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Temp:"})," ",t.temperature,"¬∞C ‚Ä¢ ",e.jsx("strong",{children:"Humidity:"})," ",t.humidity,"%"]}),t.notes&&e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8,fontStyle:"italic"},children:t.notes})]}),e.jsx("button",{onClick:()=>ne(t.id),style:{fontSize:12,padding:"4px 8px",background:"#dc2626"},children:"Delete"})]})},t.id)})})}),H==="feeding"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16},children:[e.jsx("h4",{style:{marginTop:0},children:"Add Feeding Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Colony *"}),e.jsxs("select",{value:A.colonyId,onChange:t=>O({...A,colonyId:t.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Colony --"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:A.date,onChange:t=>O({...A,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Substrate Type"}),e.jsx("select",{value:A.substrate,onChange:t=>O({...A,substrate:t.target.value}),children:Ye.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Amount (kg) *"}),e.jsx("input",{type:"number",step:"0.1",value:A.amount,onChange:t=>O({...A,amount:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Cost"}),e.jsx("input",{type:"number",step:"0.01",value:A.cost,onChange:t=>O({...A,cost:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:A.notes,onChange:t=>O({...A,notes:t.target.value})})]})]}),e.jsx("button",{onClick:C,style:{marginTop:12},children:"Add Feeding Record"})]}),e.jsx("div",{className:"card",style:{padding:0},children:f.length===0?e.jsx("div",{style:{padding:40,textAlign:"center"},children:e.jsx("h4",{children:"No feeding records yet"})}):e.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:f.sort((t,T)=>new Date(T.timestamp)-new Date(t.timestamp)).map(t=>{const T=x.find(I=>I.id===t.colonyId);return e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{fontWeight:600},children:T?.name||t.colonyId}),t.cost&&e.jsx("span",{className:"badge",style:{background:"#fee2e2"},children:Ee(parseFloat(t.cost))})]}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[new Date(t.date).toLocaleDateString()," ‚Ä¢ ",t.substrate," ‚Ä¢ ",t.amount,"kg"]}),t.notes&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4},children:t.notes})]},t.id)})})})]}),H==="harvest"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16},children:[e.jsx("h4",{style:{marginTop:0},children:"Add Harvest Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Colony *"}),e.jsxs("select",{value:m.colonyId,onChange:t=>k({...m,colonyId:t.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Colony --"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:m.date,onChange:t=>k({...m,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Type"}),e.jsx("select",{value:m.type,onChange:t=>k({...m,type:t.target.value}),children:kt.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Quantity *"}),e.jsx("input",{type:"number",value:m.quantity,onChange:t=>k({...m,quantity:t.target.value}),placeholder:"Number of units"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Weight (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:m.weight,onChange:t=>k({...m,weight:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Quality"}),e.jsxs("select",{value:m.quality,onChange:t=>k({...m,quality:t.target.value}),children:[e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Purpose"}),e.jsx("input",{value:m.purpose,onChange:t=>k({...m,purpose:t.target.value}),placeholder:"Animal Feed / Sale"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sale Price"}),e.jsx("input",{type:"number",step:"0.01",value:m.salePrice,onChange:t=>k({...m,salePrice:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:m.notes,onChange:t=>k({...m,notes:t.target.value})})]})]}),e.jsx("button",{onClick:v,style:{marginTop:12},children:"Add Harvest Record"})]}),e.jsx("div",{className:"card",style:{padding:0},children:B.length===0?e.jsx("div",{style:{padding:40,textAlign:"center"},children:e.jsx("h4",{children:"No harvest records yet"})}):e.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:B.sort((t,T)=>new Date(T.timestamp)-new Date(t.timestamp)).map(t=>{const T=x.find(I=>I.id===t.colonyId);return e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{fontWeight:600},children:T?.name||t.colonyId}),e.jsx("span",{className:"badge",children:t.type}),e.jsx("span",{className:"badge",style:{background:"#fef3c7"},children:t.quality}),t.salePrice&&e.jsx("span",{className:"badge",style:{background:"#d1fae5"},children:Ee(parseFloat(t.salePrice))})]}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[new Date(t.date).toLocaleDateString()," ‚Ä¢ Qty: ",t.quantity," ‚Ä¢ Weight: ",t.weight,"kg",t.purpose&&` ‚Ä¢ ${t.purpose}`]}),t.notes&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4},children:t.notes})]},t.id)})})})]})]})}const It=[{id:"AZ-001",name:"Pond 1",size:10,location:"North Field",setupDate:"2025-08-01",status:"Active",yieldPerWeek:15,waterTemp:25,pH:6.5,nutrients:"NPK Solution",notes:"High yield"},{id:"AZ-002",name:"Pond 2",size:8,location:"South Field",setupDate:"2025-09-15",status:"Active",yieldPerWeek:12,waterTemp:24,pH:6.8,nutrients:"Cow Dung",notes:""}],Lt=["Active","Inactive","Maintenance","Harvesting","Contaminated"],Qe=["NPK Solution","Cow Dung","Chicken Manure","Pig Manure","Biogas Slurry","Mixed Organic"],Bt=["Animal Feed","Fertilizer","Sale","Seed Stock","Research"];function zt(){const h="cattalytics:azolla:ponds",E="cattalytics:azolla:maintenance",b="cattalytics:azolla:harvest",[x,g]=d.useState([]),[f,j]=d.useState([]),[B,M]=d.useState([]),[q,U]=d.useState(!1),[H,P]=d.useState("ponds"),[N,D]=d.useState({name:"",size:"",location:"",setupDate:new Date().toISOString().slice(0,10),status:"Active",yieldPerWeek:"",waterTemp:"",pH:"",nutrients:"NPK Solution",notes:""}),[A,O]=d.useState({pondId:"",date:new Date().toISOString().slice(0,10),activity:"Water Change",nutrients:"",nutrientAmount:"",waterTemp:"",pH:"",cost:"",notes:""}),[m,k]=d.useState({pondId:"",date:new Date().toISOString().slice(0,10),quantity:"",weight:"",moisture:"",quality:"Good",purpose:"Animal Feed",usedFor:"",salePrice:"",notes:""});d.useEffect(()=>{const t=localStorage.getItem(h);g(t?JSON.parse(t):It);const T=localStorage.getItem(E);T&&j(JSON.parse(T));const I=localStorage.getItem(b);I&&M(JSON.parse(I))},[]),d.useEffect(()=>localStorage.setItem(h,JSON.stringify(x)),[x]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(f)),[f]),d.useEffect(()=>localStorage.setItem(b,JSON.stringify(B)),[B]);function te(){if(!N.name||!N.size){alert("Please provide pond name and size");return}const t="AZ-"+Date.now();g([...x,{...N,id:t}]),R(),U(!1)}function ne(t){confirm("Delete this pond?")&&g(x.filter(T=>T.id!==t))}function C(){if(!A.pondId||!A.activity){alert("Please select pond and activity");return}const t="MAINT-"+Date.now();j([...f,{...A,id:t,timestamp:new Date().toISOString()}]),O({...A,nutrients:"",nutrientAmount:"",cost:"",notes:""})}function v(){if(!m.pondId||!m.weight){alert("Please select pond and enter weight");return}const t="HARVEST-"+Date.now();M([...B,{...m,id:t,timestamp:new Date().toISOString()}]),k({...m,quantity:"",weight:"",salePrice:"",notes:""})}function R(){D({name:"",size:"",location:"",setupDate:new Date().toISOString().slice(0,10),status:"Active",yieldPerWeek:"",waterTemp:"",pH:"",nutrients:"NPK Solution",notes:""})}const G=x.filter(t=>t.status==="Active"),V=x.reduce((t,T)=>t+(parseFloat(T.size)||0),0),w=x.reduce((t,T)=>t+(parseFloat(T.yieldPerWeek)||0),0),W=B.reduce((t,T)=>t+(parseFloat(T.weight)||0),0);return B.reduce((t,T)=>t+(parseFloat(T.salePrice)||0),0),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{children:"üåø Azolla Farming System"}),e.jsx("button",{onClick:()=>U(!q),children:q?"‚úï Cancel":"+ Add Pond"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Active Ponds"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:G.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Area (m¬≤)"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:V.toFixed(1)})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Weekly Yield (kg)"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:w.toFixed(1)})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#d1fae5"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Harvest (kg)"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:W.toFixed(1)})]})]}),e.jsxs("div",{className:"card",style:{padding:16,marginBottom:20,background:"#e0f2fe",borderLeft:"4px solid #0ea5e9"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:"#075985"},children:"üí° Azolla Farming Tips"}),e.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"#666",fontSize:14},children:[e.jsx("li",{children:"Optimal water temperature: 20-28¬∞C"}),e.jsx("li",{children:"pH range: 5.5-7.0 (ideal: 6.5)"}),e.jsx("li",{children:"Doubles biomass every 3-5 days under ideal conditions"}),e.jsx("li",{children:"Rich in protein (25-35%), excellent for livestock feed"}),e.jsx("li",{children:"Harvest when coverage reaches 80-90% of pond surface"})]})]}),q&&e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:"Add New Azolla Pond"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Pond Name *"}),e.jsx("input",{value:N.name,onChange:t=>D({...N,name:t.target.value}),placeholder:"Pond 1"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Size (m¬≤) *"}),e.jsx("input",{type:"number",step:"0.1",value:N.size,onChange:t=>D({...N,size:t.target.value}),placeholder:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Location"}),e.jsx("input",{value:N.location,onChange:t=>D({...N,location:t.target.value}),placeholder:"North Field"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Setup Date"}),e.jsx("input",{type:"date",value:N.setupDate,onChange:t=>D({...N,setupDate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Status"}),e.jsx("select",{value:N.status,onChange:t=>D({...N,status:t.target.value}),children:Lt.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Expected Yield/Week (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:N.yieldPerWeek,onChange:t=>D({...N,yieldPerWeek:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Water Temperature (¬∞C)"}),e.jsx("input",{type:"number",step:"0.1",value:N.waterTemp,onChange:t=>D({...N,waterTemp:t.target.value}),placeholder:"25"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"pH Level"}),e.jsx("input",{type:"number",step:"0.1",value:N.pH,onChange:t=>D({...N,pH:t.target.value}),placeholder:"6.5"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Nutrient Source"}),e.jsx("select",{value:N.nutrients,onChange:t=>D({...N,nutrients:t.target.value}),children:Qe.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{value:N.notes,onChange:t=>D({...N,notes:t.target.value}),rows:2})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{onClick:te,children:"Add Pond"}),e.jsx("button",{onClick:()=>U(!1),style:{background:"#6b7280"},children:"Cancel"})]})]}),e.jsxs("div",{style:{marginBottom:16,borderBottom:"2px solid #e5e7eb"},children:[e.jsx("button",{onClick:()=>P("ponds"),style:{padding:"8px 16px",border:"none",background:H==="ponds"?"#059669":"transparent",color:H==="ponds"?"#fff":"#666",cursor:"pointer"},children:"Ponds"}),e.jsx("button",{onClick:()=>P("maintenance"),style:{padding:"8px 16px",border:"none",background:H==="maintenance"?"#059669":"transparent",color:H==="maintenance"?"#fff":"#666",cursor:"pointer"},children:"Maintenance"}),e.jsx("button",{onClick:()=>P("harvest"),style:{padding:"8px 16px",border:"none",background:H==="harvest"?"#059669":"transparent",color:H==="harvest"?"#fff":"#666",cursor:"pointer"},children:"Harvest Records"})]}),H==="ponds"&&e.jsx("div",{className:"card",style:{padding:0,overflow:"hidden"},children:x.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"üåø"}),e.jsx("h4",{children:"No azolla ponds yet"}),e.jsx("p",{style:{color:"#666"},children:"Add your first pond to start tracking"})]}):e.jsx("div",{style:{maxHeight:600,overflowY:"auto"},children:x.map(t=>{const T=Math.floor((new Date-new Date(t.setupDate))/864e5);return e.jsx("div",{style:{padding:16,borderBottom:"1px solid #eee"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontWeight:600,fontSize:16},children:t.name}),e.jsx("span",{className:"badge",style:{background:t.status==="Active"?"#d1fae5":t.status==="Maintenance"?"#fef3c7":"#fee2e2"},children:t.status})]}),e.jsxs("div",{style:{fontSize:14,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Size:"})," ",t.size,"m¬≤ ‚Ä¢ ",e.jsx("strong",{children:"Location:"})," ",t.location," ‚Ä¢ ",e.jsx("strong",{children:"Setup:"})," ",new Date(t.setupDate).toLocaleDateString()," (",T," days)"]}),e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Yield:"})," ",t.yieldPerWeek,"kg/week ‚Ä¢ ",e.jsx("strong",{children:"Temp:"})," ",t.waterTemp,"¬∞C ‚Ä¢ ",e.jsx("strong",{children:"pH:"})," ",t.pH]}),e.jsxs("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:[e.jsx("strong",{children:"Nutrients:"})," ",t.nutrients]}),t.notes&&e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8,fontStyle:"italic"},children:t.notes})]}),e.jsx("button",{onClick:()=>ne(t.id),style:{fontSize:12,padding:"4px 8px",background:"#dc2626"},children:"Delete"})]})},t.id)})})}),H==="maintenance"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16},children:[e.jsx("h4",{style:{marginTop:0},children:"Add Maintenance Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Pond *"}),e.jsxs("select",{value:A.pondId,onChange:t=>O({...A,pondId:t.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Pond --"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:A.date,onChange:t=>O({...A,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Activity *"}),e.jsxs("select",{value:A.activity,onChange:t=>O({...A,activity:t.target.value}),children:[e.jsx("option",{value:"Water Change",children:"Water Change"}),e.jsx("option",{value:"Nutrient Addition",children:"Nutrient Addition"}),e.jsx("option",{value:"pH Adjustment",children:"pH Adjustment"}),e.jsx("option",{value:"Cleaning",children:"Cleaning"}),e.jsx("option",{value:"Thinning",children:"Thinning"}),e.jsx("option",{value:"Pest Control",children:"Pest Control"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Nutrient Type"}),e.jsxs("select",{value:A.nutrients,onChange:t=>O({...A,nutrients:t.target.value}),children:[e.jsx("option",{value:"",children:"-- Select --"}),Qe.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Nutrient Amount (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:A.nutrientAmount,onChange:t=>O({...A,nutrientAmount:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Water Temp (¬∞C)"}),e.jsx("input",{type:"number",step:"0.1",value:A.waterTemp,onChange:t=>O({...A,waterTemp:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"pH Level"}),e.jsx("input",{type:"number",step:"0.1",value:A.pH,onChange:t=>O({...A,pH:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Cost"}),e.jsx("input",{type:"number",step:"0.01",value:A.cost,onChange:t=>O({...A,cost:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:A.notes,onChange:t=>O({...A,notes:t.target.value})})]})]}),e.jsx("button",{onClick:C,style:{marginTop:12},children:"Add Maintenance Record"})]}),e.jsx("div",{className:"card",style:{padding:0},children:f.length===0?e.jsx("div",{style:{padding:40,textAlign:"center"},children:e.jsx("h4",{children:"No maintenance records yet"})}):e.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:f.sort((t,T)=>new Date(T.timestamp)-new Date(t.timestamp)).map(t=>{const T=x.find(I=>I.id===t.pondId);return e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{fontWeight:600},children:T?.name||t.pondId}),e.jsx("span",{className:"badge",children:t.activity}),t.cost&&e.jsx("span",{className:"badge",style:{background:"#fee2e2"},children:Ee(parseFloat(t.cost))})]}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[new Date(t.date).toLocaleDateString(),t.nutrients&&` ‚Ä¢ ${t.nutrients}`,t.nutrientAmount&&` (${t.nutrientAmount}kg)`,t.waterTemp&&` ‚Ä¢ Temp: ${t.waterTemp}¬∞C`,t.pH&&` ‚Ä¢ pH: ${t.pH}`]}),t.notes&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4},children:t.notes})]},t.id)})})})]}),H==="harvest"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:16,marginBottom:16},children:[e.jsx("h4",{style:{marginTop:0},children:"Add Harvest Record"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Pond *"}),e.jsxs("select",{value:m.pondId,onChange:t=>k({...m,pondId:t.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Pond --"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:m.date,onChange:t=>k({...m,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Fresh Weight (kg) *"}),e.jsx("input",{type:"number",step:"0.1",value:m.weight,onChange:t=>k({...m,weight:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Moisture Content (%)"}),e.jsx("input",{type:"number",step:"0.1",value:m.moisture,onChange:t=>k({...m,moisture:t.target.value}),placeholder:"90-95"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Quality"}),e.jsxs("select",{value:m.quality,onChange:t=>k({...m,quality:t.target.value}),children:[e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Purpose"}),e.jsx("select",{value:m.purpose,onChange:t=>k({...m,purpose:t.target.value}),children:Bt.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Used For"}),e.jsx("input",{value:m.usedFor,onChange:t=>k({...m,usedFor:t.target.value}),placeholder:"e.g., Dairy cows, Pigs"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Sale Price"}),e.jsx("input",{type:"number",step:"0.01",value:m.salePrice,onChange:t=>k({...m,salePrice:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:m.notes,onChange:t=>k({...m,notes:t.target.value})})]})]}),e.jsx("button",{onClick:v,style:{marginTop:12},children:"Add Harvest Record"})]}),e.jsx("div",{className:"card",style:{padding:0},children:B.length===0?e.jsx("div",{style:{padding:40,textAlign:"center"},children:e.jsx("h4",{children:"No harvest records yet"})}):e.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:B.sort((t,T)=>new Date(T.timestamp)-new Date(t.timestamp)).map(t=>{const T=x.find(I=>I.id===t.pondId);return e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{fontWeight:600},children:T?.name||t.pondId}),e.jsx("span",{className:"badge",style:{background:"#fef3c7"},children:t.quality}),e.jsx("span",{className:"badge",children:t.purpose}),t.salePrice&&e.jsx("span",{className:"badge",style:{background:"#d1fae5"},children:Ee(parseFloat(t.salePrice))})]}),e.jsxs("div",{style:{fontSize:13,color:"#666"},children:[new Date(t.date).toLocaleDateString()," ‚Ä¢ Weight: ",t.weight,"kg",t.moisture&&` ‚Ä¢ Moisture: ${t.moisture}%`,t.usedFor&&` ‚Ä¢ For: ${t.usedFor}`]}),t.notes&&e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:4},children:t.notes})]},t.id)})})})]})]})}function Rt(){const h="cattalytics:poultry",E="cattalytics:egg_production",b="cattalytics:flocks",x="cattalytics:poultry_health",g="cattalytics:poultry_vaccination",f="cattalytics:poultry_treatment",j=[{id:"FL-001",name:"Layer Flock A",type:"Layers",breed:"ISA Brown",quantity:500,dateStarted:"2024-01-15",status:"Active",notes:"Main egg production flock"},{id:"FL-002",name:"Broiler Batch 1",type:"Broilers",breed:"Cobb 500",quantity:1e3,dateStarted:"2024-10-01",status:"Active",notes:"Ready for market in 3 weeks"}],B=[{id:"VAC-001",date:"2024-01-20",flockId:"FL-001",vaccineName:"Newcastle Disease",method:"Drinking Water",dosage:"1000 doses",administeredBy:"Dr. Smith",nextDueDate:"2024-04-20",notes:"All birds vaccinated successfully"},{id:"VAC-002",date:"2024-10-05",flockId:"FL-002",vaccineName:"Infectious Bronchitis",method:"Spray",dosage:"1000 doses",administeredBy:"Farm Staff",nextDueDate:"2024-11-05",notes:""}],M=[{id:"HR-001",date:"2024-11-15",flockId:"FL-001",issue:"Respiratory symptoms",affectedBirds:15,severity:"Moderate",action:"Isolated affected birds, consulted vet",status:"Under Treatment",notes:"Monitoring closely"}],q=[{id:"TRT-001",date:"2024-11-16",flockId:"FL-001",condition:"Respiratory infection",medication:"Tylosin",dosage:"50mg/L in water",duration:"5 days",administeredBy:"Farm Staff",cost:2500,notes:"Treatment ongoing"}],U=[{id:"P-001",flockId:"FL-001",tag:"L-001",type:"Layer",breed:"ISA Brown",sex:"F",dateOfBirth:"2023-12-01",weight:1.8,status:"Active",notes:"High producer"},{id:"P-002",flockId:"FL-002",tag:"B-001",type:"Broiler",breed:"Cobb 500",sex:"M",dateOfBirth:"2024-10-01",weight:2.5,status:"Active",notes:""}],H=[{id:"EGG-001",date:"2024-11-20",flockId:"FL-001",eggsCollected:450,broken:5,dirty:10,grade:"A",notes:"Good production day"},{id:"EGG-002",date:"2024-11-19",flockId:"FL-001",eggsCollected:440,broken:8,dirty:12,grade:"A",notes:""}],[P,N]=d.useState("flocks"),[D,A]=d.useState([]),[O,m]=d.useState([]),[k,te]=d.useState([]),[ne,C]=d.useState([]),[v,R]=d.useState([]),[G,V]=d.useState([]),[w,W]=d.useState({id:"",name:"",type:"Layers",breed:"",quantity:"",dateStarted:"",status:"Active",notes:""}),[t,T]=d.useState(null),[I,ee]=d.useState({id:"",flockId:"",tag:"",type:"Layer",breed:"",sex:"F",dateOfBirth:"",weight:"",status:"Active",notes:""}),[z,se]=d.useState(null),[$,ce]=d.useState({id:"",date:new Date().toISOString().split("T")[0],flockId:"",eggsCollected:"",broken:"",dirty:"",grade:"A",notes:""}),[oe,me]=d.useState(null),[de,r]=d.useState({date:new Date().toISOString().split("T")[0],flockId:"",count:"",cause:"",notes:""}),[F,Q]=d.useState({id:"",date:new Date().toISOString().split("T")[0],flockId:"",vaccineName:"",method:"Drinking Water",dosage:"",administeredBy:"",nextDueDate:"",cost:"",notes:""}),[X,ve]=d.useState(null),[l,y]=d.useState({id:"",date:new Date().toISOString().split("T")[0],flockId:"",issue:"",affectedBirds:"",severity:"Moderate",action:"",status:"Under Observation",cost:"",notes:""}),[J,le]=d.useState(null),[K,ie]=d.useState({id:"",date:new Date().toISOString().split("T")[0],flockId:"",condition:"",medication:"",dosage:"",duration:"",administeredBy:"",cost:"",notes:""}),[pe,s]=d.useState(null);d.useEffect(()=>{try{const n=localStorage.getItem(b),L=localStorage.getItem(h),ue=localStorage.getItem(E),_=localStorage.getItem(g),Ne=localStorage.getItem(x),Oe=localStorage.getItem(f);A(n?JSON.parse(n):j),m(L?JSON.parse(L):U),te(ue?JSON.parse(ue):H),C(_?JSON.parse(_):B),R(Ne?JSON.parse(Ne):M),V(Oe?JSON.parse(Oe):q)}catch{A(j),m(U),te(H),C(B),R(M),V(q)}},[]),d.useEffect(()=>localStorage.setItem(b,JSON.stringify(D)),[D]),d.useEffect(()=>localStorage.setItem(h,JSON.stringify(O)),[O]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(k)),[k]),d.useEffect(()=>localStorage.setItem(g,JSON.stringify(ne)),[ne]),d.useEffect(()=>localStorage.setItem(x,JSON.stringify(v)),[v]),d.useEffect(()=>localStorage.setItem(f,JSON.stringify(G)),[G]);function o(n){if(n.preventDefault(),!w.name||!w.breed||!w.quantity){alert("Please fill in all required fields");return}if(t)A(D.map(L=>L.id===t?{...w,id:t}:L)),T(null);else{const L={...w,id:`FL-${Date.now()}`};A([...D,L])}W({id:"",name:"",type:"Layers",breed:"",quantity:"",dateStarted:"",status:"Active",notes:""})}function i(n){W(n),T(n.id),N("flocks")}function u(n){confirm("Delete this flock? This will also remove associated birds and egg records.")&&(A(D.filter(L=>L.id!==n)),m(O.filter(L=>L.flockId!==n)),te(k.filter(L=>L.flockId!==n)))}function Z(n){if(n.preventDefault(),!I.flockId||!I.type||!I.breed){alert("Please fill in all required fields");return}if(z)m(O.map(L=>L.id===z?{...I,id:z}:L)),se(null);else{const L={...I,id:`P-${Date.now()}`};m([...O,L])}ee({id:"",flockId:"",tag:"",type:"Layer",breed:"",sex:"F",dateOfBirth:"",weight:"",status:"Active",notes:""})}function ye(n){ee(n),se(n.id),N("birds")}function fe(n){confirm("Delete this bird record?")&&m(O.filter(L=>L.id!==n))}function be(n){if(n.preventDefault(),!$.date||!$.flockId||!$.eggsCollected){alert("Please fill in all required fields");return}if(oe)te(k.map(L=>L.id===oe?{...$,id:oe}:L)),me(null);else{const L={...$,id:`EGG-${Date.now()}`};te([...k,L])}ce({id:"",date:new Date().toISOString().split("T")[0],flockId:"",eggsCollected:"",broken:"",dirty:"",grade:"A",notes:""})}function Se(n){ce(n),me(n.id),N("eggs")}function c(n){confirm("Delete this egg production record?")&&te(k.filter(L=>L.id!==n))}function S(n){if(n.preventDefault(),!de.flockId||!de.count){alert("Please select a flock and enter mortality count");return}const L=D.find(ue=>ue.id===de.flockId);if(L){const ue=Math.max(0,Number(L.quantity)-Number(de.count));A(D.map(_=>_.id===de.flockId?{..._,quantity:ue}:_)),alert(`Mortality recorded. ${L.name} updated: ${L.quantity} ‚Üí ${ue} birds`),r({date:new Date().toISOString().split("T")[0],flockId:"",count:"",cause:"",notes:""})}}function Y(n){if(n.preventDefault(),!F.date||!F.flockId||!F.vaccineName){alert("Please fill in all required fields");return}const L=D.find(_=>_.id===F.flockId),ue=!X;if(X)C(ne.map(_=>_.id===X?{...F,id:X}:_)),ve(null);else{const _={...F,id:`VAC-${Date.now()}`};C([...ne,_])}if(ue&&F.cost&&Number(F.cost)>0)try{const _=JSON.parse(localStorage.getItem("cattalytics:finance")||"[]"),Ne={id:`FIN-VAC-${Date.now()}`,date:F.date,type:"Expense",category:"Poultry Health",subcategory:"Vaccination",amount:Number(F.cost),description:`${F.vaccineName} vaccination for ${L?.name||"flock"} (${F.method})`,paymentMethod:"Cash",notes:F.notes||""};_.push(Ne),localStorage.setItem("cattalytics:finance",JSON.stringify(_)),window.dispatchEvent(new Event("financeUpdated"))}catch(_){console.error("Failed to add vaccination cost to finance:",_)}Q({id:"",date:new Date().toISOString().split("T")[0],flockId:"",vaccineName:"",method:"Drinking Water",dosage:"",administeredBy:"",nextDueDate:"",cost:"",notes:""})}function ge(n){Q(n),ve(n.id)}function De(n){confirm("Delete this vaccination record?")&&C(ne.filter(L=>L.id!==n))}function Ce(n){if(n.preventDefault(),!l.date||!l.flockId||!l.issue){alert("Please fill in all required fields");return}const L=D.find(_=>_.id===l.flockId),ue=!J;if(J)R(v.map(_=>_.id===J?{...l,id:J}:_)),le(null);else{const _={...l,id:`HR-${Date.now()}`};R([...v,_])}if(ue&&l.cost&&Number(l.cost)>0)try{const _=JSON.parse(localStorage.getItem("cattalytics:finance")||"[]"),Ne={id:`FIN-HR-${Date.now()}`,date:l.date,type:"Expense",category:"Poultry Health",subcategory:"Health Monitoring",amount:Number(l.cost),description:`Health issue: ${l.issue} in ${L?.name||"flock"} (${l.affectedBirds||"multiple"} birds affected)`,paymentMethod:"Cash",notes:l.notes||""};_.push(Ne),localStorage.setItem("cattalytics:finance",JSON.stringify(_)),window.dispatchEvent(new Event("financeUpdated"))}catch(_){console.error("Failed to add health cost to finance:",_)}y({id:"",date:new Date().toISOString().split("T")[0],flockId:"",issue:"",affectedBirds:"",severity:"Moderate",action:"",status:"Under Observation",cost:"",notes:""})}function a(n){y(n),le(n.id)}function p(n){confirm("Delete this health record?")&&R(v.filter(L=>L.id!==n))}function ae(n){if(n.preventDefault(),!K.date||!K.flockId||!K.condition||!K.medication){alert("Please fill in all required fields");return}const L=D.find(_=>_.id===K.flockId),ue=!pe;if(pe)V(G.map(_=>_.id===pe?{...K,id:pe}:_)),s(null);else{const _={...K,id:`TRT-${Date.now()}`};V([...G,_])}if(ue&&K.cost&&Number(K.cost)>0)try{const _=JSON.parse(localStorage.getItem("cattalytics:finance")||"[]"),Ne={id:`FIN-TRT-${Date.now()}`,date:K.date,type:"Expense",category:"Poultry Health",subcategory:"Treatment",amount:Number(K.cost),description:`Treatment: ${K.medication} for ${K.condition} in ${L?.name||"flock"}`,paymentMethod:"Cash",notes:K.notes||""};_.push(Ne),localStorage.setItem("cattalytics:finance",JSON.stringify(_)),window.dispatchEvent(new Event("financeUpdated"))}catch(_){console.error("Failed to add treatment cost to finance:",_)}ie({id:"",date:new Date().toISOString().split("T")[0],flockId:"",condition:"",medication:"",dosage:"",duration:"",administeredBy:"",cost:"",notes:""})}function he(n){ie(n),s(n.id)}function re(n){confirm("Delete this treatment record?")&&V(G.filter(L=>L.id!==n))}const je=D.reduce((n,L)=>n+Number(L.quantity||0),0),xe=D.filter(n=>n.status==="Active").length,tt=k.filter(n=>n.date===new Date().toISOString().split("T")[0]).reduce((n,L)=>n+Number(L.eggsCollected||0),0),nt=k.length>0?Math.round(k.reduce((n,L)=>n+Number(L.eggsCollected||0),0)/k.length):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"8px",color:"inherit"},children:"üêî Poultry Management"}),e.jsx("p",{style:{color:"var(--muted)",margin:0},children:"Comprehensive flock management, egg production tracking, and health monitoring"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center",background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#f59e0b"},children:je}),e.jsx("div",{style:{fontSize:"14px",color:"#92400e"},children:"Total Birds"})]}),e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center",background:"#dbeafe"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#2563eb"},children:xe}),e.jsx("div",{style:{fontSize:"14px",color:"#1e3a8a"},children:"Active Flocks"})]}),e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center",background:"#fce7f3"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#ec4899"},children:tt}),e.jsx("div",{style:{fontSize:"14px",color:"#831843"},children:"Eggs Today"})]}),e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center",background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#059669"},children:nt}),e.jsx("div",{style:{fontSize:"14px",color:"#065f46"},children:"Avg. Daily Eggs"})]})]}),e.jsx("div",{style:{borderBottom:"2px solid #e5e7eb",marginBottom:"20px"},children:e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[{key:"flocks",label:"üêì Flocks",color:"#fbbf24"},{key:"birds",label:"üê§ Individual Birds",color:"#60a5fa"},{key:"eggs",label:"ü•ö Egg Production",color:"#f472b6"},{key:"health",label:"üè• Health System",color:"#10b981"},{key:"vaccinations",label:"üíâ Vaccinations",color:"#8b5cf6"},{key:"treatments",label:"üíä Treatments",color:"#f59e0b"},{key:"mortality",label:"üíÄ Mortality",color:"#ef4444"}].map(n=>e.jsx("button",{onClick:()=>N(n.key),style:{padding:"12px 20px",border:"none",borderBottom:P===n.key?`3px solid ${n.color}`:"3px solid transparent",background:P===n.key?`${n.color}20`:"transparent",color:P===n.key?n.color:"#6b7280",fontWeight:P===n.key?"600":"400",cursor:"pointer",fontSize:"14px"},children:n.label},n.key))})}),P==="flocks"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:t?"Edit Flock":"Add New Flock"}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{children:["Flock Name *",e.jsx("input",{value:w.name,onChange:n=>W({...w,name:n.target.value}),placeholder:"e.g., Layer Flock A",required:!0})]}),e.jsxs("label",{children:["Type *",e.jsxs("select",{value:w.type,onChange:n=>W({...w,type:n.target.value}),required:!0,children:[e.jsx("option",{value:"Layers",children:"Layers (Egg Production)"}),e.jsx("option",{value:"Broilers",children:"Broilers (Meat Production)"}),e.jsx("option",{value:"Breeders",children:"Breeders"}),e.jsx("option",{value:"Mixed",children:"Mixed"})]})]}),e.jsxs("label",{children:["Breed *",e.jsx("input",{value:w.breed,onChange:n=>W({...w,breed:n.target.value}),placeholder:"e.g., ISA Brown, Cobb 500",required:!0})]}),e.jsxs("label",{children:["Quantity (Number of Birds) *",e.jsx("input",{type:"number",value:w.quantity,onChange:n=>W({...w,quantity:n.target.value}),min:"1",required:!0})]}),e.jsxs("label",{children:["Date Started",e.jsx("input",{type:"date",value:w.dateStarted,onChange:n=>W({...w,dateStarted:n.target.value})})]}),e.jsxs("label",{children:["Status",e.jsxs("select",{value:w.status,onChange:n=>W({...w,status:n.target.value}),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Sold",children:"Sold"}),e.jsx("option",{value:"Culled",children:"Culled"})]})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:w.notes,onChange:n=>W({...w,notes:n.target.value}),rows:2})]})]}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:[e.jsx("button",{type:"submit",style:{background:"#fbbf24",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:t?"Update Flock":"Add Flock"}),t&&e.jsx("button",{type:"button",onClick:()=>{W({id:"",name:"",type:"Layers",breed:"",quantity:"",dateStarted:"",status:"Active",notes:""}),T(null)},style:{padding:"10px 20px",background:"#6b7280",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]}),e.jsxs("h4",{style:{marginBottom:"16px"},children:["Flocks (",D.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:D.map(n=>e.jsx("div",{className:"card",style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",fontWeight:"600"},children:[n.name," (",n.type,")"]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",display:"grid",gap:"4px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Breed:"})," ",n.breed]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Quantity:"})," ",n.quantity," birds"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Started:"})," ",n.dateStarted||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",background:n.status==="Active"?"#d1fae5":"#fee2e2",color:n.status==="Active"?"#065f46":"#991b1b"},children:n.status})]}),n.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>i(n),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>u(n.id),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"6px",cursor:"pointer"},children:"üóëÔ∏è Delete"})]})]})},n.id))})]}),P==="birds"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:z?"Edit Bird":"Add Individual Bird"}),e.jsxs("form",{onSubmit:Z,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{children:["Flock *",e.jsxs("select",{value:I.flockId,onChange:n=>ee({...I,flockId:n.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Flock"}),D.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("label",{children:["Tag/ID",e.jsx("input",{value:I.tag,onChange:n=>ee({...I,tag:n.target.value}),placeholder:"e.g., L-001"})]}),e.jsxs("label",{children:["Type *",e.jsxs("select",{value:I.type,onChange:n=>ee({...I,type:n.target.value}),required:!0,children:[e.jsx("option",{value:"Layer",children:"Layer"}),e.jsx("option",{value:"Broiler",children:"Broiler"}),e.jsx("option",{value:"Breeder",children:"Breeder"})]})]}),e.jsxs("label",{children:["Breed *",e.jsx("input",{value:I.breed,onChange:n=>ee({...I,breed:n.target.value}),placeholder:"e.g., ISA Brown",required:!0})]}),e.jsxs("label",{children:["Sex",e.jsxs("select",{value:I.sex,onChange:n=>ee({...I,sex:n.target.value}),children:[e.jsx("option",{value:"F",children:"Female"}),e.jsx("option",{value:"M",children:"Male"})]})]}),e.jsxs("label",{children:["Date of Birth",e.jsx("input",{type:"date",value:I.dateOfBirth,onChange:n=>ee({...I,dateOfBirth:n.target.value})})]}),e.jsxs("label",{children:["Weight (kg)",e.jsx("input",{type:"number",step:"0.1",value:I.weight,onChange:n=>ee({...I,weight:n.target.value})})]}),e.jsxs("label",{children:["Status",e.jsxs("select",{value:I.status,onChange:n=>ee({...I,status:n.target.value}),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Sold",children:"Sold"}),e.jsx("option",{value:"Deceased",children:"Deceased"}),e.jsx("option",{value:"Culled",children:"Culled"})]})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:I.notes,onChange:n=>ee({...I,notes:n.target.value}),rows:2})]})]}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:[e.jsx("button",{type:"submit",style:{background:"#60a5fa",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:z?"Update Bird":"Add Bird"}),z&&e.jsx("button",{type:"button",onClick:()=>{ee({id:"",flockId:"",tag:"",type:"Layer",breed:"",sex:"F",dateOfBirth:"",weight:"",status:"Active",notes:""}),se(null)},style:{padding:"10px 20px",background:"#6b7280",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]}),e.jsxs("h4",{style:{marginBottom:"16px"},children:["Individual Birds (",O.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:O.map(n=>{const L=D.find(ue=>ue.id===n.flockId);return e.jsx("div",{className:"card",style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",fontWeight:"600"},children:[n.tag||n.id," - ",n.type," (",n.sex==="F"?"‚ôÄ":"‚ôÇ",")"]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",display:"grid",gap:"4px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Flock:"})," ",L?.name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Breed:"})," ",n.breed]}),n.dateOfBirth&&e.jsxs("div",{children:[e.jsx("strong",{children:"DOB:"})," ",n.dateOfBirth]}),n.weight&&e.jsxs("div",{children:[e.jsx("strong",{children:"Weight:"})," ",n.weight," kg"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",n.status]}),n.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>ye(n),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>fe(n.id),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"6px",cursor:"pointer"},children:"üóëÔ∏è Delete"})]})]})},n.id)})})]}),P==="eggs"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:oe?"Edit Egg Record":"Record Egg Production"}),e.jsxs("form",{onSubmit:be,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{children:["Date *",e.jsx("input",{type:"date",value:$.date,onChange:n=>ce({...$,date:n.target.value}),required:!0})]}),e.jsxs("label",{children:["Flock *",e.jsxs("select",{value:$.flockId,onChange:n=>ce({...$,flockId:n.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Flock"}),D.filter(n=>n.type==="Layers"||n.type==="Breeders").map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("label",{children:["Eggs Collected *",e.jsx("input",{type:"number",value:$.eggsCollected,onChange:n=>ce({...$,eggsCollected:n.target.value}),min:"0",required:!0})]}),e.jsxs("label",{children:["Broken Eggs",e.jsx("input",{type:"number",value:$.broken,onChange:n=>ce({...$,broken:n.target.value}),min:"0"})]}),e.jsxs("label",{children:["Dirty Eggs",e.jsx("input",{type:"number",value:$.dirty,onChange:n=>ce({...$,dirty:n.target.value}),min:"0"})]}),e.jsxs("label",{children:["Grade",e.jsxs("select",{value:$.grade,onChange:n=>ce({...$,grade:n.target.value}),children:[e.jsx("option",{value:"A",children:"Grade A (Excellent)"}),e.jsx("option",{value:"B",children:"Grade B (Good)"}),e.jsx("option",{value:"C",children:"Grade C (Fair)"})]})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:$.notes,onChange:n=>ce({...$,notes:n.target.value}),rows:2})]})]}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:[e.jsx("button",{type:"submit",style:{background:"#f472b6",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:oe?"Update Record":"Save Record"}),oe&&e.jsx("button",{type:"button",onClick:()=>{ce({id:"",date:new Date().toISOString().split("T")[0],flockId:"",eggsCollected:"",broken:"",dirty:"",grade:"A",notes:""}),me(null)},style:{padding:"10px 20px",background:"#6b7280",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]}),e.jsxs("h4",{style:{marginBottom:"16px"},children:["Production Records (",k.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:k.sort((n,L)=>new Date(L.date)-new Date(n.date)).map(n=>{const L=D.find(_=>_.id===n.flockId),ue=Number(n.eggsCollected)-Number(n.broken||0)-Number(n.dirty||0);return e.jsx("div",{className:"card",style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",fontWeight:"600"},children:[n.date," - ",L?.name||"Unknown Flock"]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",display:"grid",gap:"4px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Collected:"})," ",n.eggsCollected," eggs"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Broken:"})," ",n.broken||0," | ",e.jsx("strong",{children:"Dirty:"})," ",n.dirty||0]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Usable:"})," ",ue," eggs"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Grade:"})," ",n.grade]}),n.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>Se(n),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>c(n.id),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"6px",cursor:"pointer"},children:"üóëÔ∏è Delete"})]})]})},n.id)})})]}),P==="health"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:J?"Edit Health Record":"Record Health Issue"}),e.jsxs("form",{onSubmit:Ce,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{children:["Date *",e.jsx("input",{type:"date",value:l.date,onChange:n=>y({...l,date:n.target.value}),required:!0})]}),e.jsxs("label",{children:["Flock *",e.jsxs("select",{value:l.flockId,onChange:n=>y({...l,flockId:n.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Flock"}),D.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Health Issue *",e.jsx("input",{value:l.issue,onChange:n=>y({...l,issue:n.target.value}),placeholder:"e.g., Respiratory symptoms, Lethargy, Diarrhea",required:!0})]}),e.jsxs("label",{children:["Affected Birds",e.jsx("input",{type:"number",value:l.affectedBirds,onChange:n=>y({...l,affectedBirds:n.target.value}),min:"1",placeholder:"Number of birds affected"})]}),e.jsxs("label",{children:["Severity",e.jsxs("select",{value:l.severity,onChange:n=>y({...l,severity:n.target.value}),children:[e.jsx("option",{value:"Mild",children:"Mild"}),e.jsx("option",{value:"Moderate",children:"Moderate"}),e.jsx("option",{value:"Severe",children:"Severe"}),e.jsx("option",{value:"Critical",children:"Critical"})]})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Action Taken",e.jsx("textarea",{value:l.action,onChange:n=>y({...l,action:n.target.value}),rows:2,placeholder:"Describe actions taken (isolation, vet consultation, medication, etc.)"})]}),e.jsxs("label",{children:["Status",e.jsxs("select",{value:l.status,onChange:n=>y({...l,status:n.target.value}),children:[e.jsx("option",{value:"Under Observation",children:"Under Observation"}),e.jsx("option",{value:"Under Treatment",children:"Under Treatment"}),e.jsx("option",{value:"Recovering",children:"Recovering"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Escalated",children:"Escalated"})]})]}),e.jsxs("label",{children:["Cost (KSH)",e.jsx("input",{type:"number",step:"0.01",value:l.cost,onChange:n=>y({...l,cost:n.target.value}),placeholder:"Diagnostic/consultation cost"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:l.notes,onChange:n=>y({...l,notes:n.target.value}),rows:2})]})]}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:[e.jsx("button",{type:"submit",style:{background:"#10b981",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:J?"Update Record":"Save Record"}),J&&e.jsx("button",{type:"button",onClick:()=>{y({id:"",date:new Date().toISOString().split("T")[0],flockId:"",issue:"",affectedBirds:"",severity:"Moderate",action:"",status:"Under Observation",cost:"",notes:""}),le(null)},style:{padding:"10px 20px",background:"#6b7280",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]}),e.jsxs("h4",{style:{marginBottom:"16px"},children:["Health Records (",v.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:v.sort((n,L)=>new Date(L.date)-new Date(n.date)).map(n=>{const L=D.find(Ne=>Ne.id===n.flockId),ue={Mild:{bg:"#d1fae5",text:"#065f46"},Moderate:{bg:"#fef3c7",text:"#92400e"},Severe:{bg:"#fed7aa",text:"#9a3412"},Critical:{bg:"#fee2e2",text:"#991b1b"}},_={"Under Observation":{bg:"#dbeafe",text:"#1e3a8a"},"Under Treatment":{bg:"#fef3c7",text:"#92400e"},Recovering:{bg:"#e0e7ff",text:"#3730a3"},Resolved:{bg:"#d1fae5",text:"#065f46"},Escalated:{bg:"#fee2e2",text:"#991b1b"}};return e.jsx("div",{className:"card",style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",fontWeight:"600"},children:n.issue}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",display:"grid",gap:"6px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",n.date," | ",e.jsx("strong",{children:"Flock:"})," ",L?.name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Affected Birds:"})," ",n.affectedBirds||"Not specified"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("strong",{children:"Severity:"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",background:ue[n.severity]?.bg||"#f3f4f6",color:ue[n.severity]?.text||"#374151"},children:n.severity}),e.jsx("strong",{children:"Status:"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",background:_[n.status]?.bg||"#f3f4f6",color:_[n.status]?.text||"#374151"},children:n.status})]}),n.action&&e.jsxs("div",{children:[e.jsx("strong",{children:"Action:"})," ",n.action]}),n.cost&&e.jsxs("div",{children:[e.jsx("strong",{children:"Cost:"})," KSH ",Number(n.cost).toLocaleString()]}),n.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>a(n),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>p(n.id),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"6px",cursor:"pointer"},children:"üóëÔ∏è Delete"})]})]})},n.id)})}),e.jsxs("div",{className:"card",style:{padding:"20px",marginTop:"20px",background:"#f0fdf4",border:"1px solid #86efac"},children:[e.jsx("h4",{style:{marginTop:0,color:"#065f46"},children:"ü©∫ Health Monitoring Tips"}),e.jsxs("ul",{style:{fontSize:"14px",color:"#065f46",margin:0,paddingLeft:"20px"},children:[e.jsx("li",{children:"Check birds daily for signs of illness (lethargy, reduced appetite, abnormal droppings)"}),e.jsx("li",{children:"Isolate sick birds immediately to prevent disease spread"}),e.jsx("li",{children:"Maintain proper ventilation and clean housing conditions"}),e.jsx("li",{children:"Keep detailed records of all health issues and treatments"}),e.jsx("li",{children:"Consult a veterinarian for serious or recurring health problems"})]})]})]}),P==="vaccinations"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:X?"Edit Vaccination Record":"Record Vaccination"}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{children:["Date *",e.jsx("input",{type:"date",value:F.date,onChange:n=>Q({...F,date:n.target.value}),required:!0})]}),e.jsxs("label",{children:["Flock *",e.jsxs("select",{value:F.flockId,onChange:n=>Q({...F,flockId:n.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Flock"}),D.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("label",{children:["Vaccine Name *",e.jsx("input",{value:F.vaccineName,onChange:n=>Q({...F,vaccineName:n.target.value}),placeholder:"e.g., Newcastle Disease, Marek's Disease",required:!0})]}),e.jsxs("label",{children:["Method",e.jsxs("select",{value:F.method,onChange:n=>Q({...F,method:n.target.value}),children:[e.jsx("option",{value:"Drinking Water",children:"Drinking Water"}),e.jsx("option",{value:"Spray",children:"Spray"}),e.jsx("option",{value:"Eye Drop",children:"Eye Drop"}),e.jsx("option",{value:"Injection",children:"Injection (IM/SC)"}),e.jsx("option",{value:"Wing Web",children:"Wing Web"})]})]}),e.jsxs("label",{children:["Dosage",e.jsx("input",{value:F.dosage,onChange:n=>Q({...F,dosage:n.target.value}),placeholder:"e.g., 1000 doses, 0.5ml per bird"})]}),e.jsxs("label",{children:["Administered By",e.jsx("input",{value:F.administeredBy,onChange:n=>Q({...F,administeredBy:n.target.value}),placeholder:"e.g., Dr. Smith, Farm Staff"})]}),e.jsxs("label",{children:["Next Due Date",e.jsx("input",{type:"date",value:F.nextDueDate,onChange:n=>Q({...F,nextDueDate:n.target.value})})]}),e.jsxs("label",{children:["Cost (KSH)",e.jsx("input",{type:"number",step:"0.01",value:F.cost,onChange:n=>Q({...F,cost:n.target.value}),placeholder:"Vaccination cost"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:F.notes,onChange:n=>Q({...F,notes:n.target.value}),rows:2,placeholder:"Any observations or special notes"})]})]}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:[e.jsx("button",{type:"submit",style:{background:"#8b5cf6",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:X?"Update Record":"Save Record"}),X&&e.jsx("button",{type:"button",onClick:()=>{Q({id:"",date:new Date().toISOString().split("T")[0],flockId:"",vaccineName:"",method:"Drinking Water",dosage:"",administeredBy:"",nextDueDate:"",cost:"",notes:""}),ve(null)},style:{padding:"10px 20px",background:"#6b7280",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]}),e.jsxs("h4",{style:{marginBottom:"16px"},children:["Vaccination Records (",ne.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:ne.sort((n,L)=>new Date(L.date)-new Date(n.date)).map(n=>{const L=D.find(_=>_.id===n.flockId),ue=n.nextDueDate&&new Date(n.nextDueDate)<=new Date;return e.jsx("div",{className:"card",style:{padding:"16px",borderLeft:ue?"4px solid #ef4444":"none"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",fontWeight:"600"},children:[n.vaccineName,ue&&e.jsx("span",{style:{marginLeft:"8px",padding:"2px 8px",background:"#fee2e2",color:"#991b1b",borderRadius:"4px",fontSize:"12px",fontWeight:"600"},children:"‚ö†Ô∏è Due"})]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",display:"grid",gap:"4px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",n.date," | ",e.jsx("strong",{children:"Flock:"})," ",L?.name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Method:"})," ",n.method," | ",e.jsx("strong",{children:"Dosage:"})," ",n.dosage||"N/A"]}),n.administeredBy&&e.jsxs("div",{children:[e.jsx("strong",{children:"Administered By:"})," ",n.administeredBy]}),n.nextDueDate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Next Due:"})," ",n.nextDueDate]}),n.cost&&e.jsxs("div",{children:[e.jsx("strong",{children:"Cost:"})," KSH ",Number(n.cost).toLocaleString()]}),n.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>ge(n),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>De(n.id),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"6px",cursor:"pointer"},children:"üóëÔ∏è Delete"})]})]})},n.id)})}),e.jsxs("div",{className:"card",style:{padding:"20px",marginTop:"20px",background:"#ede9fe",border:"1px solid #c4b5fd"},children:[e.jsx("h4",{style:{marginTop:0,color:"#5b21b6"},children:"üíâ Common Poultry Vaccination Schedule"}),e.jsxs("div",{style:{fontSize:"14px",color:"#5b21b6"},children:[e.jsx("p",{style:{margin:"0 0 8px 0"},children:e.jsx("strong",{children:"Layers:"})}),e.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px"},children:[e.jsx("li",{children:"Day 1: Marek's Disease"}),e.jsx("li",{children:"Day 7: Newcastle Disease + Infectious Bronchitis"}),e.jsx("li",{children:"Day 14: Gumboro Disease"}),e.jsx("li",{children:"Week 6-8: Newcastle (booster)"}),e.jsx("li",{children:"Week 16: Fowl Pox, Fowl Cholera"})]}),e.jsx("p",{style:{margin:"0 0 8px 0"},children:e.jsx("strong",{children:"Broilers:"})}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[e.jsx("li",{children:"Day 1: Marek's Disease"}),e.jsx("li",{children:"Day 7: Newcastle + IB"}),e.jsx("li",{children:"Day 14: Gumboro"}),e.jsx("li",{children:"Day 21: Newcastle (booster)"})]})]})]})]}),P==="treatments"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:pe?"Edit Treatment Record":"Record Treatment"}),e.jsxs("form",{onSubmit:ae,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{children:["Date *",e.jsx("input",{type:"date",value:K.date,onChange:n=>ie({...K,date:n.target.value}),required:!0})]}),e.jsxs("label",{children:["Flock *",e.jsxs("select",{value:K.flockId,onChange:n=>ie({...K,flockId:n.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Flock"}),D.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("label",{children:["Condition/Disease *",e.jsx("input",{value:K.condition,onChange:n=>ie({...K,condition:n.target.value}),placeholder:"e.g., Coccidiosis, Respiratory infection",required:!0})]}),e.jsxs("label",{children:["Medication *",e.jsx("input",{value:K.medication,onChange:n=>ie({...K,medication:n.target.value}),placeholder:"e.g., Amprolium, Tylosin",required:!0})]}),e.jsxs("label",{children:["Dosage",e.jsx("input",{value:K.dosage,onChange:n=>ie({...K,dosage:n.target.value}),placeholder:"e.g., 50mg/L in water"})]}),e.jsxs("label",{children:["Duration",e.jsx("input",{value:K.duration,onChange:n=>ie({...K,duration:n.target.value}),placeholder:"e.g., 5 days, 1 week"})]}),e.jsxs("label",{children:["Administered By",e.jsx("input",{value:K.administeredBy,onChange:n=>ie({...K,administeredBy:n.target.value}),placeholder:"e.g., Farm Staff, Veterinarian"})]}),e.jsxs("label",{children:["Cost (KES)",e.jsx("input",{type:"number",step:"0.01",value:K.cost,onChange:n=>ie({...K,cost:n.target.value}),placeholder:"Treatment cost"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:K.notes,onChange:n=>ie({...K,notes:n.target.value}),rows:2,placeholder:"Treatment details, withdrawal period, response, etc."})]})]}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:[e.jsx("button",{type:"submit",style:{background:"#f59e0b",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:pe?"Update Record":"Save Record"}),pe&&e.jsx("button",{type:"button",onClick:()=>{ie({id:"",date:new Date().toISOString().split("T")[0],flockId:"",condition:"",medication:"",dosage:"",duration:"",administeredBy:"",cost:"",notes:""}),s(null)},style:{padding:"10px 20px",background:"#6b7280",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]}),e.jsxs("h4",{style:{marginBottom:"16px"},children:["Treatment Records (",G.length,")"]}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:G.sort((n,L)=>new Date(L.date)-new Date(n.date)).map(n=>{const L=D.find(ue=>ue.id===n.flockId);return e.jsx("div",{className:"card",style:{padding:"16px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",fontWeight:"600"},children:[n.condition," - ",n.medication]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",display:"grid",gap:"4px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",n.date," | ",e.jsx("strong",{children:"Flock:"})," ",L?.name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Dosage:"})," ",n.dosage||"N/A"," | ",e.jsx("strong",{children:"Duration:"})," ",n.duration||"N/A"]}),n.administeredBy&&e.jsxs("div",{children:[e.jsx("strong",{children:"Administered By:"})," ",n.administeredBy]}),n.cost&&e.jsxs("div",{children:[e.jsx("strong",{children:"Cost:"})," KES ",Number(n.cost).toLocaleString()]}),n.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>he(n),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>re(n.id),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"6px",cursor:"pointer"},children:"üóëÔ∏è Delete"})]})]})},n.id)})}),e.jsxs("div",{className:"card",style:{padding:"20px",marginTop:"20px",background:"#fef3c7",border:"1px solid #fde68a"},children:[e.jsx("h4",{style:{marginTop:0,color:"#92400e"},children:"üíä Treatment Best Practices"}),e.jsxs("ul",{style:{fontSize:"14px",color:"#92400e",margin:0,paddingLeft:"20px"},children:[e.jsx("li",{children:"Always follow veterinarian prescriptions and dosage instructions"}),e.jsx("li",{children:"Complete the full treatment course even if birds appear recovered"}),e.jsx("li",{children:"Observe withdrawal periods before selling eggs or meat"}),e.jsx("li",{children:"Keep accurate records of all medications used"}),e.jsx("li",{children:"Store medications properly according to label instructions"}),e.jsx("li",{children:"Monitor birds closely during and after treatment"})]})]})]}),P==="mortality"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:"Record Mortality"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("label",{children:["Date *",e.jsx("input",{type:"date",value:de.date,onChange:n=>r({...de,date:n.target.value}),required:!0})]}),e.jsxs("label",{children:["Flock *",e.jsxs("select",{value:de.flockId,onChange:n=>r({...de,flockId:n.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Flock"}),D.map(n=>e.jsxs("option",{value:n.id,children:[n.name," (",n.quantity," birds)"]},n.id))]})]}),e.jsxs("label",{children:["Number of Deaths *",e.jsx("input",{type:"number",value:de.count,onChange:n=>r({...de,count:n.target.value}),min:"1",required:!0})]}),e.jsxs("label",{children:["Cause",e.jsx("input",{value:de.cause,onChange:n=>r({...de,cause:n.target.value}),placeholder:"e.g., Disease, Predator, Unknown"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:de.notes,onChange:n=>r({...de,notes:n.target.value}),rows:2,placeholder:"Additional details about the mortality incident"})]})]}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsx("button",{type:"submit",style:{background:"#ef4444",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:"Record Mortality"})})]})]}),e.jsxs("div",{className:"card",style:{padding:"20px",background:"#fef2f2"},children:[e.jsx("h4",{style:{marginTop:0,color:"#991b1b"},children:"üí° Mortality Tracking Info"}),e.jsx("p",{style:{fontSize:"14px",color:"#7f1d1d",margin:0},children:"When you record mortality, the flock quantity will automatically be reduced. This helps maintain accurate bird counts and track mortality rates over time."})]})]})]})}const Kt="devinsfarm-photos",Wt=1,Pe="photos";let ke=null;async function We(){return ke||new Promise((h,E)=>{const b=indexedDB.open(Kt,Wt);b.onerror=()=>E(b.error),b.onsuccess=()=>{ke=b.result,h(ke)},b.onupgradeneeded=x=>{const g=x.target.result;if(!g.objectStoreNames.contains(Pe)){const f=g.createObjectStore(Pe,{keyPath:"id"});f.createIndex("entityType","entityType",{unique:!1}),f.createIndex("entityId","entityId",{unique:!1}),f.createIndex("timestamp","timestamp",{unique:!1})}}})}async function Ht(h){try{const E=await We(),b=h.id||`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x={id:b,entityType:h.entityType,entityId:h.entityId,dataUrl:h.dataUrl,caption:h.caption||"",timestamp:h.timestamp||Date.now(),tags:h.tags||[],metadata:h.metadata||{}};return new Promise((g,f)=>{const M=E.transaction([Pe],"readwrite").objectStore(Pe).put(x);M.onsuccess=()=>g(b),M.onerror=()=>f(M.error)})}catch(E){throw console.error("Error saving photo:",E),E}}async function Ot(h,E){try{const b=await We();return new Promise((x,g)=>{const B=b.transaction([Pe],"readonly").objectStore(Pe).getAll();B.onsuccess=()=>{const M=B.result.filter(q=>q.entityType===h&&q.entityId===E);M.sort((q,U)=>U.timestamp-q.timestamp),x(M)},B.onerror=()=>g(B.error)})}catch(b){return console.error("Error getting photos:",b),[]}}async function Gt(h){try{const E=await We();return new Promise((b,x)=>{const j=E.transaction([Pe],"readwrite").objectStore(Pe).delete(h);j.onsuccess=()=>b(!0),j.onerror=()=>x(j.error)})}catch(E){return console.error("Error deleting photo:",E),!1}}function $t({entityType:h,entityId:E,entityName:b}){const[x,g]=d.useState([]),[f,j]=d.useState(!1),[B,M]=d.useState(null),[q,U]=d.useState(""),[H,P]=d.useState(!1);d.useEffect(()=>{N()},[h,E]);async function N(){j(!0);try{const m=await Ot(h,E);g(m)}catch(m){console.error("Error loading photos:",m)}j(!1)}async function D(m){const k=m.target.files[0];if(k){j(!0);try{const{dataUrl:te}=await Xe(k,{maxDim:1920,quality:.85});await Ht({entityType:h,entityId:E,dataUrl:te,caption:q||`${b} - ${new Date().toLocaleDateString()}`,timestamp:Date.now()}),U(""),P(!1),await N()}catch(te){alert("Error uploading photo: "+te.message)}j(!1)}}async function A(m){m.target.files[0]&&await D(m)}async function O(m){if(confirm("Delete this photo?")){j(!0);try{await Gt(m),await N(),M(null)}catch(k){alert("Error deleting photo: "+k.message)}j(!1)}}return e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:["üì∏ Photos (",x.length,")"]}),e.jsx("button",{onClick:()=>P(!H),style:{padding:"8px 16px",background:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:H?"‚úï Cancel":"+ Add Photo"})]}),H&&e.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",marginBottom:"16px",border:"2px dashed #d1d5db"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Caption (optional):"}),e.jsx("input",{type:"text",value:q,onChange:m=>U(m.target.value),placeholder:`Photo of ${b}`,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("label",{style:{padding:"10px 20px",background:"#3b82f6",color:"white",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"8px"},children:["üì∑ Take Photo",e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:A,style:{display:"none"},disabled:f})]}),e.jsxs("label",{style:{padding:"10px 20px",background:"#8b5cf6",color:"white",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"8px"},children:["üñºÔ∏è Choose File",e.jsx("input",{type:"file",accept:"image/*",onChange:D,style:{display:"none"},disabled:f})]})]})]}),f&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:"Loading..."}),!f&&x.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",background:"#f9fafb",borderRadius:"8px",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"üì∑"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"4px"},children:"No photos yet"}),e.jsx("div",{style:{fontSize:"14px"},children:"Add photos to track visual progress"})]}),!f&&x.length>0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"12px"},children:x.map(m=>e.jsxs("div",{onClick:()=>M(m),style:{position:"relative",aspectRatio:"1",borderRadius:"8px",overflow:"hidden",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"transform 0.2s",background:"#f3f4f6"},onMouseEnter:k=>k.currentTarget.style.transform="scale(1.05)",onMouseLeave:k=>k.currentTarget.style.transform="scale(1)",children:[e.jsx("img",{src:m.dataUrl,alt:m.caption,style:{width:"100%",height:"100%",objectFit:"cover"}}),m.caption&&e.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.7)",color:"white",padding:"6px 8px",fontSize:"12px",lineHeight:"1.2"},children:m.caption})]},m.id))}),B&&e.jsx("div",{onClick:()=>M(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{onClick:m=>m.stopPropagation(),style:{maxWidth:"90vw",maxHeight:"90vh",background:"white",borderRadius:"12px",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("img",{src:B.dataUrl,alt:B.caption,style:{maxWidth:"100%",maxHeight:"70vh",objectFit:"contain"}}),e.jsxs("div",{style:{padding:"16px",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:B.caption}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:new Date(B.timestamp).toLocaleString()})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>O(B.id),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"üóëÔ∏è Delete"}),e.jsx("button",{onClick:()=>M(null),style:{padding:"8px 16px",background:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Close"})]})]})]})})]})}function He(h,E=200){if(!h)return"";const b=Vt(h);E/b.length;let x=`<svg xmlns="http://www.w3.org/2000/svg" width="${E}" height="${E}" viewBox="0 0 ${b.length} ${b.length}">`;x+=`<rect width="${b.length}" height="${b.length}" fill="white"/>`;for(let g=0;g<b.length;g++)for(let f=0;f<b.length;f++)b[g][f]&&(x+=`<rect x="${f}" y="${g}" width="1" height="1" fill="black"/>`);return x+="</svg>",x}function Be(h,E=200){const b=He(h,E);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(b)))}`}function Vt(h){const b=Array(25).fill().map(()=>Array(25).fill(!1));ze(b,0,0),ze(b,18,0),ze(b,0,18);for(let f=8;f<17;f++)b[6][f]=f%2===0,b[f][6]=f%2===0;let x=0;for(let f=0;f<h.length;f++)x=(x<<5)-x+h.charCodeAt(f),x=x&x;let g=0;for(let f=8;f<17;f++)for(let j=8;j<17;j++)j!==6&&f!==6&&(b[f][j]=(x>>g%32&1)===1,g++);return b}function ze(h,E,b){for(let x=0;x<7;x++)h[E][b+x]=!0,h[E+6][b+x]=!0,h[E+x][b]=!0,h[E+x][b+6]=!0;for(let x=2;x<5;x++)for(let g=2;g<5;g++)h[E+x][b+g]=!0}function qt(h,E="animal"){const b=JSON.stringify({id:h.id,type:E,name:h.name||h.tag,timestamp:Date.now()}),x=He(b,200),g=window.open("","_blank");g.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>QR Code Tag - ${h.name||h.tag}</title>
      <style>
        @page { size: 4in 3in; margin: 0.25in; }
        body {
          font-family: Arial, sans-serif;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          margin: 0;
          padding: 20px;
          min-height: 100vh;
        }
        .tag-container {
          border: 2px solid #000;
          padding: 20px;
          text-align: center;
          background: white;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .tag-title {
          font-size: 24px;
          font-weight: bold;
          margin-bottom: 10px;
          color: #059669;
        }
        .tag-id {
          font-size: 18px;
          margin-bottom: 15px;
          color: #333;
        }
        .qr-code {
          margin: 15px auto;
        }
        .tag-info {
          font-size: 14px;
          color: #666;
          margin-top: 10px;
        }
        .farm-name {
          font-size: 16px;
          font-weight: bold;
          margin-top: 15px;
          color: #333;
        }
        @media print {
          body { padding: 0; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <div class="tag-container">
        <div class="tag-title">${E==="animal"?"üêÑ ANIMAL TAG":"üì¶ INVENTORY TAG"}</div>
        <div class="tag-id">${h.tag||h.id}</div>
        <div class="qr-code">${x}</div>
        <div class="tag-info">
          <strong>${h.name||"Item"}</strong><br>
          ${h.breed||h.category||""}
        </div>
        <div class="farm-name">JR FARM</div>
      </div>
      <div class="no-print" style="margin-top: 20px;">
        <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #059669; color: white; border: none; border-radius: 6px;">
          üñ®Ô∏è Print Tag
        </button>
        <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #6b7280; color: white; border: none; border-radius: 6px; margin-left: 10px;">
          ‚úï Close
        </button>
      </div>
    </body>
    </html>
  `),g.document.close()}function Ut(h,E="animal"){const b=window.open("","_blank");let x=h.map(g=>{const f=JSON.stringify({id:g.id,type:E,name:g.name||g.tag,timestamp:Date.now()}),j=He(f,150);return`
      <div class="tag-container">
        <div class="tag-title">${E==="animal"?"üêÑ":"üì¶"}</div>
        <div class="tag-id">${g.tag||g.id}</div>
        <div class="qr-code">${j}</div>
        <div class="tag-info">
          <strong>${g.name||"Item"}</strong><br>
          ${g.breed||g.category||""}
        </div>
      </div>
    `}).join("");b.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>QR Code Tags - Batch Print</title>
      <style>
        @page { size: letter; margin: 0.5in; }
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 20px;
        }
        .tags-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 15px;
          page-break-inside: avoid;
        }
        .tag-container {
          border: 2px solid #000;
          padding: 15px;
          text-align: center;
          background: white;
          border-radius: 8px;
          page-break-inside: avoid;
        }
        .tag-title {
          font-size: 20px;
          font-weight: bold;
          margin-bottom: 8px;
        }
        .tag-id {
          font-size: 16px;
          margin-bottom: 10px;
          color: #333;
        }
        .qr-code {
          margin: 10px auto;
        }
        .tag-info {
          font-size: 12px;
          color: #666;
          margin-top: 8px;
        }
        @media print {
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <div class="no-print" style="margin-bottom: 20px; text-align: center;">
        <h2>Batch Print QR Tags (${h.length} items)</h2>
        <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #059669; color: white; border: none; border-radius: 6px;">
          üñ®Ô∏è Print All
        </button>
        <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #6b7280; color: white; border: none; border-radius: 6px; margin-left: 10px;">
          ‚úï Close
        </button>
      </div>
      <div class="tags-grid">
        ${x}
      </div>
    </body>
    </html>
  `),b.document.close()}function rn(){const h="cattalytics:animals",E="cattalytics:groups",b=[{id:"G-001",name:"Herd A",desc:"Main dairy herd"},{id:"G-002",name:"Heifer Pen",desc:"Young stock"}],x=[{id:"A-001",tag:"TAG1001",name:"Bessie",breed:"Holstein",sex:"F",color:"Black/White",dob:"2019-05-10",weight:450,sire:"S-100",dam:"D-200",groupId:"G-001",status:"Active",notes:"High producing cow",owner:"Farm Owner",registration:"REG-9001",tattoo:"T-01",purchaseDate:"2019-06-01",purchasePrice:18e4,vendor:"Local Auction",tags:["dairy","priority"],photo:"",pregnancyStatus:"Not Pregnant",expectedDue:"",parity:3,lactationStatus:"Lactating"},{id:"A-002",tag:"TAG1002",name:"Molly",breed:"Jersey",sex:"F",color:"Brown",dob:"2020-03-22",weight:380,sire:"S-101",dam:"D-201",groupId:"G-001",status:"Active",notes:"",owner:"",registration:"",tattoo:"",purchaseDate:"",purchasePrice:"",vendor:"",tags:[],photo:"",pregnancyStatus:"Unknown",expectedDue:"",parity:1,lactationStatus:"Dry"},{id:"A-003",tag:"TAG1003",name:"Duke",breed:"Angus",sex:"M",color:"Black",dob:"2018-11-02",weight:620,sire:"",dam:"",groupId:"G-002",status:"Sold",notes:"Sold at market",owner:"",registration:"",tattoo:"",purchaseDate:"",purchasePrice:"",vendor:"",tags:[],photo:"",pregnancyStatus:"Not Applicable",expectedDue:"",parity:0,lactationStatus:"NA"}],[g,f]=d.useState("list"),[j,B]=d.useState([]),[M,q]=d.useState([]),[U,H]=d.useState(""),[P,N]=d.useState("all"),[D,A]=d.useState("all"),[O,m]=d.useState("all"),[k,te]=d.useState("name"),ne={id:"",tag:"",name:"",breed:"",sex:"F",color:"",dob:"",weight:"",sire:"",dam:"",groupId:"",status:"Active",notes:"",owner:"",registration:"",tattoo:"",purchaseDate:"",purchasePrice:"",vendor:"",tags:[],photo:"",photos:[],pregnancyStatus:"Unknown",expectedDue:"",parity:"",lactationStatus:"NA"},[C,v]=d.useState(ne),[R,G]=d.useState(null),[V,w]=d.useState({}),[W,t]=d.useState(""),[T,I]=d.useState(""),[ee,z]=d.useState(null);d.useEffect(()=>{try{const a=localStorage.getItem(h),p=localStorage.getItem(E);B(a?JSON.parse(a):x),q(p?JSON.parse(p):b)}catch(a){console.error("Failed parsing stored data",a),B(x),q(b)}},[]),d.useEffect(()=>localStorage.setItem(h,JSON.stringify(j)),[j]),d.useEffect(()=>localStorage.setItem(E,JSON.stringify(M)),[M]);function se(a){const p={};if((!a.name||!a.name.trim())&&(p.name="Name is required"),a.dob){const ae=Date.parse(a.dob);Number.isNaN(ae)&&(p.dob="Invalid date")}if(a.weight){const ae=Number(a.weight);(Number.isNaN(ae)||ae<0)&&(p.weight="Weight must be a positive number")}if(a.purchaseDate){const ae=Date.parse(a.purchaseDate);Number.isNaN(ae)&&(p.purchaseDate="Invalid purchase date")}if(a.purchasePrice){const ae=Number(a.purchasePrice);(Number.isNaN(ae)||ae<0)&&(p.purchasePrice="Purchase price must be a positive number")}return a.tag&&j.some(ae=>ae.tag===a.tag&&ae.id!==a.id)&&(p.tag="Tag must be unique"),p}function $(){v(ne),G(null),w({})}const ce=5,oe=2*1024*1024,me=1024,de=.8;async function r(a){if(!a||!a.length)return;const p=Array.isArray(C.photos)?[...C.photos]:[];for(let ae=0;ae<a.length&&!(p.length>=ce);ae++){const he=a[ae];try{const{dataUrl:re,mime:je,size:xe}=await Xe(he,{maxDim:me,quality:de});if(xe>oe){window.alert(`${he.name} is too large after compression (${Math.round(xe/1024)} KB). Skipping.`);continue}p.push({id:Le("p-"),dataUrl:re,filename:he.name,mime:je,size:xe,createdAt:new Date().toISOString()})}catch(re){console.error("Failed processing image",re),window.alert("Failed to process "+he.name)}}v(ae=>({...ae,photos:p}))}function F(a){const p=a.target.files;r(p),a.target.value=""}function Q(a){v(p=>({...p,photos:(p.photos||[]).filter(ae=>ae.id!==a)}))}function X(a){a&&a.preventDefault();const p={...C};(!p.tag||!p.tag.trim())&&(p.tag="TAG"+(1e3+Math.floor(Math.random()*9e3)));const ae=se(p);if(w(ae),!Object.keys(ae).length){if(R){const he={...p},re={type:"animal",id:R,name:he.name,tag:he.tag,breed:he.breed};he.qrCode=Be(JSON.stringify(re)),B(j.map(je=>je.id===R?{...je,...he}:je))}else{const he="A-"+(1e3+Math.floor(Math.random()*9e5));p.tags&&typeof p.tags=="string"&&(p.tags=p.tags.split(",").map(je=>je.trim()).filter(Boolean));const re={type:"animal",id:he,name:p.name,tag:p.tag,breed:p.breed};p.qrCode=Be(JSON.stringify(re)),B([...j,{...p,id:he}])}$(),f("list")}}function ve(a){window.confirm("Delete animal "+a+"?")&&B(j.filter(p=>p.id!==a))}function l(){t(""),I(""),z(null)}function y(a){if(a&&a.preventDefault(),!!W.trim()){if(ee)q(M.map(p=>p.id===ee?{...p,name:W.trim(),desc:T}:p));else{const p="G-"+(1e3+Math.floor(Math.random()*9e5));q([...M,{id:p,name:W.trim(),desc:T}])}l(),f("list")}}function J(a){z(a.id),t(a.name),I(a.desc),f("addGroup")}function le(a){window.confirm("Delete group "+a+"?")&&(q(M.filter(p=>p.id!==a)),B(j.map(p=>p.groupId===a?{...p,groupId:""}:p)))}const K=U.trim().toLowerCase(),pe=[...j.filter(a=>{if(K){const p=M.find(he=>he.id===a.groupId)?.name||"";if(!((a.id||"").toLowerCase().includes(K)||(a.tag||"").toLowerCase().includes(K)||(a.name||"").toLowerCase().includes(K)||(a.breed||"").toLowerCase().includes(K)||p.toLowerCase().includes(K)))return!1}return!(P!=="all"&&(P==="ungrouped"&&a.groupId||P!=="ungrouped"&&a.groupId!==P)||D!=="all"&&a.status!==D||O!=="all"&&a.sex!==O)})].sort((a,p)=>{switch(k){case"name":return(a.name||"").localeCompare(p.name||"");case"tag":return(a.tag||"").localeCompare(p.tag||"");case"breed":return(a.breed||"").localeCompare(p.breed||"");case"dob":return(a.dob||"").localeCompare(p.dob||"");case"weight":return(parseFloat(p.weight)||0)-(parseFloat(a.weight)||0);case"status":return(a.status||"").localeCompare(p.status||"");default:return 0}}),[s,o]=d.useState([]),[i,u]=d.useState(null),[Z,ye]=d.useState(ne),[fe,be]=d.useState(null),Se=d.useRef(null);function c(){const a=j.map(p=>({id:p.id,tag:p.tag,name:p.name,species:p.species,breed:p.breed,sex:p.sex,dob:p.dob,age:p.age||"",weight:p.weight||"",group:p.group||"",status:p.status,sire:p.sire||"",dam:p.dam||"",notes:p.notes||""}));Fe(a,"animals.csv")}function S(){const a=j.map(p=>({id:p.id,tag:p.tag,name:p.name,species:p.species,breed:p.breed,sex:p.sex,dob:p.dob,age:p.age||"",weight:p.weight||"",group:p.group||"",status:p.status,sire:p.sire||"",dam:p.dam||"",notes:p.notes||""}));we(a,"animals_export.csv")}function Y(){Ie(j,"animals.json")}function ge(){Se.current?.click()}function De(a){const p=a.target.files?.[0];if(!p)return;const ae=p.name.split(".").pop()?.toLowerCase();ae==="json"?Ze(p,(he,re)=>{if(re){alert("Import failed: "+re.message);return}if(confirm(`Import ${he.length} animals? This will merge with existing data.`)){const je=he.map(xe=>({...xe,id:xe.id||Le()}));B([...j,...je]),alert(`Imported ${je.length} animals`)}}):ae==="csv"?et(p,(he,re)=>{if(re){alert("Import failed: "+re.message);return}if(confirm(`Import ${he.length} animals? This will merge with existing data.`)){const je=he.map(xe=>({id:xe.id||Le(),tag:xe.tag||"",name:xe.name||"",species:xe.species||"",breed:xe.breed||"",sex:xe.sex||"",dob:xe.dob||"",age:xe.age||"",weight:xe.weight?Number(xe.weight):0,group:xe.group||"",status:xe.status||"active",sire:xe.sire||"",dam:xe.dam||"",notes:xe.notes||""}));B([...j,...je]),alert(`Imported ${je.length} animals`)}}):alert("Unsupported file type. Use CSV or JSON."),a.target.value=""}function Ce(){const a=j.filter(filterAnimal);if(a.length===0){alert("No animals to print");return}Re(a,p=>`
      <div style="padding: 20px; border: 2px solid #000; margin-bottom: 20px;">
        <h2 style="margin-top: 0;">Animal Record: ${p.tag||p.name}</h2>
        <table style="width: 100%; border-collapse: collapse;">
          <tr><th style="text-align: left; width: 150px;">Tag:</th><td>${p.tag||"N/A"}</td></tr>
          <tr><th style="text-align: left;">Name:</th><td>${p.name}</td></tr>
          <tr><th style="text-align: left;">Species:</th><td>${p.species}</td></tr>
          <tr><th style="text-align: left;">Breed:</th><td>${p.breed||"N/A"}</td></tr>
          <tr><th style="text-align: left;">Sex:</th><td>${p.sex}</td></tr>
          <tr><th style="text-align: left;">Date of Birth:</th><td>${p.dob||"N/A"}</td></tr>
          <tr><th style="text-align: left;">Age:</th><td>${p.age||"N/A"}</td></tr>
          <tr><th style="text-align: left;">Weight:</th><td>${p.weight?p.weight+" kg":"N/A"}</td></tr>
          <tr><th style="text-align: left;">Group:</th><td>${p.group||"N/A"}</td></tr>
          <tr><th style="text-align: left;">Status:</th><td>${p.status}</td></tr>
          <tr><th style="text-align: left;">Sire:</th><td>${p.sire||"N/A"}</td></tr>
          <tr><th style="text-align: left;">Dam:</th><td>${p.dam||"N/A"}</td></tr>
          <tr><th style="text-align: left;">Notes:</th><td>${p.notes||"N/A"}</td></tr>
        </table>
      </div>
    `,"Animal Records")}return e.jsxs("section",{children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",marginBottom:"8px",color:"inherit"},children:"üêÑ Livestock Management"}),e.jsx("p",{style:{color:"var(--muted)",margin:0},children:"Comprehensive livestock tracking and management system"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--green)"},children:j.length}),e.jsx("div",{style:{fontSize:"14px",color:"var(--muted)"},children:"Total Animals"})]}),e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#3b82f6"},children:j.filter(a=>a.status==="Active").length}),e.jsx("div",{style:{fontSize:"14px",color:"var(--muted)"},children:"Active"})]}),e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#ec4899"},children:j.filter(a=>a.sex==="F").length}),e.jsx("div",{style:{fontSize:"14px",color:"var(--muted)"},children:"Female"})]}),e.jsxs("div",{className:"card",style:{padding:"16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#6b7280"},children:M.length}),e.jsx("div",{style:{fontSize:"14px",color:"var(--muted)"},children:"Groups"})]})]}),e.jsx("div",{style:{borderBottom:"2px solid #e5e7eb",marginBottom:"20px"},children:e.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",overflowX:"auto"},children:[e.jsx("button",{onClick:()=>f("list"),style:{padding:"12px 20px",border:"none",borderBottom:g==="list"?"3px solid var(--green)":"3px solid transparent",background:g==="list"?"#f0fdf4":"transparent",color:g==="list"?"var(--green)":"#6b7280",fontWeight:g==="list"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üìã Animal List"}),e.jsx("button",{onClick:()=>f("feeding"),style:{padding:"12px 20px",border:"none",borderBottom:g==="feeding"?"3px solid var(--green)":"3px solid transparent",background:g==="feeding"?"#f0fdf4":"transparent",color:g==="feeding"?"var(--green)":"#6b7280",fontWeight:g==="feeding"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üåæ Feeding"}),e.jsx("button",{onClick:()=>f("health"),style:{padding:"12px 20px",border:"none",borderBottom:g==="health"?"3px solid var(--green)":"3px solid transparent",background:g==="health"?"#f0fdf4":"transparent",color:g==="health"?"var(--green)":"#6b7280",fontWeight:g==="health"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üè• Health System"}),e.jsx("button",{onClick:()=>f("treatment"),style:{padding:"12px 20px",border:"none",borderBottom:g==="treatment"?"3px solid var(--green)":"3px solid transparent",background:g==="treatment"?"#f0fdf4":"transparent",color:g==="treatment"?"var(--green)":"#6b7280",fontWeight:g==="treatment"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üíä Treatment"}),e.jsx("button",{onClick:()=>f("breeding"),style:{padding:"12px 20px",border:"none",borderBottom:g==="breeding"?"3px solid var(--green)":"3px solid transparent",background:g==="breeding"?"#f0fdf4":"transparent",color:g==="breeding"?"var(--green)":"#6b7280",fontWeight:g==="breeding"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"ü§∞ Breeding"}),e.jsx("button",{onClick:()=>f("milkyield"),style:{padding:"12px 20px",border:"none",borderBottom:g==="milkyield"?"3px solid var(--green)":"3px solid transparent",background:g==="milkyield"?"#f0fdf4":"transparent",color:g==="milkyield"?"var(--green)":"#6b7280",fontWeight:g==="milkyield"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"ü•õ Milk Yield"}),e.jsx("button",{onClick:()=>f("measurement"),style:{padding:"12px 20px",border:"none",borderBottom:g==="measurement"?"3px solid var(--green)":"3px solid transparent",background:g==="measurement"?"#f0fdf4":"transparent",color:g==="measurement"?"var(--green)":"#6b7280",fontWeight:g==="measurement"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üìè Measurement"}),e.jsx("button",{onClick:()=>f("calf"),style:{padding:"12px 20px",border:"none",borderBottom:g==="calf"?"3px solid var(--green)":"3px solid transparent",background:g==="calf"?"#f0fdf4":"transparent",color:g==="calf"?"var(--green)":"#6b7280",fontWeight:g==="calf"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üêÆ Calf Mgmt"}),e.jsx("button",{onClick:()=>f("pastures"),style:{padding:"12px 20px",border:"none",borderBottom:g==="pastures"?"3px solid var(--green)":"3px solid transparent",background:g==="pastures"?"#f0fdf4":"transparent",color:g==="pastures"?"var(--green)":"#6b7280",fontWeight:g==="pastures"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üå± Pastures"}),e.jsx("button",{onClick:()=>f("bsf"),style:{padding:"12px 20px",border:"none",borderBottom:g==="bsf"?"3px solid var(--green)":"3px solid transparent",background:g==="bsf"?"#f0fdf4":"transparent",color:g==="bsf"?"var(--green)":"#6b7280",fontWeight:g==="bsf"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"ü™∞ BSF Farm"}),e.jsx("button",{onClick:()=>f("azolla"),style:{padding:"12px 20px",border:"none",borderBottom:g==="azolla"?"3px solid var(--green)":"3px solid transparent",background:g==="azolla"?"#f0fdf4":"transparent",color:g==="azolla"?"var(--green)":"#6b7280",fontWeight:g==="azolla"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üåø Azolla"}),e.jsx("button",{onClick:()=>f("poultry"),style:{padding:"12px 20px",border:"none",borderBottom:g==="poultry"?"3px solid var(--green)":"3px solid transparent",background:g==="poultry"?"#f0fdf4":"transparent",color:g==="poultry"?"var(--green)":"#6b7280",fontWeight:g==="poultry"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üêî Poultry"}),e.jsx("button",{onClick:()=>{l(),f("addGroup")},style:{padding:"12px 20px",border:"none",borderBottom:g==="addGroup"?"3px solid var(--green)":"3px solid transparent",background:g==="addGroup"?"#f0fdf4":"transparent",color:g==="addGroup"?"var(--green)":"#6b7280",fontWeight:g==="addGroup"?"600":"400",cursor:"pointer",fontSize:"14px"},children:"üë• Groups"})]})}),g==="list"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("button",{onClick:()=>{$(),f("addAnimal")},style:{background:"var(--green)",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"14px"},children:"‚ûï Add Animal"}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{onClick:c,style:{padding:"8px 16px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"üìä CSV"}),e.jsx("button",{onClick:S,style:{padding:"8px 16px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"üìà Excel"}),e.jsx("button",{onClick:Y,style:{padding:"8px 16px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"üìÑ JSON"}),e.jsx("button",{onClick:ge,style:{padding:"8px 16px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"üì• Import"}),e.jsx("button",{onClick:Ce,style:{padding:"8px 16px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"üñ®Ô∏è Print"}),e.jsx("button",{onClick:()=>Ut(pe,"animal"),style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:"üì± Print QR Tags"}),e.jsx("input",{ref:Se,type:"file",accept:".csv,.json",style:{display:"none"},onChange:De})]})]}),e.jsx("div",{className:"card",style:{marginBottom:"20px",padding:"16px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",placeholder:"üîç Search animals...",value:U,onChange:a=>H(a.target.value),style:{flex:"1 1 200px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db"}}),e.jsxs("select",{value:P,onChange:a=>N(a.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"all",children:"All Groups"}),e.jsx("option",{value:"ungrouped",children:"Ungrouped"}),M.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsxs("select",{value:D,onChange:a=>A(a.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Sold",children:"Sold"}),e.jsx("option",{value:"Deceased",children:"Deceased"})]}),e.jsxs("select",{value:O,onChange:a=>m(a.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"F",children:"Female"}),e.jsx("option",{value:"M",children:"Male"})]}),e.jsxs("select",{value:k,onChange:a=>te(a.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"tag",children:"Sort by Tag"}),e.jsx("option",{value:"breed",children:"Sort by Breed"}),e.jsx("option",{value:"dob",children:"Sort by DOB"}),e.jsx("option",{value:"weight",children:"Sort by Weight"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]})}),e.jsxs("h3",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"16px",color:"inherit"},children:["Animals (",pe.length,")"]}),e.jsx("ul",{style:{listStyle:"none",padding:0},children:pe.map(a=>{const p=s.includes(a.id),ae=a.photos&&a.photos.length?a.photos[0].dataUrl:a.photo||null,he=M.find(re=>re.id===a.groupId)?.name||"No group";return e.jsx("li",{className:"card",style:{marginBottom:12,padding:16},children:e.jsxs("div",{style:{display:"flex",gap:16,alignItems:"flex-start"},children:[ae&&e.jsx("img",{src:ae,alt:a.name,style:{width:80,height:80,objectFit:"cover",borderRadius:8,flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:[a.name,a.qrCode&&e.jsx("span",{style:{marginLeft:8,fontSize:"0.8rem",color:"#8b5cf6"},title:"QR Code generated",children:"üì±"})]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginTop:4},children:[a.tag&&e.jsxs("span",{style:{marginRight:12},children:["üè∑Ô∏è ",a.tag]}),e.jsxs("span",{style:{marginRight:12},children:[a.sex==="F"?"‚ôÄ":"‚ôÇ"," ",a.breed]}),e.jsxs("span",{children:["üìä ",a.status]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>{editAnimal(a),f("addAnimal")},style:{padding:"6px 12px",fontSize:"0.85rem"},children:"‚úèÔ∏è Edit"}),e.jsx("button",{onClick:()=>ve(a.id),style:{padding:"6px 12px",fontSize:"0.85rem",background:"#fee",color:"#c00"},children:"üóëÔ∏è"})]})]}),p&&e.jsxs("div",{style:{marginTop:12,paddingTop:12,borderTop:"1px solid #e5e7eb",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12},children:[a.dob&&e.jsxs("div",{children:[e.jsx("strong",{children:"DOB:"})," ",a.dob]}),a.weight&&e.jsxs("div",{children:[e.jsx("strong",{children:"Weight:"})," ",a.weight," kg"]}),a.color&&e.jsxs("div",{children:[e.jsx("strong",{children:"Color:"})," ",a.color]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Group:"})," ",he]}),a.sire&&e.jsxs("div",{children:[e.jsx("strong",{children:"Sire:"})," ",a.sire]}),a.dam&&e.jsxs("div",{children:[e.jsx("strong",{children:"Dam:"})," ",a.dam]}),a.owner&&e.jsxs("div",{children:[e.jsx("strong",{children:"Owner:"})," ",a.owner]}),a.registration&&e.jsxs("div",{children:[e.jsx("strong",{children:"Registration:"})," ",a.registration]}),a.tattoo&&e.jsxs("div",{children:[e.jsx("strong",{children:"Tattoo:"})," ",a.tattoo]}),a.purchaseDate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Purchase Date:"})," ",a.purchaseDate]}),a.purchasePrice&&e.jsxs("div",{children:[e.jsx("strong",{children:"Purchase Price:"})," KSH ",Number(a.purchasePrice).toLocaleString()]}),a.vendor&&e.jsxs("div",{children:[e.jsx("strong",{children:"Vendor:"})," ",a.vendor]}),a.pregnancyStatus&&a.pregnancyStatus!=="Not Pregnant"&&e.jsxs("div",{children:[e.jsx("strong",{children:"Pregnancy:"})," ",a.pregnancyStatus]}),a.expectedDue&&e.jsxs("div",{children:[e.jsx("strong",{children:"Expected Due:"})," ",a.expectedDue]}),a.parity>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Parity:"})," ",a.parity]}),a.lactationStatus&&e.jsxs("div",{children:[e.jsx("strong",{children:"Lactation:"})," ",a.lactationStatus]})]}),a.notes&&e.jsxs("div",{style:{marginTop:12,padding:12,background:"#f9fafb",borderRadius:6},children:[e.jsx("strong",{children:"Notes:"})," ",a.notes]}),a.photos&&a.photos.length>1&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx("strong",{children:"Photos:"}),e.jsx("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:a.photos.map((re,je)=>e.jsx("img",{src:re.dataUrl,alt:`${a.name} ${je+1}`,style:{width:100,height:100,objectFit:"cover",borderRadius:6}},re.id||je))})]}),e.jsx($t,{entityType:"animal",entityId:a.id,entityName:a.name}),e.jsx("div",{style:{marginTop:16,padding:12,background:"#f9fafb",borderRadius:8,border:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("div",{children:e.jsx("img",{src:a.qrCode||Be(JSON.stringify({type:"animal",id:a.id,name:a.name,tag:a.tag,breed:a.breed})),alt:`QR Code for ${a.name}`,style:{width:120,height:120,border:"2px solid #8b5cf6",borderRadius:8}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"0.95rem",fontWeight:"600",color:"#8b5cf6"},children:["üì± QR Tag ",a.qrCode&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981",marginLeft:8},children:"‚úì Auto-generated"})]}),e.jsxs("p",{style:{margin:"0 0 12px 0",fontSize:"0.85rem",color:"#666"},children:["Scan this QR code to quickly access ",a.name,"'s records"]}),e.jsx("button",{onClick:()=>qt({id:a.id,name:a.name,tag:a.tag}),style:{padding:"8px 16px",background:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"500"},children:"üñ®Ô∏è Print QR Tag"})]})]})})]}),e.jsx("button",{onClick:()=>o(re=>p?re.filter(je=>je!==a.id):[...re,a.id]),style:{marginTop:12,padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db"},children:p?"‚ñ≤ Show Less":"‚ñº Show More"})]})]})},a.id)})})]}),g==="addAnimal"&&e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"600",marginBottom:"20px",color:"inherit"},children:R?"‚úèÔ∏è Edit Animal [v2.0]":"‚ûï Add New Animal [v2.0]"}),e.jsxs("form",{onSubmit:X,style:{marginBottom:16},noValidate:!0,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("label",{children:["Tag",e.jsx("input",{value:C.tag,onChange:a=>v({...C,tag:a.target.value})}),V.tag&&e.jsx("div",{style:{color:"crimson"},children:V.tag})]}),e.jsxs("label",{children:["Name *",e.jsx("input",{value:C.name,onChange:a=>v({...C,name:a.target.value}),required:!0}),V.name&&e.jsx("div",{style:{color:"crimson"},children:V.name})]}),e.jsxs("label",{children:["Breed",e.jsx("input",{value:C.breed,onChange:a=>v({...C,breed:a.target.value})})]}),e.jsxs("label",{children:["Color",e.jsx("input",{value:C.color,onChange:a=>v({...C,color:a.target.value})})]}),e.jsxs("label",{children:["DOB",e.jsx("input",{type:"date",value:C.dob,onChange:a=>v({...C,dob:a.target.value})}),V.dob&&e.jsx("div",{style:{color:"crimson"},children:V.dob})]}),e.jsxs("label",{children:["Weight (kg)",e.jsx("input",{type:"number",step:"0.1",value:C.weight,onChange:a=>v({...C,weight:a.target.value})}),V.weight&&e.jsx("div",{style:{color:"crimson"},children:V.weight})]}),e.jsxs("label",{children:["Sire",e.jsx("input",{value:C.sire,onChange:a=>v({...C,sire:a.target.value})})]}),e.jsxs("label",{children:["Dam",e.jsx("input",{value:C.dam,onChange:a=>v({...C,dam:a.target.value})})]}),e.jsxs("label",{children:["Sex",e.jsxs("select",{value:C.sex,onChange:a=>v({...C,sex:a.target.value}),children:[e.jsx("option",{value:"F",children:"Female"}),e.jsx("option",{value:"M",children:"Male"})]})]}),e.jsxs("label",{children:["Status",e.jsxs("select",{value:C.status,onChange:a=>v({...C,status:a.target.value}),children:[e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Sold"}),e.jsx("option",{children:"Deceased"})]})]}),e.jsxs("label",{children:["Group",e.jsxs("select",{value:C.groupId,onChange:a=>v({...C,groupId:a.target.value}),children:[e.jsx("option",{value:"",children:"-- No group --"}),M.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("label",{children:["Owner",e.jsx("input",{value:C.owner,onChange:a=>v({...C,owner:a.target.value})})]}),e.jsxs("label",{children:["Registration #",e.jsx("input",{value:C.registration,onChange:a=>v({...C,registration:a.target.value})})]}),e.jsxs("label",{children:["Tattoo / ID",e.jsx("input",{value:C.tattoo,onChange:a=>v({...C,tattoo:a.target.value})})]}),e.jsxs("label",{children:["Purchase date",e.jsx("input",{type:"date",value:C.purchaseDate,onChange:a=>v({...C,purchaseDate:a.target.value})}),V.purchaseDate&&e.jsx("div",{style:{color:"crimson"},children:V.purchaseDate})]}),e.jsxs("label",{children:["Purchase price",e.jsx("input",{type:"number",step:"0.01",value:C.purchasePrice,onChange:a=>v({...C,purchasePrice:a.target.value})}),V.purchasePrice&&e.jsx("div",{style:{color:"crimson"},children:V.purchasePrice})]}),e.jsxs("label",{children:["Vendor",e.jsx("input",{value:C.vendor,onChange:a=>v({...C,vendor:a.target.value})})]}),e.jsxs("label",{children:["Tags (comma separated)",e.jsx("input",{value:typeof C.tags=="string"?C.tags:(C.tags||[]).join(", "),onChange:a=>v({...C,tags:a.target.value})})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{display:"block",marginBottom:6},children:"Photos (up to 5, each ‚â§ 2 MB)"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:F}),e.jsxs("small",{style:{color:"#666"},children:["Files will be resized to ",me,"px and compressed."]})]}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:(C.photos||[]).map((a,p)=>e.jsxs("div",{style:{width:120,border:"1px solid #ddd",padding:6,borderRadius:6,textAlign:"center"},children:[e.jsx("img",{src:a.dataUrl,alt:`preview ${p+1}`,style:{width:"100%",height:72,objectFit:"cover",borderRadius:4}}),e.jsx("div",{style:{fontSize:12,marginTop:6},children:a.filename||"photo"}),e.jsxs("div",{style:{fontSize:11,color:"#666"},children:[Math.round((a.size||0)/1024)," KB"]}),e.jsx("button",{type:"button",onClick:()=>Q(a.id),"aria-label":`Remove photo ${p+1}`,style:{marginTop:6},children:"Remove"})]},a.id))})]}),e.jsxs("label",{children:["Photo URL",e.jsx("input",{value:C.photo,onChange:a=>v({...C,photo:a.target.value})})]}),e.jsxs("label",{children:["Pregnancy status",e.jsxs("select",{value:C.pregnancyStatus,onChange:a=>v({...C,pregnancyStatus:a.target.value}),children:[e.jsx("option",{children:"Not Pregnant"}),e.jsx("option",{children:"Pregnant"}),e.jsx("option",{children:"Unknown"}),e.jsx("option",{children:"Not Applicable"})]})]}),e.jsxs("label",{children:["Expected due",e.jsx("input",{type:"date",value:C.expectedDue,onChange:a=>v({...C,expectedDue:a.target.value})})]}),e.jsxs("label",{children:["Parity",e.jsx("input",{type:"number",min:"0",value:C.parity,onChange:a=>v({...C,parity:a.target.value})})]}),e.jsxs("label",{children:["Lactation status",e.jsxs("select",{value:C.lactationStatus,onChange:a=>v({...C,lactationStatus:a.target.value}),children:[e.jsx("option",{children:"Lactating"}),e.jsx("option",{children:"Dry"}),e.jsx("option",{children:"NA"})]})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Notes",e.jsx("textarea",{value:C.notes,onChange:a=>v({...C,notes:a.target.value})})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{type:"submit",style:{background:"var(--green)",color:"#fff",padding:"10px 20px",fontWeight:"bold",border:"none",borderRadius:"6px",cursor:"pointer"},children:R?"Update Animal":"Add Animal"}),e.jsx("button",{type:"button",onClick:$,style:{padding:"10px 20px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"Reset"}),R&&e.jsx("button",{type:"button",onClick:()=>{$(),f("list")},style:{padding:"10px 20px",background:"#666",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]}),g==="addGroup"&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:e.jsx("h3",{children:"üè∑Ô∏è Animal Groups"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20},children:[e.jsxs("div",{className:"card",style:{padding:16,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Groups"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#059669"},children:M.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#eff6ff"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Total Animals"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#2563eb"},children:j.length})]}),e.jsxs("div",{className:"card",style:{padding:16,background:"#fef3c7"},children:[e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:"Ungrouped"}),e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:j.filter(a=>!a.groupId).length})]})]}),e.jsxs("div",{className:"card",style:{padding:20,marginBottom:20},children:[e.jsx("h4",{style:{marginTop:0},children:ee?"Edit Group":"Add New Group"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Group Name *"}),e.jsx("input",{placeholder:"e.g., Dairy Herd A",value:W,onChange:a=>t(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Description"}),e.jsx("input",{placeholder:"Brief description of the group",value:T,onChange:a=>I(a.target.value)})]})]}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8},children:[e.jsx("button",{type:"submit",children:ee?"Update Group":"Create Group"}),e.jsx("button",{type:"button",onClick:()=>{l()},children:"Reset"}),ee&&e.jsx("button",{type:"button",onClick:()=>{l()},style:{marginLeft:"auto"},children:"Cancel Edit"})]})]})]}),e.jsxs("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[e.jsx("div",{style:{padding:16,borderBottom:"1px solid #eee",background:"#f9fafb"},children:e.jsxs("h4",{style:{margin:0},children:["Existing Groups (",M.length,")"]})}),M.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:"üè∑Ô∏è"}),e.jsx("h4",{children:"No groups yet"}),e.jsx("p",{style:{color:"#666"},children:"Create your first group to organize animals"})]}):e.jsx("div",{style:{maxHeight:500,overflowY:"auto"},children:M.map(a=>{const p=j.filter(re=>re.groupId===a.id),ae=p.filter(re=>re.sex==="F").length,he=p.filter(re=>re.sex==="M").length;return e.jsx("div",{style:{padding:16,borderBottom:"1px solid #eee"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[e.jsx("h4",{style:{margin:0},children:a.name}),e.jsxs("span",{className:"badge",style:{background:"#e0f2fe"},children:[p.length," animals"]}),ae>0&&e.jsxs("span",{className:"badge",style:{background:"#fce7f3"},children:[ae," ‚ôÄ"]}),he>0&&e.jsxs("span",{className:"badge",style:{background:"#dbeafe"},children:[he," ‚ôÇ"]})]}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#666",fontSize:14},children:a.desc||"No description"}),p.length>0&&e.jsxs("div",{style:{marginTop:12,padding:12,background:"#f9fafb",borderRadius:6},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:6},children:"Animals in this group:"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[p.slice(0,10).map(re=>e.jsx("span",{style:{fontSize:12,padding:"4px 8px",background:"white",borderRadius:4,border:"1px solid #e5e7eb"},children:re.name||re.tag||re.id},re.id)),p.length>10&&e.jsxs("span",{style:{fontSize:12,padding:"4px 8px",color:"#666"},children:["+",p.length-10," more"]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginLeft:16},children:[e.jsx("button",{className:"tab-btn",onClick:()=>J(a),children:"‚úèÔ∏è Edit"}),e.jsx("button",{className:"tab-btn",style:{color:"#dc2626"},onClick:()=>le(a.id),children:"üóëÔ∏è Delete"})]})]})},a.id)})})]}),j.filter(a=>!a.groupId).length>0&&e.jsxs("div",{className:"card",style:{padding:16,marginTop:16,background:"#fef3c7",borderLeft:"4px solid #f59e0b"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:"#92400e"},children:"‚ö†Ô∏è Ungrouped Animals"}),e.jsxs("p",{style:{margin:"0 0 8px 0",color:"#78350f"},children:[j.filter(a=>!a.groupId).length," animal(s) are not assigned to any group."]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:8},children:j.filter(a=>!a.groupId).map(a=>e.jsx("span",{style:{fontSize:12,padding:"4px 8px",background:"white",borderRadius:4,border:"1px solid #fbbf24"},children:a.name||a.tag||a.id},a.id))})]})]}),e.jsxs("div",{children:[g==="pastures"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(it,{})}),g==="health"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(at,{animals:j,setAnimals:B,groups:M})}),g==="feeding"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(ot,{animals:j})}),g==="measurement"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(pt,{animals:j})}),g==="breeding"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(mt,{animals:j})}),g==="milkyield"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(vt,{animals:j})}),g==="treatment"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(Ct,{animals:j})}),g==="calf"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(Mt,{animals:j})}),g==="bsf"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(wt,{})}),g==="azolla"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(zt,{})}),g==="poultry"&&e.jsx("div",{style:{marginBottom:16},children:e.jsx(Rt,{})})]})]})}export{rn as default};
